sap.ui.require.preload({
	"MIND2PEP_PLANNER/Component.js": 'sap.ui.define(["sap/ui/core/UIComponent","sap/ui/Device","MIND2PEP_PLANNER/model/models"],function(e,t,o){"use strict";return e.extend("MIND2PEP_PLANNER.Component",{metadata:{manifest:"json",config:{fullWidth:!0}},init:function(){e.prototype.init.apply(this,arguments),this.setModel(o.createDeviceModel(),"device"),this.setModel(new sap.ui.model.json.JSONModel("model/Comments.json"),"Comments"),this.setModel(new sap.ui.model.json.JSONModel("model/TimStatView.json"),"TimStatView")}})});',
	"MIND2PEP_PLANNER/controller/FragmentCyclicLeave.js": 'sap.ui.define(["MIND2PEP_PLANNER/controller/Main"],function(n){"use strict";return n.extend("dMIND2PEP_PLANNER.controller.FragmentCyclicLeave",{onInit:function(){}})});',
	"MIND2PEP_PLANNER/controller/FragmentExportRosterPDF.js": 'sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/model/Filter","sap/m/MessageBox","sap/ui/model/FilterOperator","sap/m/MessageToast"],function(e,t,r,o,n){"use strict";return e.extend("MIND2PEP_PLANNER.controller.FragmentExportRosterPDF",{parent:null,constructor:function(t){this.oParent=t;var o=this.oParent.getView().getModel("roster"),n=this.oParent.getView().getModel("Selected");return o.callFunction("/getUserData",{method:"GET",success:function(e){n.setProperty("/CurrentPernr",e.getUserData.EmpId)},error:function(e){r.error("Error occured: "+JSON.parse(e.responseText).error.message.value)}}),e.call(this)},onPDFSearchPress:function(){var e,t,o,s,g=this.oParent.getView().getModel("roster"),i=this.oParent.getView().getModel("Selected");if(!i.getProperty("/Begda")||!i.getProperty("/Endda")||!i.getProperty("/DocId"))return s=this.oParent.getView().getModel("i18n").getResourceBundle().getText("fill-fields-warning"),void n.show(s);if(!(e=i.getProperty("/Ess")?i.getProperty("/Pernr"):i.getProperty("/CurrentPernr")))return s=this.oParent.getView().getModel("i18n").getResourceBundle().getText("user-undefined"),void r.error(s);t=i.getProperty("/Begda"),o=i.getProperty("/Endda");var a=g.createKey("PDFSet",{Pernr:e,Endda:o,Begda:t,DocId:i.getProperty("/DocId")});i.setProperty("/PDF",g.sServiceUrl+"/"+a+"/$value"),i.setProperty("/PDFVisible",!0)},onPDFExportClose:function(){this.oParent.onCloseRosterDialog(),this.oParent.getView().getModel("Selected").setData({})},onSuggest:function(e){var r=e.getParameter("suggestValue").toUpperCase(),n=[];r&&n.push(new t("Nachn",o.Contains,r)),e.getSource().getBinding("suggestionItems").filter(n)},onDocTypeChange:function(e){var t=this.oParent.getView().getModel("Selected"),r=e.getSource().getSelectedItem().getBindingContext("roster").getPath(),o=this.oParent.getView().getModel("roster").getProperty(r);t.setProperty("/Ess",o.Ess)}})});',
	"MIND2PEP_PLANNER/controller/FragmentQualPick.js": 'sap.ui.define(["sap/ui/core/mvc/Controller"],function(e){"use strict";return e.extend("MIND2PEP_PLANNER.controller.FragmentQualPick",{parent:null,constructor:function(t,n,s,i){return this.oParent=t,this.vUnitKey=n,this.vEmpID=s,this.vDate=i,e.call(this)},onSaveButtonPress:function(e){this.oParent.getView().getModel().submitChanges({refreshAfterChange:!0,success:function(e){}.bind(this),error:function(e){this.oParent.getView().getModel().resetChanges()}.bind(this)}),this.oParent.closeQualDialog()},onCloseButtonPress:function(){this.oParent.getView().getModel().resetChanges(),this.oParent.closeQualDialog()}})});',
	"MIND2PEP_PLANNER/controller/FragmentSelectEmployee.js": 'sap.ui.define(["sap/ui/core/mvc/Controller","MIND2PEP_PLANNER/utils/Helper"],function(e,t){"use strict";return e.extend("MIND2PEP_PLANNER.controller.FragmentSelectEmployee",{parent:null,constructor:function(t,a){return this.oParent=t,this.vUnitKey=a,e.call(this)},createEmpTable:function(){this.oTable=sap.ui.getCore().byId("tbl_emp_selection"),this.oTable.destroyColumns(),this.oTable.unbindAggregation("rows"),this._fillEmpUnitColumns()},_fillEmpUnitColumns:function(){var e=new sap.ui.model.Filter("UnitKey",sap.ui.model.FilterOperator.EQ,this.vUnitKey);this.oParent.getView().getModel().read("/metaEmpUnitSet",{groupId:this.vUnitKey,success:function(e){this._readMetaEmpUnitSuccess(e.results)}.bind(this),error:function(){this.oTable.setBusy(!1)}.bind(this),filters:[e],refreshAfterChange:!0})},_readMetaEmpUnitSuccess:function(e){if(e){for(var t=0;t<e.length;t++){var a=new sap.m.Text({text:{path:"value"},tooltip:{path:"Tooltip"},wrapping:!1});a.addEventDelegate({onBeforeRendering:this.oParent.onBeforeRenderTemplate}),a.addEventDelegate({onAfterRendering:this.oParent.onAfterRenderTemplate}),a.addCustomData(new sap.ui.core.CustomData({key:"background",writeToDom:!0,value:{path:"color"}})),a.bindElement(e[t].FieldKey);var i=new sap.ui.table.Column({template:a,autoResizable:!0}),l=new sap.m.Label;l.setWidth("auto"),0===t&&(l.setTextAlign(sap.ui.core.TextAlign.Center),l.setWidth("auto"),l.setDesign(sap.m.LabelDesign.Bold),i.setHeaderSpan([e.length,1]));var s=new sap.m.Label;s.setText(e[t].FieldLabel),i.addMultiLabel(l),i.setWidth("auto"),i.addMultiLabel(s),this.oTable.addColumn(i)}this._fillEmpDateColumns(),this.oTable.setFixedColumnCount(e.length)}else this._fillEmpDateColumns()},_fillEmpDateColumns:function(){var e=sap.ui.getCore().byId("cal_date_int").getSelectedDates();if(e.length>0){var t=e[0].getStartDate(),a=e[0].getEndDate();if(null==a)return;var i=new Date(t),l=new Date(a);i.setHours(12),l.setHours(12),i.setUTCDate(i.getDate()),l.setUTCDate(l.getDate())}if(i&&l){var s=new sap.ui.model.Filter("PlanDate",sap.ui.model.FilterOperator.BT,i,l),o=new sap.ui.model.Filter("UnitKey",sap.ui.model.FilterOperator.EQ,this.vUnitKey);this.oParent.getView().getModel().read("/metaEmpDateSet",{groupId:this.vUnitKey,filters:[s,o],success:function(e){this._readMetaEmpDateSuccess(e.results)}.bind(this),error:function(){},refreshAfterChange:!0})}},_readMetaEmpDateSuccess:function(e){if(e&&e.length>0)for(var t=e[0].PlanDate,a=0;a<e.length;a++){var i,l=new Date(e[a].PlanDate),s=Date.parse(l.toString()),o=new sap.m.FormattedText({width:"100%"});o.setHtmlText("<p style=\'text-align:center;font-weight:bold;margin-block-start:0px;margin-block-end:0px;font-size:1rem\'>"+e[a].LabelText+"</p>"),(i=new sap.m.Text({text:{path:"value"},tooltip:{path:"Tooltip"},wrapping:!1})).addCustomData(new sap.ui.core.CustomData({key:"ColumnType",writeToDom:!0,value:"Text"})),i.addEventDelegate({onAfterRendering:this.oParent.onAfterRenderTemplate}),i.addCustomData(new sap.ui.core.CustomData({key:"background",writeToDom:!0,value:{path:"color"}})),i.bindElement(e[a].FieldKey+s);var r=new sap.ui.table.Column({template:i,autoResizable:!0});if(r.addCustomData(new sap.ui.core.CustomData({key:"UnitKey",writeToDom:!0,value:this.vUnitKey})),r.addCustomData(new sap.ui.core.CustomData({key:"PlanDate",writeToDom:!0,value:s.toString()})),o.setWidth("auto"),t.toString()!==e[a].PlanDate.toString()||0===a){t=e[a].PlanDate;var n=0;o.setWidth("auto");for(var u=0;u<e.length;u++)e[u].PlanDate.toString()===t.toString()&&n++;r.setHeaderSpan([n,1])}var d=new sap.m.Label;d.setText(e[a].FieldLabel),r.addMultiLabel(o),r.setWidth("auto"),r.addMultiLabel(d),this.oTable.addColumn(r)}},closeSelectDialog:function(e){this.oParent.closeSelectDialog(e)},handleCalendarSelect:function(){var e=this.oParent.getSelectedBegda("cal_date_int"),t=this.oParent.getSelectedEndda("cal_date_int");void 0!==e&&void 0!==t&&(this.createEmpTable(),this.oParent.loadQualsInAddEmployee(this.vUnitKey))},onFilterSearchButtonPress:function(e){this._setEmpTableData(e)},onSearchEmpName:function(e){""!==sap.ui.getCore().byId("sf_emp_name").getValue()&&this._setEmpTableData(e)},onDateChange:function(e){e.getSource().getDateValue().setHours(12);var t=sap.ui.getCore().byId("dp_begda"),a=t.getDateValue(),i=sap.ui.getCore().byId("dp_endda"),l=i.getDateValue();return t.setValueState("None"),i.setValueState("None"),t.setMaxDate(i.getDateValue()),i.setMinDate(t.getDateValue()),""===a?(t.setValueState("Error"),-1):""===l?(i.setValueState("Error"),-1):a>l?(t.setValueState("Error"),i.setValueState("Error"),-1):0},onAddEmpButtonPress:function(){-1!==sap.ui.getCore().byId("tbl_emp_selection").getSelectedIndex()&&this.oParent.addEmployee(this.vUnitKey)},_setEmpTableData:function(e){var a,i,l,s,o,r,n=this.oParent.getView().getModel(),u=[],d=e.getId(),p=sap.ui.getCore().byId("sf_emp_name");switch(this.oTable.setBusy(!0),d){case"search":""!==(o=p.getValue())&&(l=new sap.ui.model.Filter("EmpName",sap.ui.model.FilterOperator.EQ,o),u.push(l));break;case"press":o="";break;case"select":this._fillEmpDateColumns(),o="";break;default:return}if(this.oParent.oEmployeeFilterCust.EmpQualAvailable){for(i=sap.ui.getCore().byId("vb_qual").getItems(),a=0;a<i.length;a++)!0===i[a].getProperty("selected")&&(s=i[a].getAggregation("customData"),l=new sap.ui.model.Filter("EmpQual",sap.ui.model.FilterOperator.EQ,t.getCustomDataValue(s,"qualid")),u.push(l));for(i=sap.ui.getCore().byId("mcb_quals").getSelectedKeys(),a=0;a<i.length;a++)l=new sap.ui.model.Filter("EmpQual",sap.ui.model.FilterOperator.EQ,i[a]),u.push(l)}if(this.oParent.oEmployeeFilterCust.EmpSgAvailable)for(i=sap.ui.getCore().byId("mcb_sg").getSelectedKeys(),a=0;a<i.length;a++)l=new sap.ui.model.Filter("EmpShiftGroup",sap.ui.model.FilterOperator.EQ,i[a]),u.push(l);if(this.oParent.oEmployeeFilterCust.EmpAvailAvailable)for(i=sap.ui.getCore().byId("vb_av").getItems(),a=0;a<i.length;a++)!0===i[a].getProperty("selected")&&(s=i[a].getAggregation("customData"),r=t.getCustomDataValue(s,"AvailKey"),l=new sap.ui.model.Filter("EmpAvail",sap.ui.model.FilterOperator.EQ,r),u.push(l));var m=this.oParent.getSelectedBegda(),g=this.oParent.getSelectedEndda();if(null!=g&&void 0!=g){var h=this.oParent.getSelectedBegda("cal_date_int"),c=this.oParent.getSelectedEndda("cal_date_int");if(null!=c&&void 0!=c){m.setUTCDate(m.getDate()),g.setUTCDate(g.getDate()),h.setUTCDate(h.getDate()),c.setUTCDate(c.getDate());var D=new sap.ui.model.Filter("UnitKey",sap.ui.model.FilterOperator.NE,this.vUnitKey),b=new sap.ui.model.Filter("PlanBegda",sap.ui.model.FilterOperator.EQ,m),E=new sap.ui.model.Filter("PlanEndda",sap.ui.model.FilterOperator.EQ,g),f=new sap.ui.model.Filter("SelectBegda",sap.ui.model.FilterOperator.EQ,h),y=new sap.ui.model.Filter("SelectEndda",sap.ui.model.FilterOperator.EQ,c);u.push(D),u.push(b),u.push(E),u.push(f),u.push(y),n.read("/assignedEmployeesSet",{filters:u,success:function(e){this._readEmpDataSuccess(e.results)}.bind(this),error:function(e){this.oTable.setBusy(!1),this.oParent.handleError(this,this.oTable)}.bind(this),refreshAfterChange:!0})}else this.oParent._oAddEmployeeDialog.setBusy(!1)}},_readEmpDataSuccess:function(e){var a,i={rows:[]},l=new sap.ui.model.json.JSONModel,s={},o="",r="";if(e&&e.length>0){for(var n=0;n<e.length;n++){o===e[n].EmpId&&r===e[n].Line||(0!==n&&(s.EmpId=o,i.rows.push(s)),s={},o=e[n].EmpId,r=e[n].Line);var u=new Date(e[n].PlanDate);a="8099"==u.getYear()?"":Date.parse(u.toString()),s[e[n].FieldKey+a]={},s[e[n].FieldKey+a].value=e[n].FieldValue,s[e[n].FieldKey+a].Tooltip=e[n].FieldToolTip,s[e[n].FieldKey+a].color=e[n].FieldBColor,s[e[n].FieldKey+a].disabled=e[n].Disabled,s[e[n].FieldKey+a].fragment=e[n].Fragment,s[e[n].FieldKey+a].EmpID=o}e.length>0&&(s.EmpId=o,i.rows.push(s)),l.setData({modelData:i}),this.oTable.setModel(l),this.oTable.bindAggregation("rows",{path:"/modelData/rows"});this.oTable.getBinding("rows");this.oParent.setRowCount(this.oTable,i.rows),this.oTable.setBusy(!1),setTimeout(function(){t.autoResize(this.oTable)}.bind(this),500)}else this.oTable.setBusy(!1)}})});',
	"MIND2PEP_PLANNER/controller/Main.controller.js": 'sap.ui.define(["sap/ui/core/mvc/Controller","sap/m/MessageBox","sap/m/Dialog","sap/m/Button","sap/m/MessageToast","sap/ui/model/json/JSONModel","MIND2PEP_PLANNER/utils/Formatter","MIND2PEP_PLANNER/utils/Helper","MIND2PEP_PLANNER/utils/DataUtil","MIND2PEP_PLANNER/utils/Rptime","MIND2PEP_PLANNER/utils/Tables","MIND2PEP_PLANNER/utils/TimesOverview","MIND2PEP_PLANNER/controls/customTable","MIND2PEP_PLANNER/controller/FragmentSelectEmployee","sap/m/ColumnListItem","MIND2PEP_PLANNER/controller/FragmentQualPick","MIND2PEP_PLANNER/controller/FragmentExportRosterPDF","sap/m/Text","sap/ui/core/Popup"],function(e,t,a,i,s,o,n,r,l,d,u,g,p,c,m,h,y,b,_){"use strict";var C=new sap.m.MessageItem({type:{path:"severity",formatter:function(e){switch(e){case"error":return sap.ui.core.MessageType.Error;case"success":return sap.ui.core.MessageType.Success;case"warning":return sap.ui.core.MessageType.Warning}return e}},title:"{message}",description:"{message}",subtitle:"{message}"}),f=new sap.m.MessagePopover({items:{path:"/",template:C}});return e.extend("MIND2PEP_PLANNER.controller.Main",{formatter:n,libtables:u,onInit:function(){var e=this.getOwnerComponent().getModel(),a=this;e.metadataLoaded().then(function(){this.initializeModel(),this._oDataUtil=l.getInstance(e),this._oRptime=d.getInstance(e),this.aItems=[],this.readCustomizing(),this.getUnits()}.bind(this)),e.attachMetadataFailed(function(){t.error(a.getView().getModel("i18n").getResourceBundle().getText("MetadataLoadFailed"))})},onAfterRendering:function(){var e=this.byId("cal_interval");e.addEventDelegate({onAfterRendering:function(){r.attachCalendarWeekSelection($(".sapUiCalRowWeekNumbers")[0],e)}})},checkChangesBeforeClose:function(e){var t=this.getResourceBundleText("onbeforeunloadmessage");if(this.getView().getModel("CBData")&&this.getView().getModel("CBData").getData().length>0)return e.returnValue=t,t},getUnits:function(){var e=this.getView().getModel(),a=this.getSelectedBegda();a||(a=new Date);var i=this.getFormattedDate(a),s=this.getSelectedEndda();s||(s=new Date(a.getTime()+6048e5));var o=this.getFormattedDate(s);e.setHeaders({planBegda:i,planEndda:o}),e.read("/unitSet",{success:function(e){this.aUnits=e.results,$.when(this._oDataUtil.getData(this,this.aUnits)).then(function(){this.createUnitTables()}.bind(this)),this.getUnitsSuccess()}.bind(this),error:function(e){var a=JSON.parse(e.responseText).error.innererror.errordetails;t.error(a[0].message,{onClose:function(){this.getView().removeAllContent()}.bind(this)})}.bind(this)})},getUnitsSuccess:function(){var e=new sap.ui.model.json.JSONModel;f.setModel(e),f.attachAfterClose(function(){this.open=!1}.bind(this)),this.libtables.setView(this.getView()),$(window).bind("beforeunload",this.checkChangesBeforeClose.bind(this))},createUnitTables:function(){var e,t=$.Deferred(),a=this.getView().getModel(),i=[];e=!this.isFeatureEnabled("EXPANDED"),this._tables||(this._tables={}),this._tables.sum||(this._tables.sum={}),this._tables.unit||(this._tables.unit={});for(var s=0;s<this.aUnits.length;s++)if(!sap.ui.getCore().byId("pnl"+this.aUnits[s].UnitKey)){var o,n,r="tbl_plan_"+this.aUnits[s].UnitKey;if(this.getView().byId(r))o=this.getView().byId("tbl_plan_"+this.aUnits[s].UnitKey),n=this.getView().byId("tbl_sum"+this.aUnits[s].UnitKey),this._tables.unit[this.aUnits[s].UnitKey]=o,this._tables.sum[this.aUnits[s].UnitKey]=n;else{var l=this.getView().byId("page");o=new p(r,{selectionMode:"None",visible:e,layoutData:new sap.ui.layout.GridData({span:"XL12 L12 M12 S12"}),visibleRowCount:0,columnSelect:this.onColumnMenu.bind(this)});r="tbl_sum_"+this.aUnits[s].UnitKey;n=new sap.ui.table.Table(r,{selectionMode:"None",visible:e,layoutData:new sap.ui.layout.GridData({span:"XL12 L12 M12 S12"}),visibleRowCount:0});r="pnl"+this.aUnits[s].UnitKey;var d=new sap.m.Toolbar("tlb"+this.aUnits[s].UnitKey,{style:"Clear",height:"2rem"});if(this.isFeatureEnabled("EXPANDED")){var u=new sap.m.Panel("pnl"+this.aUnits[s].UnitKey,{headerText:"{i18n>planning} "+this.aUnits[s].UnitKey+" - "+this.aUnits[s].UnitText,headerToolbar:d,expandable:!0,expanded:!0,expand:this.panelExpand.bind(this,n,o,d,this.aUnits[s].UnitKey)});if(!0===this.oCustomizing.PlanLblHideKey)var g=new sap.m.Title("ttl"+this.aUnits[s].UnitKey,{text:this.aUnits[s].UnitText});else g=new sap.m.Title("ttl"+this.aUnits[s].UnitKey,{text:"{i18n>planning} "+this.aUnits[s].UnitKey+" - "+this.aUnits[s].UnitText});d.addContent(g);var c=new sap.m.ToolbarSpacer("tbs"+this.aUnits[s].UnitKey);d.addContent(c);var m=[],h=[],y=new sap.m.Button("btn_rptimemsg_"+this.aUnits[s].UnitKey,{visible:!1,type:sap.m.ButtonType.Transparent,icon:"sap-icon://message-popup",press:this.onOpenRptimeLog.bind(this,m,this.aUnits[s].UnitKey)});this._oRptime.getItems(this.aUnits[s].UnitKey,y).then(function(e){e.aItems[0].Amount>0||!0===e.aItems[0].Finish?e.aItems[0].Amount>0?(e.oTemplate.setType(sap.m.ButtonType.Reject),e.oTemplate.setText(e.aItems[0].Amount)):(e.oTemplate.setType(sap.m.ButtonType.Accept),e.oTemplate.setText("")):(e.oTemplate.setType(sap.m.ButtonType.Unstyled),e.oTemplate.setText(""))});var b=new sap.m.ToggleButton("btn_hideB_"+this.aUnits[s].UnitKey,{press:this.hideButtons.bind(this,m),icon:"sap-icon://overflow",tooltip:"{i18n>ttfunctionbutton}",visible:!0,pressed:!1}),_=new sap.m.ToggleButton("btn_hideSB_"+this.aUnits[s].UnitKey,{press:this.hideSumData.bind(this,m,this.aUnits[s].UnitKey),icon:"sap-icon://chart-table-view",tooltip:"{i18n>ttsumbutton}",visible:!0,pressed:!0}),C=new sap.m.ToggleButton("btn_hidePB_"+this.aUnits[s].UnitKey,{press:this.hidePlanData.bind(this,m,this.aUnits[s].UnitKey),icon:"sap-icon://personnel-view",tooltip:"{i18n>ttplanbutton}",visible:!0,pressed:!1}),f=new sap.m.Select("sel_var_"+this.aUnits[s].UnitKey,{visible:!0,change:this.onChangeVariantForTable.bind(this,this.aUnits[s].UnitKey)}),D=new sap.ui.core.Item({text:"{VariantName}",key:"{Variant}"})}else{u=new sap.m.Panel("pnl"+this.aUnits[s].UnitKey,{headerText:"{i18n>planning} "+this.aUnits[s].UnitKey+" - "+this.aUnits[s].UnitText,headerToolbar:d,expandable:!0,expanded:!1,expand:this.panelExpand.bind(this,n,o,d,this.aUnits[s].UnitKey)});if(!0===this.oCustomizing.PlanLblHideKey)g=new sap.m.Title("ttl"+this.aUnits[s].UnitKey,{text:this.aUnits[s].UnitText});else g=new sap.m.Title("ttl"+this.aUnits[s].UnitKey,{text:"{i18n>planning} "+this.aUnits[s].UnitKey+" - "+this.aUnits[s].UnitText});d.addContent(g);c=new sap.m.ToolbarSpacer("tbs"+this.aUnits[s].UnitKey);d.addContent(c);m=[],h=[],y=new sap.m.Button("btn_rptimemsg_"+this.aUnits[s].UnitKey,{visible:!1,type:sap.m.ButtonType.Transparent,icon:"sap-icon://message-popup",press:this.onOpenRptimeLog.bind(this,m,this.aUnits[s].UnitKey)});this._oRptime.getItems(this.aUnits[s].UnitKey,y).then(function(e){e.aItems[0].Amount>0?(e.oTemplate.setType(sap.m.ButtonType.Reject),e.oTemplate.setText(e.aItems[0].Amount)):(e.oTemplate.setType(sap.m.ButtonType.Unstyled),e.oTemplate.setText(""))});b=new sap.m.ToggleButton("btn_hideB_"+this.aUnits[s].UnitKey,{press:this.hideButtons.bind(this,m),icon:"sap-icon://overflow",tooltip:"{i18n>ttfunctionbutton}",visible:!1,pressed:!0}),_=new sap.m.ToggleButton("btn_hideSB_"+this.aUnits[s].UnitKey,{press:this.hideSumData.bind(this,m,this.aUnits[s].UnitKey),icon:"sap-icon://chart-table-view",tooltip:"{i18n>ttsumbutton}",visible:!1,pressed:!0}),C=new sap.m.ToggleButton("btn_hidePB_"+this.aUnits[s].UnitKey,{press:this.hidePlanData.bind(this,m,this.aUnits[s].UnitKey),icon:"sap-icon://personnel-view",tooltip:"{i18n>ttplanbutton}",visible:!1,pressed:!0}),f=new sap.m.Select("sel_var_"+this.aUnits[s].UnitKey,{visible:!1,change:this.onChangeVariantForTable.bind(this,this.aUnits[s].UnitKey)}),D=new sap.ui.core.Item({text:"{VariantName}",key:"{Variant}"})}f.setModel(a),f.bindAggregation("items",{path:"/colVariantSet",template:D,events:{dataReceived:function(e){var t=[];if(e.getParameter("data")){t=e.getParameter("data").results;for(var a={},i=0;i<t.length;i++)(a=t[i]).IsActive&&f.setSelectedKey(a.Variant)}}.bind(this)}}),this.isFeatureEnabled("RPTLBUTTON")?d.addContent(y):y.destroy(),d.addContent(b),d.addContent(C),d.addContent(_),d.addContent(f);var S,v={};v.UnitKey=this.aUnits[s].UnitKey,v.Variant=0,v.IsActive=!0,S=!this.isFeatureEnabled("EXPANDED");var I,w=this.oCustomizing.PlanBtnSize,V="XL"+w+"L"+w+"M"+w+"S"+w,E="";this.oCustomizing.PlanBtnShortText&&(E="st"),I=!!this.isFeatureEnabled("FAVORITE");var T=this.aFeatureUsage,P=new sap.m.Button("btn_refresh_"+this.aUnits[s].UnitKey,{press:this.onRefreshUnit.bind(this,this.aUnits[s].UnitKey),text:"{i18n>"+E+"refresh}",tooltip:"{i18n>ttrefresh}",icon:"sap-icon://refresh",layoutData:new sap.ui.layout.GridData({span:V}),visible:S});for(var M in m.push(P),T){var B=T[M];B.IsFeatureButton&&this["prepare"+B.FeatureKey]&&(I&&!this.isFeatureFavorite(B.FeatureKey)?h.push(new sap.m.MenuItem({press:this["prepare"+B.FeatureKey].bind(this,this.aUnits[s].UnitKey),text:B.FeatureName,icon:"sap-icon://"+B.FeatureIcon})):m.push(new sap.m.Button({press:this["prepare"+B.FeatureKey].bind(this,this.aUnits[s].UnitKey),tooltip:B.FeatureTooltip,text:B.FeatureName,icon:"sap-icon://"+B.FeatureIcon,layoutData:new sap.ui.layout.GridData({span:V}),visible:S})))}if(this.isFeatureEnabled("FAVORITE")){var F=new sap.m.Menu("menu_favorites_"+this.aUnits[s].UnitKey,{items:h}),x=new sap.m.MenuButton("btn_favfeat_"+this.aUnits[s].UnitKey,{defaultAction:function(){this.onOpenFavoriteFeaturesDialog(this)}.bind(this),icon:"sap-icon://add-favorite",text:"{i18n>favorites}",buttonMode:"Split",useDefaultActionOnly:!0,menu:F,layoutData:new sap.ui.layout.GridData({span:V}),visible:S});m.push(x)}if(this.isFeatureEnabled("HIDEEMPS")){var K=new sap.m.VBox("vbox_hideEmp_"+this.aUnits[s].UnitKey,{fitContainer:!0,layoutData:new sap.ui.layout.GridData({span:"XL12 L12 M12 S12"})}),A=new sap.ui.table.Table("tbl_hideEmp_"+this.aUnits[s].UnitKey,{visible:!1,selectionMode:"None",width:"350px"});K.addItem(A);var U=new sap.m.ToggleButton("btn_hideEmp_"+this.aUnits[s].UnitKey,{press:this.onHideEmpBtnPress.bind(this,m,this.aUnits[s].UnitKey),icon:"sap-icon://add-employee",tooltip:"{i18n>tthideemp}",visible:!1,pressed:!1});d.addContent(U)}K&&m.push(K),m.push(o),m.push(n);var O=new sap.ui.layout.form.SimpleForm({content:m,columnsXL:12,columnsL:12,columnsM:12,layout:"ResponsiveGridLayout"});u.addContent(O),i.push(u),this._tables.unit[this.aUnits[s].UnitKey]=o,this._tables.sum[this.aUnits[s].UnitKey]=n}if(o.setBusyIndicatorDelay(0),n.setBusyIndicatorDelay(0),n.setBusy(!0),o.setBusy(!0),!1===e){var R=this.aUnits[s].UnitKey;$.when(this._oRptime.getData(this,R)).then(function(e){this.fillSumTable(this._tables.sum[e],e),this.fillUnitTable(this._tables.unit[e],e)}.bind(this))}}for(var N=0;N<i.length;N++)l.addContent(i[N]),t.resolve();return t},firstVisibleRowChanged:function(e){for(var t,a=e.getSource().getRows(),i=0;i<a.length;i++){t=a[i].getCells();for(var s=0;s<t.length;s++)t[s].rerender()}},onOpenFavoriteFeaturesDialog:function(){this._oFavoriteFeaturesDialog||(this._oFavoriteFeaturesDialog=sap.ui.xmlfragment("MIND2PEP_PLANNER.fragments.FavoriteFeatures",this,{refreshAfterChange:!0}),this.getView().addDependent(this._oFavoriteFeaturesDialog),this._oFavoriteFeaturesDialog.open(),this._oFavoriteFeaturesDialog.attachAfterClose(function(){this._oFavoriteFeaturesDialog.getModel().detachBatchRequestCompleted("onFavoriteBatchRequestCompleted"),this._oFavoriteFeaturesDialog.destroy(),this._oFavoriteFeaturesDialog=null}.bind(this)),this._oFavoriteFeaturesDialog.attachAfterOpen(function(){this._oFavoriteFeaturesDialog.setBusy(!1)}.bind(this)),this._oFavoriteFeaturesDialog.setBusyIndicatorDelay(0),this._oFavoriteFeaturesDialog.setBusy(!0))},onSaveFavorites:function(e){this._oFavoriteFeaturesDialog.setBusy(!0);var t=e.getSource().getModel();t.attachBatchRequestCompleted(this.onFavoriteBatchRequestCompleted()),t.submitChanges()},onFavoriteBatchRequestCompleted:function(){this._oFavoriteFeaturesDialog.setBusy(!1),s.show(this.getResourceBundleText("favsaved")),this._oFavoriteFeaturesDialog.close()},onChangeFavorite:function(e){var t=e.getSource().getBindingContext();e.getSource().getModel().setProperty("IsFavorite",e.getParameter("selected"),t)},prepareVALIDATION:function(e){sap.ui.getCore().byId("pnl"+e);var t=this.getSelectedBegda(),a=this.getSelectedEndda(),i=sap.ui.getCore().byId("tbl_sum_"+e),s=this.getView().getModel();i.setBusy(!0),s.callFunction("/RunAllValidations",{method:"GET",urlParameters:{UnitKey:e,Begda:t,Endda:a,AllValidations:!0},success:function(t){i.getVisible()&&i.getVisible()&&(i.destroyColumns(),this.fillSumTable(i,e))}.bind(this),error:function(){i.setBusy(!1)}.bind(this)})},prepare17WEEKS:function(e){this.prepareVALIDATION(e)},preparePRINT:function(e){if(!this._oPrintFormDialog){this._oPrintFormDialog=sap.ui.xmlfragment("MIND2PEP_PLANNER.fragments.FormDownload",this),this._oPrintFormDialog.attachAfterClose(this.destroyFormDownload.bind(this)),this._oPrintFormDialog.setModel(new sap.ui.model.json.JSONModel,"FormDownloadModel"),this._oPrintFormDialog.getModel("FormDownloadModel").setProperty("/RadioIndex",0),this.getView().addDependent(this._oPrintFormDialog);var t=this.getMonday(this.getSelectedBegda());sap.ui.getCore().byId("dp_form_begda").setDateValue(t),sap.ui.getCore().byId("btn_form_download").attachPress(this.downloadPDF.bind(this,e))}this._oPrintFormDialog.open()},getMonday:function(e){var t=(e=new Date(e)).getDay(),a=e.getDate()-t+(0==t?-6:1);return new Date(e.setDate(a))},destroyFormDownload:function(){this._oPrintFormDialog.destroy(),this._oPrintFormDialog=null},closeFormDownload:function(){this._oPrintFormDialog.close()},prepareLEAVE:function(e){this.openTimeOverviewPopupWrapper(void 0,e)},onUpdateLeave:function(){var e,t=sap.ui.getCore().byId("ld_tbl_leaveoverview"),a=sap.ui.getCore().byId("ld_dp_begda_leave").getDateValue(),i=sap.ui.getCore().byId("ld_dp_endda_leave").getDateValue(),s=sap.ui.getCore().byId("ld_select_subty_leave"),o=sap.ui.getCore().byId("chb_absence_day"),n=s.getSelectedItem().getCustomData()[1].getProperty("value"),r=sap.ui.getCore().byId("ld_select_emp"),l=sap.ui.core.format.DateFormat.getDateInstance({pattern:"PTHH\'H\'mm\'M\'ss\'S\'"});if(""==!s.getSelectedKey){sap.ui.getCore().byId("chb_sprps")&&(e=sap.ui.getCore().byId("chb_sprps").getSelected());var d=sap.ui.getCore().byId("ld_tp_beguz_leave");if(d.getVisible())var u=d.getDateValue();var g=sap.ui.getCore().byId("ld_tp_enduz_leave");if(g.getVisible())var p=g.getDateValue();var c=sap.ui.getCore().byId("ld_select_subty_reason"),m=sap.ui.getCore().byId("ld_inp_subty_reason");if(1==c.getVisible()&&1==m.getVisible())var h=c.getSelectedKey(),y=m.getValue();var b=t.getContextByIndex(t.getSelectedIndex());a.setHours(12),i.setHours(12);var _=o.getSelected(),C={};C.CommentKey=h,C.Comment=y,C.EmpId=r.getSelectedItem().getKey(),C.Subty=s.getSelectedItem().getKey(),C.Infty=n,C.Subty=s.getSelectedKey(),C.UnitKey=b.getProperty("UnitKey"),C.Begda=a,C.Endda=i,C.PrevDay=_,d.getVisible()&&(C.Beguz=l.format(new Date(u))),g.getVisible()&&(C.Enduz=l.format(new Date(p))),C.Sprps=e,C.Seqnr=b.getProperty("Seqnr"),this.getView().getModel().update(b.sPath,C,{success:function(){this.updateLeaveSuccess(),t.setBusy(!1)}.bind(this),error:function(e){this.createError(e),t.setBusy(!1)}.bind(this)})}},onEmployeeChangeTimeOverview:function(){this.onEmployeeSelect(),this.getEmpShift(),this.onCicoEmployeeChange(),this.onEmployeeOvertimeSelect(),this.getAllowanceSet(),this.getTimeTransfer(),this.bindRptimeMsgTimesOverview()},onEmployeeSelect:function(){var e=sap.ui.getCore().byId("ld_select_emp"),t=new sap.ui.model.odata.v2.ODataModel("/sap/opu/odata/MIND2/PEP_YEAR_SRV"),a=e.getSelectedItem(),i=a.getKey(),s=a.getCustomData(),o=r.getCustomDataValue(s,"UnitKey"),n=new sap.ui.model.Filter("EmpId",sap.ui.model.FilterOperator.EQ,i),l=new sap.ui.model.Filter("UnitKey",sap.ui.model.FilterOperator.EQ,o),d=sap.ui.getCore().byId("ld_dp_currentDate").getDateValue(),u=new sap.ui.model.Filter("MsgType",sap.ui.model.FilterOperator.EQ,"ABSENCE"),g=new sap.ui.model.Filter("PlanDate",sap.ui.model.FilterOperator.EQ,d),p=new sap.ui.model.Filter("SumKey",sap.ui.model.FilterOperator.EQ,""),c=sap.ui.getCore().byId("ld_select_subty_reason"),m=sap.ui.getCore().byId("ld_inp_subty_reason");c.setValueState(sap.ui.core.ValueState.None),c.setSelectedKey(),m.setValue(),m.setValueState(sap.ui.core.ValueState.None),m.setVisible(!1),this.fillLeaveTable();var h=sap.ui.getCore().byId("ld_select_subty_leave");t.read("/SubtypSet",{success:function(e){h.removeAllItems();for(var t=e.results,a=new sap.ui.core.Item({text:"",key:""}),i=0;i<t.length;i++){var s=new sap.ui.core.Item({text:t[i].Subty+" - "+t[i].SubtyText,key:t[i].Subty,customData:[{Type:"sap.ui.core.CustomData",key:"ganztaegig",value:t[i].Ganztaegig},{Type:"sap.ui.core.CustomData",key:"Infty",value:t[i].Infty},{Type:"sap.ui.core.CustomData",key:"ReasonMand",value:t[i].ReasonMand}]});0===i?(h.addItem(a),h.addItem(s),h.setSelectedItem(a)):h.addItem(s)}}.bind(this),filters:[n,l]}),t=this.getView().getModel(),c.setModel(t);var y=new sap.ui.core.Item({text:"{NoteText}",key:"{NoteKey}"});c.bindAggregation("items",{path:"/messageNoteSet",template:y,filters:[u,g,l,p],events:{dataReceived:function(){}.bind(this)}})},onSaveLeave:function(){var e,t=sap.ui.getCore().byId("ld_tbl_leaveoverview"),a=sap.ui.getCore().byId("ld_dp_begda_leave").getDateValue(),i=sap.ui.getCore().byId("ld_dp_endda_leave").getDateValue(),s=sap.ui.getCore().byId("ld_select_subty_leave"),o=sap.ui.getCore().byId("ld_select_emp"),n=sap.ui.getCore().byId("ld_select_subty_reason"),l=sap.ui.getCore().byId("ld_inp_subty_reason"),d=sap.ui.getCore().byId("chb_absence_day");if(s.setValueState(sap.ui.core.ValueState.None),n.setValueState(sap.ui.core.ValueState.None),l.setValueState(sap.ui.core.ValueState.None),e=this._oLeaveDialog?r.getCustomDataValue(this._oLeaveDialog.getAggregation("customData"),"UnitKey"):r.getCustomDataValue(this._oTimesOverviewDialog.getAggregation("customData"),"UnitKey"),!s.getSelectedKey()||n.getVisible()&&s.getSelectedItem().getAggregation("customData")[2].getProperty("value")&&!n.getSelectedKey()||l.getRequired()&&""==l.getValue())s.getSelectedKey()||s.setValueState(sap.ui.core.ValueState.Error),n.getVisible()&&(n.getSelectedKey()||n.setValueState(sap.ui.core.ValueState.Error),l.getRequired()&&""==l.getValue()&&l.setValueState(sap.ui.core.ValueState.Error));else{t.setBusy(!0);var u,g=s.getSelectedItem().getCustomData()[1].getProperty("value");sap.ui.getCore().byId("chb_sprps")&&(u=sap.ui.getCore().byId("chb_sprps").getSelected()),u=1==u;var p=sap.ui.getCore().byId("ld_tp_beguz_leave");if(1==p.getVisible())var c=p.getDateValue();var m=sap.ui.getCore().byId("ld_tp_enduz_leave");if(1==m.getVisible())var h=m.getDateValue();if(1==n.getVisible()&&1==l.getVisible())var y=n.getSelectedKey(),b=l.getValue();if(a&&i){var _=s.getSelectedItem().getKey(),C=o.getSelectedItem().getKey(),f={},D=sap.ui.core.format.DateFormat.getDateInstance({pattern:"PTHH\'H\'mm\'M\'ss\'S\'"}),S=d.getSelected();f.CommentKey=y,f.Comment=b,f.Infty=g,f.Subty=_,f.EmpId=C,f.Sprps=u,f.Begda=new Date(a.setHours(12)),f.Endda=new Date(i.setHours(12)),f.PrevDay=S,p.getDateValue()&&(f.Beguz=D.format(new Date(p.getDateValue()))),m.getDateValue()&&(f.Enduz=D.format(new Date(m.getDateValue()))),f.UnitKey=e,this.getView().getModel().create("/absenceSet",f,{success:function(e,a){t.setBusy(!1),this.createSuccess(e,a)}.bind(this),error:function(e){t.setBusy(!1);var a=JSON.parse(e.responseText).error.innererror.errordetails;"warning"===a[0].severity?r.openConfirmDialog("{i18n>areyousure}",a[0].message,"{i18n>yes}",this.overwriteLeave.bind(this),null,this):this.createError(e)}.bind(this)})}else t.setBusy(!1),a?sap.ui.getCore().byId("ld_dp_begda_leave").setValueState(sap.ui.core.ValueState.None):sap.ui.getCore().byId("ld_dp_begda_leave").setValueState(sap.ui.core.ValueState.Error),i?sap.ui.getCore().byId("ld_dp_endda_leave").setValueState(sap.ui.core.ValueState.None):sap.ui.getCore().byId("ld_dp_endda_leave").setValueState(sap.ui.core.ValueState.Error),c?sap.ui.getCore().byId("ld_tp_beguz_leave").setValueState(sap.ui.core.ValueState.None):sap.ui.getCore().byId("ld_tp_beguz_leave").setValueState(sap.ui.core.ValueState.Error),h?sap.ui.getCore().byId("ld_tp_enduz_leave").setValueState(sap.ui.core.ValueState.None):sap.ui.getCore().byId("ld_tp_enduz_leave").setValueState(sap.ui.core.ValueState.Error)}},overwriteLeave:function(){var e,t=sap.ui.getCore().byId("ld_tbl_leaveoverview"),a=sap.ui.getCore().byId("ld_dp_begda_leave").getDateValue(),i=sap.ui.getCore().byId("ld_dp_endda_leave").getDateValue(),s=sap.ui.getCore().byId("ld_select_subty_leave"),o=sap.ui.getCore().byId("ld_select_emp"),n=sap.ui.getCore().byId("chb_absence_day");s.setValueState(sap.ui.core.ValueState.None);var l=n.getSelected();if(e=this._oLeaveDialog?r.getCustomDataValue(this._oLeaveDialog.getAggregation("customData"),"UnitKey"):r.getCustomDataValue(this._oTimesOverviewDialog.getAggregation("customData"),"UnitKey"),s.getSelectedKey()){t.setBusy(!0);var d,u=s.getSelectedItem().getCustomData()[1].getProperty("value");sap.ui.getCore().byId("chb_sprps")&&(d=sap.ui.getCore().byId("chb_sprps").getSelected()),d=1==d;var g=sap.ui.getCore().byId("ld_tp_beguz_leave");if(1==g.getVisible())g.getDateValue();var p=sap.ui.getCore().byId("ld_tp_enduz_leave");if(1==p.getVisible())p.getDateValue();var c=sap.ui.getCore().byId("ld_select_subty_reason"),m=sap.ui.getCore().byId("ld_inp_subty_reason");if(1==c.getVisible()&&1==m.getVisible())var h=c.getSelectedKey(),y=m.getValue();if(a&&i){var b=s.getSelectedItem().getKey(),_=o.getSelectedItem().getKey(),C={},f=sap.ui.core.format.DateFormat.getDateInstance({pattern:"PTHH\'H\'mm\'M\'ss\'S\'"});C.CommentKey=h,C.Comment=y,C.Infty=u,C.Subty=b,C.EmpId=_,C.Sprps=d,C.Begda=a,C.Endda=i,C.PrevDay=l,g.getDateValue()&&(C.Beguz=f.format(new Date(g.getDateValue()))),p.getDateValue()&&(C.Enduz=f.format(new Date(p.getDateValue()))),C.Overwrite=!0,C.UnitKey=e,this.getView().getModel().create("/absenceSet",C,{success:function(e,a){t.setBusy(!1),this.createSuccess(e,a)}.bind(this),error:function(e){t.setBusy(!1);var a=JSON.parse(e.responseText).error.innererror.errordetails;"warning"===a[0].severity?r.openConfirmDialog("{i18n>areyousure}",a[0].message,"{i18n>yes}",this.overwriteLeave.bind(this),null,this):this.createError(e)}.bind(this)})}}else s.setValueState(sap.ui.core.ValueState.Error)},createSuccess:function(e,t){var a=sap.ui.getCore().byId("ld_select_emp").getSelectedItem(),i=a.getKey(),o=a.getCustomData(),n=r.getCustomDataValue(o,"UnitKey"),l=new sap.ui.model.Filter("EmpId",sap.ui.model.FilterOperator.EQ,i),d=new sap.ui.model.Filter("UnitKey",sap.ui.model.FilterOperator.EQ,n),u=this.getView().getModel("i18n").getResourceBundle().getText("leavecreated");this.fillLeaveTable(),this.clearAbsPresInput(),this.AbsDirty=!1,s.show(u);var g=sap.ui.getCore().byId("ld_select_subty_leave"),p=sap.ui.getCore().byId("ld_select_subty_reason"),c=sap.ui.getCore().byId("ld_inp_subty_reason");p.setSelectedKey(""),c.setValue(),new sap.ui.model.odata.v2.ODataModel("/sap/opu/odata/MIND2/PEP_YEAR_SRV").read("/SubtypSet",{success:function(e){g.removeAllItems();for(var t=e.results,a=new sap.ui.core.Item({text:"",key:""}),i=0;i<t.length;i++){var s=new sap.ui.core.Item({text:t[i].Subty+" - "+t[i].SubtyText,key:t[i].Subty,customData:[{Type:"sap.ui.core.CustomData",key:"ganztaegig",value:t[i].Ganztaegig},{Type:"sap.ui.core.CustomData",key:"Infty",value:t[i].Infty},{Type:"sap.ui.core.CustomData",key:"ReasonMand",value:t[i].ReasonMand}]});0===i?(g.addItem(a),g.addItem(s),g.setSelectedItem(a)):g.addItem(s)}}.bind(this),filters:[l,d]})},createError:function(e){var a=JSON.parse(e.responseText).error.innererror.errordetails;t.error(a[0].message)},onCancelLeave:function(){-1!==sap.ui.getCore().byId("ld_tbl_leaveoverview").getSelectedIndex()?r.openConfirmDialog("{i18n>deleteleavesure}","{i18n>areyousure}","{i18n>btndeleteleave}",this.cancelLeave,null,this):r.openNoSelectedEntryDialog("{i18n>noselectedEntry}","{i18n>selectEntry}",null,this)},onLeaveEntrySelect:function(e){this.AbsDirty=!0;var t=sap.ui.getCore().byId("ld_tbl_leaveoverview").getFirstVisibleRow(),a=sap.ui.getCore().byId("ld_select_subty_leave");if(-1!=e.getSource().getSelectedIndex()){a.setEnabled(!1);var i=sap.ui.getCore().byId("ld_dp_begda_leave"),s=sap.ui.getCore().byId("ld_dp_endda_leave"),o=sap.ui.getCore().byId("ld_tp_beguz_leave"),n=sap.ui.getCore().byId("ld_tp_enduz_leave"),l=sap.ui.getCore().byId("ld_select_subty_leave"),d=sap.ui.getCore().byId("chb_absence_day"),u=sap.ui.getCore().byId("chb_sprps"),g=e.getSource().getSelectedIndex(),p=sap.ui.getCore().byId("ld_inp_duration_leave"),c=sap.ui.getCore().byId("ld_select_subty_reason"),m=sap.ui.getCore().byId("ld_inp_subty_reason");0!=t&&(g-=t);e.getSource().getRows()[g].getCells()[0].getText();var h=e.getSource().getRows()[g].getCells()[1].getText(),y=e.getSource().getRows()[g].getCells()[2].getText(),b=e.getSource().getRows()[g].getCells()[3].getText(),_=e.getSource().getRows()[g].getCells()[4].getText(),C=e.getSource().getRows()[g].getCells()[5].getText(),f=e.getSource().getRows()[g].getCells()[6].getText();if(1==c.getVisible()&&1==m.getVisible()){var D=e.getSource().getRows()[g].getBindingContext().getObject().CommentKey,S=e.getSource().getRows()[g].getBindingContext().getObject().Comment;c.setSelectedKey(D),m.setValue(S)}i.setValue(h),s.setValue(y),o.setValue(_),n.setValue(C),"Ja"==f?u.setSelected(!0):u.setSelected(!1),"Ja"==b?d.setSelected(!0):d.setSelected(!1);var v=e.getSource().getRows()[g].getBindingContext().getProperty("Subty");l.setSelectedKey(v),r.getCustomDataValue(l.getSelectedItem().getCustomData(),"ganztaegig")||(o.setVisible(!0),n.setVisible(!0),p.setVisible(!0))}else this.clearLeaveInput();this.toggleEnabledButtons("leave",e.getSource().getSelectedIndex())},cancelLeave:function(e){var t=sap.ui.getCore().byId("ld_tbl_leaveoverview"),a=t.getContextByIndex(t.getSelectedIndex());if(a.getObject().Sprps)e.onLeaveLocked();else{var i;sap.ui.getCore().byId("ld_dp_currentDate")&&(i=sap.ui.getCore().byId("ld_dp_currentDate"));var s=sap.ui.getCore().byId("ld_dp_begda_leave"),o=sap.ui.getCore().byId("ld_dp_endda_leave");e.getView().getModel().remove(a.sPath,{success:function(){i&&(s.setDateValue(i.getDateValue()),o.setDateValue(i.getDateValue())),e.cancelLeaveSuccess()},error:function(a){t.setBusy(!1),e.createError(a)}})}},onLeaveLocked:function(){r.openNoSelectedEntryDialog("{i18n>leavelocked}","{i18n>leavelockedlong}",null,this)},cancelLeaveSuccess:function(){var e=this.getView().getModel("i18n").getResourceBundle().getText("leavedeleted");this.fillLeaveTable(),s.show(e),this.onCancelLeaveOverview(),this._oLeaveDialog&&this._oLeaveDialog.setBusy(!1)},destroyLeaveCreateDialog:function(e){this._oLeaveDialog.destroy(),this._oLeaveDialog=null},onCloseLeaveDialog:function(e){this._oLeaveDialog.close()},checkTimeVisibility:function(){var e=sap.ui.getCore().byId("cl_select_cyclic_event").getSelectedItem().getBindingContext(),t=sap.ui.getCore().byId("ld_tp_beguz_leave"),a=sap.ui.getCore().byId("ld_tp_enduz_leave"),i=e.getProperty("Ganztaegig"),s=e.getProperty("TimeEditable");!1!==i?(t.setVisible(!1),a.setVisible(!1)):(t.setVisible(!0),a.setVisible(!0)),!0===s?(t.setEditable(!0),a.setEditable(!0)):(t.setEditable(!1),a.setEditable(!1))},onLeaveCyclSubtyChange:function(e){var t,a=sap.ui.getCore().byId("ld_tp_beguz_leave"),i=sap.ui.getCore().byId("ld_tp_enduz_leave"),s=sap.ui.getCore().byId("ld_inp_duration_leave");if(t=!!e.getParameter("selectedItem").getKey()&&e.getParameter("selectedItem").getAggregation("customData")[6].getProperty("value"),this.AbsDirty=!0,!0===t?(a.setEditable(!0),i.setEditable(!0),sap.ui.getCore().byId("cl_txt_blanktimes")&&sap.ui.getCore().byId("cl_txt_blanktimes").setVisible(!0)):(sap.ui.getCore().byId("cl_txt_blanktimes")&&sap.ui.getCore().byId("cl_txt_blanktimes").setVisible(!1),a.setEditable(!1),a.setValue(this.msToTime(e.getParameter("selectedItem").getAggregation("customData")[4].getProperty("value").ms)),a.setModel(this.getView().getModel()),i.setEditable(!1),i.setValue(this.msToTime(e.getParameter("selectedItem").getAggregation("customData")[5].getProperty("value").ms))),e.getParameter("selectedItem").getKey())var o=e.getParameter("selectedItem").getAggregation("customData")[0].getProperty("value");else o=!0;this.AbsDirty=!0,!1!==o?(a.setVisible(!1),i.setVisible(!1),sap.ui.getCore().byId("cl_txt_blanktimes")&&sap.ui.getCore().byId("cl_txt_blanktimes").setVisible(!1),s&&s.setVisible(!1)):(sap.ui.getCore().byId("cl_txt_blanktimes"),a.setVisible(!0),a.setModel(this.getView().getModel()),i.setVisible(!0),s&&s.setVisible(!0)),!0===(!!e.getParameter("selectedItem").getKey()&&e.getParameter("selectedItem").getAggregation("customData")[8].getProperty("value"))?(sap.ui.getCore().byId("rb_weekly").setSelected(!0),sap.ui.getCore().byId("pnl_day_week_month").setVisible(!1),sap.ui.getCore().byId("pnl_daily").setVisible(!1),sap.ui.getCore().byId("pnl_monthly").setVisible(!1),sap.ui.getCore().byId("chb_free_days").setSelected(!0),sap.ui.getCore().byId("l_weekly_everyxweeks").setVisible(!1),sap.ui.getCore().byId("inp_weekly_everyxweeks").setVisible(!1),sap.ui.getCore().byId("inp_weekly_everyxweeks").setValue(1)):(sap.ui.getCore().byId("pnl_day_week_month").setVisible(!0),sap.ui.getCore().byId("chb_free_days").setSelected(!1),sap.ui.getCore().byId("l_weekly_everyxweeks").setVisible(!0),sap.ui.getCore().byId("inp_weekly_everyxweeks").setVisible(!0))},onLeaveSubtyChange:function(e){var t=sap.ui.getCore().byId("ld_tp_beguz_leave"),a=sap.ui.getCore().byId("ld_tp_enduz_leave"),i=sap.ui.getCore().byId("ld_inp_duration_leave");if(e.getParameter("selectedItem").getKey())var s=e.getParameter("selectedItem").getAggregation("customData")[0].getProperty("value");else s=!0;this.AbsDirty=!0,!1!==s?(t.setVisible(!1),a.setVisible(!1),sap.ui.getCore().byId("cl_txt_blanktimes")&&sap.ui.getCore().byId("cl_txt_blanktimes").setVisible(!1),i&&i.setVisible(!1)):(sap.ui.getCore().byId("cl_txt_blanktimes")&&sap.ui.getCore().byId("cl_txt_blanktimes").setVisible(!0),t.setVisible(!0),t.setModel(this.getView().getModel()),a.setVisible(!0),i&&i.setVisible(!0))},onCancelLeaveOverview:function(){this.clearLeaveInput(),this.toggleEnabledButtons("leave",-1),this.clearAbsPresInput(),sap.ui.getCore().byId("ld_tbl_leaveoverview").setSelectedIndex(-1)},clearLeaveInput:function(){var e=sap.ui.getCore().byId("ld_tp_beguz_leave"),t=sap.ui.getCore().byId("ld_tp_enduz_leave"),a=sap.ui.getCore().byId("ld_inp_duration_leave"),i=sap.ui.getCore().byId("ld_select_subty_leave"),s=sap.ui.getCore().byId("ld_select_subty_reason"),o=sap.ui.getCore().byId("ld_inp_subty_reason");(e.setValue(),e.setVisible(!1),t.setValue(),t.setVisible(!1),a.setValue(),a.setVisible(!1),i.setSelectedKey(0),i.setEnabled(!0),1==s.getVisible()&&1==o.getVisible()&&(s.setSelectedKey(""),o.setValue()),this.AbsDirty=!1,sap.ui.getCore().byId("chb_sprps"))&&sap.ui.getCore().byId("chb_sprps").setSelected(!1)},prepareOVERTIME:function(e){this._oOvertimeDialog||(this._oOvertimeDialog=sap.ui.xmlfragment("MIND2PEP_PLANNER.fragments.OvertimeCreate",this,{refreshAfterChange:!0}),this._oOvertimeDialog.attachAfterClose(this.destroyOvertimeCreateDialog.bind(this)),this.getView().addDependent(this._oOvertimeDialog));var t=sap.ui.getCore().byId("ld_select_emp"),a=new sap.ui.model.Filter("SpecialEntry",sap.ui.model.FilterOperator.EQ,!1),i=sap.ui.getCore().byId("ld_form");i.setBusyIndicatorDelay(0),i.setBusy(!0),this._oOvertimeDialog.open(),this._oOvertimeDialog.setBusyIndicatorDelay(0);var s=new sap.ui.model.odata.v2.ODataModel("/sap/opu/odata/MIND2/PEP_YEAR_SRV",{refreshAfterChange:!0}),o=this.getSelectedBegda(),n=this.getSelectedEndda();o.setUTCDate(o.getDate()),n.setUTCDate(n.getDate());var r=this.getFormattedDate(o),l=this.getFormattedDate(n),d=new sap.ui.model.Filter("Begda",sap.ui.model.FilterOperator.EQ,r),u=new sap.ui.model.Filter("Endda",sap.ui.model.FilterOperator.EQ,l),g=new sap.ui.model.Filter("UnitKey",sap.ui.model.FilterOperator.EQ,e);s.read("/EmployeeSet",{success:function(e,a){for(var s=e.results,o=0;o<s.length;o++){var n=new sap.ui.core.Item({text:s[o].Name,key:s[o].EmpId}),r=new sap.ui.core.CustomData({key:"UnitKey",value:s[o].UnitKey});n.addCustomData(r),t.addItem(n),0==o&&t.setSelectedItem(n)}i.setBusy(!1),this.onEmployeeOvertimeSelect()}.bind(this),filters:[a,g,d,u]})},onEmployeeOvertimeSelect:function(){if(this.isFeatureEnabled("TO_OVERT")){this.fillOvertimeTable();var e=sap.ui.getCore().byId("ld_select_emp").getSelectedItem(),t=sap.ui.getCore().byId("ld_select_subty_overtime"),a=e.getKey(),i=e.getCustomData(),s=r.getCustomDataValue(i,"UnitKey"),o=new sap.ui.model.Filter("EmpId",sap.ui.model.FilterOperator.EQ,a),n=new sap.ui.model.Filter("UnitKey",sap.ui.model.FilterOperator.EQ,s),l=new sap.ui.model.Filter("MsgType",sap.ui.model.FilterOperator.EQ,"OVERTIME"),d=this.getView().getModel();t.setModel(d);var u=new sap.ui.core.Item({text:"{SubtyText}",key:"{Subty}"});t.bindAggregation("items",{path:"/subtypOvtSet",template:u,filters:[o,n]});var g=sap.ui.getCore().byId("ld_select_versl_overtime");u=new sap.ui.core.Item({text:"{VerslText}",key:"{Versl}"}),g.setModel(d),g.bindAggregation("items",{path:"/verslSet",template:u,filters:[o,n]});var p=sap.ui.getCore().byId("ld_select_comment_overtime"),c=sap.ui.getCore().byId("ld_inp_comment_overtime"),m=sap.ui.getCore().byId("ld_dp_currentDate").getDateValue(),h=(l=new sap.ui.model.Filter("MsgType",sap.ui.model.FilterOperator.EQ,"OVERTIME"),new sap.ui.model.Filter("PlanDate",sap.ui.model.FilterOperator.EQ,m)),y=(n=new sap.ui.model.Filter("UnitKey",sap.ui.model.FilterOperator.EQ,s),new sap.ui.model.Filter("SumKey",sap.ui.model.FilterOperator.EQ,""));p.setModel(d),u=new sap.ui.core.Item({text:"{NoteText}",key:"{NoteKey}"}),p.bindAggregation("items",{path:"/messageNoteSet",template:u,filters:[l,h,n,y],events:{dataReceived:function(){p.setSelectedKey(p.getFirstItem().getKey()),c.setRequired("SONST"==p.getSelectedKey())}.bind(this)}})}},fillLeaveTable:function(){var e=sap.ui.getCore().byId("ld_tbl_leaveoverview"),t=sap.ui.getCore().byId("ld_select_emp"),a=this.getView().getModel();e.setModel(a),e.setBusyIndicatorDelay(0),e.setBusy(!0);var i=sap.ui.getCore().byId("ld_dp_begda_leave").getDateValue(),s=sap.ui.getCore().byId("ld_dp_endda_leave").getDateValue(),o=t.getSelectedItem(),n=o.getKey(),l=o.getCustomData(),d=r.getCustomDataValue(l,"UnitKey"),u=new sap.ui.model.Filter("EmpId",sap.ui.model.FilterOperator.EQ,n),g=new sap.ui.model.Filter("UnitKey",sap.ui.model.FilterOperator.EQ,d),p=new sap.ui.model.Filter("Begda",sap.ui.model.FilterOperator.LE,i),c=new sap.ui.model.Filter("Endda",sap.ui.model.FilterOperator.GE,s);e.bindRows({path:"/absenceSet",filters:[u,g,p,c],events:{dataReceived:function(){e.setBusy(!1)}.bind(this)}})},fillOvertimeTable:function(){var e=sap.ui.getCore().byId("ld_tbl_overtimeoverview"),t=sap.ui.getCore().byId("ld_dp_begda_overtime").getDateValue(),a=sap.ui.getCore().byId("ld_dp_endda_overtime").getDateValue(),i=this.getFormattedDate(t),s=this.getFormattedDate(a),o=sap.ui.getCore().byId("ld_select_emp"),n=this.getView().getModel();e.setModel(n),e.setBusyIndicatorDelay(0),e.setBusy(!0);var l=o.getSelectedItem(),d=l.getKey(),u=l.getCustomData(),g=r.getCustomDataValue(u,"UnitKey"),p=new sap.ui.model.Filter("EmpId",sap.ui.model.FilterOperator.EQ,d),c=new sap.ui.model.Filter("Begda",sap.ui.model.FilterOperator.LE,i),m=new sap.ui.model.Filter("Endda",sap.ui.model.FilterOperator.GE,s),h=new sap.ui.model.Filter("UnitKey",sap.ui.model.FilterOperator.EQ,g);e.bindRows({path:"/overtimeSet",filters:[p,h,c,m],events:{dataReceived:function(){e.setBusy(!1)}}})},onSaveOvertime:function(e){var t=this.getView().getModel(),a=sap.ui.getCore().byId("ld_tbl_overtimeoverview"),i=sap.ui.getCore().byId("ld_select_emp"),s=r.getCustomDataValue(i.getSelectedItem().getAggregation("customData"),"UnitKey"),o=sap.ui.getCore().byId("ld_dp_begda_overtime"),n=o.getDateValue(),l=sap.ui.getCore().byId("ld_dp_endda_overtime"),d=l.getDateValue(),u=sap.ui.getCore().byId("ld_tp_beguz_overtime"),g=u.getValue(),p=sap.ui.getCore().byId("ld_tp_enduz_overtime"),c=p.getValue(),m=sap.ui.getCore().byId("ld_select_subty_overtime"),h=sap.ui.getCore().byId("ld_select_versl_overtime"),y=sap.ui.getCore().byId("ld_select_comment_overtime"),b=sap.ui.getCore().byId("ld_inp_amount_overtime"),_=sap.ui.getCore().byId("ld_inp_comment_overtime"),C=b.getValue(),f=C.split("."),D=f[0],S=f[1];if(o.setValueState(sap.ui.core.ValueState.None),o.setValueStateText(""),l.setValueState(sap.ui.core.ValueState.None),l.setValueStateText(""),n&&d)if(C||g||c)if(b.setValueState(sap.ui.core.ValueState.None),u.setValueState(sap.ui.core.ValueState.None),p.setValueState(sap.ui.core.ValueState.None),y.getSelectedItem().getKey())if(y.setValueState(sap.ui.core.ValueState.None),_.getValue()||"SONST"!=y.getSelectedKey())if(_.setValueState(sap.ui.core.ValueState.None),String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return this.substr(!t||t<0?0:+t,e.length)==e}),S&&S.length<=2&&!D.match("^-")||!C||C&&!C.match("^-")){a.setBusy(!0);var v=m.getSelectedItem().getKey(),I=i.getSelectedItem().getKey(),w=h.getSelectedItem().getKey(),V=(n.getYear()+1900).toString(),E=(d.getYear()+1900).toString(),T=(n.getMonth()+1).toString();if(n<=d){1==T.toString().length&&(T="0"+T);var P=(d.getMonth()+1).toString();1==P.toString().length&&(P="0"+P);var M=n.getDate().toString();1==M.toString().length&&(M="0"+M);var B=d.getDate().toString();1==B.toString().length&&(B="0"+B);var F=y.getSelectedItem().getKey(),x={};x.EmpId=I,x.Subty=v,x.Versl=w,x.Begda=V.toString()+T.toString()+M.toString(),x.Endda=E.toString()+P.toString()+B.toString(),x.StartTime=g,x.EndTime=c,x.Amount=C,x.CommentKey=F,x.UnitKey=s,x.Comment=_.getValue(),t.create("/overtimeSet",x,{refreshAfterChange:!0,success:function(){this.createOvertimeSuccess(this),a.setBusy(!1)}.bind(this),error:function(e){this.createError(e),this.clearOvertimeInput(),this.toggleEnabledButtons("overtime",-1),a.setBusy(!1)}.bind(this)})}else o.setValueState(sap.ui.core.ValueState.Error),o.setValueStateText(this.getResourceBundleText("errormsgdates")),l.setValueState(sap.ui.core.ValueState.Error),l.setValueStateText(this.getResourceBundleText("errormsgdates"))}else C&&b.setValueState(sap.ui.core.ValueState.Error);else _.setValueState(sap.ui.core.ValueState.Error);else y.setValueState(sap.ui.core.ValueState.Error);else C?(u.setValueState(sap.ui.core.ValueState.Error),p.setValueState(sap.ui.core.ValueState.Error)):b.setValueState(sap.ui.core.ValueState.Error);else a.setBusy(!1),n?o.setValueState(sap.ui.core.ValueState.None):o.setValueState(sap.ui.core.ValueState.Error),d?l.setValueState(sap.ui.core.ValueState.None):l.setValueState(sap.ui.core.ValueState.Error),S&&S.length>2||D.match("^-")?b.setValueState(sap.ui.core.ValueState.Error):b.setValueState(sap.ui.core.ValueState.None)},createOvertimeSuccess:function(){this.clearOvertimeInput(),this.toggleEnabledButtons("overtime",-1);var e=this.getView().getModel("i18n").getResourceBundle().getText("overtimecreated");this.onEmployeeOvertimeSelect(),this.OvertimeDirty=!1,s.show(e),this.clearOvertimeInput()},onUpdateOvertime:function(){var e=this.getView().getModel(),t=sap.ui.getCore().byId("ld_tbl_overtimeoverview"),a=t.getContextByIndex(t.getSelectedIndex()),i=sap.ui.getCore().byId("ld_dp_begda_overtime"),s=i.getDateValue(),o=sap.ui.getCore().byId("ld_dp_endda_overtime"),n=o.getDateValue(),r=sap.ui.getCore().byId("ld_tp_beguz_overtime"),l=r.getValue(),d=sap.ui.getCore().byId("ld_tp_enduz_overtime"),u=d.getValue(),g=sap.ui.getCore().byId("ld_select_subty_overtime"),p=sap.ui.getCore().byId("ld_select_emp"),c=sap.ui.getCore().byId("ld_select_versl_overtime"),m=sap.ui.getCore().byId("ld_select_comment_overtime"),h=sap.ui.getCore().byId("ld_inp_amount_overtime"),y=(sap.ui.getCore().byId("chb_absence_day"),h.getValue()),b=y.split("."),_=b[0],C=b[1],f=sap.ui.getCore().byId("ld_inp_comment_overtime");if(s&&n)if(y||l||u)if(h.setValueState(sap.ui.core.ValueState.None),r.setValueState(sap.ui.core.ValueState.None),d.setValueState(sap.ui.core.ValueState.None),m.getSelectedItem().getKey())if(m.setValueState(sap.ui.core.ValueState.None),f.getValue()||"SONST"!=m.getSelectedKey())if(f.setValueState(sap.ui.core.ValueState.None),String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return this.substr(!t||t<0?0:+t,e.length)==e}),C&&C.length<=2&&!_.match("^-")||!y||y&&!y.match("^-")){var D=g.getSelectedItem().getKey(),S=p.getSelectedItem().getKey(),v=c.getSelectedItem().getKey(),I=(s.getYear()+1900).toString(),w=(n.getYear()+1900).toString(),V=(s.getMonth()+1).toString();if(s<=n){1===V.toString().length&&(V="0"+V);var E=(n.getMonth()+1).toString();1===E.toString().length&&(E="0"+E);var T=s.getDate().toString();1===T.toString().length&&(T="0"+T);var P=n.getDate().toString();1===P.toString().length&&(P="0"+P);var M=m.getSelectedItem().getKey(),B={};B.EmpId=S,B.Subty=D,B.Versl=v,B.Begda=I.toString()+V.toString()+T.toString(),B.Endda=w.toString()+E.toString()+P.toString(),B.StartTime=l,B.EndTime=u,B.Amount=y,B.CommentKey=M,B.Comment=f.getValue(),e.update(a.sPath,B,{refreshAfterChange:!0,success:function(){this.updateOvertimeSuccess(),t.setBusy(!1)}.bind(this),error:function(){this.createError.bind(this),t.setBusy(!1)}.bind(this)})}else i.setValueState(sap.ui.core.ValueState.Error),i.setValueStateText(this.getResourceBundleText("errormsgdates")),o.setValueState(sap.ui.core.ValueState.Error),o.setValueStateText(this.getResourceBundleText("errormsgdates")),t.setBusy(!1)}else y&&(h.setValueState(sap.ui.core.ValueState.Error),t.setBusy(!1));else f.setValueState(sap.ui.core.ValueState.Error);else m.setValueState(sap.ui.core.ValueState.Error);else y?(r.setValueState(sap.ui.core.ValueState.Error),d.setValueState(sap.ui.core.ValueState.Error)):h.setValueState(sap.ui.core.ValueState.Error);else t.setBusy(!1),s?i.setValueState(sap.ui.core.ValueState.None):i.setValueState(sap.ui.core.ValueState.Error),n?o.setValueState(sap.ui.core.ValueState.None):o.setValueState(sap.ui.core.ValueState.Error),C&&C.length>2||_.match("^-")?h.setValueState(sap.ui.core.ValueState.Error):h.setValueState(sap.ui.core.ValueState.None)},updateLeaveSuccess:function(){this.clearLeaveInput();var e=this.getView().getModel("i18n").getResourceBundle().getText("leaveupdated");this.onEmployeeSelect(),this.AbsDirty=!1,this.toggleEnabledButtons("leave",-1),s.show(e)},updateOvertimeSuccess:function(){this.clearOvertimeInput(),this.OvertimeDirty=!1;var e=this.getView().getModel("i18n").getResourceBundle().getText("overtimeupdated");this.onEmployeeOvertimeSelect(),this.toggleEnabledButtons("overtime",-1),s.show(e)},onCancelOvertime:function(e){-1!==sap.ui.getCore().byId("ld_tbl_overtimeoverview").getSelectedIndex()?r.openConfirmDialog("{i18n>deleteovertimesure}","{i18n>areyousure}","{i18n>cancelovertime}",this.cancelOvertime,e,this):r.openNoSelectedEntryDialog("{i18n>noselectedEntry}","{i18n>selectEntry}",null,this)},cancelOvertime:function(e){var t=sap.ui.getCore().byId("ld_tbl_overtimeoverview"),a=t.getContextByIndex(t.getSelectedIndex());e.getView().getModel().remove(a.sPath,{success:function(){t.setBusy(!1),e.cancelOvertimeSuccess()},error:function(a){t.setBusy(!1),e.createError(a)}})},cancelOvertimeSuccess:function(){var e=this.getView().getModel("i18n").getResourceBundle().getText("overtimedeleted"),t=sap.ui.getCore().byId("ld_tbl_overtimeoverview");this.OvertimeDirty=!1,this.toggleEnabledButtons("overtime",-1),this.fillOvertimeTable(),s.show(e),t.setBusy(!1)},destroyOvertimeCreateDialog:function(){this._oOvertimeDialog.destroy(),this._oOvertimeDialog=null},onCloseOvertimeDialog:function(){this._oOvertimeDialog.close()},checkComment:function(){var e=sap.ui.getCore().byId("ld_select_comment_overtime");sap.ui.getCore().byId("ld_inp_comment_overtime").setRequired("SONST"==e.getSelectedKey())},checkCommentAbsenceReason:function(){var e=sap.ui.getCore().byId("ld_select_subty_reason").getSelectedItem().getBindingContext().getObject(),t=sap.ui.getCore().byId("ld_inp_subty_reason");t.setVisible(!0),t.setRequired(e.TextRequired)},clearOvertimeInput:function(){this.OvertimeDirty=!1;var e=sap.ui.getCore().byId("ld_dp_begda_overtime"),t=sap.ui.getCore().byId("ld_dp_endda_overtime");sap.ui.getCore().byId("ld_dp_currentDate")&&(e.setValue(sap.ui.getCore().byId("ld_dp_currentDate").getValue()),t.setValue(sap.ui.getCore().byId("ld_dp_currentDate").getValue())),sap.ui.getCore().byId("ld_tp_beguz_overtime").setValue(),sap.ui.getCore().byId("ld_tp_enduz_overtime").setValue();var a=sap.ui.getCore().byId("ld_select_subty_overtime");a.setSelectedKey(),a.setEnabled(!0),sap.ui.getCore().byId("ld_select_versl_overtime").setSelectedKey(),sap.ui.getCore().byId("ld_inp_amount_overtime").setValue();var i=sap.ui.getCore().byId("ld_select_comment_overtime");i.setSelectedKey();var s=sap.ui.getCore().byId("ld_inp_comment_overtime");s.setRequired("SONST"==i.getSelectedKey()),s.setValue()},onOvertimeEntrySelect:function(e){this.OvertimeDirty=!0;var t=sap.ui.getCore().byId("ld_tbl_overtimeoverview").getFirstVisibleRow();if(-1!=e.getSource().getSelectedIndex()){var a=sap.ui.getCore().byId("ld_dp_begda_overtime"),i=sap.ui.getCore().byId("ld_dp_endda_overtime"),s=sap.ui.getCore().byId("ld_tp_beguz_overtime"),o=sap.ui.getCore().byId("ld_tp_enduz_overtime"),n=sap.ui.getCore().byId("ld_select_subty_overtime"),r=sap.ui.getCore().byId("ld_select_versl_overtime"),l=sap.ui.getCore().byId("ld_select_comment_overtime"),d=sap.ui.getCore().byId("ld_inp_amount_overtime"),u=sap.ui.getCore().byId("ld_inp_comment_overtime"),g=e.getParameter("rowIndex");0!=t&&(g-=t);var p=e.getSource().getRows()[g].getCells()[0].getText(),c=e.getSource().getRows()[g].getCells()[1].getText(),m=e.getSource().getRows()[g].getCells()[2].getText(),h=e.getSource().getRows()[g].getCells()[3].getText(),y=e.getSource().getRows()[g].getCells()[4].getText(),b=e.getSource().getRows()[g].getCells()[5].getText(),_=e.getSource().getRows()[g].getCells()[6].getText().replace(",",".");a.setDateValue(new Date(m.substr(6,4),m.substr(3,2)-1,m.substr(0,2))),i.setDateValue(new Date(h.substr(6,4),h.substr(3,2)-1,h.substr(0,2))),s.setValue(y),o.setValue(b),d.setValue(_);for(var C=0;C<n.getItems().length;C++)if(n.getItems()[C].getText()==p){n.setSelectedKey(n.getItems()[C].getKey()),n.setEnabled(!1);break}for(C=0;C<r.getItems().length;C++)if(r.getItems()[C].getText()==c){r.setSelectedKey(r.getItems()[C].getKey());break}l.setSelectedKey(e.getSource().getContextByIndex(g).getProperty("CommentKey")),u.setValue(e.getSource().getContextByIndex(g).getProperty("Comment")),u.setRequired("SONST"==l.getSelectedKey())}else this.clearOvertimeInput();var f=!1;""==p&&(f=!0),this.toggleEnabledButtons("overtime",e.getSource().getSelectedIndex(),f)},onCancelOvertimeOverview:function(){this.clearOvertimeInput(),this.OvertimeDirty=!1,sap.ui.getCore().byId("ld_tbl_overtimeoverview").setSelectionMode("Single")},prepareCICO:function(e){this._oCicoDialog||(this._oCicoDialog=sap.ui.xmlfragment("MIND2PEP_PLANNER.fragments.CicoCreate",this,{refreshAfterChange:!0}),this._oCicoDialog.attachAfterClose(this.destroyCicoDialog.bind(this)),this.getView().addDependent(this._oCicoDialog));var t=new Date;t.setHours(12),sap.ui.getCore().byId("ld_dp_date").setDateValue(t);var a=sap.ui.getCore().byId("ld_form");a.setBusyIndicatorDelay(0),a.setBusy(!0),this._oCicoDialog.open(),this._oCicoDialog.setBusyIndicatorDelay(0),this._oCicoDialog.setBusy(!0),this._oCicoDialog.addCustomData(new sap.ui.core.CustomData({key:"UnitKey",value:e}));var i=new sap.ui.model.odata.v2.ODataModel("/sap/opu/odata/MIND2/PEP_YEAR_SRV",{refreshAfterChange:!0});this.bindEmployeeSet(i,e),this.getTimeEventSet(e),this._oCicoDialog.setBusy(!1),a.setBusy(!1)},onCicoEntrySelect:function(e){if(-1!=e.getSource().getSelectedIndex()){var t=sap.ui.getCore().byId("ld_select_timeevent"),a=e.getSource().getContextByIndex(e.getSource().getSelectedIndex()),i=sap.ui.getCore().byId("ld_dp_date"),s=sap.ui.getCore().byId("ld_tp_uz"),o=60*new Date(0).getTimezoneOffset()*1e3,n=sap.ui.core.format.DateFormat.getDateInstance({pattern:"HH:mm:ss"});i.setDateValue(a.getProperty().Ldate),s.setValue(n.format(new Date(a.getProperty().Ltime.ms+o))),sap.ui.getCore().byId("chb_cico_day").setSelected(a.getProperty().Prev),sap.ui.getCore().byId("ld_inp_aufnr")&&(sap.ui.getCore().byId("ld_inp_aufnr").setValue(a.getProperty().Aufnr),sap.ui.getCore().byId("ld_inp_matnr").setValue(a.getProperty().Matnr),sap.ui.getCore().byId("ld_inp_zulage").setValue(a.getProperty().Zulage),sap.ui.getCore().byId("ld_inp_kostenst").setValue(a.getProperty().Kostenst));for(var r=0;r<t.getItems().length;r++)if(t.getItems()[r].getText()==a.getProperty().TimeeventText){t.setSelectedKey(t.getItems()[r].getKey());break}}else this.clearCicoInput();this.toggleEnabledButtons("cico",e.getSource().getSelectedIndex())},prepareSHIFTSUB:function(e){this._oShiftSubstitutionDialog||(this._oShiftSubstitutionDialog=sap.ui.xmlfragment("MIND2PEP_PLANNER.fragments.ShiftSubstitution",this,{refreshAfterChange:!0}),this._oShiftSubstitutionDialog.attachAfterClose(this.destroyShiftSubstitutionDialog.bind(this)),this.getView().addDependent(this._oShiftSubstitutionDialog),this._oShiftSubstitutionDialog.open()),this._oShiftSubstitutionDialog.addCustomData(new sap.ui.core.CustomData({key:"UnitKey",value:e}));var t=sap.ui.getCore().byId("ld_select_empfrom"),a=sap.ui.getCore().byId("ld_select_empto");this.bindEmployeesToSelect(t,e),this.bindEmployeesToSelect(a,e)},onSelectShiftSubstitutionShift:function(e){sap.ui.getCore().byId("chb_substShiftsSubty").setEnabled(e.getSource().getSelected())},onSaveShiftSubst:function(){var e=this.getView().getModel(),t=sap.ui.getCore().byId("ld_dp_startDate"),a=sap.ui.getCore().byId("ld_dp_endDate"),i=t.getDateValue(),o=a.getDateValue();if(i&&o){var n=sap.ui.getCore().byId("ld_select_empfrom"),l=sap.ui.getCore().byId("ld_select_empto"),d=r.getCustomDataValue(this._oShiftSubstitutionDialog.getAggregation("customData"),"UnitKey"),u={};if(this._oShiftSubstitutionDialog.setBusy(!0),t.setValueState(sap.ui.core.ValueState.None),a.setValueState(sap.ui.core.ValueState.None),i.setHours(12),o.setHours(12),u.OrigEmp=n.getSelectedKey(),u.NewEmp=l.getSelectedKey(),u.Begda=i,u.Endda=o,u.UnitKey=d,this.isFeatureEnabled("SUBSTONLY"))u.Subty="07",u.SubstShift=!0;else{var g=sap.ui.getCore().byId("chb_substUnit"),p=sap.ui.getCore().byId("chb_substShifts"),c=sap.ui.getCore().byId("chb_substShiftsSubty");u.SubstQual=g.getSelected(),u.SubstShift=p.getSelected(),c.getVisible()&&(c.getSelected()?u.Subty="07":u.Subty="02")}e.create("/empSubstitutionSet",u,{success:function(){this._oShiftSubstitutionDialog.setBusy(!1);var e=this.getView().getModel("i18n").getResourceBundle().getText("shiftsubsuccess");s.show(e)}.bind(this),error:function(){this._oShiftSubstitutionDialog.setBusy(!1)}.bind(this)})}else t.setValueState(sap.ui.core.ValueState.Error),a.setValueState(sap.ui.core.ValueState.Error)},bindEmployeesToSelect:function(e,t){var a=new sap.ui.model.odata.v2.ODataModel("/sap/opu/odata/MIND2/PEP_YEAR_SRV",{refreshAfterChange:!0}),i=new sap.ui.core.Item({text:"{Name}",key:"{EmpId}"}),s=new sap.ui.model.Filter("UnitKey",sap.ui.model.FilterOperator.EQ,t);e.setModel(a),e.bindItems({path:"/EmployeeSet",template:i,filters:[s]})},onSaveCyclicLeave:function(e){var t=this.buildCyclicLeave(),a=sap.ui.getCore().byId("ld_tbl_cyclicleaveoverview"),i=this.getView().getModel();a.setBusy(!0),t.hasOwnProperty("Pernr")?i.create("/cyclicLeaveSet",t,{success:function(){this.clearCyclicLeavePopup();var e=this.getView().getModel("i18n").getResourceBundle().getText("saved");a.setBusy(!1),s.show(e)}.bind(this),error:function(e){a.setBusy(!1),this.createError(e)}.bind(this)}):a.setBusy(!1)},onUpdateCyclicLeave:function(e){var t=this.buildCyclicLeave();if(t){var a=sap.ui.getCore().byId("ld_tbl_cyclicleaveoverview"),i=a.getSelectedContexts()[0];t.Id=a.getModel().getProperty("Id",i),a.setBusy(!0),this.getView().getModel().update(i.sPath,t,{refreshAfterChange:!0,success:function(){this.fillCyclicLeaveTable(),this.clearCyclicLeavePopup();var e=this.getView().getModel("i18n").getResourceBundle().getText("saved");a.setBusy(!1),s.show(e)}.bind(this),error:function(e){a.setBusy(!1),this.createError(e)}.bind(this)})}},onDeleteCyclicLeave:function(e){var t=sap.ui.getCore().byId("ld_tbl_cyclicleaveoverview");if(0!==t.getSelectedItems().length){var a=t.getSelectedContexts()[0];t.setBusy(!0),this.getView().getModel().remove(a.sPath,{success:function(){this.fillCyclicLeaveTable(),this.clearCyclicLeavePopup();var e=this.getView().getModel("i18n").getResourceBundle().getText("cyclicleavedelete");t.setBusy(!1),s.show(e)}.bind(this),error:function(e){t.setBusy(!1),this.createError(e)}.bind(this)})}},buildCyclicLeave:function(){var e={},t=sap.ui.getCore().byId("rb_daily"),a=sap.ui.getCore().byId("rb_weekly"),i=sap.ui.getCore().byId("rb_monthly"),o=t.getSelected(),n=a.getSelected(),l=i.getSelected(),d=sap.ui.getCore().byId("ld_select_emp"),u=sap.ui.getCore().byId("cl_select_cyclic_event"),g=sap.ui.core.format.DateFormat.getDateInstance({pattern:"PTHH\'H\'mm\'M\'ss\'S\'"}),p=!1,c=u.getSelectedItem().getBindingContext(),m=r.getCustomDataValue(this._oCyclicLeaveDialog.getAggregation("customData"),"UnitKey"),h=sap.ui.getCore().byId("ld_tp_beguz_leave"),y=sap.ui.getCore().byId("ld_tp_enduz_leave");if(h.getVisible()){var b=h.getDateValue(),_=y.getDateValue();if(b&&_){var C=g.format(new Date(b)),f=g.format(new Date(_));e.BeginTime=C,e.EndTime=f}}if(e.Pernr=d.getSelectedKey(),e.Subty=c.getProperty("Subty"),e.SubtyText=c.getProperty("SubtyText"),e.Infty=c.getProperty("Infty"),e.UnitKey=m,e.Tprog=c.getProperty("Tprog"),e.FeatureKey=c.getProperty("FeatureKey"),o){if(e.Type="1",sap.ui.getCore().byId("rb_daily_every").getSelected()){var D=sap.ui.getCore().byId("inp_daily_days");e.DAmountDays=parseInt(D.getValue()),e.DAmountDays?(p=!0,D.setValueState(sap.ui.core.ValueState.None)):D.setValueState(sap.ui.core.ValueState.Error)}}else if(n)e.Type="2",e.WEveryXWeeks=parseInt(sap.ui.getCore().byId("inp_weekly_everyxweeks").getValue()),e.WEveryXWeeks||(e.WEveryXWeeks=1),this.isFeatureEnabled("CYCCUSTBT1")&&(e.CustomKey1=sap.ui.getCore().byId("chb_free_days").getSelected()),e.Monday=sap.ui.getCore().byId("chb_monday").getSelected(),e.Tuesday=sap.ui.getCore().byId("chb_tuesday").getSelected(),e.Wednesday=sap.ui.getCore().byId("chb_wednesday").getSelected(),e.Thursday=sap.ui.getCore().byId("chb_thursday").getSelected(),e.Friday=sap.ui.getCore().byId("chb_friday").getSelected(),e.Saturday=sap.ui.getCore().byId("chb_saturday").getSelected(),e.Sunday=sap.ui.getCore().byId("chb_sunday").getSelected(),e.WEveryXWeeks&&(e.Monday||e.Tuesday||e.Wednesday||e.Thursday||e.Friday||e.Saturday||e.Sunday)?(p=!0,sap.ui.getCore().byId("inp_weekly_everyxweeks").setValueState(sap.ui.core.ValueState.None),sap.ui.getCore().byId("chb_monday").setValueState(sap.ui.core.ValueState.None),sap.ui.getCore().byId("chb_tuesday").setValueState(sap.ui.core.ValueState.None),sap.ui.getCore().byId("chb_wednesday").setValueState(sap.ui.core.ValueState.None),sap.ui.getCore().byId("chb_thursday").setValueState(sap.ui.core.ValueState.None),sap.ui.getCore().byId("chb_friday").setValueState(sap.ui.core.ValueState.None),sap.ui.getCore().byId("chb_saturday").setValueState(sap.ui.core.ValueState.None),sap.ui.getCore().byId("chb_sunday").setValueState(sap.ui.core.ValueState.None)):(sap.ui.getCore().byId("inp_weekly_everyxweeks").setValueState(sap.ui.core.ValueState.Error),sap.ui.getCore().byId("chb_monday").setValueState(sap.ui.core.ValueState.Error),sap.ui.getCore().byId("chb_tuesday").setValueState(sap.ui.core.ValueState.Error),sap.ui.getCore().byId("chb_wednesday").setValueState(sap.ui.core.ValueState.Error),sap.ui.getCore().byId("chb_thursday").setValueState(sap.ui.core.ValueState.Error),sap.ui.getCore().byId("chb_friday").setValueState(sap.ui.core.ValueState.Error),sap.ui.getCore().byId("chb_saturday").setValueState(sap.ui.core.ValueState.Error),sap.ui.getCore().byId("chb_sunday").setValueState(sap.ui.core.ValueState.Error));else if(l){e.Type="3";var S=sap.ui.getCore().byId("rb_month_day"),v=sap.ui.getCore().byId("rb_month_weekday"),I=S.getSelected(),w=v.getSelected();if(I){var V=sap.ui.getCore().byId("inp_month_day_day");if(parseInt(V.getValue())>28){var E=this.getView().getModel("i18n").getResourceBundle().getText("over28");s.show(E)}e.MEveryXDay=parseInt(sap.ui.getCore().byId("inp_month_day_day").getValue()),e.MEveryXMonth=parseInt(sap.ui.getCore().byId("inp_month_day_month").getValue()),e.MEveryXDay&&e.MEveryXMonth?(p=!0,sap.ui.getCore().byId("inp_month_day_day").setValueState(sap.ui.core.ValueState.None),sap.ui.getCore().byId("inp_month_day_month").setValueState(sap.ui.core.ValueState.None)):(sap.ui.getCore().byId("inp_month_day_day").setValueState(sap.ui.core.ValueState.Error),sap.ui.getCore().byId("inp_month_day_month").setValueState(sap.ui.core.ValueState.Error))}else w&&(e.MRepeatQuantity=sap.ui.getCore().byId("sel_month_weekday_week").getValue(),e.MRepeatWeekday=sap.ui.getCore().byId("sel_month_weekday_day").getValue(),e.MEveryXMonth=parseInt(sap.ui.getCore().byId("sel_month_weekday_month").getValue()),e.MRepeatQuantity&&e.MRepeatWeekday&&e.MEveryXMonth?(p=!0,sap.ui.getCore().byId("sel_month_weekday_week").setValueState(sap.ui.core.ValueState.None),sap.ui.getCore().byId("sel_month_weekday_day").setValueState(sap.ui.core.ValueState.None),sap.ui.getCore().byId("sel_month_weekday_month").setValueState(sap.ui.core.ValueState.None)):(sap.ui.getCore().byId("sel_month_weekday_week").setValueState(sap.ui.core.ValueState.Error),sap.ui.getCore().byId("sel_month_weekday_day").setValueState(sap.ui.core.ValueState.Error),sap.ui.getCore().byId("sel_month_weekday_month").setValueState(sap.ui.core.ValueState.Error)))}var T=sap.ui.getCore().byId("ld_dp_begda_leave"),P=sap.ui.getCore().byId("ld_dp_endda_leave"),M=T.getDateValue(),B=P.getDateValue();return M&&B&&M<=B?(M.setHours(12),B.setHours(12),T.setValueState(sap.ui.core.ValueState.None),P.setValueState(sap.ui.core.ValueState.None),e.BeginDate=M,e.EndDate=B):(T.setValueState(sap.ui.core.ValueState.Error),P.setValueState(sap.ui.core.ValueState.Error),p=!1),p?e:{}},onCyclicLeaveEntrySelect:function(e){var t=e.getSource().getSelectedContexts()[0],a=e.getSource().getModel();switch(a.getProperty("Type",t)){case"1":sap.ui.getCore().byId("rb_daily").setSelected(!0),sap.ui.getCore().byId("rb_weekly").setSelected(!1),sap.ui.getCore().byId("rb_monthly").setSelected(!1),sap.ui.getCore().byId("rb_daily_every").setSelected(!0),sap.ui.getCore().byId("inp_daily_days").setValue(a.getProperty("DAmountDays",t));break;case"2":sap.ui.getCore().byId("rb_daily").setSelected(!1),sap.ui.getCore().byId("rb_weekly").setSelected(!0),sap.ui.getCore().byId("rb_monthly").setSelected(!1),sap.ui.getCore().byId("inp_weekly_everyxweeks").setValue(a.getProperty("WEveryXWeeks",t)),!0===a.getProperty("CustomKey1",t)?(sap.ui.getCore().byId("chb_free_days").setSelected(!0),sap.ui.getCore().byId("chb_free_days").setEnabled(!1),sap.ui.getCore().byId("l_weekly_everyxweeks").setVisible(!1),sap.ui.getCore().byId("inp_weekly_everyxweeks").setVisible(!1),sap.ui.getCore().byId("inp_weekly_everyxweeks").setValue(1)):(sap.ui.getCore().byId("chb_free_days").setVisible(!1),sap.ui.getCore().byId("l_weekly_everyxweeks").setVisible(!0),sap.ui.getCore().byId("inp_weekly_everyxweeks").setVisible(!0)),sap.ui.getCore().byId("chb_monday").setSelected(a.getProperty("Monday",t)),sap.ui.getCore().byId("chb_tuesday").setSelected(a.getProperty("Tuesday",t)),sap.ui.getCore().byId("chb_wednesday").setSelected(a.getProperty("Wednesday",t)),sap.ui.getCore().byId("chb_thursday").setSelected(a.getProperty("Thursday",t)),sap.ui.getCore().byId("chb_friday").setSelected(a.getProperty("Friday",t)),sap.ui.getCore().byId("chb_saturday").setSelected(a.getProperty("Saturday",t)),sap.ui.getCore().byId("chb_sunday").setSelected(a.getProperty("Sunday",t));break;case"3":sap.ui.getCore().byId("rb_daily").setSelected(!1),sap.ui.getCore().byId("rb_weekly").setSelected(!1),sap.ui.getCore().byId("rb_monthly").setSelected(!0),a.getProperty("MEveryXDay",t)>0?(sap.ui.getCore().byId("rb_month_day").setSelected(!0),sap.ui.getCore().byId("rb_month_weekday").setSelected(!1),sap.ui.getCore().byId("inp_month_day_day").setValue(a.getProperty("MEveryXDay",t)),sap.ui.getCore().byId("inp_month_day_month").setValue(a.getProperty("MEveryXMonth",t))):"3"===a.getProperty("Type",t)&&(sap.ui.getCore().byId("rb_month_day").setSelected(!1),sap.ui.getCore().byId("rb_month_weekday").setSelected(!0),sap.ui.getCore().byId("sel_month_weekday_week").setSelectedKey(a.getProperty("MRepeatQuantity",t)),sap.ui.getCore().byId("sel_month_weekday_day").setSelectedKey(a.getProperty("MRepeatWeekday",t)),sap.ui.getCore().byId("sel_month_weekday_month").setValue(a.getProperty("MEveryXMonth",t)))}sap.ui.getCore().byId("cl_select_cyclic_event").setSelectedKey(a.getProperty("SubtyId",t)),this.checkTimeVisibility(),sap.ui.getCore().byId("ld_tp_beguz_leave").setValue(this.msToTime(t.getObject().BeginTime.ms)),sap.ui.getCore().byId("ld_tp_enduz_leave").setValue(this.msToTime(t.getObject().EndTime.ms)),sap.ui.getCore().byId("ld_dp_begda_leave").setDateValue(a.getProperty("BeginDate",t)),sap.ui.getCore().byId("ld_dp_endda_leave").setDateValue(a.getProperty("EndDate",t)),sap.ui.getCore().byId("btn_cyclicleaveSave").setEnabled(!1),sap.ui.getCore().byId("btn_cyclicleaveEdit").setEnabled(!0),sap.ui.getCore().byId("btn_cyclicleaveCancel").setEnabled(!0),this.showCyclicLeavePanel()},clearCyclicLeavePopup:function(){sap.ui.getCore().byId("rb_daily").setSelected(!0),sap.ui.getCore().byId("rb_weekly").setSelected(!1),sap.ui.getCore().byId("rb_monthly").setSelected(!1),sap.ui.getCore().byId("ld_tp_beguz_leave").setValue(""),sap.ui.getCore().byId("ld_tp_enduz_leave").setValue(""),sap.ui.getCore().byId("rb_daily_every").setSelected(!0),sap.ui.getCore().byId("inp_daily_days").setValue(""),sap.ui.getCore().byId("rb_month_day").setSelected(!0),sap.ui.getCore().byId("rb_month_weekday").setSelected(!1),sap.ui.getCore().byId("inp_month_day_day").setValue(""),sap.ui.getCore().byId("inp_month_day_month").setValue(""),sap.ui.getCore().byId("ld_dp_begda_leave").setValue(""),sap.ui.getCore().byId("ld_dp_endda_leave").setValue(""),sap.ui.getCore().byId("inp_weekly_everyxweeks").setValue(""),sap.ui.getCore().byId("l_weekly_everyxweeks").setVisible(!0),sap.ui.getCore().byId("inp_weekly_everyxweeks").setVisible(!0),sap.ui.getCore().byId("chb_free_days").setEnabled(!0),sap.ui.getCore().byId("chb_free_days").setSelected(!1),sap.ui.getCore().byId("chb_monday").setSelected(!1),sap.ui.getCore().byId("chb_tuesday").setSelected(!1),sap.ui.getCore().byId("chb_wednesday").setSelected(!1),sap.ui.getCore().byId("chb_thursday").setSelected(!1),sap.ui.getCore().byId("chb_friday").setSelected(!1),sap.ui.getCore().byId("chb_saturday").setSelected(!1),sap.ui.getCore().byId("chb_sunday").setSelected(!1),sap.ui.getCore().byId("sel_month_weekday_week").setSelectedKey("1"),sap.ui.getCore().byId("sel_month_weekday_day").setSelectedKey("1"),sap.ui.getCore().byId("sel_month_weekday_month").setValue(""),sap.ui.getCore().byId("ld_tbl_cyclicleaveoverview").removeSelections(),sap.ui.getCore().byId("btn_cyclicleaveSave").setEnabled(!0),sap.ui.getCore().byId("btn_cyclicleaveEdit").setEnabled(!1),sap.ui.getCore().byId("btn_cyclicleaveCancel").setEnabled(!1),this.showCyclicLeavePanel()},onEmployeeCyclicLeaveSelect:function(){this.updateSubtyInCyclicLeave()},prepareSORTEMP:function(e){this._oEmployeeSortDialog||(this._oEmployeeSortDialog=sap.ui.xmlfragment("MIND2PEP_PLANNER.fragments.EmployeeSort",this,{refreshAfterChange:!0}),this.getView().addDependent(this._oEmployeeSortDialog),this._oEmployeeSortDialog.open(),this._oEmployeeSortDialog.attachAfterClose(this.destroyEmployeeSortDialog.bind(this)),this._oEmployeeSortDialog.setBusyIndicatorDelay(0),this._oEmployeeSortDialog.setBusy(!0)),this._oEmployeeSortDialog.addCustomData(new sap.ui.core.CustomData({key:"UnitKey",value:e}));var t=this.getView().getModel(),a=new sap.ui.model.Filter("UnitKey",sap.ui.model.FilterOperator.EQ,e);t.read("/empSortSet",{filters:[a],success:function(e){var t=new sap.ui.model.json.JSONModel(e.results);sap.ui.getCore().byId("idSortEmp").setModel(t,"empList")}}),this._oEmployeeSortDialog.setBusy(!1)},onEmployeeSortDrop:function(e){var t=e.getParameter("draggedControl"),a=e.getParameter("droppedControl"),i=e.getParameter("dropPosition"),s=t.getModel("empList").oData,o=parseInt(t.getBindingContextPath().replace("/","")),n=parseInt(a.getBindingContextPath().replace("/",""));"After"===i&&(n+=1),s.splice(n,0,s.splice(o,1)[0]),t.getModel("empList").setData(s)},saveEmpSort:function(){for(var e=this.getView().getModel(),t=sap.ui.getCore().byId("idSortEmp").getItems(),a={},i=r.getCustomDataValue(this._oEmployeeSortDialog.getAggregation("customData"),"UnitKey"),o=0;o<t.length;o++){a={};var n=(a=t[o].getBindingContext("empList").getObject()).SortNumber.length;a.UnitKey=i,a.SortNumber=parseInt(t[o].getBindingContextPath().replace("/",""))+1,a.SortNumber=a.SortNumber.toFixed(),n-=a.SortNumber.length;for(var l=a.SortNumber.split(""),d=0;d<n;d++)l.unshift("0");a.SortNumber=l.join(""),e.create("/empSortSet",a)}var u=this.getView().getModel("i18n").getResourceBundle().getText("sortsaved");s.show(u)},onChangeEmpSort:function(e){var t=sap.ui.getCore().byId("li_employeesort"),a=e.getParameter("dropPosition"),i=e.getParameter("draggedControl"),s=e.getParameter("droppedControl"),o=t.indexOfItem(i),n=i.getBindingContext(),r=t.indexOfItem(s);"Before"===a?o<r&&r--:"After"===a&&o>r&&r++;for(var l=t.getAggregation("items"),d=[],u=0;u<l.length;u++)u<o&&u<r||u>o&&u>r?d[u]=l[u]:u==o?d[r]=l[u]:u<r&&u>o&&o<r?d[u-1]=l[u]:u>r&&u<o&&o>r?d[u+1]=l[u]:u==r&&o<r?d[u-1]=l[u]:u==r&&o>r&&(d[u+1]=l[u]);new sap.m.ObjectListItem({title:"{EmpId} - {Name}",number:"{SortNumber}"});t.getModel().setProperty("EmpId",10,n);new sap.ui.model.Sorter("EmpId"),t.getBinding("items")},closeSortEmp:function(e){this._oEmployeeSortDialog.close();var t=r.getCustomDataValue(this._oEmployeeSortDialog.getAggregation("customData"),"UnitKey");this.onRefreshUnit(t)},prepareNEWSLET:function(e){this._oNewsletterDialog||(this._oNewsletterDialog=sap.ui.xmlfragment("MIND2PEP_PLANNER.fragments.Newsletter",this,{refreshAfterChange:!0}),this.getView().addDependent(this._oNewsletterDialog),this._oNewsletterDialog.setModel(new sap.ui.model.json.JSONModel,"NewsletterModel"),this._oNewsletterDialog.getModel("NewsletterModel").setProperty("/RadioIndex",0),this._oNewsletterDialog.open(),this._oNewsletterDialog.attachAfterClose(this.destroyNewsletterDialog.bind(this))),this._oNewsletterDialog.addCustomData(new sap.ui.core.CustomData({key:"UnitKey",value:e}));var t=this.getSelectedBegda(),a=this.getSelectedEndda(),i=new sap.ui.model.Filter("UnitKey",sap.ui.model.FilterOperator.EQ,e),s=new sap.ui.model.Filter("Begda",sap.ui.model.FilterOperator.EQ,t),o=new sap.ui.model.Filter("Endda",sap.ui.model.FilterOperator.EQ,a),n=sap.ui.getCore().byId("vb_mails");n.getBinding("items").filter([i,s,o]),n.getBinding("items").isSuspended()&&n.getBinding("items").resume(),this.addMailAdressToNewsletter()},addMailAdressToNewsletter:function(){var e=sap.ui.getCore().byId("sf_newmails"),t=e.getContent(),a=0;if(t.length>0){var i=t[t.length-1];e.removeContent(t.length-1),i.destroy(),a=t.length}var s=new sap.m.Input("inp_addMail_"+(a+1),{type:"Email",layoutData:new sap.ui.layout.GridData({span:"XL11 L11 M11 S11"})});e.addContent(s);var o=new sap.m.Button("btn_addMail_"+(a+1),{icon:"sap-icon://add",press:this.addMailAdressToNewsletter.bind(this),layoutData:new sap.ui.layout.GridData({span:"XL1 L1 M1 S1"})});e.addContent(o)},onRemoveNewsletter:function(){var e=sap.ui.getCore().byId("vb_mails"),t=this.getView().getModel(),a=!1;e.getSelectedItems().forEach(function(e){var i=e.getBindingContext();i.getProperty("IsCustomMail")?t.remove(i.getPath()):a=!0}),a&&sap.m.MessageToast.show(this.getView().getModel("i18n").getResourceBundle().getText("NonDeletableNewsletterAlert"))},sendNewsletter:function(e,t){for(var a,i,o=this.getView().getModel(),n=sap.ui.getCore().byId("sf_newmails"),l={},d=this._oNewsletterDialog.getModel("NewsletterModel"),u=r.getCustomDataValue(this._oNewsletterDialog.getAggregation("customData"),"UnitKey"),g=/^\\w+[\\w-+\\.]*\\@\\w+([-\\.]\\w+)*\\.[a-zA-Z]{2,}$/,p=0;p<n.getContent().length;p++)if((a=n.getContent()[p]).getId().match("^inp")){if(!(i=a.getValue()))break;if(!g.test(i))return void a.setValueState("Error");a.setValueState("None")}var c=sap.ui.getCore().byId("rbg_timeFrame").getSelectedButton(),m=3===d.getProperty("/RadioIndex")&&d.getProperty("/CustomWeekCount")||r.getCustomDataValue(c.getCustomData(),"weeks"),h=new Date;h=this.getSelectedBegda();for(p=0;p<m;p++)h.setDate(h.getDate()+7);if(h.setDate(h.getDate()-1),1==t){for(var y=0;y<n.getContent().length;y++)(a=n.getContent()[y]).getId().match("^inp")&&((l={}).Begda=new Date,l.Endda=h,l.Mail=n.getContent()[y].getValue(),l.UnitKey=u,l.IsNewMail=!0,o.create("/newsletterSet",l,{groupId:y}));for(var b=sap.ui.getCore().byId("vb_mails").getItems(),_=0;_<b.length;_++)l={},(l=b[_].getBindingContext().getObject()).Endda=h,b[_].getSelected()&&o.create("/newsletterSet",l,{groupId:_});var C=this.getView().getModel("i18n").getResourceBundle().getText("plansent");s.show(C),this._oNewsletterDialog.setBusy(!0),this.closeNewsletterPopUp()}else this.checkOpenMsgBeforeExport(new Date,h,"sendNewsletter",u)},destroyNewsletterDialog:function(){this._oNewsletterDialog.destroy(),this._oNewsletterDialog=null},closeNewsletterPopUp:function(){this._oNewsletterDialog.close()},prepareDEFQUAL:function(e){if(!this._oDefaultQualificationDialog){this._oDefaultQualificationDialog=sap.ui.xmlfragment("MIND2PEP_PLANNER.fragments.ChangeDefaultQualification",this,{refreshAfterChange:!0}),this.getView().addDependent(this._oDefaultQualificationDialog),this._oDefaultQualificationDialog.open(),this._oDefaultQualificationDialog.attachAfterClose(this.destroyDefaultQualificationDialog.bind(this));var t=sap.ui.getCore().byId("ld_dp_cdq_begda");t.setDateValue(this.getSelectedBegda());var a=new Date;t.setMinDate(a),t.getDateValue()<a&&t.setDateValue(a)}this._oDefaultQualificationDialog.addCustomData(new sap.ui.core.CustomData({key:"UnitKey",value:e})),this.bindDefaultQualificationEmployees(e)},bindDefaultQualificationEmployees:function(e){var t=new sap.ui.core.Item({text:"{Name}",key:"{EmpId}"}),a=new sap.ui.model.odata.v2.ODataModel("/sap/opu/odata/MIND2/PEP_YEAR_SRV",{refreshAfterChange:!0}),i=sap.ui.getCore().byId("ld_select_cdq_employee"),s=new sap.ui.model.Filter("UnitKey",sap.ui.model.FilterOperator.EQ,e),o=this.getSelectedBegda(),n=this.getSelectedEndda();o.setUTCDate(o.getDate()),n.setUTCDate(n.getDate());var r=this.getFormattedDate(o),l=this.getFormattedDate(n),d=new sap.ui.model.Filter("Begda",sap.ui.model.FilterOperator.EQ,r),u=new sap.ui.model.Filter("Endda",sap.ui.model.FilterOperator.EQ,l);i.setModel(a),i.bindItems({path:"/EmployeeSet",template:t,filters:[s,d,u],events:{dataReceived:function(){this.bindDefaultQualificationTable(sap.ui.getCore().byId("ld_select_cdq_employee").getAggregation("items")[0].getKey()),this.bindDefaultQualificationQuals(e,sap.ui.getCore().byId("ld_select_cdq_employee").getAggregation("items")[0].getKey())}.bind(this)}})},changeSelectedDefQualEmp:function(e){var t=r.getCustomDataValue(this._oDefaultQualificationDialog.getAggregation("customData"),"UnitKey"),a=e.getParameter("selectedItem").getKey();this.bindDefaultQualificationQuals(t,a),this.bindDefaultQualificationTable(a)},bindDefaultQualificationQuals:function(e,t,a){var i=sap.ui.getCore().byId("ld_select_cdq_qualification"),s=this.getView().getModel();if(this.oCustomizing.PlanHideQKey)var o=new sap.ui.core.Item({text:"{QualText}",key:"{QualId}"});else o=new sap.ui.core.Item({text:"{QualId} - {QualText}",key:"{QualId}"});var n=sap.ui.getCore().byId("ld_dp_cdq_begda").getDateValue();n.setUTCDate(n.getDate());var r=new sap.ui.model.Filter("PlanDate",sap.ui.model.FilterOperator.EQ,n),l=new sap.ui.model.Filter("EmpId",sap.ui.model.FilterOperator.EQ,t),d=new sap.ui.model.Filter("UnitKey",sap.ui.model.FilterOperator.EQ,e);i.setModel(s),i.bindAggregation("items",{path:"/unitDefaultQualsSet",template:o,filters:[d,l,r]})},bindDefaultQualificationTable:function(e){var t=sap.ui.getCore().byId("ld_tbl_cdq_overview"),a=new sap.ui.model.Filter("EmpId",sap.ui.model.FilterOperator.EQ,e),i=this.getView().getModel();t.setBusyIndicatorDelay(0),t.setBusy(!0),t.setModel(i),t.bindAggregation("rows",{path:"/defaultQualSet",filters:[a],events:{dataReceived:function(){t.setBusy(!1)}}})},createDefaultQualification:function(){var e=this.getView().getModel(),t={},a=sap.ui.getCore().byId("ld_select_cdq_employee").getSelectedKey(),i=sap.ui.getCore().byId("ld_dp_cdq_begda"),s=sap.ui.getCore().byId("ld_select_cdq_qualification").getSelectedKey(),o=i.getDateValue(),n=new Date;n.setHours(11),n.setMinutes(0),n.setSeconds(0),o?(o.setHours(12),!o||o<n?i.setValueState(sap.ui.core.ValueState.Error):(i.setValueState(sap.ui.core.ValueState.None),t.Begda=o,t.EmpId=a,t.QualId=s,e.create("/defaultQualSet",t,{success:function(){this.bindDefaultQualificationTable(sap.ui.getCore().byId("ld_select_cdq_employee").getSelectedItem().getBindingContext().getObject().EmpId)}.bind(this)}))):i.setValueState(sap.ui.core.ValueState.Error)},onDefQualEntrySelect:function(e){var t=e.getSource().getSelectedIndex();if(-1!=t){var a=sap.ui.getCore().byId("ld_select_cdq_employee"),i=sap.ui.getCore().byId("ld_dp_cdq_begda"),s=sap.ui.getCore().byId("ld_select_cdq_qualification"),o=e.getSource().getContextByIndex(t);a.setSelectedKey(e.getSource().getModel().getProperty("EmpId",o)),i.setDateValue(e.getSource().getModel().getProperty("Begda",o)),s.setSelectedKey(e.getSource().getModel().getProperty("QualId",o))}},onCloseChangeDefaultQualificationDialog:function(){this._oDefaultQualificationDialog.close()},destroyDefaultQualificationDialog:function(){this._oDefaultQualificationDialog.destroy(),this._oDefaultQualificationDialog=null},setDateOfPickerToToday:function(e){var t=new Date;e.setDateValue(t)},prepareCYCLEAVE:function(e){this._oCyclicLeaveDialog||(this._oCyclicLeaveDialog=sap.ui.xmlfragment("MIND2PEP_PLANNER.fragments.CyclicLeave",this,{refreshAfterChange:!0}),this.getView().addDependent(this._oCyclicLeaveDialog),this._oCyclicLeaveDialog.open(),this._oCyclicLeaveDialog.attachAfterClose(this.destroyCyclicLeaveDialog.bind(this)),this._oCyclicLeaveDialog.setBusyIndicatorDelay(0),this._oCyclicLeaveDialog.setBusy(!0)),this._oCyclicLeaveDialog.addCustomData(new sap.ui.core.CustomData({key:"UnitKey",value:e})),this.showCyclicLeavePanel();var t=sap.ui.getCore().byId("ld_select_emp"),a=new sap.ui.core.Item({text:"{= parseFloat(${EmpId}) } - {Name}",key:"{EmpId}"}),i=new sap.ui.model.Filter("UnitKey",sap.ui.model.FilterOperator.EQ,e),s=new sap.ui.model.odata.v2.ODataModel("/sap/opu/odata/MIND2/PEP_YEAR_SRV",{refreshAfterChange:!1});t.setModel(s),t.bindItems({path:"/EmployeeSet",template:a,filters:[i],events:{dataReceived:function(){t.getItems().length>0&&t.setSelectedItem(t.getItems()[0]),this.updateSubtyInCyclicLeave()}.bind(this)}})},updateSubtyInCyclicLeave:function(){this.getView().getModel("i18n").getResourceBundle();var e=r.getCustomDataValue(this._oCyclicLeaveDialog.getAggregation("customData"),"UnitKey"),a=new sap.ui.model.Filter("UnitKey",sap.ui.model.FilterOperator.EQ,e),i=sap.ui.getCore().byId("ld_select_emp"),s=sap.ui.getCore().byId("cl_select_cyclic_event"),o=new sap.ui.core.Item({text:"{SubtyText}",key:"{Id}",customData:[{Type:"sap.ui.core.CustomData",key:"ganztaegig",value:"{Ganztaegig}"},{Type:"sap.ui.core.CustomData",key:"Infty",value:"{Infty}"},{Type:"sap.ui.core.CustomData",key:"ReasonMand",value:"{ReasonMand}"},{Type:"sap.ui.core.CustomData",key:"TPROG",value:"{Tprog}"},{Type:"sap.ui.core.CustomData",key:"Beguz",value:"{Beguz}"},{Type:"sap.ui.core.CustomData",key:"Enduz",value:"{Enduz}"},{Type:"sap.ui.core.CustomData",key:"TimeEditable",value:"{TimeEditable}"},{Type:"sap.ui.core.CustomData",key:"Subty",value:"{Subty}"},{Type:"sap.ui.core.CustomData",key:"CustomKey1",value:"{CustomKey1}"}]}),n=i.getSelectedKey(),l=new sap.ui.model.Filter("EmpId",sap.ui.model.FilterOperator.EQ,n);s.bindItems({path:"/cyclicTypesSet",template:o,filters:[l,a],events:{dataReceived:function(e){if(0===e.getSource().getContexts().length)t.error(this.getResourceBundleText("no-cyclictypes")),this.onCloseCyclicLeaveDialog();else{var a=e.getSource().getContexts()[0];s.setSelectedKey(a.getProperty("SubtyId")),this.checkTimeVisibility(),this.fillCyclicLeaveTable()}}.bind(this)}})},fillCyclicLeaveTable:function(){var e=this.getView().getModel(),t=sap.ui.getCore().byId("ld_tbl_cyclicleaveoverview"),a=sap.ui.getCore().byId("ld_select_emp").getSelectedKey(),i=r.getCustomDataValue(this._oCyclicLeaveDialog.getAggregation("customData"),"UnitKey"),s=new sap.ui.model.Filter("UnitKey",sap.ui.model.FilterOperator.EQ,i),o=new sap.ui.model.Filter("Pernr",sap.ui.model.FilterOperator.EQ,a),n=sap.ui.getCore().byId("cyclicLeaveTableTemplate");t.setModel(e),t.setBusyIndicatorDelay(0),t.setBusy(!0),t.bindItems({path:"/cyclicLeaveSet",template:n,filters:[o,s],templateShareable:!0,events:{dataReceived:function(){t.setBusy(!1),this._oCyclicLeaveDialog.setBusy(!1)}.bind(this)}})},showCyclicLeavePanel:function(){var e=sap.ui.getCore().byId("rb_daily"),t=sap.ui.getCore().byId("rb_weekly"),a=sap.ui.getCore().byId("rb_monthly"),i=sap.ui.getCore().byId("pnl_daily"),s=sap.ui.getCore().byId("pnl_weekly"),o=sap.ui.getCore().byId("pnl_monthly"),n=e.getSelected(),r=t.getSelected(),l=a.getSelected();i.setVisible(n),s.setVisible(r),o.setVisible(l);var d=new Date,u=sap.ui.getCore().byId("ld_dp_begda_leave"),g=sap.ui.getCore().byId("ld_dp_endda_leave");u.setMaxDate(new Date(d.getFullYear()+1,d.getMonth(),d.getDate())),g.setMaxDate(new Date(d.getFullYear()+1,d.getMonth(),d.getDate()))},openTimeOverviewPopupWrapper:function(e,t){var a,i,s;e?((a=r.getCustomDataValue(e.getSource().getAggregation("customData"),"PlanDate"))||(a=r.getCustomDataValue(e.getSource().getAggregation("customData"),"date")),a="string"==typeof a?parseInt(a):a):a=new Date,e&&((i=r.getCustomDataValue(e.getSource().getAggregation("customData"),"EmpID"))||(i=r.getCustomDataValue(e.getSource().getAggregation("customData"),"empId"))),e?(s=r.getCustomDataValue(e.getSource().getAggregation("customData"),"UnitKey"))||(s=r.getCustomDataValue(e.getSource().getAggregation("customData"),"unityKey")):s=t,i?this.getView().getModel().callFunction("/CheckEmployeeLocked",{method:"GET",urlParameters:{empId:i,planBegda:this.getSelectedBegda(),planEndda:this.getSelectedEndda()},success:function(){this.openTimeOverviewPopup(a,s,i)}.bind(this),error:function(e){var t=JSON.parse(e.responseText).error.innererror.errordetails;r.openConfirmDialog("{i18n>warning}",t[0].message,"{i18n>openanyway}",function(){this.openTimeOverviewPopup(a,s,i)}.bind(this),null,this)}.bind(this)}):this.openTimeOverviewPopup(a,s,i)},openTimeOverviewPopup:function(e,t,a){if(this.isFeatureEnabled("TO_MAIN"))return g.setController(this),void g.openTimeOverviewPopup(e,t,a);if(!this._oTimesOverviewDialog){this._oTimesOverviewDialog=sap.ui.xmlfragment("MIND2PEP_PLANNER.fragments.TimesOverview",this,{refreshAfterChange:!0}),this._oTimesOverviewDialog.attachAfterClose(this.destroyTimeOverviewPopup.bind(this)),this.getView().addDependent(this._oTimesOverviewDialog);for(var i,s,o=this._oTimesOverviewDialog.getAggregation("content")[0].getSections(),r=0;r<o.length;r++)i=o[r].getId(),s=n.getPanelVisibility(i,this),o[r].setVisible(s);this.isFeatureEnabled("TO_OVERT_F")&&sap.ui.getCore().byId("ld_inp_amount_overtime").setVisible(!0),this.isFeatureEnabled("TO_INTEGOT")&&(sap.ui.getCore().byId("ld_inp_integratedOT").setVisible(!0),sap.ui.getCore().byId("ld_lbl_integratedOT").setVisible(!0)),this.isFeatureEnabled("OT_AMOUNT")&&sap.ui.getCore().byId("ld_inp_allowanceAmount").setVisible(!0),this.isFeatureEnabled("TO_VTART")&&(sap.ui.getCore().byId("to_shift_select_subtype").setVisible(!0),sap.ui.getCore().byId("chb_voluntary").setVisible(!1)),this.isFeatureEnabled("TO_ABS_REA")&&(sap.ui.getCore().byId("ld_select_subty_reason").setVisible(!0),sap.ui.getCore().byId("ld_inp_subty_reason").setVisible(!0),sap.ui.getCore().byId("columnAbsComment").setVisible(!0),sap.ui.getCore().byId("columnAbsReason").setVisible(!0)),this.isFeatureEnabled("COMMDATE")&&(sap.ui.getCore().byId("lbl_comdat").setVisible(!0),sap.ui.getCore().byId("ld_dp_comdat").setVisible(!0),sap.ui.getCore().byId("ld_tp_comuzeit").setVisible(!0)),this.isFeatureEnabled("TO_LOCKIND")&&sap.ui.getCore().byId("chb_sprps").setVisible(!0)}this._oTimesOverviewDialog.setBusy(!0);var l=e,d=a,u=t;this._oTimesOverviewDialog.open();var p=new sap.ui.model.Filter("SpecialEntry",sap.ui.model.FilterOperator.EQ,!1),c=new sap.ui.model.odata.v2.ODataModel("/sap/opu/odata/MIND2/PEP_YEAR_SRV",{refreshAfterChange:!0}),m=this.getSelectedBegda(),h=this.getSelectedEndda();m.setUTCDate(m.getDate()),h.setUTCDate(h.getDate());var y=this.getFormattedDate(m),b=this.getFormattedDate(h);this._oTimesOverviewDialog.addCustomData(new sap.ui.core.CustomData({key:"UnitKey",value:u}));var _=new sap.ui.model.Filter("Begda",sap.ui.model.FilterOperator.EQ,y),C=new sap.ui.model.Filter("Endda",sap.ui.model.FilterOperator.EQ,b),f=new sap.ui.model.Filter("UnitKey",sap.ui.model.FilterOperator.EQ,u);c.read("/EmployeeSet",{success:function(e){for(var t=sap.ui.getCore().byId("ld_select_emp"),a=e.results,i=0;i<a.length;i++){var s=new sap.ui.core.Item({text:parseInt(a[i].EmpId,10)+" - "+a[i].Name,key:a[i].EmpId}),o=new sap.ui.core.CustomData({key:"UnitKey",value:a[i].UnitKey});s.addCustomData(o),t.addItem(s),a[i].EmpId==d&&(t.setSelectedKey(d),this.onEmployeeChangeTimeOverview(),sap.ui.getCore().byId("ld_dp_currentDate").focus(),this.getAllowanceSet(),this.bindTimeEventTable(),this.bindRptimeMsgTimesOverview())}this._oTimesOverviewDialog.setBusy(!1)}.bind(this),error:function(e){this._oTimesOverviewDialog.setBusy(!1)},filters:[p,f,_,C]}),(l=new Date(l)).setHours(12),sap.ui.getCore().byId("ld_dp_currentDate").setDateValue(l);var D=sap.ui.getCore().byId("inp_calendarWeek"),S=new Array(7);S[0]=this.getResourceBundleText("sunday"),S[1]=this.getResourceBundleText("monday"),S[2]=this.getResourceBundleText("tuesday"),S[3]=this.getResourceBundleText("wednesday"),S[4]=this.getResourceBundleText("thursday"),S[5]=this.getResourceBundleText("friday"),S[6]=this.getResourceBundleText("saturday");var v=S[l.getDay()],I=new Date(l.getTime());I.setUTCDate(I.getUTCDate()+4-(I.getUTCDay()||7));var w=new Date(Date.UTC(l.getUTCFullYear(),0,1)),V="KW "+Math.ceil((I-w)/864e5/7)+" - "+v;D.setValue(V);var E=sap.ui.getCore().byId("ld_dp_date");E&&E.setDateValue(l);var T=sap.ui.getCore().byId("ld_dp_begda_leave");T&&T.setDateValue(l);var P=sap.ui.getCore().byId("ld_dp_endda_leave");P&&P.setDateValue(l);var M=sap.ui.getCore().byId("ld_dp_begda_overtime");M&&M.setDateValue(l);var B=sap.ui.getCore().byId("ld_dp_endda_overtime");B&&B.setDateValue(l),this.getTimeEventSet(u)},destroyTimeOverviewPopup:function(){this._oTimesOverviewDialog.destroy(),this._oTimesOverviewDialog=null,this.ShiftDirty=!1,this.AbsDirty=!1,this.OvertimeDirty=!1,this.CicoDirty=!1,this.AllowDirty=!1},destroyCyclicLeaveDialog:function(){this._oCyclicLeaveDialog.destroy(),this._oCyclicLeaveDialog=null},destroyEmployeeSortDialog:function(){this._oEmployeeSortDialog.destroy(),this._oEmployeeSortDialog=null},onCloseTimeOverviewDialogViaButton:function(e){var t=this.onCloseTimeOverviewDialog(e);t?r.openConfirmDialog("{i18n>areyousure}",t,"{i18n>discard}",this.closeTimeOverviewDialog.bind(this),null,this):this._oTimesOverviewDialog.close()},closeTimeOverviewDialog:function(){this._oTimesOverviewDialog.close()},closeShiftSubstitutionDialog:function(){this._oShiftSubstitutionDialog.close()},destroyShiftSubstitutionDialog:function(){this._oShiftSubstitutionDialog.destroy(),this._oShiftSubstitutionDialog=null},onCloseCyclicLeaveDialog:function(){this._oCyclicLeaveDialog.close()},onCloseTimeOverviewDialog:function(){var e;if(this.ShiftDirty||this.AbsDirty||this.OvertimeDirty||this.CicoDirty||this.AllowDirty){var t=this.getView().getModel("i18n").getResourceBundle();this.ShiftDirty&&(e=t.getText("newchangeshift")),this.AbsDirty&&(e=t.getText("newchangesleave")),this.OvertimeDirty&&(e=t.getText("newchangesovertime")),this.CicoDirty&&(e=t.getText("newchangescico")),this.AllowDirty&&(e=t.getText("newchangesallowance"))}return e},onTimesOverviewOneDayBack:function(){var e=new Date,t=sap.ui.getCore().byId("ld_dp_currentDate"),a=t.getDateValue();e.setTime(a.getTime()-864e5),e.setHours(12),t.setDateValue(e),t.setValueState(sap.ui.core.ValueState.None),t.fireChange(),sap.ui.getCore().byId("ld_dp_date").setDateValue(e),sap.ui.getCore().byId("ld_dp_date").setValueState(sap.ui.core.ValueState.None),this.clearCicoInput(),sap.ui.getCore().byId("ld_dp_begda_leave").setDateValue(e),sap.ui.getCore().byId("ld_dp_endda_leave").setDateValue(e),sap.ui.getCore().byId("ld_dp_begda_leave").setValueState(sap.ui.core.ValueState.None),sap.ui.getCore().byId("ld_dp_endda_leave").setValueState(sap.ui.core.ValueState.None),sap.ui.getCore().byId("ld_dp_begda_overtime").setDateValue(e),sap.ui.getCore().byId("ld_dp_endda_overtime").setDateValue(e),sap.ui.getCore().byId("ld_dp_begda_overtime").setValueState(sap.ui.core.ValueState.None),sap.ui.getCore().byId("ld_dp_endda_overtime").setValueState(sap.ui.core.ValueState.None),sap.ui.getCore().byId("ld_select_subty_reason").getVisible()&&(sap.ui.getCore().byId("ld_select_subty_reason").setSelectedKey(""),sap.ui.getCore().byId("ld_inp_subty_reason").setValue("")),this.getEmpShift(),this.bindTimeEventTable(),this.fillLeaveTable(),this.fillOvertimeTable(),this.getAllowanceSet(),this.getTimeTransfer()},onTimesOverviewOneDayFor:function(){var e=new Date,t=sap.ui.getCore().byId("ld_dp_currentDate"),a=t.getDateValue();e.setTime(a.getTime()+864e5),e.setHours(12),t.setDateValue(e),t.setValueState(sap.ui.core.ValueState.None),t.fireChange(),sap.ui.getCore().byId("ld_dp_date").setDateValue(e),sap.ui.getCore().byId("ld_dp_date").setValueState(sap.ui.core.ValueState.None),this.clearCicoInput(),sap.ui.getCore().byId("ld_dp_begda_leave").setDateValue(e),sap.ui.getCore().byId("ld_dp_endda_leave").setDateValue(e),sap.ui.getCore().byId("ld_dp_begda_leave").setValueState(sap.ui.core.ValueState.None),sap.ui.getCore().byId("ld_dp_endda_leave").setValueState(sap.ui.core.ValueState.None),sap.ui.getCore().byId("ld_dp_begda_overtime").setDateValue(e),sap.ui.getCore().byId("ld_dp_endda_overtime").setDateValue(e),sap.ui.getCore().byId("ld_dp_begda_overtime").setValueState(sap.ui.core.ValueState.None),sap.ui.getCore().byId("ld_dp_endda_overtime").setValueState(sap.ui.core.ValueState.None),sap.ui.getCore().byId("ld_select_subty_reason").getVisible()&&(sap.ui.getCore().byId("ld_select_subty_reason").setSelectedKey(""),sap.ui.getCore().byId("ld_inp_subty_reason").setValue("")),this.getEmpShift(),this.bindTimeEventTable(),this.fillLeaveTable(),this.fillOvertimeTable(),this.getAllowanceSet(),this.getTimeTransfer()},onChangeTimeOverviewDate:function(){var e=sap.ui.getCore().byId("ld_dp_currentDate"),t=e.getDateValue();t.setHours(12),e.setDateValue(t),e.setValueState(sap.ui.core.ValueState.None);var a=sap.ui.getCore().byId("inp_calendarWeek"),i=new Array(7);i[0]=this.getResourceBundleText("sunday"),i[1]=this.getResourceBundleText("monday"),i[2]=this.getResourceBundleText("tuesday"),i[3]=this.getResourceBundleText("wednesday"),i[4]=this.getResourceBundleText("thursday"),i[5]=this.getResourceBundleText("friday"),i[6]=this.getResourceBundleText("saturday");var s=i[t.getDay()],o=new Date(t.getTime());o.setUTCDate(o.getUTCDate()+4-(o.getUTCDay()||7));var n=new Date(Date.UTC(o.getUTCFullYear(),0,1)),r="KW "+Math.ceil((o-n)/864e5/7)+" - "+s;a.setValue(r),sap.ui.getCore().byId("ld_dp_date").setDateValue(t),sap.ui.getCore().byId("ld_dp_date").setValueState(sap.ui.core.ValueState.None),this.clearCicoInput(),sap.ui.getCore().byId("ld_dp_begda_leave").setDateValue(t),sap.ui.getCore().byId("ld_dp_endda_leave").setDateValue(t),sap.ui.getCore().byId("ld_dp_begda_leave").setValueState(sap.ui.core.ValueState.None),sap.ui.getCore().byId("ld_dp_endda_leave").setValueState(sap.ui.core.ValueState.None),sap.ui.getCore().byId("ld_dp_begda_overtime").setDateValue(t),sap.ui.getCore().byId("ld_dp_endda_overtime").setDateValue(t),sap.ui.getCore().byId("ld_dp_begda_overtime").setValueState(sap.ui.core.ValueState.None),sap.ui.getCore().byId("ld_dp_endda_overtime").setValueState(sap.ui.core.ValueState.None),sap.ui.getCore().byId("ld_select_subty_reason").getVisible()&&(sap.ui.getCore().byId("ld_select_subty_reason").setSelectedKey(""),sap.ui.getCore().byId("ld_inp_subty_reason").setValue("")),this.getEmpShift(),this.bindTimeEventTable(),this.fillLeaveTable(),this.fillOvertimeTable(),this.getAllowanceSet()},onTimesOverviewShiftVoluntary:function(){this.ShiftDirty=!0},getAllowanceSet:function(){var e=sap.ui.getCore().byId("ld_tbl_allowanceOverview"),t=this.getView().getModel(),a=sap.ui.getCore().byId("pnl_allowance"),i=sap.ui.getCore().byId("ld_select_Allowance"),s=sap.ui.getCore().byId("ld_inp_allowancePayGroup"),o=sap.ui.getCore().byId("ld_inp_allowanceExtReg"),n=sap.ui.getCore().byId("ld_dp_date").getDateValue();null!==n&&n.setHours(12);var l=sap.ui.core.format.DateFormat.getDateInstance({pattern:"yyyyMMdd"}).format(n),d=new sap.ui.model.Filter("ZDate",sap.ui.model.FilterOperator.EQ,l),u=sap.ui.getCore().byId("ld_select_emp").getSelectedItem(),g=u.getKey(),p=new sap.ui.model.Filter("EmpId",sap.ui.model.FilterOperator.EQ,g);if(!a.getModel("AllowanceModel")){var c=new sap.ui.model.json.JSONModel;a.setModel(c,"AllowanceModel")}var m=u.getCustomData(),h=r.getCustomDataValue(m,"UnitKey"),y=new sap.ui.model.Filter("UnitKey",sap.ui.model.FilterOperator.EQ,h);e.setBusyIndicatorDelay(0),e.setBusy(!0),e.bindRows({path:"/allowanceSet",filters:[p,d],events:{dataReceived:function(){e.setBusy(!1)}}});var b=new sap.ui.core.Item({text:"{AllowText}",key:"{Zulage}"});i.setModel(t),i.bindAggregation("items",{path:"/availAllowShiftSet",template:b,filters:[p,y],events:{dataReceived:function(){setTimeout(function(){a.getModel("AllowanceModel").setProperty("/Allowance",i.getSelectedItem().getBindingContext().getObject())})}}});var _=new sap.ui.core.Item({text:"{ItemKey}",key:"{ItemValue}"});s.bindAggregation("items",{path:"/valueHelpAllowSet",template:_,filters:[y,new sap.ui.model.Filter("FieldKey","EQ","TRFGR")]}),o.bindAggregation("items",{path:"/valueHelpAllowSet",template:_,filters:[y,new sap.ui.model.Filter("FieldKey","EQ","EXBEL")]})},onAddAllowance:function(){var e=this.getView().getModel(),t=sap.ui.getCore().byId("ld_inp_allowanceHours"),a=sap.ui.getCore().byId("ld_inp_allowanceAmount"),i=sap.ui.getCore().byId("ld_select_Allowance"),o=sap.ui.getCore().byId("ld_select_emp"),n=sap.ui.getCore().byId("ld_dp_date"),r=sap.ui.getCore().byId("ld_inp_allowancePayGroup"),l=sap.ui.getCore().byId("ld_inp_allowanceExtReg"),d=sap.ui.getCore().byId("ld_inp_allowanceTimeUnit"),u=sap.ui.getCore().byId("ld_inp_allowanceReason"),g=this.getView().getModel("i18n").getResourceBundle(),p={},c=t.getValue(),m=a.getValue(),h=i.getSelectedItem().getKey(),y=o.getSelectedItem().getKey(),b=n.getDateValue(),_=r.getSelectedKey(),C=l.getSelectedKey(),f=d.getValue(),D=u.getValue();b=this.getFormattedDate(b),c||m?(t.setValueState(sap.ui.core.ValueState.None),a.setValueState(sap.ui.core.ValueState.None),p.EmpId=y,p.ZDate=b,p.Zulage=h,p.ZHours=parseFloat(c).toFixed(7),p.ZAmount=parseInt(m),p.ZZeinh=f,p.ZTrfgr=_,p.ZExbel=C,p.ZComment=D,e.create("/allowanceSet",p,{success:function(){var e=g.getText("allowancecreated");s.show(e),this.getAllowanceSet()}.bind(this),error:function(e){this.createError(e)}.bind(this)}),this.toggleAllowanceButtons("create"),this.AllowDirty=!1):(t.setValueState(sap.ui.core.ValueState.Error),a.setValueState(sap.ui.core.ValueState.Error))},onAllowanceEntrySelect:function(e){if(-1!=e.getSource().getSelectedIndex()){var t=sap.ui.getCore().byId("ld_select_Allowance"),a=sap.ui.getCore().byId("ld_inp_allowanceHours"),i=sap.ui.getCore().byId("ld_inp_allowanceAmount"),s=sap.ui.getCore().byId("ld_inp_allowancePayGroup"),o=sap.ui.getCore().byId("ld_inp_allowanceExtReg"),n=sap.ui.getCore().byId("ld_inp_allowanceTimeUnit"),r=sap.ui.getCore().byId("ld_inp_allowanceReason"),l=e.getSource().getContextByIndex(e.getSource().getSelectedIndex());t.setSelectedKey(e.getSource().getModel().getProperty("Zulage",l)),a.setValue(e.getSource().getModel().getProperty("ZHours",l)),i.setValue(e.getSource().getModel().getProperty("ZAmount",l)),n.setValue(e.getSource().getModel().getProperty("ZZeinh",l)),s.setSelectedKey(e.getSource().getModel().getProperty("ZTrfgr",l)),o.setSelectedKey(e.getSource().getModel().getProperty("ZExbel",l)),r.setSelectedKey(e.getSource().getModel().getProperty("ZComment",l)),this.toggleAllowanceButtons("edit")}},onUpdateAllowance:function(){var e=this.getView().getModel(),t=sap.ui.getCore().byId("ld_inp_allowanceHours"),a=sap.ui.getCore().byId("ld_inp_allowanceAmount"),i=sap.ui.getCore().byId("ld_select_Allowance"),o=sap.ui.getCore().byId("ld_select_emp"),n=sap.ui.getCore().byId("ld_dp_date"),r=sap.ui.getCore().byId("ld_tbl_allowanceOverview"),l=sap.ui.getCore().byId("ld_inp_allowancePayGroup"),d=sap.ui.getCore().byId("ld_inp_allowanceExtReg"),u=sap.ui.getCore().byId("ld_inp_allowanceTimeUnit"),g=sap.ui.getCore().byId("ld_inp_allowanceReason"),p=this.getView().getModel("i18n").getResourceBundle(),c={},m=t.getValue(),h=a.getValue(),y=i.getSelectedItem().getKey(),b=o.getSelectedItem().getKey(),_=n.getDateValue(),C=r.getContextByIndex(r.getSelectedIndex()),f=l.getSelectedKey(),D=d.getSelectedKey(),S=u.getValue(),v=g.getValue();_=this.getFormattedDate(_),m||h?(t.setValueState(sap.ui.core.ValueState.None),a.setValueState(sap.ui.core.ValueState.None),c.EmpId=b,c.ZDate=_,c.Zulage=y,c.ZHours=parseFloat(m).toFixed(7),c.ZAmount=parseInt(h),c.Seqnr=C.getObject().Seqnr,c.ZZeinh=S,c.ZTrfgr=f,c.ZExbel=D,c.ZComment=v,e.update(C.sPath,c,{refreshAfterChange:!0,success:function(){var e=p.getText("allowancemodified");s.show(e),this.getAllowanceSet()}.bind(this),error:this.createError.bind(this)}),this.toggleAllowanceButtons("create"),this.AllowDirty=!1):(t.setValueState(sap.ui.core.ValueState.Error),a.setValueState(sap.ui.core.ValueState.Error))},onDeleteAllowance:function(){var e=this.getView().getModel(),t=sap.ui.getCore().byId("ld_tbl_allowanceOverview"),a=this.getView().getModel("i18n").getResourceBundle(),i=t.getContextByIndex(t.getSelectedIndex());e.remove(i.sPath,{success:function(){var e=a.getText("allowancedeleted");s.show(e),this.getAllowanceSet()}.bind(this),error:this.createError.bind(this)}),this.toggleAllowanceButtons("create"),this.AllowDirty=!1},onCancelAllowance:function(){this.toggleAllowanceButtons("create")},toggleAllowanceButtons:function(e){var t=sap.ui.getCore().byId("btn_allowanceAdd"),a=sap.ui.getCore().byId("btn_allowanceUpdate"),i=sap.ui.getCore().byId("btn_allowanceCancel"),s=sap.ui.getCore().byId("btn_allowanceDel"),o=sap.ui.getCore().byId("ld_select_Allowance"),n=sap.ui.getCore().byId("ld_inp_allowanceHours"),r=sap.ui.getCore().byId("ld_inp_allowanceAmount"),l=sap.ui.getCore().byId("ld_inp_allowanceTimeUnit"),d=sap.ui.getCore().byId("ld_inp_allowanceReason"),u=sap.ui.getCore().byId("ld_tbl_allowanceOverview");"edit"==e?(t.setEnabled(!1),a.setEnabled(!0),i.setEnabled(!0),s.setEnabled(!0)):"create"==e&&(t.setEnabled(!0),a.setEnabled(!1),i.setEnabled(!1),s.setEnabled(!1),o.setSelectedKey(0),n.setValue(),r.setValue(),l.setValue(),d.setValue(),n.setEnabled(!0),r.setEnabled(!0),u.setSelectionMode("Single"))},toggleTimeTransferButtons:function(e){var t=new Date,a=sap.ui.getCore().byId("btn_timeTransfer_Save"),i=sap.ui.getCore().byId("btn_timetransferEdit"),s=sap.ui.getCore().byId("btn_timetransferCancel"),o=sap.ui.getCore().byId("btn_timetransferDel"),n=sap.ui.getCore().byId("ld_select_subty_timetransfer"),r=sap.ui.getCore().byId("ld_inp_amount_timetransfer"),l=sap.ui.getCore().byId("ld_dp_begda_timetransfer"),d=sap.ui.getCore().byId("ld_dp_endda_timetransfer"),u=sap.ui.getCore().byId("ld_tbl_timetransferoverview");"edit"==e?(a.setEnabled(!1),i.setEnabled(!0),s.setEnabled(!0),o.setEnabled(!0),n.setEnabled(!1),l.setEnabled(!1),d.setEnabled(!1)):"create"==e&&(a.setEnabled(!0),i.setEnabled(!1),s.setEnabled(!1),o.setEnabled(!1),n.setEnabled(!0),n.setSelectedKey(0),r.setValue(),r.setEnabled(!0),l.setEnabled(!0),d.setEnabled(!0),l.setDateValue(t),d.setDateValue(t),u.setSelectionMode("Single"))},bindEmployeeSet:function(e,t){var a=new sap.ui.model.Filter("UnitKey",sap.ui.model.FilterOperator.EQ,t),i=sap.ui.getCore().byId("ld_select_emp"),s=new sap.ui.model.Filter("SpecialEntry",sap.ui.model.FilterOperator.EQ,!1),o=this.getSelectedBegda(),n=this.getSelectedEndda();o.setUTCDate(o.getDate()),n.setUTCDate(n.getDate());var r=this.getFormattedDate(o),l=this.getFormattedDate(n),d=new sap.ui.model.Filter("Begda",sap.ui.model.FilterOperator.EQ,r),u=new sap.ui.model.Filter("Endda",sap.ui.model.FilterOperator.EQ,l);e.read("/EmployeeSet",{success:function(e,t){for(var a=e.results,s=0;s<a.length;s++){var o=new sap.ui.core.Item({text:a[s].Name,key:a[s].EmpId}),n=new sap.ui.core.CustomData({key:"UnitKey",value:a[s].UnitKey});o.addCustomData(n),i.addItem(o),0==s&&i.setSelectedItem(o)}this.bindTimeEventTable()}.bind(this),filters:[s,a,d,u]})},onCicoDateChange:function(e){var t=e.getParameter("id");sap.ui.getCore().byId(t).setValueState(sap.ui.core.ValueState.None),this.bindTimeEventTable()},onCicoTimeChange:function(e){var t=e.getParameter("id");sap.ui.getCore().byId(t).setValueState(sap.ui.core.ValueState.None),this.CicoDirty=!0},bindTimeEventTable:function(){var e=sap.ui.getCore().byId("ld_tbl_cicooverview"),t=sap.ui.getCore().byId("ld_dp_date").getDateValue();null!==t&&t.setHours(12);var a,i=sap.ui.core.format.DateFormat.getDateInstance({pattern:"yyyy-MM-ddTHH:mm:ss"}).format(t),s=new sap.ui.model.Filter("Ldate",sap.ui.model.FilterOperator.EQ,i),o=sap.ui.getCore().byId("ld_select_emp").getSelectedItem().getKey(),n=new sap.ui.model.Filter("EmpId",sap.ui.model.FilterOperator.EQ,o);a=this._oCicoDialog?r.getCustomDataValue(this._oCicoDialog.getAggregation("customData"),"UnitKey"):r.getCustomDataValue(this._oTimesOverviewDialog.getAggregation("customData"),"UnitKey");var l=new sap.ui.model.Filter("UnitKey",sap.ui.model.FilterOperator.EQ,a);e.setBusyIndicatorDelay(0),e.setBusy(!0),e.bindRows({path:"/timeEventNSet",filters:[n,s,l],events:{dataReceived:function(){e.setBusy(!1)}.bind(this)}})},onOpenChangeUnit:function(e){this._oChangeUnitDialog||(this._oChangeUnitDialog=sap.ui.xmlfragment("MIND2PEP_PLANNER.fragments.ChangeUnit",this,{refreshAfterChange:!0}),this._oChangeUnitDialog.attachAfterClose(this.destroyChangeUnitDialog.bind(this))),this.getView().addDependent(this._oChangeUnitDialog);var t=r.getCustomDataValue(e.getSource().getAggregation("customData"),"EmpID"),a=r.getCustomDataValue(e.getSource().getAggregation("customData"),"UnitKey"),i=(new sap.ui.model.Filter("EmpId",sap.ui.model.FilterOperator.EQ,t),sap.ui.getCore().byId("ld_select_cu_employee")),s=sap.ui.getCore().byId("ld_select_cu_unit");this._oChangeUnitDialog.open(),this._oChangeUnitDialog.setBusyIndicatorDelay(0),this._oChangeUnitDialog.setBusy(!0);var o=this.getSelectedBegda(),n=this.getSelectedEndda();o.setUTCDate(o.getDate()),n.setUTCDate(n.getDate());var l=this.getFormattedDate(o),d=this.getFormattedDate(n),u=new sap.ui.model.Filter("Begda",sap.ui.model.FilterOperator.EQ,l),g=new sap.ui.model.Filter("Endda",sap.ui.model.FilterOperator.EQ,d),p=new sap.ui.model.odata.v2.ODataModel("/sap/opu/odata/MIND2/PEP_YEAR_SRV",{refreshAfterChange:!0}),c=new sap.ui.model.Filter("UnitKey",sap.ui.model.FilterOperator.EQ,a);p.read("/EmployeeSet",{success:function(e,a){for(var s=e.results,o=0;o<s.length;o++){var n=new sap.ui.core.Item({text:s[o].Name,key:s[o].EmpId}),r=new sap.ui.core.CustomData({key:"UnitKey",value:s[o].UnitKey});n.addCustomData(r),i.addItem(n),s[o].EmpId==t&&(i.setSelectedItem(t),i.setSelectedIndex(t))}this.getCuTableData(),this._oChangeUnitDialog.setBusy(!1)}.bind(this),filters:[c,u,g]}),p.read("/UnitSet",{success:function(e,t){for(var a=e.results,i=0;i<a.length;i++){var o=new sap.ui.core.Item({text:a[i].UnitText,key:a[i].UnitKey});s.addItem(o)}}.bind(this)})},getCuTableData:function(){var e=this.getView().getModel(),t=sap.ui.getCore().byId("ld_tbl_cu_overview"),a=sap.ui.getCore().byId("ld_select_cu_employee").getSelectedItem().getKey(),i=new sap.ui.model.Filter("EmpId",sap.ui.model.FilterOperator.EQ,a);null!==a&&(t.setModel(e),t.bindAggregation("rows",{path:"/mainUnitSet",filters:[i],events:{dataRequested:function(){t.setBusy(!0)},dataReceived:function(){t.setBusy(!1)}}}))},onCuEmployeeChange:function(e){this.getCuTableData()},onSaveUnitChange:function(e){this._oChangeUnitDialog.setBusy(!0);var t=this.getView().getModel(),a=sap.ui.getCore().byId("ld_select_cu_employee"),i=sap.ui.getCore().byId("ld_tp_cu_begda"),s=sap.ui.getCore().byId("ld_select_cu_unit"),o={},n=a.getSelectedKey(),r=s.getSelectedKey(),l=i.getDateValue(),d=this.getFormattedDate(l),u=new Date;u.setHours(0,0,0,0);var g=this.getView().getModel("i18n").getResourceBundle().getText("nochangesinpast");o.EmpId=n,o.Begda=d,o.UnitKey=r,l?l>=u?(i.setValueState(sap.ui.core.ValueState.None),t.create("/mainUnitSet",o,{success:this.unitChangeSuccess.bind(this),error:function(e){this._oChangeUnitDialog.setBusy(!1),this.createError(e)}.bind(this)})):(i.setValueState(sap.ui.core.ValueState.Error),i.setValueStateText(g),i.openValueStateMessage(),this._oChangeUnitDialog.setBusy(!1)):(i.setValueState(sap.ui.core.ValueState.Error),this._oChangeUnitDialog.setBusy(!1))},unitChangeSuccess:function(){this._oChangeUnitDialog.setBusy(!1);var e=this.getView().getModel("i18n").getResourceBundle().getText("unitchangesuccess");s.show(e),this.getCuTableData()},destroyChangeUnitDialog:function(e){this._oChangeUnitDialog.destroy(),this._oChangeUnitDialog=null},onCloseChangeUnitDialog:function(e){this._oChangeUnitDialog.close()},handleSuggestAufnr:function(e){var t=e.getParameter("suggestValue"),a=sap.ui.getCore().byId("ld_inp_matnr").getValue().split(" ")[0],i=[];t&&" "!=t&&i.push(new sap.ui.model.Filter("Aufnr",sap.ui.model.FilterOperator.StartsWith,t)),a&&i.push(new sap.ui.model.Filter("Matnr",sap.ui.model.FilterOperator.StartsWith,a)),e.getSource().getBinding("suggestionItems").filter(i)},onAufnrChange:function(e){this.CicoDirty=!0;var t=this.getView().getModel();if(""!=e.getParameter("newValue")){var a=e.getSource().getValue().split(" ")[0];t.read("/matNrSet(\'"+a+"\')",{success:this.matNrSuccess.bind(this),error:function(e){}.bind(this)})}else sap.ui.getCore().byId("ld_inp_matnr").setEnabled(!0),sap.ui.getCore().byId("ld_inp_matnr").setValue()},onMatnrChange:function(e){this.CicoDirty=!0},aufNrSuccess:function(e){var t=e.results;sap.ui.getCore().byId("ld_inp_matnr").setValueState(sap.ui.core.ValueState.None),sap.ui.getCore().byId("ld_inp_aufnr").setValueState(sap.ui.core.ValueState.None),1===t.length&&e.results[0].Aufnr&&sap.ui.getCore().byId("ld_inp_aufnr").setValue(e.results[0].Aufnr+" - "+e.results[0].Description)},matNrSuccess:function(e){sap.ui.getCore().byId("ld_inp_aufnr").setValueState(sap.ui.core.ValueState.None),sap.ui.getCore().byId("ld_inp_matnr").setValue(e.Matnr+" - "+e.Description)},handleSuggestMatnr:function(e){var t=e.getParameter("suggestValue"),a=[];t&&a.push(new sap.ui.model.Filter("Matnr",sap.ui.model.FilterOperator.StartsWith,t)),e.getSource().getBinding("suggestionItems").filter(a)},handleSuggestZulage:function(e){var t=e.getParameter("suggestValue"),a=sap.ui.getCore().byId("ld_dp_date").getDateValue();null!==a&&a.setHours(12);var i=[];t&&i.push(new sap.ui.model.Filter("Zulage",sap.ui.model.FilterOperator.StartsWith,t)),e.getSource().getBinding("suggestionItems").filter(i)},handleSuggestKostenst:function(e){var t=e.getParameter("suggestValue"),a=[];t&&a.push(new sap.ui.model.Filter("Kostenst",sap.ui.model.FilterOperator.StartsWith,t)),e.getSource().getBinding("suggestionItems").filter(a)},onStartRptimeTimesOverview:function(e){var t=this.getView().getModel(),a=sap.ui.getCore().byId("ld_select_emp");a.setValueState(sap.ui.core.ValueState.None);var i=a.getSelectedKey(),s=r.getCustomDataValue(a.getSelectedItem().getAggregation("customData"),"UnitKey"),o=new Date,n=o,l=sap.ui.getCore().byId("pnl_rptime"),d=new sap.ui.model.Filter("Begda",sap.ui.model.FilterOperator.EQ,o),u=new sap.ui.model.Filter("Endda",sap.ui.model.FilterOperator.EQ,n),g=new sap.ui.model.Filter("EmpIds",sap.ui.model.FilterOperator.EQ,i),p=new sap.ui.model.Filter("UnitKey",sap.ui.model.FilterOperator.EQ,s);l.setBusy(!0),t.read("/rptimeSet",{filters:[g,d,u,p],success:function(){var e=sap.ui.getCore().byId("btn_rptimemsg_"+s);this._oRptime.clearBuffer(s),e.setType(sap.m.ButtonType.Unstyled),e.setText(""),this.heartBeatTrigger=new sap.ui.core.IntervalTrigger(1),this.heartBeatTrigger.setInterval(3e3),setTimeout(function(){this.heartBeatTrigger.addListener(function(){this.getRptimeDataInInterval(s,"TimeOverview")}.bind(this))}.bind(this),1e3)}.bind(this)})},bindRptimeMsgTimesOverview:function(){var e=sap.ui.getCore().byId("ld_select_emp"),t=new sap.ui.model.Filter("EmpId",sap.ui.model.FilterOperator.EQ,e.getSelectedKey()),a=this.getView().getModel(),i=sap.ui.getCore().byId("li_rp_to_msg"),s=sap.ui.getCore().byId("oli_rp_to_template");i.setModel(a),i.bindAggregation("items",{path:"/rptimeEmpLogSet",template:s,filters:[t],events:{dataReceived:function(e){}}})},onClickRptimeMsg:function(e){var t=this.getView().getModel();sap.ui.getCore().byId("ld_select_attention")&&sap.ui.getCore().byId("ld_select_attention").destroy(),sap.ui.getCore().byId("ta_attent_explain")&&sap.ui.getCore().byId("ta_attent_explain").destroy();var a=this.getView().getModel("i18n").getResourceBundle().getText("noCompletionPossible"),i=e.getSource().getBindingContext(),s=new sap.m.Popover({title:"{i18n>completePopoverTitle}",beforeClose:function(){this.oPopoverOpen=!1},placement:"Auto"});this.getView().addDependent(s);var o=new sap.ui.layout.form.SimpleForm({columnsXL:12,columnsL:12,columnsM:12,layout:"ResponsiveGridLayout"});s.addContent(o);var n=new sap.ui.core.Item({text:"{NoteText}",key:"{NoteKey}",customData:{key:"noteKey",value:"{NoteKey}"},layoutData:new sap.ui.layout.GridData({span:"XL12 L12 M12 S12"})}),l=new sap.m.Select({id:"ld_select_attention",selectedKey:"{SelAttention}"}),d=new sap.m.TextArea({id:"ta_attent_explain",layoutData:new sap.ui.layout.GridData({span:"XL12 L12 M12 S12"}),maxLength:100,showExceededText:!1,value:"{MsgExplanation}"}),u=t.getProperty("Begda",i),g=t.getProperty("Endda",i),p=sap.ui.getCore().byId("ld_select_emp"),c=t.getProperty("MessageType",i),m=t.getProperty("MessageText",i),h=t.getProperty("MsgParam",i),y=t.getProperty("Attention",i),b=r.getCustomDataValue(p.getSelectedItem().getAggregation("customData"),"UnitKey"),_=new sap.ui.model.Filter("MsgType",sap.ui.model.FilterOperator.EQ,c),C=new sap.ui.model.Filter("PlanDate",sap.ui.model.FilterOperator.EQ,u),f=new sap.ui.model.Filter("UnitKey",sap.ui.model.FilterOperator.EQ,b),D=new sap.ui.model.Filter("SumKey",sap.ui.model.FilterOperator.EQ,"Unwichtig"),S={};S.Begda=u,S.Endda=g,S.EmpId=p.getSelectedKey(),S.MessageType=c,S.MessageText=m,S.MsgParam=h;var v=new sap.m.Button({text:"{i18n>completeMessage}",press:this.onMsgCompletionButtonClick.bind(this,S,s,b),layoutData:new sap.ui.layout.GridData({span:"XL12 L12 M12 S12"})});l.setModel(t),l.bindItems({path:"/messageNoteSet",template:n,filters:[_,C,f,D],events:{dataReceived:function(){s.setBusy(!1)}.bind(this)}});var I=t.createKey("/messageNoteSet",{SumKey:"Unwichtig",UnitKey:b,NoteKey:"Unwichtig2",PlanDate:u});s.setModel(t),s.bindElement({path:I,events:{dataReceived:function(){s.setBusy(!1)}.bind(this)}}),this.oMsgAttentionSource=e.getSource(),s.openBy(e.getSource()),this.oPopoverOpen=!0,"X"===y?(o.addContent(l),o.addContent(v),o.addContent(d)):""===y&&s.setTitle(a)},getEmpShift:function(){var e=this.getView().getModel(),t=sap.ui.getCore().byId("pnl_shift"),a=sap.ui.getCore().byId("ld_dp_date").getDateValue(),i=sap.ui.core.format.DateFormat.getDateTimeInstance({pattern:"yyyy-MM-ddTHH:mm:ss"}).format(a),s=sap.ui.getCore().byId("ld_select_emp").getSelectedItem();if(s){var o=s.getKey(),n=s.getCustomData(),l=r.getCustomDataValue(n,"UnitKey"),d=new sap.ui.model.Filter("Begda",sap.ui.model.FilterOperator.EQ,i),u=sap.ui.getCore().byId("ld_select_shift"),g=new sap.ui.core.Item({text:"{ShiftName} - {ShiftKey}",key:"{ShiftKey}"});t.setBusy(!0);var p=new sap.ui.model.Filter("EmpId",sap.ui.model.FilterOperator.EQ,o),c=new sap.ui.model.Filter("UnitKey",sap.ui.model.FilterOperator.EQ,l),m=new sap.ui.core.Item({text:"",key:"dummy"});e.createEntry("/availEmpShiftSet",{properties:{Begda:"",Beguz:"000000",EmpId:o,Enduz:"000000",ShiftKey:"dummy",ShiftName:"",UnitKey:l,Varia:""}});u.setModel(e),u.bindAggregation("items",{path:"/availEmpShiftSet",template:g,filters:[d,p,c],events:{dataReceived:function(){u.insertItem(m,0),this.getCurrEmpShift(o,i)}.bind(this)}})}},getCurrEmpShift:function(e,t){var a=this.getView().getModel(),i=sap.ui.getCore().byId("to_sf_shift"),s=a.createKey("/substitutionSet",{Empid:e,ShiftDate:t,Tprog:"",SubstTprog:"",SubstSubty:""});i.setModel(a),i.bindElement({path:s,events:{dataReceived:function(){this.onGetEmpShiftSuccess()}.bind(this)}})},onGetEmpShiftSuccess:function(){var e=sap.ui.getCore().byId("pnl_shift"),t=sap.ui.getCore().byId("chb_voluntary"),a=sap.ui.getCore().byId("chb_ownShiftTimes"),i=sap.ui.getCore().byId("ld_tp_beguz_shift"),s=sap.ui.getCore().byId("ld_tp_enduz_shift"),o=sap.ui.getCore().byId("ld_tp_beguz_leave"),n=sap.ui.getCore().byId("ld_tp_beguz_break1"),r=sap.ui.getCore().byId("ld_tp_enduz_break1"),l=sap.ui.getCore().byId("ld_tp_beguz_break2"),d=sap.ui.getCore().byId("ld_tp_enduz_break2"),u=sap.ui.getCore().byId("to_shift_select_subtype"),g=sap.ui.getCore().byId("to_sf_shift"),p=sap.ui.getCore().byId("ld_select_shift"),c=g.getBindingContext(),m=sap.ui.getCore().byId("btn_shiftChangeCancel"),h=sap.ui.getCore().byId("btn_shiftChangeSave"),y=sap.ui.getCore().byId("btn_shiftChangeModify"),b=sap.ui.getCore().byId("to_shift_select_tprogclass"),_=sap.ui.getCore().byId("ld_inp_integratedOT"),C=60*new Date(0).getTimezoneOffset()*1e3,f=sap.ui.core.format.DateFormat.getDateInstance({pattern:"HH:mm:ss"}),D=sap.ui.getCore().byId("ld_dp_comdat"),S=sap.ui.getCore().byId("ld_tp_comuzeit");if(e.setBusy(!1),this.isFeatureEnabled("TO_TPROGCL")&&this.getTprogClassItems(),sap.ui.getCore().byId("to_shift_select_subtype").getVisible()&&this.getVtartItems(),t.getVisible()&&t.setSelected(c.getProperty("SubstVolSh")),a.getVisible()&&a.setSelected(c.getProperty("SubstOwnSh")),D.getVisible())if(null!==c.getProperty("Comdate"))D.setDateValue(c.getProperty("Comdate")),S.setValue(f.format(new Date(c.getProperty("Comuzeit").ms+C)));else{var v=new Date;D.setDateValue(v),S.setValue(f.format(v))}if("****"===c.getProperty("SubstTprog"))this.toggleEnabledShiftInput(!0),a.setSelected(!0),i.setValue(f.format(new Date(c.getProperty("SubstBeguz").ms+C))),s.setValue(f.format(new Date(c.getProperty("SubstEnduz").ms+C))),n.setValue(f.format(new Date(c.getProperty("SubstBeguzBr1").ms+C))),r.setValue(f.format(new Date(c.getProperty("SubstEnduzBr1").ms+C))),l.setValue(f.format(new Date(c.getProperty("SubstBeguzBr2").ms+C))),d.setValue(f.format(new Date(c.getProperty("SubstEnduzBr2").ms+C))),o.setValue(f.format(new Date(c.getProperty("SubstBeguz").ms+C))),u.getVisible()&&(u.setSelectedKey(c.getProperty("SubstVtart")),u.setEnabled(!1)),b.getVisible()&&b.setSelectedKey(c.getProperty("SubstTpkla")),m.setEnabled(!0),t.getVisible()&&t.setEnabled(!0),y.setEnabled(!0),a.setEnabled(!0),i.setEnabled(!0),s.setEnabled(!0),n.setEnabled(!0),r.setEnabled(!0),l.setEnabled(!0),d.setEnabled(!0),p.setEnabled(!1),h.setEnabled(!1),e.setBusy(!1);else if(c.getProperty("SubstTprog")){var I=c.getProperty("SubstTprog"),w=p.getItemByKey(I).getBindingContext().getObject().OtShift;_.setValue(w),this.toggleEnabledShiftInput(!1),i.setValue(f.format(new Date(c.getProperty("SubstBeguz").ms+C))),s.setValue(f.format(new Date(c.getProperty("SubstEnduz").ms+C))),o.setValue(f.format(new Date(c.getProperty("SubstBeguz").ms+C))),u.getVisible()&&(u.setSelectedKey(c.getProperty("SubstVtart")),u.setEnabled(!0)),m.setEnabled(!0),t.getVisible()&&t.setEnabled(!0),b.getVisible()&&b.setEnabled(!0),i.setEnabled(!1),s.setEnabled(!1),y.setEnabled(!0),a.setEnabled(!0),p.setEnabled(!0),h.setEnabled(!1),e.setBusy(!1)}else this.toggleEnabledShiftInput(!1),n.setValue(),n.setVisible(!1),r.setValue(),r.setVisible(!1),l.setValue(),l.setVisible(!1),d.setValue(),d.setVisible(!1),b.setVisible(!1),m.setEnabled(!1),e.setBusy(!1),t.getVisible()&&t.setEnabled(!0),a.setEnabled(!0),u.getVisible()&&(u.setEnabled(!0),u.setSelectedKey("00")),p.setEnabled(!0),h.setEnabled(!0)},getTprogClassItems:function(){var e=this.getView().getModel(),t=sap.ui.getCore().byId("to_shift_select_tprogclass"),a=new sap.ui.core.Item({key:"{Tpkla}",text:"{Text}"});t.setModel(e),t.bindAggregation("items",{path:"/tprogClassSet",template:a})},getVtartItems:function(){var e=this.getView().getModel(),t=sap.ui.getCore().byId("ld_dp_currentDate").getDateValue(),a=r.getCustomDataValue(this._oTimesOverviewDialog.getAggregation("customData"),"UnitKey"),i=sap.ui.getCore().byId("ld_select_emp").getSelectedKey();(t=new Date(t)).setHours(12);var s=new sap.ui.model.Filter("Plandate",sap.ui.model.FilterOperator.EQ,t),o=new sap.ui.model.Filter("UnitKey",sap.ui.model.FilterOperator.EQ,a),n=new sap.ui.model.Filter("EmpId",sap.ui.model.FilterOperator.EQ,i),l=new sap.ui.core.Item({key:"{Vtart}",text:{parts:["Vtart","VtartText"],formatter:function(e,t){return"00"==e?"":e+" - "+t}.bind(this)}}),d=sap.ui.getCore().byId("to_shift_select_subtype");d.setModel(e),d.bindAggregation("items",{path:"/vtArtSet",template:l,filters:[s,o,n]})},onSaveShiftChangeOverview:function(){var e=this.getView().getModel(),t=sap.ui.getCore().byId("pnl_shift");t.setBusy(!0);var a=sap.ui.getCore().byId("ld_dp_date"),i=sap.ui.core.format.DateFormat.getDateInstance({pattern:"yyyy-MM-ddTHH:mm:ss"}),s=sap.ui.getCore().byId("chb_voluntary"),o=sap.ui.getCore().byId("ld_select_emp"),n=sap.ui.getCore().byId("chb_ownShiftTimes"),l=sap.ui.getCore().byId("ld_select_shift"),d=sap.ui.getCore().byId("ld_tp_beguz_shift"),u=sap.ui.getCore().byId("ld_tp_enduz_shift"),g=sap.ui.getCore().byId("to_shift_select_subtype"),p=sap.ui.getCore().byId("to_shift_select_tprogclass"),c=sap.ui.core.format.DateFormat.getDateInstance({pattern:"PTHH\'H\'mm\'M\'ss\'S\'"}),m=sap.ui.getCore().byId("ld_dp_comdat"),h=sap.ui.getCore().byId("ld_tp_comuzeit"),y=a.getDateValue(),b=o.getSelectedItem().getKey(),_=i.format(y),C=(r.getCustomDataValue(o.getSelectedItem().getAggregation("customData"),"UnitKey"),n.getSelected()),f=u.getValue(),D=d.getValue(),S=l.getSelectedItem().getKey();if("dummy"===S)return l.setValueState(sap.ui.core.ValueState.Error),void t.setBusy(!1);if(l.setValueState(sap.ui.core.ValueState.None),g.getVisible()){var v=g.getSelectedKey();if("00"===v&&b.match("^00"))return g.setValueState(sap.ui.core.ValueState.Error),void t.setBusy(!1);g.setValueState(sap.ui.core.ValueState.None)}if(p.getVisible()){var I=p.getSelectedItem().getKey();if(""===I)return p.setValueState(sap.ui.core.ValueState.Error),void t.setBusy(!1);p.setValueState(sap.ui.core.ValueState.None)}var w=sap.ui.getCore().byId("ld_tp_beguz_break1"),V=sap.ui.getCore().byId("ld_tp_enduz_break1"),E=sap.ui.getCore().byId("ld_tp_beguz_break2"),T=sap.ui.getCore().byId("ld_tp_enduz_break2"),P=this.getView().getModel().getProperty("Varia",l.getSelectedItem().getBindingContext());if(!C||""!==D&&""!==f){!0===C&&(S="****");var M={};if(M.Empid=b,M.ShiftDate=_,M.SubstTprog=S,d.getDateValue()&&(M.SubstBeguz=c.format(d.getDateValue())),u.getDateValue()&&(M.SubstEnduz=c.format(u.getDateValue())),w.getDateValue()&&(M.SubstBeguzBr1=c.format(w.getDateValue())),V.getDateValue()&&(M.SubstEnduzBr1=c.format(V.getDateValue())),E.getDateValue()&&(M.SubstBeguzBr2=c.format(E.getDateValue())),T.getDateValue()&&(M.SubstEnduzBr2=c.format(T.getDateValue())),M.SubstOwnSh=C,M.SubstTdtype=this.getView().getModel().getProperty("ShiftTdtype",l.getSelectedItem().getBindingContext()),null===M.SubstTdtype&&(M.SubstTdtype=""),s.getVisible()?M.SubstVolSh=s.getSelected():M.SubstVolSh=!1,M.SubstVtart=v,M.SubstVaria=P,p.getVisible()&&(M.SubstTpkla=I.toString()),m.getVisible()){var B=m.getDateValue(),F=i.format(B);M.Comdate=F,h.getDateValue()&&(M.Comuzeit=c.format(h.getDateValue()))}e.create("/substitutionSet",M,{refreshAfterChange:!0,success:this.createEmpShiftSuccess.bind(this),error:function(e){this.createError(e),t.setBusy(!1)}.bind(this)})}else""===D&&d.setValueState(sap.ui.core.ValueState.Error),""===f&&u.setValueState(sap.ui.core.ValueState.Error),t.setBusy(!1)},onModifyShiftChangeOverview:function(){var e=sap.ui.getCore().byId("pnl_shift");e.setBusy(!0);var t=sap.ui.getCore().byId("btn_shiftChangeCancel"),a=sap.ui.getCore().byId("to_sf_shift").getBindingContext().getObject(),i=sap.ui.getCore().byId("ld_select_shift"),s=this.getView().getModel(),o=sap.ui.getCore().byId("to_shift_select_tprogclass"),n=sap.ui.getCore().byId("to_shift_select_subtype"),r=i.getSelectedItem().getKey(),l=sap.ui.core.format.DateFormat.getDateInstance({pattern:"yyyy-MM-ddTHH:mm:ss"});if("dummy"===r)return i.setValueState(sap.ui.core.ValueState.Error),void e.setBusy(!1);if(i.setValueState(sap.ui.core.ValueState.None),n.getVisible()){if("00"===n.getSelectedKey()&&a.EmpId.match("^00"))return n.setValueState(sap.ui.core.ValueState.Error),void e.setBusy(!1);n.setValueState(sap.ui.core.ValueState.None)}if(o.getVisible()){if(""===o.getSelectedItem().getKey())return o.setValueState(sap.ui.core.ValueState.Error),void e.setBusy(!1);o.setValueState(sap.ui.core.ValueState.None)}var d=s.createKey("/substitutionSet",{Empid:a.Empid,Tprog:"",ShiftDate:l.format(a.ShiftDate),SubstTprog:a.SubstTprog,SubstSubty:a.SubstSubty});s.remove(d,{success:function(e){t.setEnabled(!1),this.onSaveShiftChangeOverview()}.bind(this),error:function(e){this.createError(e)}.bind(this)})},setPnlShiftFieldVisibility:function(e){var t=sap.ui.getCore().byId("ld_select_shift"),a=sap.ui.getCore().byId("ld_tp_beguz_shift"),i=sap.ui.getCore().byId("ld_tp_enduz_shift"),s=sap.ui.getCore().byId("lbl_break1"),o=sap.ui.getCore().byId("ld_tp_beguz_break1"),n=sap.ui.getCore().byId("ld_tp_enduz_break1"),r=sap.ui.getCore().byId("lbl_break2"),l=sap.ui.getCore().byId("ld_tp_beguz_break2"),d=sap.ui.getCore().byId("ld_tp_enduz_break2"),u=sap.ui.getCore().byId("to_shift_select_tprogclass");e?(t.setEnabled(!1),a.setEnabled(!0),i.setEnabled(!0),s.setVisible(!0),o.setVisible(!0),o.setEnabled(!0),n.setVisible(!0),n.setEnabled(!0),r.setVisible(!0),l.setVisible(!0),l.setEnabled(!0),d.setVisible(!0),d.setEnabled(!0),this.isFeatureEnabled("TO_TPROGCL")&&u.setVisible(!0)):(t.setEnabled(!0),a.setEnabled(!1),i.setEnabled(!1),s.setVisible(!1),o.setVisible(!1),n.setVisible(!1),r.setVisible(!1),l.setVisible(!1),d.setVisible(!1),u.setVisible(!1))},toggleEnabledShiftInput:function(e){var t=sap.ui.getCore().byId("ld_inp_shiftPlan"),a=sap.ui.getCore().byId("ld_select_shift"),i=sap.ui.getCore().byId("ld_tp_beguz_shift"),s=sap.ui.getCore().byId("ld_tp_enduz_shift"),o=sap.ui.getCore().byId("to_shift_select_subtype"),n=sap.ui.getCore().byId("ld_inp_integratedOT"),l=sap.ui.getCore().byId("ld_lbl_integratedOT"),d=sap.ui.getCore().byId("to_sf_shift"),u=sap.ui.getCore().byId("chb_voluntary"),g=d.getBindingContext(),p=60*new Date(0).getTimezoneOffset()*1e3,c=sap.ui.core.format.DateFormat.getDateInstance({pattern:"HH:mm:ss"});if(this.setPnlShiftFieldVisibility(e),!0===e){this.isFeatureEnabled("TO_INTEGOT")&&(n.setVisible(!1),l.setVisible(!1));var m=new sap.ui.core.Item({text:this.getResourceBundleText("individuell"),key:"****"}),h=new sap.ui.core.CustomData({key:"OldShiftKey",value:t.getSelectedKey()});m.addCustomData(h),a.addItem(m),a.setSelectedItem(m)}else{if(this.isFeatureEnabled("TO_INTEGOT")&&(n.setVisible(!0),l.setVisible(!0)),"****"===a.getSelectedKey()){var y=r.getCustomDataValue(a.getSelectedItem().getAggregation("customData"),"OldShiftKey");a.removeItem(a.getSelectedIndex()),a.setSelectedKey(y)}g.getProperty("SubstTprog")?(a.setSelectedKey(g.getProperty("SubstTprog")),o.getVisible()&&o.setSelectedKey(g.getProperty("SubstVtart")),u.getVisible()&&(g.getProperty("SubstVolSh")?u.setSelected(!0):u.setSelected(!1)),i.setValue(c.format(new Date(g.getProperty("SubstBeguz").ms+p))),s.setValue(c.format(new Date(g.getProperty("SubstEnduz").ms+p)))):(a.setSelectedKey("dummy"),i.setValue(""),s.setValue(""),u.getVisible()&&u.setSelected(!1),o.getVisible()&&o.setSelectedKey(g.getProperty("SubstVtart")))}},onNewShiftSelect:function(){var e=sap.ui.getCore().byId("ld_inp_integratedOT"),t=sap.ui.getCore().byId("ld_select_shift");t.setValueState(sap.ui.core.ValueState.None);var a=t.getSelectedItem();t.setSelectedItem(a);var i=a.getBindingContext().getObject().OtShift;e.setValue(i);var s=t.getSelectedItem().getBindingContext().getObject(),o=s.Beguz+"0",n=s.Enduz+"0",r=sap.ui.getCore().byId("ld_tp_beguz_shift"),l=sap.ui.getCore().byId("ld_tp_enduz_shift"),d=sap.ui.getCore().byId("ld_dp_comdat"),u=sap.ui.getCore().byId("ld_tp_comuzeit"),g=sap.ui.core.format.DateFormat.getDateInstance({pattern:"HH:mm:ss"});if(this.ShiftDirty=!0,r.setValue(o),l.setValue(n),d.getVisible()){var p=new Date;d.setDateValue(p),u.setValue(g.format(p))}},createEmpShiftSuccess:function(){var e=sap.ui.getCore().byId("ld_select_shift");"****"===e.getSelectedKey()&&e.removeItem(e.getSelectedIndex());var t=sap.ui.getCore().byId("pnl_shift");sap.ui.getCore().byId("btn_shiftChangeCancel").setEnabled(!0),this.getEmpShift(),this.ShiftDirty=!1,t.setBusy(!1),s.show(this.getResourceBundleText("shiftchangecreated"))},onCancelShiftChangeOverview:function(e){sap.ui.getCore().byId("btn_shiftChangeCancel").setEnabled(!1);var t=sap.ui.getCore().byId("to_sf_shift").getBindingContext().getObject(),a=this.getView().getModel(),i=a.createKey("/substitutionSet",{Empid:t.Empid,Tprog:"",ShiftDate:t.ShiftDate,SubstTprog:t.SubstTprog,SubstSubty:t.SubstSubty});a.remove(i,{success:this.deleteEmpShiftSuccess.bind(this),error:function(e){this.createError(e)}.bind(this)})},deleteEmpShiftSuccess:function(){this.clearShiftInput(),this.getEmpShift(),sap.ui.getCore().byId("btn_shiftChangeCancel").setEnabled(!1),s.show(this.getResourceBundleText("shiftchangedeleted"))},clearShiftInput:function(){var e=sap.ui.getCore().byId("chb_ownShiftTimes"),t=sap.ui.getCore().byId("ld_select_shift"),a=sap.ui.getCore().byId("lbl_break1"),i=sap.ui.getCore().byId("ld_tp_beguz_break1"),s=sap.ui.getCore().byId("ld_tp_enduz_break1"),o=sap.ui.getCore().byId("lbl_break2"),n=sap.ui.getCore().byId("ld_tp_beguz_break2"),r=sap.ui.getCore().byId("ld_tp_enduz_break2"),l=sap.ui.getCore().byId("chb_voluntary"),d=sap.ui.getCore().byId("to_shift_select_tprogclass"),u=sap.ui.getCore().byId("to_shift_select_subtype");sap.ui.getCore().byId("btn_shiftChangeModify").setEnabled(!1),e.setSelected(!1),t.setEnabled(!0),a.setVisible(!1),i.setValue(),i.setVisible(!1),s.setValue(),s.setVisible(!1),o.setVisible(!1),n.setValue(),n.setVisible(!1),r.setValue(),r.setVisible(!1),l.setSelected(!1),d.setVisible(!1),d.setSelectedIndex(0),d.setEnabled(!0),u.setSelectedIndex(0)},onOwnShiftTimeSelect:function(e){var t=sap.ui.getCore().byId("ld_dp_comdat"),a=sap.ui.getCore().byId("ld_tp_comuzeit"),i=sap.ui.core.format.DateFormat.getDateInstance({pattern:"HH:mm:ss"});if(this.toggleEnabledShiftInput(e.getParameter("selected")),t.getVisible()){var s=new Date;t.setDateValue(s),a.setValue(i.format(s))}},getTimeEventSet:function(e){var t=this.getView().getModel(),a=new sap.ui.model.Filter("UnitKey",sap.ui.model.FilterOperator.EQ,e),i=sap.ui.getCore().byId("ld_select_timeevent"),s=sap.ui.getCore().byId("ld_dp_date").getDateValue();null!==s&&s.setHours(12);var o=new sap.ui.core.Item({text:"{CicotyText}",key:"{Cicoty}"});i.setModel(t),i.bindItems({path:"/cicoTypeSet",template:o,filters:[a],events:{dataReceived:function(){this._oCicoDialog&&this._oCicoDialog.setBusy(!1)}.bind(this)}})},onCicoEmployeeChange:function(){this.bindTimeEventTable()},onSaveCico:function(){var e=this.getView().getModel(),t=sap.ui.getCore().byId("ld_tbl_cicooverview");t.setBusy(!0);var a,i=sap.ui.getCore().byId("ld_select_emp"),s=sap.ui.getCore().byId("ld_dp_date"),o=sap.ui.getCore().byId("ld_tp_uz"),n=sap.ui.getCore().byId("ld_select_timeevent"),l=sap.ui.getCore().byId("chb_cico_day");if(a=this._oCicoDialog?r.getCustomDataValue(this._oCicoDialog.getAggregation("customData"),"UnitKey"):r.getCustomDataValue(this._oTimesOverviewDialog.getAggregation("customData"),"UnitKey"),sap.ui.getCore().byId("ld_inp_aufnr"))var d=sap.ui.getCore().byId("ld_inp_aufnr").getValue().split(" ")[0],u=sap.ui.getCore().byId("ld_inp_matnr").getValue().split(" ")[0],g=sap.ui.getCore().byId("ld_inp_zulage").getValue(),p=sap.ui.getCore().byId("ld_inp_kostenst").getValue().split(" ")[0];var c=i.getSelectedItem().getKey(),m=s.getDateValue(),h=o.getDateValue(),y=n.getSelectedItem().getKey(),b=sap.ui.core.format.DateFormat.getDateInstance({pattern:"yyyy-MM-ddTHH:mm:ss"}),_=sap.ui.core.format.DateFormat.getDateInstance({pattern:"PTHH\'H\'mm\'M\'ss\'S\'"}),C=b.format(m),f=_.format(h),D=l.getSelected();if(m&&h){var S={};S.EmpId=c,S.Ldate=C,S.Ltime=f,S.TimeeventTy=y,S.Aufnr=d,S.Matnr=u,S.Zulage=g,S.Kostenst=p,S.UnitKey=a,S.Prev=D,e.create("/timeEventNSet",S,{success:this.createCicoSuccess.bind(this),error:function(e){this.createError(e),t.setBusy(!1)}.bind(this)})}else t.setBusy(!1),m?s.setValueState(sap.ui.core.ValueState.None):s.setValueState(sap.ui.core.ValueState.Error),h?o.setValueState(sap.ui.core.ValueState.None):o.setValueState(sap.ui.core.ValueState.Error)},createCicoSuccess:function(){this.CicoDirty=!1,this.clearCicoInput();var e=this.getView().getModel("i18n").getResourceBundle().getText("cicocreated");s.show(e),this.toggleEnabledButtons("cico",-1),this.bindTimeEventTable(),this.fillOvertimeTable()},clearCicoInput:function(){var e=sap.ui.getCore().byId("ld_tp_uz"),t=sap.ui.getCore().byId("chb_cico_day"),a=sap.ui.getCore().byId("ld_select_timeevent");if(sap.ui.getCore().byId("ld_tbl_cicooverview").setSelectedIndex(-1),sap.ui.getCore().byId("ld_inp_aufnr")){var i=sap.ui.getCore().byId("ld_inp_aufnr"),s=sap.ui.getCore().byId("ld_inp_matnr"),o=sap.ui.getCore().byId("ld_inp_zulage"),n=sap.ui.getCore().byId("ld_inp_kostenst");i.setValue(),s.setValue(),o.setValue(),n.setValue()}e.setValue(),a.setSelectedIndex(0),a.setSelectedKey(0),t.setSelected(!1)},onUpdateCico:function(){var e,t=this.getView().getModel(),a=sap.ui.getCore().byId("ld_tbl_cicooverview"),i=sap.ui.getCore().byId("ld_select_emp"),s=sap.ui.getCore().byId("ld_dp_date"),o=sap.ui.getCore().byId("ld_tp_uz"),n=sap.ui.getCore().byId("ld_select_timeevent"),l=sap.ui.getCore().byId("chb_cico_day"),d=s.getDateValue(),u=o.getDateValue();if(e=this._oCicoDialog?r.getCustomDataValue(this._oCicoDialog.getAggregation("customData"),"UnitKey"):r.getCustomDataValue(this._oTimesOverviewDialog.getAggregation("customData"),"UnitKey"),sap.ui.getCore().byId("ld_inp_aufnr")){var g=sap.ui.getCore().byId("ld_inp_aufnr").getValue().split(" ")[0],p=sap.ui.getCore().byId("ld_inp_matnr").getValue().split(" ")[0],c=sap.ui.getCore().byId("ld_inp_zulage").getValue(),m=sap.ui.getCore().byId("ld_inp_kostenst"),h=m.getValue();h=m.getValue().split(" ")[0]}var y=n.getSelectedItem().getKey(),b=sap.ui.core.format.DateFormat.getDateInstance({pattern:"yyyy-MM-ddTHH:mm:ss"}),_=sap.ui.core.format.DateFormat.getDateInstance({pattern:"PTHH\'H\'mm\'M\'ss\'S\'"}),C=b.format(d),f=_.format(new Date(u));if(d&&u){var D={};D.EmpId=i.getSelectedItem().getKey(),D.Ldate=C,D.Ltime=f,D.TimeeventTy=y,D.UnitKey=e,D.Prev=l.getSelected(),sap.ui.getCore().byId("ld_inp_aufnr")&&(D.Aufnr=g,D.Matnr=p,D.Zulage=c,D.Kostenst=h);var S="/"+a.getBinding().aKeys[a.getSelectedIndex()];t.update(S,D,{success:this.updateCicoSuccess.bind(this),error:function(e){this.createError(e),a.setBusy(!1)}.bind(this)})}else a.setBusy(!1),d?s.setValueState(sap.ui.core.ValueState.None):s.setValueState(sap.ui.core.ValueState.Error),u?o.setValueState(sap.ui.core.ValueState.None):o.setValueState(sap.ui.core.ValueState.Error)},updateCicoSuccess:function(){sap.ui.getCore().byId("ld_tbl_cicooverview").setBusy(!0),this.CicoDirty=!1;var e=this.getView().getModel("i18n").getResourceBundle().getText("cicoupdated");s.show(e),this.clearCicoInput(),this.toggleEnabledButtons("cico",-1),this.bindTimeEventTable(),this.fillOvertimeTable()},onDeleteCico:function(){var e=sap.ui.getCore().byId("ld_tbl_cicooverview");e.setBusy(!0),-1!==e.getSelectedIndex()?r.openConfirmDialog("{i18n>deletecicosure}","{i18n>areyousure}","{i18n>deletecico}",this.deleteCico,null,this):r.openNoSelectedEntryDialog("{i18n>noselectedEntry}","{i18n>selectEntry}",null,this),e.setBusy(!1)},deleteCico:function(e){var t=sap.ui.getCore().byId("ld_tbl_cicooverview"),a=t.getContextByIndex(t.getSelectedIndex());e.getView().getModel().remove(a.sPath,{success:function(a,i){t.setBusy(!1),e.deleteCicoSuccess()},error:function(a){t.setBusy(!1),e.createError(a)}}),sap.ui.getCore().byId("ld_inp_aufnr")&&(sap.ui.getCore().byId("ld_inp_aufnr").setValue(),sap.ui.getCore().byId("ld_inp_matnr").setValue(),sap.ui.getCore().byId("ld_inp_zulage").setValue(),sap.ui.getCore().byId("ld_inp_kostenst").setValue())},deleteCicoSuccess:function(){var e=this.getView().getModel("i18n").getResourceBundle().getText("cicodeleted");s.show(e);var t=sap.ui.getCore().byId("ld_tbl_cicooverview");this.bindTimeEventTable(),0==t.getBinding("rows").getLength()&&(sap.ui.getCore().byId("ld_tp_uz").setValue(),sap.ui.getCore().byId("chb_cico_day").setSelected(!1),this.toggleEnabledButtons("cico",-1)),this.fillOvertimeTable()},destroyCicoDialog:function(e){this._oCicoDialog.destroy(),this._oCicoDialog=null},onCloseCicoDialog:function(e){this._oCicoDialog.close()},onCancelCicoOverview:function(e){this.CicoDirty=!1,this.clearCicoInput()},toggleEnabledButtons:function(e,t,a){var i="btn_"+e,s=sap.ui.getCore().byId(i+"Save"),o=sap.ui.getCore().byId(i+"Edit"),n=sap.ui.getCore().byId(i+"Cancel");s&&o&&n&&1!=a&&(void 0!=t&&-1!=t?(s.setEnabled(!1),o.setEnabled(!0),n.setEnabled(!0)):(s.setEnabled(!0),o.setEnabled(!1),n.setEnabled(!1)))},clearAbsPresInput:function(){var e=sap.ui.getCore().byId("ld_dp_begda_leave");sap.ui.getCore().byId("ld_dp_currentDate")&&e.setDateValue(sap.ui.getCore().byId("ld_dp_currentDate").getDateValue()),sap.ui.getCore().byId("ld_dp_endda_leave").setDateValue(sap.ui.getCore().byId("ld_dp_currentDate").getDateValue());var t=sap.ui.getCore().byId("ld_tp_beguz_leave");t&&t.setValue();var a=sap.ui.getCore().byId("ld_tp_enduz_leave");a&&a.setValue();var i=sap.ui.getCore().byId("ld_inp_duration_leave");i&&i.setValue(),sap.ui.getCore().byId("ld_select_subty_leave").setSelectedIndex(0),sap.ui.getCore().byId("chb_sprps")&&sap.ui.getCore().byId("chb_sprps").setSelected(!1)},onChangeDurationAbsence:function(){var e=sap.ui.getCore().byId("ld_tp_beguz_leave").getDateValue(),t=sap.ui.getCore().byId("ld_tp_enduz_leave"),a=sap.ui.getCore().byId("ld_inp_duration_leave").getValue();if(e&&a){var i=new Date(e.getTime()+36e5*a);t.setDateValue(i)}},onInputChangeAbsBeguz:function(e){""!==e.getParameter("value")?sap.ui.getCore().byId("ld_inp_duration_leave").setEditable(!0):(sap.ui.getCore().byId("ld_inp_duration_leave").setEditable(!1),sap.ui.getCore().byId("ld_inp_duration_leave").setValue()),this.onChangeDurationAbsence()},onOpenRptimeLog:function(e,t,a){var i=a.getSource(),s=this.getView().getModel(),o=new sap.m.Popover({beforeClose:function(){this.oRptimeLogOpen=!1}.bind(this),placement:"Auto"}),n=new sap.m.Button({text:"X",tooltip:"{18n>close}",press:function(){sap.ui.getCore().byId("ld_select_attention")&&sap.ui.getCore().byId("ld_select_attention").destroy(),o.close()}});o.setBusyIndicatorDelay(0),o.setBusy(!0);var r=new sap.m.List({headerText:"{i18n>messages}"});o.addContent(r);var l=new sap.m.ObjectListItem({title:"{EmpName}",type:"Active",press:this.onOpenRptimeEmpLog.bind(this),intro:"{Message}"});if(!0!==this.oRptimeLogOpen||(this.oMessagePopover.close(),a.getSource()!=this.oMsgSumSource)){var d=new sap.ui.model.Filter("UnitKey",sap.ui.model.FilterOperator.EQ,t);this.oMessagePopover=o,r.setModel(s),r.bindAggregation("items",{template:l,path:"/rptimeLogSet",filters:[d],events:{dataReceived:function(e){o.setBusy(!1),o.setEndButton(n)}}}),this.oMessagePopover.openBy(i),this.oRptimeLogOpen=!0}},onOpenRptimeEmpLog:function(e){var t,a=this.getView().getModel(),i=e.getSource(),s=new sap.m.Popover({placement:"Left",beforeClose:function(){t=!1}.bind(this)}),o=new sap.m.Button({text:"X",tooltip:"{18n>close}",press:function(){sap.ui.getCore().byId("ld_select_attention")&&sap.ui.getCore().byId("ld_select_attention").destroy(),s.close()}});s.setBusyIndicatorDelay(0),s.setBusy(!0);var n=new sap.m.List({headerText:"{i18n>messages}"});s.addContent(n);var r=new sap.m.ObjectListItem({title:"{MessageText}",type:"Inactive",intro:{path:"Begda",formatter:function(e){return sap.ui.core.format.DateFormat.getDateInstance({pattern:"dd.MM.yyyy"}).format(e)}}});if(!0!==t||(this.oMessagePopover.close(),e.getSource()!=this.oMsgSumSource)){var l=i.getBindingContext(),d=a.getProperty("EmpId",l),u=new sap.ui.model.Filter("EmpId",sap.ui.model.FilterOperator.EQ,d);this.oMessagePopover=s,n.setModel(a),n.bindAggregation("items",{template:r,path:"/rptimeEmpLogSet",filters:[u],events:{dataReceived:function(e){s.setBusy(!1),s.setEndButton(o)}}}),this.oMessagePopover.openBy(i),t=!0}},onStartRptime:function(e){var t,a=this.getView().getModel(),i=new sap.ui.model.Filter("UnitKey",sap.ui.model.FilterOperator.EQ,e),o=sap.ui.getCore().byId("dp_begda"),n=sap.ui.getCore().byId("dp_endda"),r=o.getDateValue(),l=n.getDateValue(),d=sap.ui.getCore().byId("mcb_employees").getSelectedKeys(),u="",g=this.getView().getModel("i18n").getResourceBundle().getText("rptimestarted");s.show(g);for(var p=0;p<d.length;p++)t=d[p],u=u?u+";"+t:t;var c=new sap.ui.model.Filter("Begda",sap.ui.model.FilterOperator.EQ,r),m=new sap.ui.model.Filter("Endda",sap.ui.model.FilterOperator.EQ,l),h=new sap.ui.model.Filter("EmpIds",sap.ui.model.FilterOperator.EQ,u);a.read("/rptimeSet",{filters:[h,c,m,i],success:function(){this.onCloseRpTime();var t=sap.ui.getCore().byId("btn_rptimemsg_"+e);this._oRptime.clearBuffer(e),t.setType(sap.m.ButtonType.Unstyled),t.setText(""),this.heartBeatTrigger=new sap.ui.core.IntervalTrigger(1),this.heartBeatTrigger.setInterval(3e3),setTimeout(function(){this.heartBeatTrigger.addListener(function(){this.getRptimeDataInInterval(e)}.bind(this))}.bind(this),1e3)}.bind(this),error:function(e){this.createError(e)}.bind(this)})},getRptimeDataInInterval:function(e,a){var i=sap.ui.getCore().byId("btn_rptimemsg_"+e);this._oRptime.refreshBuffer(e,i).then(function(e){if(e.aItems[0])if(e.aItems[0].Amount>0||!0===e.aItems[0].Finish){if(e.aItems[0].Amount>0){if(e.oTemplate.setType(sap.m.ButtonType.Reject),e.oTemplate.setText(e.aItems[0].Amount),"TimeOverview"===a)sap.ui.getCore().byId("li_rp_to_msg").getBinding("items").refresh(!0),sap.ui.getCore().byId("pnl_rptime").setBusy(!1)}else e.oTemplate.setType(sap.m.ButtonType.Accept),e.oTemplate.setText("");this.heartBeatTrigger.setInterval(0),t.information(this.getResourceBundleText("rptimesuccess"))}else e.oTemplate.setType(sap.m.ButtonType.Unstyled),e.oTemplate.setText("")}.bind(this))},prepareRPTIME:function(e){this._oRpTimeDialog||(this._oRpTimeDialog=sap.ui.xmlfragment("MIND2PEP_PLANNER.fragments.RpTime",this,{refreshAfterChange:!0}),this._oRpTimeDialog.attachAfterClose(this.destroyRpTimePopup.bind(this)),this.getView().addDependent(this._oRpTimeDialog)),this._oRpTimeDialog.open(),this._oRpTimeDialog.setBusyIndicatorDelay(0),this._oRpTimeDialog.setBusy(!0);new Date,new sap.ui.core.Item({text:"{Name}",key:"{EmpId}"});var t=sap.ui.getCore().byId("mcb_employees"),a=new sap.ui.model.Filter("UnitKey",sap.ui.model.FilterOperator.EQ,e),i=this.getSelectedBegda(),s=this.getSelectedEndda(),o=sap.ui.getCore().byId("dp_begda"),n=sap.ui.getCore().byId("dp_endda");o.setDateValue(i),n.setDateValue(s),i.setUTCDate(i.getDate()),s.setUTCDate(s.getDate());var r,l=this.getFormattedDate(i),d=this.getFormattedDate(s),u=new sap.ui.model.odata.v2.ODataModel("/sap/opu/odata/MIND2/PEP_YEAR_SRV",{refreshAfterChange:!0}),g=new sap.ui.model.Filter("Begda",sap.ui.model.FilterOperator.EQ,l),p=new sap.ui.model.Filter("Endda",sap.ui.model.FilterOperator.EQ,d);u.read("/EmployeeSet",{filters:[a,g,p],success:function(e){r=this.prepareLocalEmployeeModel(e),t.setModel(r,"oLocalEmployeeModel"),this._oRpTimeDialog.setBusy(!1)}.bind(this)}),sap.ui.getCore().byId("btn_start_rptime").attachPress(this.onStartRptime.bind(this,e))},prepareXLSDOWN:function(e){this._oExcelDialog||(this._oExcelDialog=sap.ui.xmlfragment("MIND2PEP_PLANNER.fragments.PlanExcelCreate",this,{refreshAfterChange:!0}),this._oExcelDialog.attachAfterClose(this.destroyPlanExcelPopup.bind(this)),this.getView().addDependent(this._oExcelDialog)),this._oExcelDialog.open(),this._oExcelDialog.setBusyIndicatorDelay(0);var t=this.getSelectedBegda(),a=new Date(t.getFullYear(),t.getMonth(),1),i=new Date(a.getFullYear()+1,a.getMonth(),0),s=(t=sap.ui.getCore().byId("dp_excel_begda"),sap.ui.getCore().byId("dp_excel_endda"));t.setDateValue(a),s.setDateValue(i),sap.ui.getCore().byId("btn_download_excel").attachPress(this.downloadExcel.bind(this,e))},prepareEMP_EXCEL:function(e){this._oEmpExcelDialog||(this._oEmpExcelDialog=sap.ui.xmlfragment("MIND2PEP_PLANNER.fragments.PlanEmpExcelCreate",this,{refreshAfterChange:!0}),this._oEmpExcelDialog.attachAfterClose(this.destroyPlanEmpExcelPopup.bind(this)),this.getView().addDependent(this._oEmpExcelDialog)),this._oEmpExcelDialog.open(),this._oEmpExcelDialog.setBusyIndicatorDelay(0);var t=this.getSelectedBegda();sap.ui.getCore().byId("dp_emp_excel_date").setDateValue(t),sap.ui.getCore().byId("btn_download_emp_excel").attachPress(this.downloadEmpExcel.bind(this,e))},prepareTO_MAIN:function(e){var t;t=e,this.openTimeOverviewPopup(null,t,void 0)},prepareROSTER:function(){var e=new y(this);this._oRosterDialog||(this._oRosterDialog=sap.ui.xmlfragment("MIND2PEP_PLANNER.fragments.ExportRosterPDF",e,{refreshAfterChange:!0}),this._oRosterDialog.attachAfterClose(this.destroyRosterPopup.bind(this)),this.getView().addDependent(this._oRosterDialog)),this._oRosterDialog.open(),this._oRosterDialog.setBusyIndicatorDelay(0)},prepareTIMSTAT:function(e){if(!this._oTimStatDialog){this._oTimStatDialog=sap.ui.xmlfragment("MIND2PEP_PLANNER.fragments.FormTimeStatementCreate",this,{refreshAfterChange:!0}),this._oTimStatDialog.attachAfterClose(this.destroyTimeStatementForm.bind(this)),this.getView().addDependent(this._oTimStatDialog);var t=this.getOwnerComponent().getModel("TimStatView");void 0===t.getProperty("/selectedA")&&void 0===t.getProperty("/selectedB")&&(t.setProperty("/selectedA",!0),t.setProperty("/selectedB",!1)),this._oTimStatDialog.setModel(t)}this._oTimStatDialog.open(),this._oTimStatDialog.setBusyIndicatorDelay(0),this._oTimStatDialog.setBusy(!0);var a=sap.ui.getCore().byId("mp_timeSlipMonth"),i=sap.ui.getCore().byId("yp_timeSlipYear"),s=new Date;a.setMonth(s.getMonth()),i.setDate(new Date);new sap.ui.core.Item({text:"{Name}",key:"{EmpId}"});var o=sap.ui.getCore().byId("mcb_employees"),n=new sap.ui.model.Filter("UnitKey",sap.ui.model.FilterOperator.EQ,e),r=this.getSelectedBegda(),l=this.getSelectedEndda();r.setUTCDate(r.getDate()),l.setUTCDate(l.getDate());var d,u=this.getFormattedDate(r),g=this.getFormattedDate(l),p=new sap.ui.model.odata.v2.ODataModel("/sap/opu/odata/MIND2/PEP_YEAR_SRV",{refreshAfterChange:!0}),c=new sap.ui.model.Filter("Begda",sap.ui.model.FilterOperator.EQ,u),m=new sap.ui.model.Filter("Endda",sap.ui.model.FilterOperator.EQ,g);p.read("/EmployeeSet",{filters:[n,c,m],success:function(e){d=this.prepareLocalEmployeeModel(e),o.setModel(d,"oLocalEmployeeModel"),this._oTimStatDialog.setBusy(!1)}.bind(this)}),sap.ui.getCore().byId("btn_download_timstat_pdf").attachPress(this.downloadTimeStatementPDF.bind(this,e,t))},prepareLocalEmployeeModel:function(e){for(var t=new sap.ui.model.json.JSONModel,a=e.results,i={employees:[]},s=0;s<a.length;s++){var o={};o.EmpId=a[s].EmpId,o.EmpName=a[s].Name,i.employees.push(o)}return t.setData(i),t.oData.employees.unshift({EmpId:"All",EmpName:this.getResourceBundleText("selectall")}),t},onTsEmpChange:function(e){var t,a,i=e.getParameter("changedItem"),s="Selected";if(e.getParameter("selected")||(s="Deselected"),"All"===i.mProperties.key)if("Selected"===s){for(var o=e.oSource.mAggregations.items,n=0;n<o.length;n++)t=0===n?o[n].mProperties.key:t+","+o[n].mProperties.key;a=t.split(","),e.oSource.setSelectedKeys(a)}else a=null,e.oSource.setSelectedKeys(a)},downloadTimeStatementPDF:function(e,t){var a,i,s=sap.ui.getCore().byId("mp_timeSlipMonth"),o=sap.ui.getCore().byId("yp_timeSlipYear"),n=sap.ui.getCore().byId("mcb_employees"),r=sap.ui.core.format.DateFormat.getDateInstance({pattern:"yyyyMMdd"}),l=n.getSelectedKeys(),d="",u="";if(!0===t.getProperty("/selectedB")?(a=r.format(sap.ui.getCore().byId("dp_timestat_begda").getDateValue()),i=r.format(sap.ui.getCore().byId("dp_timestat_endda").getDateValue())):(a=r.format(new Date(o.getDate().getFullYear(),s.getMonth(),1)),i=r.format(new Date(o.getDate().getFullYear(),s.getMonth()+1,0))),a&&i&&l.length>0){for(var g=0;g<l.length;g++)if(u){if("All"===(u=l[g]))continue;d=d+"F"+(u=this.encryptEmployeeId(l[g]))}else{if("All"===(u=l[g])){u="";continue}d+=u=this.encryptEmployeeId(l[g])}var p="/timStatSet(UK=\'"+e+"\',EI=\'"+d+"\',Begda=\'"+a+"\',Endda=\'"+i+"\')/$value";p="/sap/opu/odata/MIND2/PEP_PLANNER_SRV"+p,window.open(p,"_blank"),this._oTimStatDialog.close(),this._oTimStatDialog.destroy(),this._oTimStatDialog=null}},destroyTimeStatementForm:function(){this._oTimStatDialog.destroy(),this._oTimStatDialog=null},destroyPlanExcelPopup:function(e){this._oExcelDialog.destroy(),this._oExcelDialog=null},destroyPlanEmpExcelPopup:function(e){this._oEmpExcelDialog.destroy(),this._oEmpExcelDialog=null},destroyRosterPopup:function(e){this._oRosterDialog.destroy(),this._oRosterDialog=null},destroyRpTimePopup:function(e){this._oRpTimeDialog.destroy(),this._oRpTimeDialog=null},onCloseTimeStatementForm:function(){this._oTimStatDialog.close()},onCloseYearExcelPopup:function(e){this._oExcelDialog.close()},onCloseEmpExcelPopup:function(e){this._oEmpExcelDialog.close()},onCloseRosterDialog:function(e){this._oRosterDialog.close()},onCloseRpTime:function(e){this._oRpTimeDialog.close()},encryptEmployeeId:function(e){return 3*e+2},onInputChange:function(e){var t=e.getParameter("id");sap.ui.getCore().byId(t).setValueState(sap.ui.core.ValueState.None)},onInputChangeShift:function(e){this.onInputChange(e),this.ShiftDirty=!0},onInputChangeAllowAmount:function(){},onInputChangeAllowHours:function(){},onInputChangeCico:function(e){this.onInputChange(e),this.CicoDirty=!0},onInputChangeAbs:function(e){this.onInputChange(e),this.AbsDirty=!0},onInputChangeAbsFreeDays:function(e){this.onInputChange(e),this.AbsDirty=!0,e.getParameter("selected")},onInputChangeOvertime:function(e){this.onInputChange(e),this.OvertimeDirty=!0},onOvertimeInputChange:function(e){var t=e.getParameter("id");sap.ui.getCore().byId(t).setValueState(sap.ui.core.ValueState.None),this.fillOvertimeTable()},onLeaveInputChange:function(e){var t=e.getParameter("id");sap.ui.getCore().byId(t).setValueState(sap.ui.core.ValueState.None),this.fillLeaveTable()},onNewAllowanceSelect:function(e){var t=e.getParameter();e.getSource().getModel("AllowanceModel").setProperty("/Allowance",t),this.AllowDirty=!0},onCicoDirty:function(){this.CicoDirty=!0},onOvertimeDirty:function(){var e=sap.ui.getCore().byId("ld_select_comment_overtime");sap.ui.getCore().byId("ld_inp_comment_overtime").setRequired("SONST"==e.getSelectedKey()),this.OvertimeDirty=!0},downloadPDF:function(e,t){for(var a=sap.ui.getCore().byId("dp_form_begda").getDateValue(),i=sap.ui.getCore().byId("rbg_timeFrame").getSelectedButton(),s=this._oPrintFormDialog.getModel("FormDownloadModel"),o=3===s.getProperty("/RadioIndex")&&s.getProperty("/CustomWeekCount")||r.getCustomDataValue(i.getCustomData(),"weeks"),n=new Date(a),l=0;l<o;l++)n.setDate(n.getDate()+7);if(Date.prototype.toJSONLocal=function(){function e(e){return(e<10?0:"")+e}return this.getFullYear()+"-"+e(this.getMonth()+1)+"-"+e(this.getDate())+"T12:00:00"},!0===t){var d="/formSet(UnitKey=\'"+e+"\',NumWeeks="+o+",Begda=datetime\'"+a.toJSONLocal()+"\')/$value ";d="/sap/opu/odata/MIND2/PEP_PLANNER_SRV"+d,window.open(d,"_blank"),this._oPrintFormDialog.close(),this._oPrintFormDialog.destroy(),this._oPrintFormDialog=null}else this.checkOpenMsgBeforeExport(a,n,"downloadPDF",e)},prepareHIDE:function(e){this._oHideDialog||(this._oHideDialog=sap.ui.xmlfragment("MIND2PEP_PLANNER.fragments.HideShowColumns",this),this._oHideDialog.attachAfterClose(this.destroyHideShowColumns.bind(this)),this.getView().addDependent(this._oHideDialog),this._oHideDialog.addCustomData(new sap.ui.core.CustomData({key:"UnitKey",value:e})),this._oHideDialog.setBusyIndicatorDelay(0),this._oHideDialog.setBusy(!0));var t=this.getView().getModel(),a=0;if(this.isFeatureEnabled("VARIANT")){sap.ui.getCore().byId("sf_buildVariant").setVisible(!0);var i=sap.ui.getCore().byId("ld_select_variant"),s=new sap.ui.core.Item({text:"{VariantName}",key:"{Variant}"});if(i.setModel(t),i.bindAggregation("items",{path:"/colVariantSet",template:s,events:{dataReceived:function(){for(var t=0;t<i.getAggregation("items").length;t++)if(i.getItems()[t].getBindingContext().getProperty("IsActive")){i.setSelectedIndex(t),a=i.getSelectedKey();break}this.updateHideShowPopup(e,a)}.bind(this)}}),this.isFeatureEnabled("VARIANTEMP")){var o=sap.ui.getCore().byId("idSelectEmployees").getBinding("items"),n=this.getView().getModel("Customizing").getProperty("/StartDate"),r=this.getView().getModel("Customizing").getProperty("/EndDate"),l=[new sap.ui.model.Filter("UnitKey","EQ",e),new sap.ui.model.Filter("Begda","EQ",n),new sap.ui.model.Filter("Endda","EQ",r)];o.filter(l,"Application")}}else this.updateHideShowPopup(e,a);sap.ui.getCore().byId("btn_newVariant").attachPress(this.onSaveVariant.bind(this,e)),sap.ui.getCore().byId("btn_del_variant").attachPress(this.onDeleteVariant.bind(this,e)),sap.ui.getCore().byId("btn_show_hide_save").attachPress(this.onShowHideSave.bind(this,e)),this._oHideDialog.open()},onMassSelection:function(){var e=sap.ui.getCore().byId("idSelectEmployees");e.getSelectedKeys().length===e.getItems().length?(e.clearSelection(),e.removeAllSelectedItem()):e.setSelectedKeys(e.getKeys()),e.fireSelectionChange()},onEmployeeSelChange:function(e){var t=e.getSource(),a=sap.ui.getCore().byId("selectAllEmployees");t.getItems().length!==t.getSelectedItems().length?a.setIcon("sap-icon://accept"):a.setIcon("sap-icon://decline")},onNewVariantSelect:function(e){var t=this._oHideDialog.getCustomData(),a=r.getCustomDataValue(t,"UnitKey"),i=this.getView().getModel().getProperty("Variant",e.getParameter("selectedItem").getBindingContext());this.updateHideShowPopup(a,i)},updateHideShowPopup:function(e,t){var a=this.getView().getModel(),i=new sap.ui.model.Filter("UnitKey",sap.ui.model.FilterOperator.EQ,e),s=new sap.ui.model.Filter("Variant",sap.ui.model.FilterOperator.EQ,t),o=sap.ui.getCore().byId("vb_hide_cols"),n=new sap.m.CheckBox({text:"{ColText}",selected:"{IsActive}"});if(o.setModel(a),o.bindAggregation("items",{path:"/mycolSet",filters:[i,s],template:n,events:{dataReceived:function(){this._oHideDialog.setBusy(!1)}.bind(this)}}),this.isFeatureEnabled("VARIANTEMP")){var r=sap.ui.getCore().byId("idSelectEmployees").getBinding("items"),l=function(e){var t=[];e.getSource().getContexts().forEach(function(e){e.getProperty("IsVisible")&&t.push(e.getProperty("EmpId"))}),sap.ui.getCore().byId("idSelectEmployees").setSelectedKeys(t),sap.ui.getCore().byId("idSelectEmployees").fireSelectionChange(),r.detachChange(l)};r.attachChange(l),r.filter(s),r.isSuspended()&&r.resume()}},prepareSELDROP:function(e){this._oSelectDropdown||(this._oSelectDropdown=sap.ui.xmlfragment("MIND2PEP_PLANNER.fragments.SelectDropdowns",this),this._oSelectDropdown.attachAfterClose(this.destroySelectDropdown.bind(this)),this.getView().addDependent(this._oSelectDropdown),this._oSelectDropdown.setBusyIndicatorDelay(0),this._oSelectDropdown.setBusy(!0));var t=this.getView().getModel(),a=sap.ui.getCore().byId("btn_select_dropdown_save"),i=new sap.ui.model.Filter("UnitKey",sap.ui.model.FilterOperator.EQ,e),s=(t=this.getView().getModel(),sap.ui.getCore().byId("sel_ddtype")),o=sap.ui.getCore().byId("vb_select_dropdown"),n=new sap.ui.core.Item({text:"{Description}",key:"{KeyValue}"}),r=new sap.m.CheckBox({text:"{ItemText}",selected:"{Selected}"});a.attachPress(this.onSelectDropdownSave.bind(this,e)),s.setModel(t),s.bindItems({path:"/ddSelectSet",template:n,filters:[i],events:{dataReceived:function(e){var a=e.getSource().getModel().getProperty(e.getSource().getContexts()[0].getPath()).KeyValue,s=new sap.ui.model.Filter("DropKey",sap.ui.model.FilterOperator.EQ,a);o.setModel(t),o.bindAggregation("items",{path:"/selectDropdownSet",filters:[i,s],template:r,events:{dataReceived:function(){this._oSelectDropdown.setBusy(!1)}.bind(this)}})}.bind(this)}}),this._oSelectDropdown.open()},onDDTypeChange:function(e){var t=this.getView().getModel(),a=e.getSource().getModel().getObject(e.getSource().getSelectedItem().getBindingContext().getPath()),i=a.KeyValue,s=a.UnitKey,o=sap.ui.getCore().byId("vb_select_dropdown"),n=new sap.ui.model.Filter("UnitKey",sap.ui.model.FilterOperator.EQ,s),r=new sap.ui.model.Filter("DropKey",sap.ui.model.FilterOperator.EQ,i),l=new sap.m.CheckBox({text:"{ItemText}",selected:"{Selected}"});o.setModel(t),o.bindAggregation("items",{path:"/selectDropdownSet",filters:[n,r],template:l,events:{dataReceived:function(){this._oSelectDropdown.setBusy(!1)}.bind(this)}})},selectDeselectAllHideShow:function(e){var t;t=sap.ui.getCore().byId("vb_hide_cols").getAggregation("items");if(e.getSource().getSelected())for(var a=0;a<t.length;a++)t[a].setSelected(!0);else for(a=0;a<t.length;a++)t[a].setSelected(!1)},selectDeselectAllNewsletter:function(e){var t;t=sap.ui.getCore().byId("vb_mails").getAggregation("items");if(e.getSource().getSelected())for(var a=0;a<t.length;a++)t[a].setSelected(!0);else for(a=0;a<t.length;a++)t[a].setSelected(!1)},selectDeselectAllSelectDropdown:function(e){var t;t=sap.ui.getCore().byId("vb_select_dropdown").getAggregation("items");if(e.getSource().getSelected())for(var a=0;a<t.length;a++)t[a].setSelected(!0);else for(a=0;a<t.length;a++)t[a].setSelected(!1)},onSaveVariant:function(e){var t=this.getView().getModel(),a=this.getView().getModel("i18n").getResourceBundle(),i=sap.ui.getCore().byId("ld_inp_newVariant"),o=i.getValue();if(i.setValueState(sap.ui.core.ValueState.None),o){var n={};n.VariantName=o,t.create("/colVariantSet",n,{success:function(t){this.onUpdateHideShowSelect(e,t)}.bind(this)}),i.setValue("");var r=a.getText("variantcreated");s.show(r)}else{i.setValueState(sap.ui.core.ValueState.Error);var l=a.getText("nonameforvariant");s.show(l)}},onDeleteVariant:function(e,t){var a,i=this.getView().getModel(),o=sap.ui.getCore().byId("ld_select_variant").getSelectedItem().getKey(),n=this.getView().getModel("i18n").getResourceBundle(),r="/colVariantSet("+o+")";i.remove(r,{success:function(){this.onUpdateHideShowSelect(e,void 0)}.bind(this)}),a=0==o?n.getText("variantnotdeleted"):n.getText("variantdeleted"),s.show(a)},onUpdateHideShowSelect:function(e,t){var a=this.getView().getModel(),i=sap.ui.getCore().byId("ld_select_variant"),s=new sap.ui.core.Item({text:"{VariantName}",key:"{Variant}"});i.setModel(a),i.bindAggregation("items",{path:"/colVariantSet",template:s,events:{dataReceived:function(){var a;a=t?t.Variant:0,i.setSelectedKey(a),this.updateHideShowPopup(e,a)}.bind(this)}})},destroyHideShowColumns:function(){this._oHideDialog.destroy(),this._oHideDialog=null},onCloseHideShow:function(){this._oHideDialog.close()},onCloseSelectDropdown:function(){this._oSelectDropdown.close()},destroySelectDropdown:function(){this._oSelectDropdown.destroy(),this._oSelectDropdown=null},preparePOOL:function(e){var t;this._oAddPoolDialog||(this._oAddPoolDialog=sap.ui.xmlfragment("MIND2PEP_PLANNER.fragments.PoolEmployee",this),this._oAddPoolDialog.attachAfterClose(this.destroyAddPoolEmployee.bind(this)),this.getView().addDependent(this._oAddPoolDialog),(t=sap.ui.getCore().byId("tbl_pool_emps")).setBusyIndicatorDelay(0),sap.ui.getCore().byId("btn_emp_add_pool").attachPress(this.addPoolEmp.bind(this,e)));var a=this.getView().getModel(),i=sap.ui.getCore().byId("cal_date_int_pool").setMinDate(this.getSelectedBegda()).setMaxDate(this.getSelectedEndda());i.removeCustomData("UnitKey"),i.addCustomData(new sap.ui.core.CustomData({key:"UnitKey",value:e}));var s=new sap.ui.unified.DateRange,o=sap.ui.getCore().byId("select_pool_quals");if(this.oCustomizing.PlanHideQKey)var n=new sap.ui.core.Item({text:"{QualText}",key:"{QualId}"});else n=new sap.ui.core.Item({text:"{QualId} - {QualText}",key:"{QualId}"});o.destroyItems();var r=new sap.ui.model.Filter("UnitKey",sap.ui.model.FilterOperator.EQ,e);o.setModel(a),o.bindAggregation("items",{path:"/qualificationSet",filters:[r],template:n});var l=new sap.ui.model.Filter("Begda",sap.ui.model.FilterOperator.BT,this.getSelectedBegda(),this.getSelectedEndda());t.setModel(a),t.bindAggregation("rows",{path:"/poolEmpSet",filters:[r,l],events:{dataRequested:function(){t.setBusy(!0)},dataReceived:function(){t.setBusy(!1)}}}),s.setStartDate(this.getSelectedBegda()),s.setEndDate(this.getSelectedEndda()),i.insertSelectedDate(s),this._oAddPoolDialog.open()},onPoolDelete:function(e){var t=this.getView().getModel().getProperty("EmpId",e.getParameter("row").getBindingContext()),a=this.getView().getModel().getProperty("UnitKey",e.getParameter("row").getBindingContext()),i="/poolEmpSet(EmpId=\'"+t+"\',UnitKey=\'"+a+"\')",s=this.getView().getModel();this.getView().getModel().remove(i,{success:function(){var e=new sap.ui.model.Filter("UnitKey",sap.ui.model.FilterOperator.EQ,a),t=new sap.ui.model.Filter("Begda",sap.ui.model.FilterOperator.BT,this.getSelectedBegda(),this.getSelectedEndda()),i=sap.ui.getCore().byId("tbl_pool_emps");i.setModel(s),i.bindAggregation("rows",{path:"/poolEmpSet",filters:[e,t],events:{dataRequested:function(){i.setBusy(!0)},dataReceived:function(){i.setBusy(!1)}}})}.bind(this)})},addPoolEmp:function(e){var a=sap.ui.getCore().byId("inp_pool").getValue(),i=this.getView().getModel(),s=this.getSelectedBegda("cal_date_int_pool"),o=this.getSelectedEndda("cal_date_int_pool");if(""==a||void 0==a)sap.ui.getCore().byId("inp_pool").setValueState("Error");else if(s||o){var n=sap.ui.getCore().byId("select_pool_quals").getSelectedKey();this.checkSuccessPool("99999999999",e,s,o,n,a);var r=sap.ui.getCore().byId("tbl_pool_emps"),l=new sap.ui.model.Filter("UnitKey",sap.ui.model.FilterOperator.EQ,e),d=new sap.ui.model.Filter("Begda",sap.ui.model.FilterOperator.BT,this.getSelectedBegda(),this.getSelectedEndda());r.setModel(i),r.bindAggregation("rows",{path:"/poolEmpSet",filters:[l,d],events:{dataRequested:function(){r.setBusy(!0)},dataReceived:function(){r.setBusy(!1)}}})}else t.error(this.getResourceBundleText("begdaenddamissing"))},destroyAddPoolEmployee:function(){this._oAddPoolDialog.destroy(),this._oAddPoolDialog=null},closeAddPoolEmployee:function(){this._oAddPoolDialog.close()},onOpenDiscardChangesPopup:function(e){var t=new a({title:"{i18n>discardchangestitle}",content:new sap.m.Text({text:"{i18n>discardchanges}"}),beginButton:new i({type:"Reject",text:"{i18n>discard}",press:function(){this.discardUnsavedChanges(e),this._oUnsavedChangesDialog.close()}.bind(this)}),endButton:new i({text:"{i18n>txtcancel}",press:function(){this._oUnsavedChangesDialog.close()}.bind(this)})});t.addCustomData(new sap.ui.core.CustomData({key:"UnitKey",value:e})),this._oUnsavedChangesDialog||(this._oUnsavedChangesDialog=t,this._oUnsavedChangesDialog.attachAfterClose(this.destroyUnsavedChangesDialog.bind(this)),this.getView().addDependent(this._oUnsavedChangesDialog)),this._oUnsavedChangesDialog.open()},destroyUnsavedChangesDialog:function(){this._oUnsavedChangesDialog.destroy(),this._oUnsavedChangesDialog=null},discardUnsavedChanges:function(e){for(var t=this.getView().getModel("CBData"),a=0,i=t.getData().length,s=0;s<i;s++)t.getData()[a].UnitKey===e?t.getData().splice(a,1):a++;this.refreshTablesInUnit(e)},onRefreshUnit:function(e){var t=!1;if(this.getView().getModel("CBData"))for(var a=this.getView().getModel("CBData"),i=0;i<a.getData().length;i++)a.getData()[i].UnitKey===e&&(t=!0,this.onOpenDiscardChangesPopup(e));!1===t&&sap.ui.getCore().byId("pnl"+e).getExpanded()&&this.refreshTablesInUnit(e)},refreshTablesInUnit:function(e){var t=sap.ui.getCore().byId("tbl_plan_"+e),a=sap.ui.getCore().byId("tbl_sum_"+e);t.getVisible()&&(t.setBusy(!0),t.destroyColumns(),this.fillUnitTable(t,e)),a.getVisible()&&(a.setBusy(!0),a.destroyColumns(),this.fillSumTable(a,e))},destroyButtonsInUnit:function(e){var t=sap.ui.getCore().byId("tbl_plan_"+e);if(t)for(var a=t.getColumns(),i=0,s=0,o=0;o<a.length;o++)a[o].getId().match("^c")?i++:(s=o-i,sap.ui.getCore().byId("btn_date"+e+s).destroy())},prepareAUTO:function(e){var t=this.getView().getModel(),a=this.getSelectedBegda(),i=this.getSelectedEndda();t.callFunction("/AutoPlanUnit",{method:"POST",urlParameters:{UnitKey:e,Begda:a,Endda:i},success:function(){this.onRefreshUnit(e)}.bind(this),error:function(e){this.createError(e)}})},panelExpand:function(e,t,a,i,s){if(s.getParameter("expand")){if(!0===s.getParameter("triggeredByInteraction")){for(var o=!1,n=this.getSelectedBegda().getTime(),l=!1,d=0;d<t.getColumns().length;d++){var u=r.getCustomDataValue(t.getColumns()[d].getCustomData(),"PlanDate");if(u="string"==typeof u?parseInt(u):u){u!==n&&(l=!0);break}}0===t.getRows().length?this.fillUnitTable(t,i):l&&(this.refreshTablesInUnit(i),o=!0),!1===o&&0===e.getRows().length&&this.fillSumTable(e,i)}for(d=0;d<a.getContent().length;d++)if("sap.m.ToggleButton"!=a.getContent()[d].getMetadata().getName()&&"sap.m.Button"!=a.getContent()[d].getMetadata().getName()||a.getContent()[d].setVisible(!0),"sap.m.Select"==a.getContent()[d].getMetadata().getName()&&this.isFeatureEnabled("VARIANT")){a.getContent()[d].setVisible(!0);var g=[];g=a.getContent()[d].getItems();for(var p={},c=0;c<g.length;c++)p={},(p=g[c].getBindingContext().getObject()).IsActive&&a.getContent()[d].setSelectedKey(p.Variant)}}else for(d=0;d<a.getContent().length;d++)"sap.m.ToggleButton"!=a.getContent()[d].getMetadata().getName()&&"sap.m.Button"!=a.getContent()[d].getMetadata().getName()||a.getContent()[d].setVisible(!1),"sap.m.Select"==a.getContent()[d].getMetadata().getName()&&a.getContent()[d].setVisible(!1)},hideButtons:function(e,t){if(t.getParameter("pressed"))for(var a=0;a<e.length;a++)"sap.m.Button"!=e[a].getMetadata().getName()&&"sap.m.MenuButton"!=e[a].getMetadata().getName()||e[a].setVisible(!0);else for(a=0;a<e.length;a++)"sap.m.Button"!=e[a].getMetadata().getName()&&"sap.m.MenuButton"!=e[a].getMetadata().getName()||e[a].setVisible(!1)},onHideEmpBtnPress:function(e,t,a){var i;if(a.getParameter("pressed"))for(var s=0;s<e.length;s++)e[s].getId().match("^vbox_hideEmp_")&&(e[s].getVisible()||e[s].setVisible(!0),i=sap.ui.getCore().byId(e[s].getId()).getItems()[0],this.buildHideEmpTable(t,i));else for(var o=0;o<e.length;o++)e[o].getId().match("^vbox_hideEmp_")&&((i=sap.ui.getCore().byId(e[o].getId()).getItems()[0]).destroyColumns(),i.getExtension()[0].destroy(),i.setVisible(!1))},buildHideEmpTable:function(e,t){var a=new sap.ui.model.Filter("Begda",sap.ui.model.FilterOperator.EQ,this.getSelectedBegda()),i=new sap.ui.model.Filter("Endda",sap.ui.model.FilterOperator.EQ,this.getSelectedEndda()),s=new sap.ui.model.Filter("UnitKey",sap.ui.model.FilterOperator.EQ,e),o=this.getView().getModel();t.addColumn(new sap.ui.table.Column({label:new sap.m.Label({text:"{i18n>empname}"}),template:new sap.m.Text({text:"{EmpName}"}),autoResizable:!1})),t.addColumn(new sap.ui.table.Column({label:new sap.m.Label({text:"{i18n>isshown}",tooltip:"{i18n>tthideemp}"}),template:new sap.m.Switch({state:"{Show}",type:"AcceptReject",change:this.onSwitchEmpVisibility.bind(this)}),hAlign:"Center",autoResizable:!1}));var n="tbtn_hideAll"+e,r=new sap.m.Switch({id:n,tooltip:"{i18n>tthideall}",type:"AcceptReject",change:this.onHideAllEmps.bind(this,t,e)});t.addExtension(new sap.m.Toolbar({width:"350px",content:[new sap.m.Label({text:"{i18n>lblhideall}"}),new sap.m.ToolbarSpacer({width:"80px"}),r],design:"Solid"})),t.setModel(o),t.bindAggregation("rows",{path:"/hideEmployeeSet",filters:[a,i,s],events:{dataReceived:function(a){t.setVisibleRowCount(a.getSource().getContexts().length),t.setVisible(!0),this.setInitialHideAllButtonState(a,e)}.bind(this)}})},setInitialHideAllButtonState:function(e,t){var a=e.getSource().getContexts(),i=sap.ui.getCore().byId("tbtn_hideAll"+t),s=0;$.each(a,function(e,t){t.getProperty("Show")&&s++}),s===a.length&&i.setState(!0)},onHideAllEmps:function(e,t,a){e.setBusy(!0);for(var i,s=e.getModel(),o=a.getSource().getState(),n=0;n<e.getBinding().getLength();n++)i=e.getBinding().getContexts()[n],s.setProperty("Show",o,i);e.setBusy(!1),s.submitChanges(),o||this.destroyAllRows(t)},destroyAllRows:function(e){var t=sap.ui.getCore().byId("tbl_plan_"+e),a=t.getModel(),i=a.getData().modelData.rows;i.splice(0,i.length),a.refresh(),t.setVisibleRowCount(0),t.refreshRows()},onSwitchEmpVisibility:function(e){var t=e.getSource().getParent().getBindingContext(),a=e.getSource().getParent().getParent(),i=t.getModel(),o=t.getPath(),n=e.getParameter("state");i.setProperty("Show",n,t),i.update(o,t.getObject(),{refreshAfterChange:!1}),!1===n?(this.destroySingleRow(t),this.setHideAllButtonState(a,t.getProperty("UnitKey"))):(this.setHideAllButtonState(a,t.getProperty("UnitKey")),s.show(this.getResourceBundleText("plsrefresh")))},setHideAllButtonState:function(e,t){var a="tbtn_hideAll"+t,i=sap.ui.getCore().byId(a),s=(e.getModel(),e.getBinding().getContexts().length),o=0,n=e.getRows();$.each(n,function(e,t){!0===t.getBindingContext().getProperty("Show")&&o++}.bind(this)),o===s?i.setState(!0):i.setState(!1)},destroySingleRow:function(e){var t=e.getProperty("UnitKey"),a=sap.ui.getCore().byId("tbl_plan_"+t),i=e.getProperty("EmpId");if(a){var s=a.getRows();if(s.length>0){var o,n,r,l=0,d=0;$.each(s,function(e,t){r=t.getModel(),n=r.getData().modelData.rows[d].EmpID,o=t.getParent(),n===i?(r.oData.modelData.rows.splice(d,1),o.getAggregation("rows").splice(d,1),l++):d++}.bind(this)),r.refresh(),o.setVisibleRowCount(o.getVisibleRowCount()-l),o.refreshRows()}}},hidePlanData:function(e,t,a){if(a.getParameter("pressed"))for(var i=0;i<e.length;i++){if(e[i].getId().match("^tbl_plan_"))(s=sap.ui.getCore().byId(e[i].getId())).setVisible(!0),s.setBusy(!0),s.getColumns().length?this.unitTableFinalService(s):this.fillUnitTable(s,t)}else for(i=0;i<e.length;i++){var s;if(e[i].getId().match("^tbl_plan_"))(s=sap.ui.getCore().byId(e[i].getId())).destroyColumns(),s.setVisible(!1)}},hideSumData:function(e,t,a){if(a.getParameter("pressed"))for(var i=0;i<e.length;i++){if(e[i].getId().match("^tbl_sum_"))(s=sap.ui.getCore().byId(e[i].getId())).setVisible(!0),s.setBusy(!0),this.fillSumTable(s,t)}else for(i=0;i<e.length;i++){var s;if(e[i].getId().match("^tbl_sum_"))(s=sap.ui.getCore().byId(e[i].getId())).destroyColumns(),s.setVisible(!1)}},setUnbusy:function(e){e.setBusy(!1)},prepareABSENCES:function(e){g.setController(this),g.openTimeOverviewPopup(null,e,null,"TO_ABS")},prepareLEGEND:function(e){this._oLegendDialog||(this._oLegendDialog=sap.ui.xmlfragment("MIND2PEP_PLANNER.fragments.ColorLegend",this)),this.getView().addDependent(this._oLegendDialog);var t=new sap.ui.model.Filter("UnitKey",sap.ui.model.FilterOperator.NE,e);this.getView().getModel().read("/legendSet",{filters:[t],success:this.legendReadSuccess.bind(this,e)}),this._oLegendDialog.attachAfterClose(this.destroyLegendDialog.bind(this)),this._oLegendDialog.open(),this._oLegendDialog.setBusyIndicatorDelay(0),this._oLegendDialog.setBusy(!0)},closeLegendDialog:function(){this._oLegendDialog.close()},destroyLegendDialog:function(){this._oLegendDialog.destroy(),this._oLegendDialog=null},legendReadSuccess:function(e,t){var a=t.results,i=sap.ui.getCore().byId("FormLegend");i.destroyContent();for(var s=0;s<a.length;s++){var o=new sap.m.Label({width:"50px",layoutData:new sap.ui.layout.GridData({span:"XL1 L1 M1 S1",linebreak:!0})});o.addCustomData(new sap.ui.core.CustomData({key:"background",value:a[s].LegendColor})),o.addEventDelegate({onAfterRendering:this.onAfterRenderLegendText});var n=new sap.m.Text({text:a[s].LegendText,layoutData:new sap.ui.layout.GridData({span:"XL11 L11 M11 S11"})});i.addContent(o),i.addContent(n)}this._oLegendDialog.setBusy(!1)},prepareLOG:function(e){this._oLogDialog||(this._oLogDialog=sap.ui.xmlfragment("MIND2PEP_PLANNER.fragments.Log",this)),this.getView().addDependent(this._oLogDialog);var t=new sap.ui.model.Filter("UnitKey",sap.ui.model.FilterOperator.NE,e);this._oLogDialog.attachAfterClose(this.destroyLogPopup.bind(this)),this._oLogDialog.setBusyIndicatorDelay(0),this._oLogDialog.setBusy(!0);var a=this.getView().getModel(),i=sap.ui.getCore().byId("tbl_log");i.setModel(a),i.bindAggregation("rows",{path:"/logSet",filters:[t],events:{dataReceived:function(e){this._oLogDialog.setBusy(!1)}.bind(this)}}),this._oLogDialog.open()},closeLogDialog:function(){this._oLogDialog.close()},destroyLogPopup:function(){this._oLogDialog.destroy(),this._oLogDialog=null},onAfterRenderLegendText:function(e){var t=e.srcControl.getId();if("background"==e.srcControl.getAggregation("customData")[0].getProperty("key"))var a=e.srcControl.getAggregation("customData")[0].getProperty("value");else a=e.srcControl.getAggregation("customData")[1].getProperty("value");""!=a&&$("#"+t).parent().css("background-color",a)},prepareADDEMP:function(e,t){this.getView().getModel().read("/employeeFilterCustSet(\'"+e+"\')",{success:this.openAddEmployee.bind(this,e)})},onEditVerleihung:function(e){this._addNeueWerkerverleihung||(this._addNeueWerkerverleihung=sap.ui.xmlfragment("MIND2PEP_PLANNER.fragments.Werkerverleihung",this,{refreshAfterChange:!0}),this.getView().addDependent(this._addNeueWerkerverleihung)),this._addNeueWerkerverleihung.open()},onEditVerleihungSender:function(e){e.getSource().getBindingContext().getObject()},prepareWERKERVER:function(e,t){this._addWerkerverleihung||(this._addWerkerverleihung=sap.ui.xmlfragment("MIND2PEP_PLANNER.fragments.VerleihungAnlegen",this,{refreshAfterChange:!0}),this.getView().addDependent(this._addWerkerverleihung)),this._addWerkerverleihung.open();var a=sap.ui.getCore().byId("idVerleihungTableReciver"),i=this.getView().getModel();a.setBusyIndicatorDelay(0),a.setBusy(!0),a.setModel(i),a.unbindAggregation("rows"),a.unbindAggregation("items"),a.bindAggregation("rows",{path:"/verleihungReceiverSet",events:{dataReceived:function(){a.setBusy(!1),this.getView().getModel("Customizing").setProperty("/ReceiverRow",a._iBindingLength),this.getView().getModel("Customizing").refresh()}.bind(this)}});var s=sap.ui.getCore().byId("idVerleihungTableSender");s.setBusyIndicatorDelay(0),s.setBusy(!0),s.setModel(i),s.unbindAggregation("rows"),s.unbindAggregation("items"),s.bindAggregation("rows",{path:"/verleihungSenderSet",events:{dataReceived:function(){s.setBusy(!1),this.getView().getModel("Customizing").setProperty("/SenderRow",s._iBindingLength),this.getView().getModel("Customizing").refresh()}.bind(this)}});var o=new sap.ui.model.Filter("UnitKey",sap.ui.model.FilterOperator.EQ,e);this.getView().getModel().read("/loan_employeSet",{filters:[o],success:function(e){this.getView().getModel("Customizing").setProperty("/loan_employe",e.results),this.getView().getModel("Customizing").refresh()}.bind(this),error:function(e){}})},_loadEmployeeTime:function(e,t){this.getView().getModel("Customizing").setProperty("/vUnitKey",e);var a=sap.ui.getCore().byId("idEmployeeNewTimeTable"),i=this.getView().getModel(),s=new Date;s.setDate(t.getDate()+1),a.setBusyIndicatorDelay(0),a.setBusy(!0);var o=new sap.ui.model.Filter("PlanDate",sap.ui.model.FilterOperator.BT,t,s),n=new sap.ui.model.Filter("UnitKey",sap.ui.model.FilterOperator.EQ,e);sap.ui.getCore().byId("DateStartTime").setDateValue(t),a.setBusyIndicatorDelay(0),a.setBusy(!0),a.setModel(i),a.unbindAggregation("rows"),a.unbindAggregation("items"),a.bindAggregation("rows",{path:"/GetEmployeeListforEndTimeSet",filters:[o,n],groupId:e,events:{dataReceived:function(){a.setBusy(!1)}}})},prepareTIMEEND:function(e,t){this._addBusinessTime||(this._addBusinessTime=sap.ui.xmlfragment("MIND2PEP_PLANNER.fragments.addNewBusinessTime",this,{refreshAfterChange:!0}),this.getView().addDependent(this._addBusinessTime)),this._addBusinessTime.open();var a=new Date;a.setDate(a.getDate()+1),this._loadEmployeeTime(e,a)},changeDateStart:function(){var e=this.getView().getModel("Customizing").getProperty("/vUnitKey"),t=sap.ui.getCore().byId("DateStartTime").getDateValue();t.setHours(t.getHours()+8),this._loadEmployeeTime(e,t),sap.ui.getCore().byId("TP2").setDateValue()},closeNewTime:function(){this._addBusinessTime.close()},closeWerkerverleihung:function(){this._addNeueWerkerverleihung.close()},saveWerkerverleihung:function(){this._addNeueWerkerverleihung.close()},closeVerleihungen:function(){this._addWerkerverleihung.close()},saveNewTime:function(){for(var e=sap.ui.getCore().byId("idEmployeeNewTimeTable"),a=this.getSelectedBegda(),i=[],o=0;o<e.getRows().length;o++)if(""!==e.getRows()[o].getCells()[0].getText()){var n=e.getRows()[o].getBindingContext().sPath.split("Employee=")[1].substring(1,11),r=e.getRows()[o].getCells()[2].getValue().split(":"),l={EmpId:n,PlanDate:a,Time:"PT"+r[0]+"H"+r[1]+"M00S"};i.push(l)}var d={SaveNewTimeforBusinessTripNav:i};this.getView().getModel().create("/SaveNewTimeforBusinessTripSet",d,{refreshAfterChange:!0,success:function(){s.show(this.getResourceBundleText("saved")),this._addBusinessTime.close()}.bind(this),error:function(){t.error(this.getResourceBundleText("tterror"))}.bind(this)})},ModifyAllTime:function(){for(var e=sap.ui.getCore().byId("TP2"),t=sap.ui.getCore().byId("idEmployeeNewTimeTable"),a=0;a<t.getRows().length;a++)t.getRows()[a].getCells()[2].setValue(e.getValue())},openAddEndTime:function(e,t){},openAddEmployee:function(e,t){this.getView().setBusy(!0);var a,i=this.getView().getModel();a=!!this.isFeatureEnabled("DROPDOWN");var s=this.getSelectedBegda(),o=this.getSelectedEndda();if(void 0!==s&&void 0!==o){if(s.setDate(s.getDate()-1),o.setDate(o.getDate()+1),!this._oAddEmployeeDialog){var n=new c(this,e);this._oAddEmployeeDialog=sap.ui.xmlfragment("MIND2PEP_PLANNER.fragments.SelectEmployee",n),n.createEmpTable(),this._oAddEmployeeDialog.attachAfterClose(this.destroySelectDialog.bind(this)),this._oAddEmployeeDialog.attachAfterOpen(this.setDialogUnbusy.bind(this)),sap.ui.getCore().byId("tbl_emp_selection")}sap.ui.getCore().byId("sf_emp_name").addCustomData(new sap.ui.core.CustomData({key:"UnitKey",value:e})),this._oAddEmployeeDialog.setBusyIndicatorDelay(0),this._oAddEmployeeDialog.setBusy(!0),this.oEmployeeFilterCust=t,this.getView().addDependent(this._oAddEmployeeDialog);var r=sap.ui.getCore().byId("cal_date_int");r.removeCustomData("UnitKey"),r.addCustomData(new sap.ui.core.CustomData({key:"UnitKey",value:e})),r.setStartDate(s);var l=new sap.ui.unified.DateRange,d=sap.ui.getCore().byId("select_add_quals"),u=sap.ui.getCore().byId("lbl_add_quals");if(d.setVisible(a),u.setVisible(a),d.getEnabled()){if(this.oCustomizing.PlanHideQKey)var g=new sap.ui.core.Item({text:"{QualText}",key:"{QualId}"});else g=new sap.ui.core.Item({text:"{QualId} - {QualText}",key:"{QualId}"});d.destroyItems();var p=new sap.ui.model.Filter("UnitKey",sap.ui.model.FilterOperator.EQ,e);d.setModel(i),d.bindAggregation("items",{path:"/qualificationSet",filters:[p],template:g})}if(l.setStartDate(s),l.setEndDate(o),r.insertSelectedDate(l),t.EmpQualAvailable&&this.loadQualsInAddEmployee(e),t.EmpSgAvailable){var m=sap.ui.getCore().byId("mcb_sg");sap.ui.getCore().byId("vb_sg_box").setVisible(!0);var h=new sap.ui.core.Item({text:"{SgText}",key:"{SgKey}"});m.setModel(i),m.bindAggregation("items",{path:"/shiftGroupFilterSet",filters:[p],template:h,events:{dataReceived:function(){sap.ui.getCore().byId("mcb_sg").getAggregation("items").length>0&&sap.ui.getCore().byId("mcb_sg").setVisible(!0)}.bind(this)}});var y=sap.ui.getCore().byId("dp_begda"),b=sap.ui.getCore().byId("dp_endda");y.setDateValue(this.getSelectedBegda()),this.isFeatureEnabled("EMPONEDAY")?b.setDateValue(this.getSelectedBegda()):b.setDateValue(this.getSelectedEndda())}if(t.EmpAvailAvailable){var _=sap.ui.getCore().byId("vb_av");sap.ui.getCore().byId("vb_av_box").setVisible(!0),(g=new sap.m.CheckBox({text:"{AvailText}",selected:!1})).addCustomData(new sap.ui.core.CustomData({key:"AvailKey",value:{path:"AvailKey"}})),_.setModel(i),_.bindAggregation("items",{path:"/availabilityFilterSet",filters:[p],template:g})}t.EmpNameSearchAvail&&sap.ui.getCore().byId("vb_ns_box").setVisible(!0),this._oAddEmployeeDialog.open(),this.getView().setBusy(!1)}else this.getView().setBusy(!1)},setDialogUnbusy:function(e){e.getSource().setBusy(!1)},fillAssignableEmployeesTable:function(e){var t=e.results,a=sap.ui.getCore().byId("tbl_emp_selection");a.setBusy(!0);var i=new sap.ui.model.json.JSONModel;i.setData({modelData:t}),a.setModel(i).bindRows("/modelData"),!0===this._oAddEmployeeDialog.getBusy()&&this._oAddEmployeeDialog.setBusy(!1),!0===a.getBusy()&&a.setBusy(!1)},loadQualsInAddEmployee:function(e){var t=this.getSelectedBegda(),a=this.getSelectedEndda(),i=this.getView().getModel();if(null!=a&&void 0!=a){var s=this.getSelectedBegda("cal_date_int"),o=this.getSelectedEndda("cal_date_int");if(null!=o&&void 0!=o){t.setHours(12),a.setHours(12);var n=new sap.ui.model.Filter("Begda",sap.ui.model.FilterOperator.EQ,s),r=new sap.ui.model.Filter("Endda",sap.ui.model.FilterOperator.EQ,o);sap.ui.getCore().byId("vb_qual_box").setVisible(!0);var l=sap.ui.getCore().byId("mcb_quals"),d=new sap.ui.model.Filter("HasBedarf",sap.ui.model.FilterOperator.EQ,!1),u=new sap.ui.model.Filter("HasBedarf",sap.ui.model.FilterOperator.EQ,!0),g=sap.ui.getCore().byId("vb_qual"),p=new sap.ui.model.Filter("UnitKey",sap.ui.model.FilterOperator.EQ,e);if(this.oCustomizing.PlanHideQKey)var c=new sap.m.CheckBox({text:"{QualText}",selected:!1});else c=new sap.m.CheckBox({text:"{QualKey} - {QualText}",selected:!1});if(c.addCustomData(new sap.ui.core.CustomData({key:"qualid",value:"{QualKey}"})),this.isFeatureEnabled("DEMAND")){if(g.setModel(i),g.bindAggregation("items",{path:"/qualificationFilterSet",filters:[p,n,r,u],template:c}),this.oCustomizing.PlanHideQKey)var m=new sap.ui.core.Item({text:"{QualText}",key:"{QualKey}"});else m=new sap.ui.core.Item({text:"{QualKey} - {QualText}",key:"{QualKey}"});l.setModel(i),l.bindAggregation("items",{path:"/qualificationFilterSet",filters:[p,n,r,d],template:m,events:{dataReceived:function(){sap.ui.getCore().byId("mcb_quals").getAggregation("items").length>0&&sap.ui.getCore().byId("mcb_quals").setVisible(!0)}.bind(this)}})}else g.setModel(i),g.bindAggregation("items",{path:"/qualificationFilterSet",filters:[p],template:c})}}},destroySelectDialog:function(){this._oAddEmployeeDialog.destroy(),this._oAddEmployeeDialog=null},closeSelectDialog:function(){this._oAddEmployeeDialog.close()},addEmployee:function(e){var t=this.getView().getModel(),a=sap.ui.getCore().byId("tbl_emp_selection"),i=a.getSelectedIndex();if(-1!==i){var s=a.getContextByIndex(i).getObject().EmpId,o=sap.ui.getCore().byId("dp_begda"),n=sap.ui.getCore().byId("dp_endda"),r=o.getDateValue(),l=n.getDateValue(),d=sap.ui.getCore().byId("select_add_quals"),u="";if(d.getVisible())u=d.getSelectedKey();else u="";r.setUTCDate(r.getDate()),l.setUTCDate(l.getDate()),null!=s&&void 0!=s&&t.callFunction("/CheckAddEmployee",{method:"POST",urlParameters:{QualKey:u,EmpId:s,UnitKey:e,Begda:r,Endda:l},success:function(t,a){this.checkSuccess(s,e,r,l,u)}.bind(this),error:function(t){for(var a=JSON.parse(t.responseText).error.innererror.errordetails,i=!1,o=0;o<a.length;o++)"/IWBEP/CX_MGW_BUSI_EXCEPTION"==a[o].code&&a.splice(o,1);for(var n=0;n<a.length;n++)"error"==a[n].severity&&(i=!0);var u=new sap.ui.model.json.JSONModel;u.setData(a);var g=new sap.m.MessageView({items:{path:"/",template:C}}),p=new sap.m.Dialog({title:i?"{i18n>errormsg}":"{i18n>warningmsg}",resizable:!0,content:g,endButton:new sap.m.Button({press:function(){p.close()},text:"{i18n>close}"}),contentHeight:"300px",contentWidth:"500px",verticalScrolling:!1});g.setModel(u),p.setState(i?"Error":"Warning"),this.getView().addDependent(p),i||p.setBeginButton(new sap.m.Button({text:"{i18n>adduser}",press:function(){p.close(),this.checkSuccess(s,e,r,l,d.getSelectedKey())}.bind(this)})),p.open()}.bind(this)})}},checkSuccess:function(e,t,a,i,s,o){var n,r=this.getView().getModel();n=void 0===o||null===o?"":o.toString(),r.callFunction("/AddEmployee",{method:"POST",urlParameters:{EmpName:n,QualKey:s,EmpId:e,UnitKey:t,Begda:a,Endda:i},success:function(e,t){this.refreshAllTables(),this._oAddEmployeeDialog.close(),this._oAddEmployeeDialog.destroy(),this._oAddEmployeeDialog=null}.bind(this),error:function(e){this.createError(e)}.bind(this)})},checkSuccessPool:function(e,t,a,i,s,o){var n,r=this.getView().getModel();n=void 0===o||null===o?"":o.toString(),r.callFunction("/AddEmployee",{method:"POST",urlParameters:{EmpName:n,EmpId:e,UnitKey:t,Begda:a,Endda:i},success:function(e,t){}.bind(this),error:function(e){this.createError(e)}.bind(this)})},fillUnitTable:function(e,t){e.setBusy(!0),this.fillUnitColumns(e,t)},fillSumTable:function(e,t){var a=this.getView().getModel();e.setBusy(!0);var i=(this.getView().byId("cal_timeframe").getVisible()?this.getView().byId("cal_timeframe"):this.getView().byId("cal_interval")).getSelectedDates();if(i.length>0){var s=i[0].getStartDate(),o=i[0].getEndDate();if(null==o)return;var n=new Date(s),r=new Date(o);n.setHours(12),r.setHours(12),n.setUTCDate(n.getDate()),r.setUTCDate(r.getDate())}if(n&&r){e.setBusy(!0);var l=new sap.ui.model.Filter("PlanDate",sap.ui.model.FilterOperator.BT,n,r),d=new sap.ui.model.Filter("UnitKey",sap.ui.model.FilterOperator.EQ,t);a.read("/sumMetaDataSet",{groupId:t,filters:[l,d],success:this.sumMetaSuccess.bind(this,e,t),error:function(){e.setBusy(!1)}.bind(this)})}},readCustomizing:function(){this.getView().getModel().read("/featureUsageSet",{success:function(e){$.when(this.readFunctionsSuccess(e)).then(function(){this.getView().getModel().read("/customizingUISet(1)",{success:function(e){$.when(this.readCustomizingSuccess(e)).then(function(){this.getView().getModel().read("/genCustSet",{success:function(e){$.when(this.readGenCustSuccess(e)).then(function(){var e=this.getView().byId("slider_nolines");this.isFeatureEnabled("ROWCOUNT")&&(e.setVisible(!0),this.getView().byId("lbl_slider_nolines").setVisible(!0)),this.isFeatureEnabled("EMPSEARCH")&&this.getView().byId("btn_search_employee").setVisible(!0),this.getView().getModel().read("/userCustomizingSet(\'sy-uname\')",{success:function(t){var a=this.getView().getModel("UserData");this.oUserCust=t,Object.keys(t).forEach(function(e){a.setProperty("/"+e,t[e])}),e.setValue(this.oUserCust.Nooflines),this.applyingChangesAfterUserCustomizing()}.bind(this),error:function(){e.setValue(this.oCustomizing.PlanVisRows)}.bind(this)})}.bind(this))}.bind(this),error:this.handleError.bind(this)})}.bind(this))}.bind(this),error:this.handleError.bind(this)})}.bind(this))}.bind(this),error:this.handleError.bind(this)})},applyingChangesAfterUserCustomizing:function(){this.getView().byId("sbtn_rowheight").fireSelectionChange()},readFunctionsSuccess:function(e,t){var a=$.Deferred(),i=this.getView().getModel("UserData");return e.results?(a.resolve(),this.aFeatureUsage=e.results,i.setProperty("/features",{}),e.results.forEach(function(e){i.setProperty("/features/"+e.FeatureKey,e)})):(a.resolve(),this.aFeatureUsage.push(e)),a},readGenCustSuccess:function(e){var t=$.Deferred();return e.results?(t.resolve(),this.aGenCust=e.results):(t.resolve(),this.aGenCust.push(e)),t},readCustomizingSuccess:function(e,t){var a,i=$.Deferred();this.oCustomizing=e,e.PlanStyleClass&&this.getView().addStyleClass(e.PlanStyleClass),a=this.getView().byId("cal_interval"),i.resolve(),a.setMinDate(new Date(e.PlanVisBegda)),a.setMaxDate(new Date(e.PlanVisEndda));var s=new sap.ui.unified.DateRange,o=new Date(e.PlanBegdaDefault),n=new Date(e.PlanEnddaDefault),r=this.getOwnerComponent().getComponentData();(void 0!==r&&r.startupParameters.startDate&&r.startupParameters.endDate&&(o=new Date(r.startupParameters.startDate[0]),n=new Date(r.startupParameters.endDate[0])),s.setStartDate(o),s.setEndDate(n),this.setShownMonthInCalendar(a),this.getView().getModel("Customizing").setProperty("/StartDate",o),this.getView().getModel("Customizing").setProperty("/EndDate",n),a.insertSelectedDate(s),this.getView().byId("pnl_timeframe").setExpanded(!0),this.getView().byId("cal_interval").setVisible(!0),this.getView().byId("cal_timeframe").setVisible(!1),this.isFeatureEnabled("SAVE"))&&(this.getView().byId("btnSave").setVisible(!0),this.getView().byId("btnCancel").setVisible(!0));return i},setShownMonthInCalendar:function(e,t){t||(t=new Date);var a=new Date(t.getFullYear(),t.getMonth(),1),i=a.getMonth()+1,s=a.getYear(),o=this.daysInMonth(i,s);e.setStartDate(a),e.setDays(o)},onCalStartDateChange:function(){var e=this.getView().byId("cal_interval"),t=e.getStartDate();t.setDate(t.getDate()+15);var a=new Date(t.getFullYear(),t.getMonth(),1);this.setShownMonthInCalendar(e,a)},daysInMonth:function(e,t){return new Date(t,e,0).getDate()},isFeatureEnabled:function(e){for(var t=0;t<this.aFeatureUsage.length;t++)if(this.aFeatureUsage[t].FeatureKey==e)return this.aFeatureUsage[t].IsActive;return!1},isFeatureFavorite:function(e){for(var t=0;t<this.aFeatureUsage.length;t++)if(this.aFeatureUsage[t].FeatureKey==e&&!0===this.aFeatureUsage[t].IsFavorite)return!0},getCustValue:function(e){for(var t=0;t<this.aGenCust.length;t++)if(this.aGenCust[t].Name==e)return this.aGenCust[t].Value;return null},handleError:function(e,t){},handleException:function(e){var a;a=e.responseText&&e.responseText.match("^<html")?jQuery.parseHTML(e.responseText):JSON.parse(e.responseText).error?JSON.parse(e.responseText).error.innererror.errordetails:this.getView().getModel("i18n").getResourceModel().getText("error_exception");for(var i=0;i<a.length;i++)"/IWBEP/CX_MGW_BUSI_EXCEPTION"!=a[i].code?t.error(a[i].message):a.splice(i,1);var s=f.getModel(),o=s.getData();$.extend(o,a),s.setData(o)},initializeModel:function(){this.getView().getModel().setSizeLimit(1e3)},getResourceBundleText:function(e){return this.getView().getModel("i18n").getResourceBundle().getText(e)},fillUnitColumns:function(e,t){var a=new sap.ui.model.Filter("UnitKey",sap.ui.model.FilterOperator.EQ,t);this.getView().getModel().read("/metaUnitSet",{groupId:t,success:function(a){this.readMetaUnitSuccess(e,t,a)}.bind(this),error:function(t){e.setBusy(!1)}.bind(this),filters:[a],refreshAfterChange:!1})},readMetaUnitSuccess:function(e,t,a){var i=a.results;if(i){for(var s=0;s<i.length;s++){var o;"BUTTON"===i[s].ColumnType?((o=new sap.m.Button({text:{path:i[s].FieldKey+"/value"},tooltip:{path:i[s].FieldKey+"/Tooltip"},press:this.openPopup.bind(this),width:"100%",type:sap.m.ButtonType.Transparent,enabled:{parts:[i[s].FieldKey+"/disabled","readonly"],formatter:function(e,t){return!(e||t)}}}).addStyleClass("sapMButtonText")).addCustomData(new sap.ui.core.CustomData({key:"EmpID",value:{path:i[s].FieldKey+"/EmpID",formatter:n.checkCustomDataIsString}})),o.addCustomData(new sap.ui.core.CustomData({key:"UnitKey",value:t})),o.addCustomData(new sap.ui.core.CustomData({key:"fragment",value:{path:i[s].FieldKey+"/fragment",formatter:n.checkCustomDataIsString}}))):"UNASSIGN"===i[s].FieldKey?((o=new sap.m.Button({text:{path:i[s].FieldKey+"/value"},tooltip:{path:i[s].FieldKey+"/Tooltip"},visible:"{= !${readonly}}",press:this.unassignEmployee.bind(this),width:"100%",type:sap.m.ButtonType.Reject,enabled:{path:i[s].FieldKey+"/disabled",formatter:function(e){return!e}}})).addCustomData(new sap.ui.core.CustomData({key:"EmpID",value:{path:i[s].FieldKey+"/EmpID",formatter:n.checkCustomDataIsString}})),o.addCustomData(new sap.ui.core.CustomData({key:"UnitKey",value:t})),o.addCustomData(new sap.ui.core.CustomData({key:"fragment",value:{path:i[s].FieldKey+"/fragment",formatter:n.checkCustomDataIsString}}))):o=new sap.m.Text({text:{path:i[s].FieldKey+"/value"},tooltip:{path:i[s].FieldKey+"/Tooltip"},wrapping:!1}),o.addEventDelegate({onBeforeRendering:this.onBeforeRenderTemplate}),o.addEventDelegate({onAfterRendering:this.onAfterRenderTemplate}),o.addCustomData(new sap.ui.core.CustomData({key:"background",writeToDom:!0,value:{path:i[s].FieldKey+"/color",formatter:n.checkCustomDataIsString}}));var r=new sap.ui.unified.MenuTextFieldItem({label:"Filter",icon:"sap-icon://filter",select:this.onColumnFilter.bind(this)}),l=new sap.ui.table.Column("col_"+t+i[s].FieldKey,{template:o,autoResizable:!0,menu:new sap.ui.unified.Menu({items:[r]})});r._column=l,r._table=e;var d=new sap.m.Label("lbl_unit"+t+s);d.setWidth("1px"),0===s&&(d.setTextAlign(sap.ui.core.TextAlign.Center),d.setWidth("100%"),d.setDesign(sap.m.LabelDesign.Bold),l.setHeaderSpan([i.length,1]));var u=new sap.m.Label("lbl_"+t+i[s].FieldKey);u.setText(i[s].FieldLabel),l.addMultiLabel(d),l.setWidth(i[s].ColumnWidth),l.addMultiLabel(u),e.addColumn(l)}this.readDateUnit(e,t),e._fixedCC=i.length}else this.readDateUnit(e,t)},readDateUnit:function(e,t){var a=this.getView().getModel(),i=(this.getView().byId("cal_timeframe").getVisible()?this.getView().byId("cal_timeframe"):this.getView().byId("cal_interval")).getSelectedDates();if(i.length>0){var s=i[0].getStartDate(),o=i[0].getEndDate();if(null==o)return;var n=new Date(s),r=new Date(o);n.setHours(12),r.setHours(12),n.setUTCDate(n.getDate()),r.setUTCDate(r.getDate())}if(n&&r){var l=new sap.ui.model.Filter("PlanDate",sap.ui.model.FilterOperator.BT,n,r),d=new sap.ui.model.Filter("UnitKey",sap.ui.model.FilterOperator.EQ,t);a.read("/commentSet",{filters:[l,d],success:function(e){this.getOwnerComponent().getModel("Comments").setData(e,!0)}.bind(this),error:function(){}}),this.getView().getModel().read("/metaDateSet",{groupId:t,filters:[l,d],success:function(a){this.readMetaDateSuccess(e,t,a)}.bind(this),error:function(t){e.setBusy(!1)}.bind(this),refreshAfterChange:!1})}},onBeforeRenderTemplate:function(e){var t;"CB"===r.getCustomDataValue(e.srcControl.getAggregation("customData"),"ColumnType")&&(t=e.srcControl.getSelectedKey(),e.srcControl.setSelectedKey(""),e.srcControl.setSelectedKey(t))},onAfterRenderTemplate:function(e){var t=e.srcControl.getId(),a=r.getCustomDataValue(e.srcControl.getAggregation("customData"),"background");$("#"+t).parent().parent().css("background-color",a)},onAfterRenderQualTemplate:function(e){var t=e.srcControl.getId(),a=r.getCustomDataValue(e.srcControl.getAggregation("customData"),"backgroundqual");$("#"+t).css("background-color",a)},readMetaDateSuccess:function(e,t,a){var i=a.results;if(i&&i.length>0)for(var s=i[0].PlanDate,o=0;o<i.length;o++){var r=new Date(i[o].PlanDate);r.setHours(12);var l,d=Date.parse(r.toString()),u=new sap.m.FormattedText("lbl_date"+t+i[o].FieldKey+d,{width:"100%"});this.checkHasComment(d,t)?u.setHtmlText("<p style=\'color:#03a9f4;text-align:center;font-weight:bolder;margin-block-start:0px;margin-block-end:0px;font-size:1rem\'>"+i[o].LabelText+"</p>"):u.setHtmlText("<p style=\'text-align:center;font-weight:bold;margin-block-start:0px;margin-block-end:0px;font-size:1rem\'>"+i[o].LabelText+"</p>"),"BUTTON"===i[o].ColumnType?((l=new sap.m.Button({text:{path:i[o].FieldKey+d+"/value"},tooltip:{path:i[o].FieldKey+d+"/Tooltip"},press:this.openPopup.bind(this),width:"100%",type:sap.m.ButtonType.Transparent,enabled:{parts:[i[o].FieldKey+d+"/disabled","readonly"],formatter:function(e,t){return!(e||t)}}}).addStyleClass("sapMButtonText")).addCustomData(new sap.ui.core.CustomData({key:"EmpID",value:{path:i[o].FieldKey+d+"/EmpID",formatter:n.checkCustomDataIsString}})),l.addCustomData(new sap.ui.core.CustomData({key:"PlanDate",value:d.toString()})),l.addCustomData(new sap.ui.core.CustomData({key:"UnitKey",value:t})),l.addCustomData(new sap.ui.core.CustomData({key:"fragment",value:{path:i[o].FieldKey+d+"/fragment",formatter:n.checkCustomDataIsString}})),l.addCustomData(new sap.ui.core.CustomData({key:"ColumnType",value:"Button"}))):"TEXT"===i[o].ColumnType?(l=new sap.m.Text({text:{path:i[o].FieldKey+d+"/value"},tooltip:{path:i[o].FieldKey+d+"/Tooltip"},wrapping:!1})).addCustomData(new sap.ui.core.CustomData({key:"ColumnType",value:"Text"})):"CB"===i[o].ColumnType?(l=new sap.m.ComboBox({value:{path:i[o].FieldKey+d+"/visiblevalue"},selectedKey:{path:i[o].FieldKey+d+"/value"},tooltip:{path:i[o].FieldKey+d+"/Tooltip"},visible:{parts:[i[o].FieldKey+d+"/visible","readonly"],formatter:function(e,t){return void 0===e&&(e=!0),!(!e||t)}},editable:{parts:[i[o].FieldKey+d+"/disabled","readonly"],formatter:function(e,t){return void 0===e&&(e=!0),!(e||t)}},change:this.onCBSubmit.bind(this),width:"5rem"}),this._oDataUtil.getItems(i[o].FieldKey,t,l).then(function(e){for(var t={},a=0;a<e.aItems.length;a++)t=e.aItems[a],e.oTemplate.addItem(new sap.ui.core.Item({key:t.ItemKey,text:t.ItemValue,tooltip:t.ItemTooltip}))}),l.addCustomData(new sap.ui.core.CustomData({key:"EmpId",value:{path:i[o].FieldKey+d+"/EmpID",formatter:n.checkCustomDataIsString}})),l.addCustomData(new sap.ui.core.CustomData({key:"PlanDate",value:d.toString()})),l.addCustomData(new sap.ui.core.CustomData({key:"FieldKey",value:i[o].FieldKey})),l.addCustomData(new sap.ui.core.CustomData({key:"defKey",value:{path:i[o].FieldKey+d+"/value",mode:"OneTime",formatter:n.checkCustomDataIsString}})),l.addCustomData(new sap.ui.core.CustomData({key:"UnitKey",value:t})),l.addCustomData(new sap.ui.core.CustomData({key:"ColumnType",value:"CB"}))):(l=new sap.m.Text({text:{path:i[o].FieldKey+d+"/value"},tooltip:{path:i[o].FieldKey+d+"/Tooltip"},wrapping:!1})).addCustomData(new sap.ui.core.CustomData({key:"ColumnType",value:"Text"})),l.addCustomData(new sap.ui.core.CustomData({key:"background",writeToDom:!0,value:{path:i[o].FieldKey+d+"/color",formatter:n.checkCustomDataIsString}}));var g=new sap.ui.unified.Menu,p=new sap.ui.unified.MenuTextFieldItem({label:"Filter",icon:"sap-icon://filter",select:this.onColumnFilter.bind(this)});g.addItem(p);var c=new sap.ui.table.Column("Dcol_"+t+i[o].FieldKey+d,{template:l,autoResizable:!0,menu:g});if(this.isFeatureEnabled("COMMENT")){var m=new sap.ui.unified.MenuItem({text:"{i18n>comments}",icon:"sap-icon://comment",select:this.onColumnSelect.bind(this)});g.addItem(m),m._column=c}if(p._column=c,p._table=e,c.addCustomData(new sap.ui.core.CustomData({key:"UnitKey",value:t})),c.addCustomData(new sap.ui.core.CustomData({key:"PlanDate",value:d.toString()})),i[o].DateColor&&(c.addCustomData(new sap.ui.core.CustomData({key:"header-background",writeToDom:!0,value:i[o].DateColor})),this.libtables.addHeaderCssColoring(i[o].DateColor)),u.setWidth("1px"),s.toString()!==i[o].PlanDate.toString()||0===o){s=i[o].PlanDate;var h=0;u.setWidth("100%");for(var y=0;y<i.length;y++)i[y].PlanDate.toString()===s.toString()&&h++;c.setHeaderSpan([h,1])}var b=new sap.m.Label("lbl_"+t+i[o].FieldKey+d);b.setText(i[o].FieldLabel),c.addMultiLabel(u),c.setWidth(i[o].ColumnWidth),c.addMultiLabel(b),e.addColumn(c)}this.setTableData(e,t),this.setupTabHandling(e)},checkItemsExist:function(e){if(!this.aItems)return!1;for(var t=0;t<this.aItems.length;t++)if(this.aItems[t].FieldKey==e)return!0;return!1},getItems:function(e){var t=e.fieldKey,a=e.comboBox,i=new sap.ui.model.Filter("FieldKey","EQ",t),s=e.unitKey,o=new sap.ui.model.Filter("UnitKey",sap.ui.model.FilterOperator.EQ,s),n={};if(this.aItems&&this.checkItemsExist(t))for(var r=0;r<this.aItems.length;r++)(n=this.aItems[r]).FieldKey==t&&a.addItem(new sap.ui.core.Item({key:n.ItemKey,text:n.ItemValue}));else this.getView().getModel().read("/valueHelpSet",{filters:[i,o],success:function(e,t){this.aItems=[];for(var i=0;i<e.results.length;i++)n=e.results[i],a.addItem(new sap.ui.core.Item({key:n.ItemKey,text:n.ItemValue})),this.aItems.push(n)}.bind(this),error:this.handleError.bind(this)})},onCBSubmit:function(e){if(e.getSource().getSelectedKey()){if(!this.getView().getModel("CBData")){var t=new sap.ui.model.json.JSONModel;t.setData([]),this.getView().setModel(t,"CBData")}var a=this.getView().getModel("CBData").getData(),i=r.getCustomDataValue(e.getSource().getAggregation("customData"),"PlanDate");i="string"==typeof i?parseInt(i):i,e.getSource().setTooltip(e.getSource().getSelectedItem().getTooltip()),a.push({EmpId:r.getCustomDataValue(e.getSource().getAggregation("customData"),"EmpId"),PlanDate:i,Value:e.getSource().getSelectedKey(),FieldKey:r.getCustomDataValue(e.getSource().getAggregation("customData"),"FieldKey"),UnitKey:r.getCustomDataValue(e.getSource().getAggregation("customData"),"UnitKey")}),this.getView().getModel("CBData").setData(a)}else e.getSource().setSelectedKey(r.getCustomDataValue(e.getSource().getAggregation("customData"),"defKey"))},openPopup:function(e){for(var t,a=e.getSource().getAggregation("customData"),i=0;i<a.length;i++)"fragment"===a[i].getProperty("key")&&(t=a[i].getProperty("value"));switch(t){case"AbsencePick":this.openAbsencePopup(e);break;case"QualPick":this.openQualPopup(e);break;case"EmployeeData":this.openEmpDataPopup(e);break;case"TimesOverview":this.openTimeOverviewPopupWrapper(e);break;case"ChangePlanTimes":this.onOpenChangePlanTime(e);break;case"ChangeUnit":this.onOpenChangeUnit(e);break;default:return}},openAbsencePopup:function(e){this._absenceDialog||(this._absenceDialog=sap.ui.xmlfragment("MIND2PEP_PLANNER.fragments.AbsencePick",this));var t=r.getCustomDataValue(e.getSource().getAggregation("customData"),"PlanDate");t="string"==typeof t?parseInt(t):t;var a=r.getCustomDataValue(e.getSource().getAggregation("customData"),"EmpID"),i=r.getCustomDataValue(e.getSource().getAggregation("customData"),"UnitKey");new Date(t);this.getView().addDependent(this._absenceDialog),this._absenceDialog.destroyItems(),this._absenceDialog.setBusyIndicatorDelay(0),this._absenceDialog.setBusy(!0);var s=new sap.ui.model.Filter("UnitKey",sap.ui.model.FilterOperator.EQ,i),o=new sap.ui.model.Filter("EmpId",sap.ui.model.FilterOperator.EQ,a),n=new sap.ui.model.Filter("Ganztaegig",sap.ui.model.FilterOperator.EQ,"true"),l=new sap.m.StandardListItem({title:"{SubtyText}"});l.addCustomData(new sap.ui.core.CustomData({key:"UnitKey",value:i})),l.addEventDelegate({onAfterRendering:this.onAfterRenderQualTemplate}),l.addCustomData(new sap.ui.core.CustomData({key:"SubType",value:"{Subty}"})),l.addCustomData(new sap.ui.core.CustomData({key:"EmpID",value:a})),l.addCustomData(new sap.ui.core.CustomData({key:"PlanDate",value:t.toString()})),l.addCustomData(new sap.ui.core.CustomData({key:"ButtonId",value:e.getSource().getId()})),l.addCustomData(new sap.ui.core.CustomData({key:"Infty",value:"{Infty}"}));var d=new sap.ui.model.odata.v2.ODataModel("/sap/opu/odata/MIND2/PEP_YEAR_SRV");this._absenceDialog.setModel(d),this._absenceDialog.bindAggregation("items",{path:"/SubtypSet",filters:[o,s,n],template:l,events:{dataReceived:function(){this._absenceDialog.setBusy(!1)}.bind(this)}}),this._absenceDialog.open()},openQualPopup:function(e){var t=r.getCustomDataValue(e.getSource().getAggregation("customData"),"PlanDate");t="string"==typeof t?parseInt(t):t;var a=r.getCustomDataValue(e.getSource().getAggregation("customData"),"EmpID"),i=r.getCustomDataValue(e.getSource().getAggregation("customData"),"UnitKey"),s=new Date(t),o=this.getView().getModel(),n=new h(this,i,a,t);this._qualDialog||(this._qualDialog=sap.ui.xmlfragment("MIND2PEP_PLANNER.fragments.QualPick",n,{refreshAfterChange:!0})),this.getView().addDependent(this._qualDialog),this._qualDialog.setBusyIndicatorDelay(0),this._qualDialog.setModel(o);var l=new sap.ui.model.Filter("PlanDate",sap.ui.model.FilterOperator.EQ,s),d=new sap.ui.model.Filter("UnitKey",sap.ui.model.FilterOperator.EQ,i),u=new sap.ui.model.Filter("EmpId",sap.ui.model.FilterOperator.EQ,a),g=[];g.push(l),g.push(u),g.push(d);var p=new sap.m.CheckBox({text:"{QualText} ({QualAbbr})",selected:"{Assigned}"});sap.ui.getCore().byId("vb_qual_pick_id").bindAggregation("items",{path:"/functionSet",template:p,filters:g,events:{dataReceived:function(e){}.bind(this)}}),this._qualDialog.open()},openEmpDataPopup:function(e){this._empDataDialog||(this._empDataDialog=sap.ui.xmlfragment("MIND2PEP_PLANNER.fragments.EmployeeData",this),this._empDataDialog.attachAfterClose(this.destroyEmpDataDialog.bind(this)));var t=this.getView().getModel(),a=r.getCustomDataValue(e.getSource().getAggregation("customData"),"EmpID"),i=r.getCustomDataValue(e.getSource().getAggregation("customData"),"UnitKey");this.getView().addDependent(this._empDataDialog),this._empDataDialog.setBusyIndicatorDelay(0),this._empDataDialog.setBusy(!0);var s=new sap.ui.model.Filter("EmpId",sap.ui.model.FilterOperator.EQ,a),o=new sap.ui.model.Filter("UnitKey",sap.ui.model.FilterOperator.EQ,i),n=new sap.ui.model.Filter("Begda",sap.ui.model.FilterOperator.BT,this.getSelectedBegda(),this.getSelectedEndda());this._empDataDialog.addCustomData(new sap.ui.core.CustomData({key:"UnitKey",value:i})),this._empDataDialog.addCustomData(new sap.ui.core.CustomData({key:"EmpId",value:a})),t.read("/empProfileSet",{success:function(e,t){this.readEmpProfileSuccess(e)}.bind(this),error:this.handleError.bind(this),filters:[s,o,n],refreshAfterChange:!0})},readEmpProfileSuccess:function(e){var t,a,i=e.results,s=sap.ui.getCore().byId("sf_formEmployeeData");s.setEditable(!0),s.setLayout("GridLayout");for(var o=0;o<i.length;o++){if(t!=i[o].Category)if(t&&s.addContent(l),t=i[o].Category,i[o].IsDropdown)if(a){d=new sap.ui.core.Item({text:i[o].TextCategory,key:i[o].Category});r.addItem(d)}else{var n=new sap.m.Toolbar("tb_empProfile"),r=new sap.m.Select("sel_empProfile",{width:"12rem",change:this.onChangeEmpProfile.bind(this)});n.addContent(r);var l=new sap.ui.layout.form.SimpleForm("sf_"+i[o].Category,{toolbar:n}),d=new sap.ui.core.Item({text:i[o].TextCategory,key:i[o].Category});r.addItem(d),a=!0,r.setSelectedKey(i[o].Category)}else(l=new sap.ui.layout.form.SimpleForm("sf_"+i[o].Category)).setTitle(i[o].TextCategory);if(l.getTitle()==i[o].TextCategory||a&&r.getSelectedKey()==i[o].Category){var u=new sap.m.Label("lbl_field"+i[o].Field);u.setText(i[o].TextField),l.addContent(u);var g=new sap.m.Text("txt_data"+i[o].Field);g.setText(i[o].Value),l.addContent(g)}}t&&s.addContent(l),this._empDataDialog.setBusy(!1),this._empDataDialog.open()},onChangeEmpProfile:function(e){this._empDataDialog.setBusy(!0);var t=this.getView().getModel(),a=r.getCustomDataValue(this._empDataDialog.getAggregation("customData"),"UnitKey"),i=r.getCustomDataValue(this._empDataDialog.getAggregation("customData"),"EmpId"),s=e.getSource().getSelectedKey(),o=new sap.ui.model.Filter("Category",sap.ui.model.FilterOperator.EQ,s),n=new sap.ui.model.Filter("EmpId",sap.ui.model.FilterOperator.EQ,i),l=new sap.ui.model.Filter("UnitKey",sap.ui.model.FilterOperator.EQ,a),d=new sap.ui.model.Filter("Begda",sap.ui.model.FilterOperator.BT,this.getSelectedBegda(),this.getSelectedEndda());t.read("/empProfileSet",{success:function(e,t){this.changeEmpProfileSuccess(e),this._empDataDialog.setBusy(!1)}.bind(this),error:this.handleError.bind(this),filters:[n,l,d,o],refreshAfterChange:!0})},changeEmpProfileSuccess:function(e){var t=e.results,a=sap.ui.getCore().byId("tb_empProfile").getParent().getParent();a.destroyContent();for(var i=0;i<t.length;i++){var s=new sap.m.Label("lbl_field"+t[i].Field);s.setText(t[i].TextField),a.addContent(s);var o=new sap.m.Text("txt_data"+t[i].Field);o.setText(t[i].Value),a.addContent(o)}},onOpenChangePlanTime:function(e){this._oChangePlanTimeDialog||(this._oChangePlanTimeDialog=sap.ui.xmlfragment("MIND2PEP_PLANNER.fragments.ChangePlanTimes",this,{refreshAfterChange:!0}),this._oChangePlanTimeDialog.attachAfterClose(this.destroyChangePlanTimeDialog.bind(this))),this.getView().addDependent(this._oChangePlanTimeDialog);var t=this.getView().getModel(),a=r.getCustomDataValue(e.getSource().getAggregation("customData"),"PlanDate");a="string"==typeof a?parseInt(a):a;var i=r.getCustomDataValue(e.getSource().getAggregation("customData"),"EmpID"),s=r.getCustomDataValue(e.getSource().getAggregation("customData"),"UnitKey"),o=new Date(a),n=sap.ui.core.format.DateFormat.getDateInstance({pattern:"yyyyMMdd"}).format(o),l=i+n+s;t.read("/empShiftSet(EmpId=\'"+i+"\',ShiftDate=\'"+n+"\',ShiftKey=\'"+l+"\')",{success:this.getPlanTimeSetSuccess.bind(this),error:this.handleError.bind(this),refreshAfterChange:!0});var d=sap.ui.getCore().byId("btn_saveplantime");d.addCustomData(new sap.ui.core.CustomData({key:"PlanDate",value:n.toString()})),d.addCustomData(new sap.ui.core.CustomData({key:"EmpId",value:i})),d.addCustomData(new sap.ui.core.CustomData({key:"UnitKey",value:s}));var u=sap.ui.getCore().byId("btn_deleteplantime");u.addCustomData(new sap.ui.core.CustomData({key:"PlanDate",value:n.toString()})),u.addCustomData(new sap.ui.core.CustomData({key:"EmpId",value:i})),u.addCustomData(new sap.ui.core.CustomData({key:"UnitKey",value:s})),this._oChangePlanTimeDialog.open()},getPlanTimes:function(e){var t=this.getView().getModel(),a=e.EmpId,i=e.ShiftDate,s=a+i+e.UnitKey;t.read("/empShiftSet(EmpId=\'"+a+"\',ShiftDate=\'"+i+"\',ShiftKey=\'"+s+"\')",{success:this.getPlanTimeSetSuccess.bind(this),error:this.handleError.bind(this),refreshAfterChange:!0})},getPlanTimeSetSuccess:function(e){sap.ui.getCore().byId("ld_tp_beguz").setValue(e.OwnBeguz),sap.ui.getCore().byId("ld_tp_enduz").setValue(e.OwnEnduz),sap.ui.getCore().byId("ld_tp_newbeguz").setValue(""),sap.ui.getCore().byId("ld_tp_newenduz").setValue(""),sap.ui.getCore().byId("ld_tp_beguz_break1").setValue(""),sap.ui.getCore().byId("ld_tp_enduz_break1").setValue(""),sap.ui.getCore().byId("ld_tp_beguz_break2").setValue(""),sap.ui.getCore().byId("ld_tp_enduz_break2").setValue("")},destroyChangePlanTimeDialog:function(e){this._oChangePlanTimeDialog.destroy(),this._oChangePlanTimeDialog=null},onCloseChangePlanTime:function(e){this._oChangePlanTimeDialog.close()},onSaveNewPlanTime:function(e){var t=this.getView().getModel(),a=sap.ui.getCore().byId("ld_tp_newbeguz").getValue(),i=sap.ui.getCore().byId("ld_tp_newenduz").getValue(),s=sap.ui.getCore().byId("ld_tp_beguz_break1").getValue(),o=sap.ui.getCore().byId("ld_tp_enduz_break1").getValue(),n=sap.ui.getCore().byId("ld_tp_beguz_break2").getValue(),l=sap.ui.getCore().byId("ld_tp_enduz_break2").getValue();if(this.planTimeValidation()){""==s&&(s="00000"),""==o&&(o="00000"),""==n&&(n="00000"),""==l&&(l="00000");var d=r.getCustomDataValue(e.getSource().getAggregation("customData"),"PlanDate"),u=r.getCustomDataValue(e.getSource().getAggregation("customData"),"EmpId"),g=r.getCustomDataValue(e.getSource().getAggregation("customData"),"UnitKey"),p={};p.EmpId=u,p.UnitKey=g,p.NewShiftKey=u+d+a+i+s+o+n+l,p.ShiftDate=d,t.create("/empShiftSet",p,{refreshAfterChange:!0,success:function(){this.newPlanTimeSuccess(p,this.getPlanTimes(p))}.bind(this),error:function(e){this.createError(e)}.bind(this)})}},planTimeValidation:function(){var e=sap.ui.getCore().byId("ld_tp_newbeguz"),t=e.getValue(),a=sap.ui.getCore().byId("ld_tp_newenduz"),i=a.getValue(),s=sap.ui.getCore().byId("ld_tp_beguz_break1"),o=s.getValue(),n=sap.ui.getCore().byId("ld_tp_enduz_break1"),r=n.getValue(),l=sap.ui.getCore().byId("ld_tp_beguz_break2"),d=l.getValue(),u=sap.ui.getCore().byId("ld_tp_enduz_break2"),g=u.getValue();return t&&i?(e.setValueState(sap.ui.core.ValueState.None),a.setValueState(sap.ui.core.ValueState.None),t>i?(e.setValueState(sap.ui.core.ValueState.Error),a.setValueState(sap.ui.core.ValueState.Error),!1):o&&!r?(n.setValueState(sap.ui.core.ValueState.Error),!1):(n.setValueState(sap.ui.core.ValueState.None),r&&!o?(s.setValueState(sap.ui.core.ValueState.Error),!1):(s.setValueState(sap.ui.core.ValueState.None),o>r?(s.setValueState(sap.ui.core.ValueState.Error),n.setValueState(sap.ui.core.ValueState.Error),!1):(s.setValueState(sap.ui.core.ValueState.None),n.setValueState(sap.ui.core.ValueState.None),d&&!g?(u.setValueState(sap.ui.core.ValueState.Error),!1):(u.setValueState(sap.ui.core.ValueState.None),g&&!d?(s.setValueState(sap.ui.core.ValueState.Error),!1):(l.setValueState(sap.ui.core.ValueState.None),d>g?(s.setValueState(sap.ui.core.ValueState.Error),n.setValueState(sap.ui.core.ValueState.Error),!1):(s.setValueState(sap.ui.core.ValueState.None),n.setValueState(sap.ui.core.ValueState.None),!0))))))):t&&!i?(e.setValueState(sap.ui.core.ValueState.None),a.setValueState(sap.ui.core.ValueState.Error),!1):!t&&i?(e.setValueState(sap.ui.core.ValueState.Error),a.setValueState(sap.ui.core.ValueState.None),!1):(e.setValueState(sap.ui.core.ValueState.Error),a.setValueState(sap.ui.core.ValueState.Error),!1)},newPlanTimeSuccess:function(){var e=this.getView().getModel("i18n").getResourceBundle().getText("newplantimecreated");t.success(e)},onDeletePlanTime:function(e){var t=this.getView().getModel(),a=r.getCustomDataValue(e.getSource().getAggregation("customData"),"PlanDate"),i=r.getCustomDataValue(e.getSource().getAggregation("customData"),"EmpId"),s=r.getCustomDataValue(e.getSource().getAggregation("customData"),"UnitKey"),o={};o.EmpId=i,o.UnitKey=s,o.ShiftDate=a,t.remove("/empShiftSet(EmpId=\'"+i+"\',ShiftDate=\'"+a+"\',ShiftKey=\'"+i+a+s+"\')",{refreshAfterChange:!0,success:function(){this.deletePlanTimeSuccess(o,this.getPlanTimes(o))}.bind(this),error:function(e){this.createError(e)}.bind(this)})},deletePlanTimeSuccess:function(e){sap.ui.getCore().byId("ld_tp_beguz").setValue(e.OwnBeguz),sap.ui.getCore().byId("ld_tp_enduz").setValue(e.OwnEnduz),sap.ui.getCore().byId("ld_tp_newbeguz").setValue(""),sap.ui.getCore().byId("ld_tp_newenduz").setValue(""),sap.ui.getCore().byId("ld_tp_beguz_break1").setValue(""),sap.ui.getCore().byId("ld_tp_enduz_break1").setValue(""),sap.ui.getCore().byId("ld_tp_beguz_break2").setValue(""),sap.ui.getCore().byId("ld_tp_enduz_break2").setValue("");var a=this.getView().getModel("i18n").getResourceBundle().getText("plantimedeleted");t.success(a)},onSelectQual:function(e){var t=e.getParameter("selectedItem"),a=t.getAggregation("customData"),i=r.getCustomDataValue(a,"UnitKey"),s=r.getCustomDataValue(a,"PlanDate");s="string"==typeof s?parseInt(s):s;var o=r.getCustomDataValue(a,"EmpID"),n=r.getCustomDataValue(a,"QualId"),l=r.getCustomDataValue(a,"ButtonId"),d=new Date(s),u={};u.UnitKey=i,u.EmpId=o,u.PlanDate=d,u.QualId=n,this.getView().getModel().create("/qualificationSet",u,{refreshAfterChange:!0,success:function(){sap.ui.getCore().byId(l).setText(t.getTitle()),sap.ui.getCore().byId(l).setTooltip(t.getTitle())}})},onSelectAbsence:function(e){var t=e.getParameter("selectedItem"),a=t.getAggregation("customData"),i=r.getCustomDataValue(a,"PlanDate");i="string"==typeof i?parseInt(i):i;var s,o=r.getCustomDataValue(a,"EmpID"),n=r.getCustomDataValue(a,"Infty"),l=r.getCustomDataValue(a,"SubType"),d=r.getCustomDataValue(a,"ButtonId"),u=r.getCustomDataValue(a,"UnitKey"),g=sap.ui.getCore().byId("ld_tp_beguz_leave"),p=sap.ui.getCore().byId("ld_tp_enduz_leave");if(sap.ui.getCore().byId("chb_sprps")&&(s=sap.ui.getCore().byId("chb_sprps").getSelected()),g)var c=g.getValue();else c="000000";if(p)var m=p.getValue();else m="000000";var h=new Date(i),y=h.getYear()+1900,b=h.getYear()+1900,_=h.getMonth()+1;1==_.toString().length&&(_="0"+_);var C=h.getMonth()+1;1==C.toString().length&&(C="0"+C);var f=h.getDate();1==f.toString().length&&(f="0"+f);var D=h.getDate();1==D.toString().length&&(D="0"+D);var S=o+n+l+y+_+f+b+C+D+c+m+s+u,v={};v.LeaveKey=S,new sap.ui.model.odata.v2.ODataModel("/sap/opu/odata/MIND2/PEP_YEAR_SRV",{refreshAfterChange:!0}).create("/AbsenceSet",v,{refreshAfterChange:!0,success:function(){sap.ui.getCore().byId(d).setText(t.getTitle()),sap.ui.getCore().byId(d).setTooltip(t.getTitle())},error:this.createError.bind(this)})},removeColumns:function(e,t){for(var a=e.getColumns(),i=0;i<a.length;i++)if(a[i].getId().substring(0,t.length)===t){e.removeColumn(a[i]);var s=a[i].getMultiLabels();if(s.length>0)for(var o=0;o<s.length;o++)s[i]&&s[i].destroy();else a[i].getLabel().destroy();a[i].getTemplate().destroy(),a[i].destroy()}},onCalendarSelect:function(e){var t=$(".selectedWeek")[0];if(t&&t.classList.remove("selectedWeek"),e.getSource().getSelectedDates()[0].getStartDate()&&e.getSource().getSelectedDates()[0].getEndDate()){this.refreshAllTables();var a=this.byId("cal_interval");setTimeout(function(){r.attachCalendarWeekSelection($(".sapUiCalRowWeekNumbers")[0],a)},500),this.getView().getModel("Customizing").setProperty("/StartDate",e.getSource().getSelectedDates()[0].getStartDate()),this.getView().getModel("Customizing").setProperty("/EndDate",e.getSource().getSelectedDates()[0].getEndDate())}},refreshAllTables:function(){for(var e=0;e<this.aUnits.length;e++)this.fillTablesForUnit(this.aUnits[e].UnitKey)},onDatePickerChange:function(e){var t,a=this.getView().getModel("Customizing"),i=a.getProperty("/StartDate"),s=a.getProperty("/EndDate");e.getSource().setValueState(sap.ui.core.ValueState.None),i&&s&&(i>s||(t=this.getView().byId("cal_timeframe").getVisible()?this.getView().byId("cal_timeframe"):this.getView().byId("cal_interval")).getSelectedDates()[0]&&(t.getSelectedDates()[0].setStartDate(i),t.getSelectedDates()[0].setEndDate(s),this.setShownMonthInCalendar(t,i),t.fireSelect()))},getSelectedBegda:function(e){var t=(null==e||void 0==e?this.getView().byId("cal_timeframe").getVisible()?this.getView().byId("cal_timeframe"):this.getView().byId("cal_interval"):sap.ui.getCore().byId(e)).getSelectedDates();if(t.length>0&&null!==t[0].getStartDate()&&null!==t[0].getEndDate()){var a=t[0].getStartDate(),i=new Date(a);return i.setHours(12),i}},getSelectedEndda:function(e){var t=(null==e||void 0==e?this.getView().byId("cal_timeframe").getVisible()?this.getView().byId("cal_timeframe"):this.getView().byId("cal_interval"):sap.ui.getCore().byId(e)).getSelectedDates();if(t.length>0&&null!==t[0].getStartDate()&&null!==t[0].getEndDate()){var a=t[0].getEndDate(),i=new Date(a);return i.setHours(12),i}},setTableData:function(e,t){var a=this.getSelectedBegda(),i=this.getSelectedEndda(),s=new sap.ui.model.Filter("PlanDate",sap.ui.model.FilterOperator.BT,a,i),o=new sap.ui.model.Filter("UnitKey",sap.ui.model.FilterOperator.EQ,t);this.getView().getModel().read("/planDataSet",{groupId:t,filters:[s,o],success:function(a){this.readPlanDataSuccess(e,t,a)}.bind(this),error:function(t){e.setBusy(!1),this.handleException(t),this.handleError(t,e)}.bind(this),refreshAfterChange:!1})},readPlanDataSuccess:function(e,t,a){var i=this,s={rows:[]},o=new sap.ui.model.json.JSONModel,n=a.results,r=[];if(e.getColumns().forEach(function(e,t){if(e.getTemplate().getBindingInfo("selectedKey")){var a=e.getTemplate().getBindingInfo("selectedKey").parts[0].path;a=a.substring(0,a.indexOf("/")),r.push(a)}}),n&&n.length>0){var l={};n.forEach(function(e){var a=new Date(e.PlanDate);if("8099"==a.getYear())var s="";else{a.setHours(12);s=Date.parse(a.toString())}var o=e.EmpId,n=e.Line;l[o+n]||(l[o+n]={EmpID:o,Line:n});var d=l[o+n];d.readonly="001"!==n,d[e.FieldKey+s]={},d[e.FieldKey+s].value=e.FieldValue,d[e.FieldKey+s].Tooltip=e.FieldToolTip,d[e.FieldKey+s].color=e.FieldBColor,d[e.FieldKey+s].disabled=e.Disabled,d[e.FieldKey+s].fragment=e.Fragment,d[e.FieldKey+s].EmpID=o,-1!==r.indexOf(e.FieldKey+s)&&i._oDataUtil.getItems(e.FieldKey,t,{}).then(function(t){t.aItems.forEach(function(t){t.ItemKey===e.FieldValue&&(d[e.FieldKey+s].visiblevalue=t.ItemValue)})}),e.FieldBColor&&i.libtables.addCssColoring(e.FieldBColor)}),Object.keys(l).forEach(function(e){s.rows.push(l[e])}),o.setData({modelData:s}),e.setModel(o);var d=1;e.getVisibleRowCount()===d&&(d+=1),e.setVisibleRowCount(d),e.getBusy()||e.setBusy(!0),e.bindAggregation("rows",{path:"/modelData/rows"});var u={onAfterRendering:function(t){i.unitTableFinalService(e),t.srcControl.removeEventDelegate(u)}};e.addEventDelegate(u)}else e.setBusy(!1)},unitTableFinalService:function(e){var t=e.getBinding("rows"),a=this;e.getRowHeight()||this.getView().byId("sbtn_rowheight").fireSelectionChange();var i=30,s=function(){if(e.getModel().oData.modelData)return a.setRowCount(e,e.getModel().oData.modelData.rows),e.setCustomerRowCount(e.getVisibleRowCount()),void e.setVisibleRowCount(t.iLength);setTimeout(function(){i<0||(e.getModel().oData.modelData?(a.setRowCount(e,e.getModel().oData.modelData.rows),e.setCustomerRowCount(e.getVisibleRowCount()),e.setVisibleRowCount(e.getBinding("rows").iLength)):(i--,s()))},1e3)};s(),this.isFeatureEnabled("EXPANDED")?this.isFeatureEnabled("EXPANDED")&&e.getVisible()&&(e.setBusy(!0),setTimeout(function(){r.autoResize(e),setTimeout(e.setFixedColumnCount(e._fixedCC))},0)):(e.setBusy(!0),setTimeout(function(){r.autoResize(e),setTimeout(e.setFixedColumnCount(e._fixedCC))},0))},sumMetaSuccess:function(e,t,a,i){for(var s=a.results,o=(e=e,0);o<s.length;o++){var r=new sap.m.Label,l=new Date(s[o].PlanDate);"8099"==l.getYear()?r.setText(s[o].FieldLabel):r.setText(s[o].LabelText);var d=Date.parse(l.toString()),u=new sap.m.Text({text:{path:d.toString()},visible:{path:d.toString()+"ShowMsg",formatter:function(e){return!e}}}),g=new sap.m.Button({visible:{path:d.toString()+"ShowMsg"},text:{path:d.toString()+"MsgCnt"},type:sap.m.ButtonType.Transparent,icon:"sap-icon://message-popup",press:this.showSumMsg.bind(this,l,t)}).addStyleClass("btnText");g.addCustomData(new sap.ui.core.CustomData({key:"sumkey",value:{path:d.toString()+"SumKey",formatter:n.checkCustomDataIsString}}));var p=new sap.m.HBox({items:[u,g]});p.addEventDelegate({onAfterRendering:this.onAfterRenderTemplate}),p.addCustomData(new sap.ui.core.CustomData({key:"background",writeToDom:!0,value:{path:d.toString()+"FieldBColor",formatter:n.checkCustomDataIsString}}));var c=new sap.ui.table.Column("Scol_"+t+s[o].FieldKey+d,{template:p,autoResizable:!0});c.setLabel(r),c.setWidth(s[o].ColumnWidth||"auto"),e.addColumn(c)}this.fillSumData(e,t)},showSumMsg:function(e,t,a){var i,s=a.getSource(),o=s.getCustomData(),n=o[0].getProperty("key"),r=this.getView().getModel();i="sumkey"==n?o[0].getProperty("value"):o[1].getProperty("value");var l=new sap.m.Popover({beforeClose:function(){this.oSumPopupOpen=!1}.bind(this),placement:"Auto"}),d=new sap.m.Button({text:"X",tooltip:"{18n>close}",press:function(){sap.ui.getCore().byId("ld_select_attention")&&sap.ui.getCore().byId("ld_select_attention").destroy(),l.close()}});l.setBusyIndicatorDelay(0),l.setBusy(!0);var u=new sap.m.List({headerText:"{i18n>messages}"});if(l.addContent(u),this.isFeatureEnabled("TAKEATTENT"))var g=new sap.m.ObjectListItem({icon:"sap-icon://error",title:"{MessageText}",type:"Active",intro:{path:"HasAttention",formatter:function(e){if("X"===e)return this.getResourceBundleText("tookAttention")}.bind(this)},press:this.onMessageClick.bind(this)});else g=new sap.m.ObjectListItem({icon:"sap-icon://error",title:"{MessageText}",type:"Active",press:this.onHandleMessagePressAction.bind(this)});if(!0!==this.oSumPopupOpen||(this.oMessagePopover.close(),a.getSource()!=this.oMsgSumSource)){var p=new sap.ui.model.Filter("PlanDate",sap.ui.model.FilterOperator.EQ,e),c=this.getSelectedBegda(),m=this.getSelectedEndda();c.setUTCDate(c.getDate()),m.setUTCDate(m.getDate());var h=new sap.ui.model.Filter("Begda",sap.ui.model.FilterOperator.EQ,c),y=new sap.ui.model.Filter("Endda",sap.ui.model.FilterOperator.EQ,m),b=new sap.ui.model.Filter("UnitKey",sap.ui.model.FilterOperator.EQ,t),_=new sap.ui.model.Filter("SumKey",sap.ui.model.FilterOperator.EQ,i);this.oMessagePopover=l,u.setModel(r),u.bindAggregation("items",{template:g,path:"/sumMessageSet",filters:[p,b,_,h,y],events:{dataReceived:function(){l.setBusy(!1),l.setEndButton(d)}}}),this.oMsgSumSource=a.getSource(),this.oMessagePopover.openBy(s),this.oSumPopupOpen=!0,sap.ui.getCore().byId("ld_select_attention")&&sap.ui.getCore().byId("ld_select_attention").destroy()}},onHandleMessagePressAction:function(e){"TimesOverview"==this.getView().getModel().getObject(e.getSource().getBindingContext().getPath()).Action?this.openTimeOverviewPopupWrapper(e):this.onMessageClick(e)},onMessageClick:function(e){var t=this.getView().getModel();if(this.isFeatureEnabled("TAKEATTENT")){sap.ui.getCore().byId("ld_select_attention")&&sap.ui.getCore().byId("ld_select_attention").destroy(),sap.ui.getCore().byId("ta_attent_explain")&&sap.ui.getCore().byId("ta_attent_explain").destroy();var a=e.getSource().getBindingContext(),i=t.getObject(a.getPath()),s=this.getView().getModel("i18n").getResourceBundle(),o=s.getText("changeAttention"),n=s.getText("noAttentionPossible"),r=i.MessageType,l=new sap.m.Popover({title:"{i18n>attentionPopoverTitle}",beforeClose:function(){this.oPopoverOpen=!1},placement:"Auto"});this.getView().addDependent(l);var d=new sap.ui.layout.form.SimpleForm({columnsXL:12,columnsL:12,columnsM:12,layout:"ResponsiveGridLayout"});l.addContent(d);var u=new sap.ui.core.Item({text:"{NoteText}",key:"{NoteKey}",customData:{key:"noteKey",value:"{NoteKey}"},layoutData:new sap.ui.layout.GridData({span:"XL12 L12 M12 S12"})}),g=new sap.m.Select({id:"ld_select_attention",selectedKey:"{SelAttention}"}),p=new sap.m.TextArea({id:"ta_attent_explain",layoutData:new sap.ui.layout.GridData({span:"XL12 L12 M12 S12"}),maxLength:100,showExceededText:!1,value:"{MsgExplanation}"}),c=i.PlanDate,m=i.UnitKey,h=i.SumKey,y=i.MsgParam,b=(i.Action,i.EmpId),_=new sap.ui.model.Filter("MsgType",sap.ui.model.FilterOperator.EQ,r),C=new sap.ui.model.Filter("PlanDate",sap.ui.model.FilterOperator.EQ,c),f=new sap.ui.model.Filter("UnitKey",sap.ui.model.FilterOperator.EQ,m),D=new sap.ui.model.Filter("SumKey",sap.ui.model.FilterOperator.EQ,h),S={};S.PlanDate=c,S.UnitKey=m,S.SumKey=h,S.NoteKey=y,S.EmpId=b;var v=new sap.m.Button({text:"{i18n>takeAttention}",press:this.onAttentionButtonClick.bind(this,S,l,m,c),layoutData:new sap.ui.layout.GridData({span:"XL12 L12 M12 S12"})});g.setModel(t),g.bindItems({path:"/messageNoteSet",template:u,filters:[_,C,f,D],events:{dataReceived:function(e){l.setBusy(!1)}.bind(this)}}),""!==i.HasAttention&&v.setText(o);var I=t.createKey("/messageNoteSet",{MsgType:r,SumKey:h,UnitKey:m,NoteKey:y,PlanDate:c});l.setModel(t),l.bindElement({path:I,events:{dataReceived:function(e){l.setBusy(!1)}.bind(this)}}),this.oMsgAttentionSource=e.getSource(),l.openBy(e.getSource()),this.oPopoverOpen=!0,"X"===i.Attention?(d.addContent(g),d.addContent(v),d.addContent(p)):""===i.SelAttention&&l.setTitle(n)}},onAttentionButtonClick:function(e,t,a,i,s){var o=this.getView().getModel();this.oPopoverOpen=!1,e.NoteText=sap.ui.getCore().byId("ld_select_attention").getSelectedItem().getProperty("text"),e.SelAttention=sap.ui.getCore().byId("ld_select_attention").getSelectedKey(),e.MsgExplanation=sap.ui.getCore().byId("ta_attent_explain").getValue(),o.create("/messageNoteSet",e,{success:this.attentionButtonSuccess.bind(this,t,i,a),error:this.createError.bind(this)})},onMsgCompletionButtonClick:function(e,t,a){var i=this.getView().getModel();this.oPopoverOpen=!1,e.SelAttention=sap.ui.getCore().byId("ld_select_attention").getSelectedKey(),e.MsgExplanation=sap.ui.getCore().byId("ta_attent_explain").getValue(),i.create("/rptimeEmpLogSet",e,{success:this.attentionButtonSuccess.bind(this,t,void 0,a),error:this.createError.bind(this)})},attentionButtonSuccess:function(e,t,a,i){sap.ui.getCore().byId("ld_select_attention").destroy(),e.close();var o=this.getView().getModel("i18n").getResourceBundle().getText("attentionNoteCreated");s.show(o)},setSelectedItem:function(e,t){sap.ui.getCore().byId("ld_select_attention").setSelectedKey(t)},fillSumData:function(e,t){if(null!=this.getSelectedEndda()){var a=this.getView().getModel(),i=this.getSelectedBegda(),s=this.getSelectedEndda();i.setUTCDate(i.getDate()),s.setUTCDate(s.getDate());var o=new sap.ui.model.Filter("PlanDate",sap.ui.model.FilterOperator.BT,i,s),n=new sap.ui.model.Filter("UnitKey",sap.ui.model.FilterOperator.EQ,t);a.read("/sumDataSet",{groupId:t+"sds",filters:[o,n],success:function(a){this.sumDataSuccess(e,t,a)}.bind(this),error:function(t){e.setBusy(!1)}.bind(this)})}},sumDataSuccess:function(e,t,a){for(var i,s=a.results,o={},n={rows:[]},l=new sap.ui.model.json.JSONModel,d=0;d<s.length;d++){0!==d&&i!==s[d].SumKey&&(n.rows.push(o),o={}),i=s[d].SumKey;var u=new Date(s[d].PlanDate),g=Date.parse(u.toString());o[g.toString()]=s[d].Value;var p=g.toString()+"ShowMsg";o[p]=s[d].ShowMsg,o[p=g.toString()+"MsgCnt"]=s[d].MessageCount,o[p=g.toString()+"SumKey"]=s[d].SumKey,o[p=g.toString()+"FieldBColor"]=s[d].FieldBColor,s[d].FieldBColor&&this.libtables.addCssColoring(s[d].FieldBColor)}s.length>0&&n.rows.push(o),l.setData({modelData:n}),e.setModel(l),e.bindAggregation("rows",{path:"/modelData/rows"}),this.setRowCount(e,n.rows),e.getVisible()||e.setVisible(!0),setTimeout(function(){r.autoResize(e)},500)},setRowCount:function(e,t){var a=t.length;switch(this.isFeatureEnabled("ROWCOUNT")){case!0:a<this.oUserCust.Nooflines?e.setVisibleRowCount(a):e.setVisibleRowCount(this.oUserCust.Nooflines);break;case!1:a<this.oCustomizing.PlanVisRows?e.setVisibleRowCount(a):e.setVisibleRowCount(this.oCustomizing.PlanVisRows);break;default:a<this.oCustomizing.PlanVisRows?e.setVisibleRowCount(a):e.setVisibleRowCount(this.oCustomizing.PlanVisRows)}},handleMessagePopoverPress:function(e){this.open?f.close():f.openBy(e.getSource()),this.open=!this.open},onSave:function(){var e=this;this.clearMessages();for(var t=[],a=0;a<this.aUnits.length;a++)t.push(this.saveUnit(this.aUnits[a].UnitKey,a));if(jQuery.when.apply(null,t).done(jQuery.proxy(this.onSaveSuccess,this)),this.getView().getModel("CBData")){for(var i=this.getView().getModel("CBData").getData(),o={},n=[],r=0;r<i.length;r++)(o=i[r]).PlanDate=new Date(o.PlanDate),o.PlanDate.setHours(12),n.push(new Promise(function(t,a){e.getView().getModel().create("/dropdownDataSet",o,{success:function(e){t()}.bind(this),error:function(e){a(e)}.bind(this)})}));var l=!0;Promise.all(n).then(function(){var t=e.getView().getModel("i18n").getResourceBundle().getText("dropdownsaved");s.show(t)},function(t){l=!1,e.createError(t)}).then(function(){l&&e.getView().getModel("CBData").setData([])})}},saveUnit:function(e){var a=this.getView().getModel(),i=jQuery.Deferred(),s=this.getSelectedBegda(),o=this.getSelectedEndda();return s.setUTCDate(s.getDate()),o.setUTCDate(o.getDate()),a.callFunction("/SavePlanningData",{method:"POST",urlParameters:{UnitKey:e,Begda:s,Endda:o},changeSetId:e,success:function(){i.resolve(),this.fillTablesForUnit(e)}.bind(this),error:function(e){var a=JSON.parse(e.responseText).error.innererror.errordetails,i=a.length;t.error(a[i-2].message)}.bind(this)}),i},onSaveSuccess:function(){var e=this.getView().getModel("i18n").getResourceBundle().getText("assignsaved");s.show(e,{offset:"0 -133"})},onCancel:function(){r.openConfirmDialog("{i18n>unsaved}","{i18n>areyousure}","{i18n>yes}",this.cancelUnits.bind(this),function(){},this)},cancelUnits:function(){this.clearMessages();for(var e=0;e<this.aUnits.length;e++)this.cancelUnit(this.aUnits[e].UnitKey)},cancelUnit:function(e){var t=this.getView().getModel(),a=this.getSelectedBegda(),i=this.getSelectedEndda();a.setUTCDate(a.getDate()),i.setUTCDate(i.getDate()),t.callFunction("/CancelPlanningData",{method:"POST",urlParameters:{UnitKey:e,Begda:a,Endda:i},groupId:e,changeSetId:e,success:function(t,a){this.fillTablesForUnit(e)}.bind(this),error:function(e){this.handleError(e)}.bind(this)})},closeQualDialog:function(){this._qualDialog.close()},destroyEmpDataDialog:function(){sap.ui.getCore().byId("sf_formEmployeeData").destroyContent(),this._empDataDialog.destroy(),this._empDataDialog=null},onCloseEmpDataDialog:function(){this._empDataDialog.close()},fillTablesForUnit:function(e){var t=sap.ui.getCore().byId("tbl_plan_"+e);if(sap.ui.getCore().byId("pnl"+e).getExpanded()){t.getVisible()&&(t.setBusy(!0),this.removeColumns(t,"Dcol"),0===t.getRows().length?(t.destroyColumns(),this.fillUnitTable(t,e)):this.readDateUnit(t,e));var a=sap.ui.getCore().byId("tbl_sum_"+e);a.getVisible()&&(a.setBusy(!0),this.removeColumns(a,"Scol"),this.fillSumTable(a,e))}},clearMessages:function(){f.getModel().setData([])},addMessage:function(e,t,a){var i={};i.code=a,i.severity=e,i.message=t;[].push(i);var s=f.getModel(),o=s.getData();o.push(i),s.setData(o)},onShowHideSave:function(e,t){for(var a=this.getView().getModel(),i=sap.ui.getCore().byId("vb_hide_cols").getItems(),s={},o=0;o<i.length;o++)s={},(s=i[o].getBindingContext().getObject()).IsActive=i[o].getSelected(),a.create("/mycolSet",s);if(this.isFeatureEnabled("VARIANTEMP")){var n=sap.ui.getCore().byId("idSelectEmployees"),r=n.getBinding("items").getContexts();i=n.getSelectedKeys();for(o=0;o<r.length;o++)if(!(r[o].getProperty("IsVisible")&&-1!==i.indexOf(r[o].getProperty("EmpId"))||!r[o].getProperty("IsVisible")&&-1===i.indexOf(r[o].getProperty("EmpId")))){var l=r[o].getObject();l.IsVisible=-1!==i.indexOf(r[o].getProperty("EmpId")),this.getView().getModel().update(r[o].getPath(),l)}}sap.ui.getCore().byId("ld_select_variant").getSelectedKey();this._oHideDialog.setBusy(!0),this.closeHideShowColumns()},onSelectDropdownSave:function(e,t){for(var a=this.getView().getModel(),i=sap.ui.getCore().byId("vb_select_dropdown").getItems(),s={},o=0;o<i.length;o++)s={},(s=i[o].getBindingContext().getObject()).Selected=i[o].getSelected(),a.create("/selectDropdownSet",s);this._oSelectDropdown.setBusy(!0),this.onCloseSelectDropdown()},closeHideShowColumns:function(){var e=this.getView().getModel().getPendingChanges(),t=Object.keys(e),a=[];for(var i in t)-1!==t[i].indexOf("mycolSet")&&a.push("/"+t[i]);a.length>0&&this.getView().getModel().resetChanges(a),this._oHideDialog.close()},closeSelectDropdowns:function(){this._oSelectDropdown.close()},onChangeVariantForTable:function(e,t){var a=t.getSource().getSelectableItems()[t.getSource().getSelectedIndex()].getBindingContext(),i=(t.getParameter("selectedItem").getKey(),this.getView().getModel()),s={};(s=a.getObject()).IsActive=!0,i.update(a.sPath,s,{success:function(e){for(var t=0;t<this.aUnits.length;t++)this.onRefreshUnit(this.aUnits[t].UnitKey,this)}.bind(this)})},loadVariantInSelect:function(e){for(var t=0;t<this.aUnits.length;t++)sap.ui.getCore().byId("sel_var_"+this.aUnits[t].UnitKey).setSelectedKey(e)},unassignEmployee:function(e){var t=this.getView().getModel(),a=r.getCustomDataValue(e.getSource().getAggregation("customData"),"EmpID"),i=r.getCustomDataValue(e.getSource().getAggregation("customData"),"UnitKey"),s=this.getSelectedBegda(),o=this.getSelectedEndda();t.callFunction("/UnassignEmployee",{method:"POST",urlParameters:{EmpId:a,UnitKey:i,Begda:s,Endda:o},success:function(){this.refreshAllTables()}.bind(this),error:function(e){this.createError(e)}.bind(this)})},prepareSAVEKAPA:function(e){var t=this.getView().getModel(),a=this.getSelectedBegda(),i=this.getSelectedEndda(),s=this.getFormattedDate(a),o=this.getFormattedDate(i),n={};n.UnitKey=e,n.PlanBegda=s,n.PlanEndda=o,t.create("/saveKapaSet",n,{refreshAfterChange:!0,success:this.saveKapaSuccess.bind(this),error:function(){this.createError.bind(this)}})},saveKapaSuccess:function(){var e=this.getView().getModel("i18n").getResourceBundle().getText("kapasuccess");s.show(e)},prepareDEMAND:function(e){this._oMaintainDemandDialog||(this._oMaintainDemandDialog=sap.ui.xmlfragment("MIND2PEP_PLANNER.fragments.MaintainDemand",this,{refreshAfterChange:!0}),this._oMaintainDemandDialog.attachAfterClose(this.destroyMaintainDemandPopup.bind(this)),this.getView().addDependent(this._oMaintainDemandDialog),this._oMaintainDemandDialog.setBusyIndicatorDelay(0),this._oMaintainDemandDialog.setBusy(!0)),this._oMaintainDemandDialog.addCustomData(new sap.ui.core.CustomData({key:"UnitKey",value:e}));var t=this.getSelectedBegda(),a=new Date(9999,11,31),i=sap.ui.getCore().byId("dp_period_begda"),s=sap.ui.getCore().byId("dp_period_endda");i.setDateValue(t),s.setDateValue(a),this.getQualItems(e),this.bindDemandTable(e),this._oMaintainDemandDialog.setBusy(!1),this._oMaintainDemandDialog.open()},prepareDEMAND2:function(e){this._oMaintainDemandDialog2||(this._oMaintainDemandDialog2=sap.ui.xmlfragment("MIND2PEP_PLANNER.fragments.MaintainDemandShiftGroup",this,{refreshAfterChange:!0}),this._oMaintainDemandDialog2.attachAfterClose(this.destroyMaintainDemandPopup2.bind(this)),this.getView().addDependent(this._oMaintainDemandDialog2),this._oMaintainDemandDialog2.setBusyIndicatorDelay(0),this._oMaintainDemandDialog2.setBusy(!0)),this._oMaintainDemandDialog2.addCustomData(new sap.ui.core.CustomData({key:"UnitKey",value:e}));var t=this.getView().getModel(),a=this.getSelectedBegda(),i=this.getSelectedEndda(),s=new sap.ui.model.Filter("UnitKey",sap.ui.model.FilterOperator.EQ,e),o=new sap.ui.model.json.JSONModel;this._oMaintainDemandDialog2.setModel(o),this.getUnitShift(e,a,i),o.setProperty("/unitKey",e),t.read("/qualificationSet",{filters:[s],success:function(e){o.setProperty("/qualifications",e.results)}.bind(this),error:this.handleError.bind(this)}),this._oMaintainDemandDialog2.open()},prepareDEMAND3:function(e){this._oMaintainDemandDialog3||(this._oMaintainDemandDialog3=sap.ui.xmlfragment("MIND2PEP_PLANNER.fragments.MaintainDemandShiftGroupForMan",this,{refreshAfterChange:!0}),this._oMaintainDemandDialog3.attachAfterClose(this.destroyMaintainDemandPopup3.bind(this)),this.getView().addDependent(this._oMaintainDemandDialog3),this._oMaintainDemandDialog3.setBusyIndicatorDelay(0),this._oMaintainDemandDialog3.setBusy(!0)),this._oMaintainDemandDialog3.addCustomData(new sap.ui.core.CustomData({key:"UnitKey",value:e}));var t=this.getView().getModel(),a=new sap.ui.model.Filter("UnitKey",sap.ui.model.FilterOperator.EQ,e),i=new sap.ui.model.json.JSONModel,s=this.getSelectedBegda(),o=this.getSelectedEndda();i.setProperty("/Begda",s),i.setProperty("/Endda",o),this._oMaintainDemandDialog3.setModel(i,"ManDemandModel"),i.setProperty("/unitKey",e),this.createTableForDemandShiftForMan(this._oMaintainDemandDialog3.getModel("ManDemandModel"),s,o),t.read("/qualificationSet",{filters:[a],success:function(e){i.setProperty("/qualifications",e.results)}.bind(this),error:this.handleError.bind(this)}),this._oMaintainDemandDialog3.open(),this._oMaintainDemandDialog3.setBusy(!1)},getShiftData:function(){var e=this._oMaintainDemandDialog3.getModel("ManDemandModel"),t=e.getProperty("/Begda"),a=e.getProperty("/Endda");this.createTableForDemandShiftForMan(e,t,a)},onDeleteDemandTimeWrapper:function(){r.openConfirmDialog("{i18n>areyousure}","{i18n>warningdel}","{i18n>delete}",this.onDeleteDemandTime.bind(this),function(){},this)},saveManShifts:function(){var e=sap.ui.getCore().byId("tbl_demand_shiftgroupforman"),t=e.getModel("ManDemandModel"),a=this.getView().getModel(),i=t.getProperty("/ForRemove"),s=this,o={},n=[],r=e.getBinding("items").getContexts();for(var l in r){var d=r[l].getProperty("navdmandSet/results");for(var u in d){var g=d[u],p={Id:g.Id,Begda:g.Begda,Endda:g.Endda,DemandImp1:g.DemandImp1,DemandMan1:g.DemandMan1,Group1:g.Group1,DemandImp2:g.DemandImp2,DemandMan2:g.DemandMan2,Group2:g.Group2,DemandImp3:g.DemandImp3,DemandMan3:g.DemandMan3,Group3:g.Group3,DemandImp4:g.DemandImp4,DemandMan4:g.DemandMan4,Group4:g.Group4};for(var l in"9999999999"===p.Id?(o["ForCreate"+p.Id]=$.Deferred(),n.push(o["ForCreate"+p.Id]),a.create("/unitShiftSet",p,{refreshAfterChange:!0,success:function(e,t){o["ForCreate"+p.Id].resolve()}.bind(this),error:function(e){o["ForCreate"+p.Id].resolve(),this.createError(e)}.bind(this)})):(o["ForUpdate"+p.Id]=$.Deferred(),n.push(o["ForUpdate"+p.Id]),a.update("/dmand(\'"+p.Id+"\')",p,{success:function(e,t){o["ForUpdate"+p.Id].resolve()}.bind(this),error:function(e){o["ForUpdate"+p.Id].resolve(),this.createError(e)}.bind(this)})),i)o["ForRemove"+i[l]]=$.Deferred(),n.push(o["ForRemove"+i[l]]),a.remove("/dmand(\'"+i[l]+"\')",{refreshAfterChange:!0,success:function(){o["ForRemove"+i[l]].resolve()}.bind(this),error:function(e){o["ForRemove"+i[l]].resolve(),this.createError(e)}.bind(this)})}}$.when(n).done(function(){s._oMaintainDemandDialog3.setBusy(!1),s.createTableForDemandShiftForMan(t,t.getProperty("/Begda"),t.getProperty("/Endda"))})},onDiscardManShifts:function(){var e=this._oMaintainDemandDialog3.getModel("ManDemandModel");this.createTableForDemandShiftForMan(e,e.getProperty("/Begda"),e.getProperty("/Endda"))},onManDemandShiftChange:function(){var e=this._oMaintainDemandDialog3.getModel("ManDemandModel");this.createTableForDemandShiftForMan(e,e.getProperty("/Begda"),e.getProperty("/Endda"))},createTableForDemandShiftForMan:function(e,t,a){var i=sap.ui.getCore().byId("tbl_demand_shiftgroupforman"),s=sap.ui.getCore().byId("demandTableShiftGroupForManTemplate"),o=new sap.ui.model.Filter("Date","BT",t,a),n=[];n.push(o),this.getView().getModel().read("/dmandDateSet",{urlParameters:{$expand:"navdmandSet"},filters:n,success:function(t){e.setProperty("/dmandDate",t.results),i.bindItems({path:"ManDemandModel>/dmandDate",template:s,templateShareable:!0})}.bind(this),error:function(e){}})},onAddDemandQualForMan:function(e){var t=[],a=(sap.ui.getCore().byId("tbl_demand_shiftgroupforman").getModel("ManDemandModel"),e.getSource().getParent().getBindingContext("ManDemandModel"));void 0!==e.getSource().getModel("ManDemandModel").getProperty("navdmandSet",a)&&(t=e.getSource().getModel("ManDemandModel").getProperty("navdmandSet",a));var i={Daynr:e.getSource().getModel().getProperty("Date",a),Id:"9999999999"};t.results.push(i),e.getSource().getModel("ManDemandModel").setProperty("navdmandSet",t,a)},onDeleteDemandQualForMan:function(e){var t=e.getSource(),a=t.getBindingContext("ManDemandModel"),i=t.getModel("ManDemandModel"),s=i.getProperty("/ForRemove")||[];"9999999999"!==a.getProperty("Id")&&s.push(a.getProperty("Id"));var o=i.getProperty(a.getPath().substring(0,a.getPath().length-2));o.forEach(function(e,t){e.Id===a.getProperty("Id")&&o.splice(t,1)}),i.setProperty(a.getPath().substring(0,a.getPath().length-2),o)},getUnitShift:function(e,t,a){var i=this.getView().getModel(),s=new sap.ui.model.Filter("UnitKey",sap.ui.model.FilterOperator.EQ,e),o=new sap.ui.model.Filter("Begda",sap.ui.model.FilterOperator.EQ,t),n=new sap.ui.model.Filter("Endda",sap.ui.model.FilterOperator.EQ,a),r=this._oMaintainDemandDialog2.getModel(),l=new Date("9999-12-31"),d=[];d.push(s),d.push(o),d.push(n),i.read("/unitShiftSet",{filters:d,success:function(a){var i,s={};a.results.length>0?(s=a.results[0],i=a.results[0].Id):(i=(s={Id:"9999999999",UnitKey:e,Begda:t,Endda:l,Shifts:1,Overwrite:!1}).Id,a.results.push(s)),this._oMaintainDemandDialog2.setBusy(!1),r.setProperty("/unitShiftSet",a.results),r.setProperty("/unitShift",s),r.getProperty("/Id")||r.setProperty("/Id",i),this.createTableForDemandShift(i,r)}.bind(this),error:function(e){this._oMaintainDemandDialog2.setBusy(!1)}})},changeDemandShiftSelection:function(e){var t=this._oMaintainDemandDialog2.getModel(),a=e.getParameter("selectedItem").getBindingContext().getObject();t.setProperty("/unitShift",a),this.createTableForDemandShift(a.Id,t)},createTableForDemandShift:function(e,t){var a=sap.ui.getCore().byId("tbl_demand_shiftgroup"),i=sap.ui.getCore().byId("demandTableShiftGroupTemplate"),s=new sap.ui.model.Filter("Id",sap.ui.model.FilterOperator.EQ,e),o=[];a.setModel(t),o.push(s),this.getView().getModel().read("/demandDaySet",{urlParameters:{$expand:"dayToDemand"},filters:o,success:function(e){t.setProperty("/demandDaySet",e.results),a.bindItems({path:"/demandDaySet",template:i,templateShareable:!0})}.bind(this),error:function(e){}})},onMoveDemandBack:function(){var e=sap.ui.getCore().byId("tbl_demand_shiftgroup").getModel().getProperty("/unitShift/MoveBack");this.onMoveDemandTo(e)},onMoveDemandFor:function(){var e=sap.ui.getCore().byId("tbl_demand_shiftgroup").getModel().getProperty("/unitShift/MoveFor");this.onMoveDemandTo(e)},onMoveDemandTo:function(e){var t=this.getView().getModel(),a=sap.ui.getCore().byId("tbl_demand_shiftgroup").getModel(),i=t.createKey("/unitShiftSet",{Id:e});t.read(i,{success:function(e){var t=e,i=e.Id;a.setProperty("/unitShift",t),this.createTableForDemandShift(i,a)}.bind(this),error:function(e){}})},onAddNewDemandTime:function(){var e=sap.ui.getCore().byId("tbl_demand_shiftgroup").getModel(),t=this.getSelectedBegda(),a=(this.getSelectedEndda(),new Date("9999-12-31")),i={Id:"9999999999",UnitKey:e.getProperty("/unitShift/UnitKey"),Begda:t,Endda:a,Shifts:1,Overwrite:!1};e.setProperty("/unitShift",i),e.setProperty("/demandDaySet",[])},onDeleteDemandTime:function(){this._oMaintainDemandDialog2.setBusy(!0);var e=this.getView().getModel(),t=sap.ui.getCore().byId("tbl_demand_shiftgroup").getModel(),a=t.getProperty("/unitShift/Id"),i=t.getProperty("/unitShift/UnitKey"),o=e.createKey("/unitShiftSet",{Id:a}),n=!1,r=t.getProperty("/unitShift/MoveBack");"0000000000"!==r?n=!0:"0000000000"!==(r=t.getProperty("/unitShift/MoveFor"))&&(n=!0),e.remove(o,{success:function(e){var t=this.getResourceBundleText("demanddeleted");s.show(t),n?(this.moveToLastDemand(i),this._oMaintainDemandDialog2.setBusy(!1)):(this.onAddNewDemandTime(),this._oMaintainDemandDialog2.setBusy(!1))}.bind(this),error:function(e){this._oMaintainDemandDialog2.setBusy(!1),this.createError(e)}.bind(this)})},onDemandShiftChange:function(e){var t=e.getSource().getSelectedKey();e.getSource().getModel().setProperty("/unitShift/Shifts",t)},onAddDemandDay:function(e){var t=sap.ui.getCore().byId("tbl_demand_shiftgroup").getModel(),a=t.getProperty("/demandDaySet"),i=a.length,s={Daynr:i+1,Id:t.getProperty("/unitShift/Id")},o={Daynr:i+1,Id:t.getProperty("/unitShift/Id"),QualId:t.getProperty("/qualifications")[0].QualId},n=[];n.push(o),s.dayToDemand={},s.dayToDemand.results=n,a.push(s),t.setProperty("/demandDaySet",a)},onAddDemandDayFromLast:function(e){for(var t=sap.ui.getCore().byId("tbl_demand_shiftgroup").getModel(),a=t.getProperty("/demandDaySet"),i=a[a.length-1],s={Daynr:a.length+1,Id:t.getProperty("/unitShift/Id"),dayToDemand:{}},o=[],n=0;n<i.dayToDemand.results.length;n++){var r={Daynr:s.Daynr,Id:t.getProperty("/unitShift/Id"),QualId:i.dayToDemand.results[n].QualId,Demand1:i.dayToDemand.results[n].Demand1,Demand2:i.dayToDemand.results[n].Demand2,Demand3:i.dayToDemand.results[n].Demand3,Demand4:i.dayToDemand.results[n].Demand4,Demand5:i.dayToDemand.results[n].Demand5,Demand6:i.dayToDemand.results[n].Demand6};o.push(r)}s.dayToDemand.results=o,a.push(s),t.setProperty("/demandDaySet",a)},onAddDemandQual:function(e){var t=[],a=sap.ui.getCore().byId("tbl_demand_shiftgroup").getModel(),i=e.getSource().getParent().getBindingContext();void 0!==e.getSource().getModel().getProperty("dayToDemand",i)&&(t=e.getSource().getModel().getProperty("dayToDemand",i));var s={Daynr:e.getSource().getModel().getProperty("Daynr",i),Id:a.getProperty("/unitShift/Id"),QualId:a.getProperty("/qualifications")[0].QualId};t.results.push(s),e.getSource().getModel().setProperty("dayToDemand",t,i)},onDeleteDemandQual:function(e){sap.ui.getCore().byId("tbl_demand_shiftgroup");var t=[],a=e.getSource().getParent().getParent().getBindingContext();void 0!==e.getSource().getModel().getProperty("dayToDemand",a)&&(t=e.getSource().getModel().getProperty("dayToDemand",a));var i=e.getSource().getBindingContext(),s=t.results.findIndex(function(e){return e===i.getObject()});if(t.results.splice(s,1),0===e.getSource().getModel().getProperty("dayToDemand",a).results.length){for(var o=e.getSource().getModel().getProperty("/demandDaySet"),n=e.getSource().getModel().getProperty("Daynr",a),r=n;r<o.length;r++){o[r].Daynr=r;for(var l=0;l<o[r].dayToDemand.results.length;l++)o[r].dayToDemand.results[l].Daynr=r}o.splice(n-1,1),e.getSource().getModel().setProperty("/demandDaySet",o)}else e.getSource().getModel().setProperty("dayToDemand",t,a)},onSaveDemandShiftGroup:function(e){this._oMaintainDemandDialog2.setBusy(!0);var t=sap.ui.getCore().byId("tbl_demand_shiftgroup").getModel(),a=this.getView().getModel(),i=this.getView().getModel("i18n").getResourceBundle().getText("saved"),o=t.getProperty("/demandDaySet"),n=[],r=[],l=new sap.ui.model.Filter("Id",sap.ui.model.FilterOperator.EQ,e),d=[];d.push(l),a.read("/demandDaySet",{urlParameters:{$expand:"dayToDemand"},filters:d,success:function(l){var d=o.length;if(0!==d){for(;d--;){for(var u=l.results.length;u--;){var g=o[d],p=l.results[u];if(g.Daynr==p.Daynr&&g.Id==p.Id){for(var c=g.dayToDemand.results.length;c--;)for(var m=p.dayToDemand.results.length;m--;){var h=g.dayToDemand.results[c],y=p.dayToDemand.results[m];h.Daynr==y.Daynr&&h.Id==y.Id&&h.QualId==y.QualId&&l.results[u].dayToDemand.results.splice(m,1)}for(var b=0;b<l.results[u].dayToDemand.results.length;b++)r.push(l.results[u].dayToDemand.results[b]);l.results.splice(u,1)}}for(var _=0;_<o[d].dayToDemand.results.length;_++)n.push(o[d].dayToDemand.results[_]);l.results.length>0&&o.splice(d,1)}for(var C=0;C<l.results.length;C++)for(var f=0;f<l.results[C].dayToDemand.results.length;f++)r.push(l.results[C].dayToDemand.results[f]);for(var D=0;D<n.length;D++)a.createEntry("/demandDayDemandSet",{properties:{Daynr:n[D].Daynr,Id:e,QualId:n[D].QualId,Demand1:parseInt(n[D].Demand1),Demand2:parseInt(n[D].Demand2),Demand3:parseInt(n[D].Demand3),Demand4:parseInt(n[D].Demand4),Demand5:parseInt(n[D].Demand5),Demand6:parseInt(n[D].Demand6)}});a.hasPendingChanges()&&a.submitChanges({success:function(){s.show(i),this.createTableForDemandShift(e,t),this._oMaintainDemandDialog2.setBusy(!1)}.bind(this),error:function(e){this.createError(e),this._oMaintainDemandDialog2.setBusy(!1)}.bind(this)});for(var S=0;S<r.length;S++){var v="/demandDayDemandSet(Daynr="+r[S].Daynr+",Id=\'"+r[S].Id+"\',QualId=\'"+r[S].QualId+"\')";a.remove(v,{success:function(e){}.bind(this),error:function(e){this.createError(e),this._oMaintainDemandDialog2.setBusy(!1)}})}}else this._oMaintainDemandDialog2.setBusy(!1),s.show(i)}.bind(this),error:function(e){this._oMaintainDemandDsialog2.setBusy(!1)}.bind(this)})},saveUnitShifts:function(){var e=sap.ui.getCore().byId("tbl_demand_shiftgroup").getModel(),t=this.getView().getModel(),a=e.getProperty("/unitShift"),i={Id:a.Id,Overwrite:a.Overwrite,Shifts:parseInt(a.Shifts),UnitKey:a.UnitKey,Begda:a.Begda,Endda:a.Endda,Beguz1:a.Beguz1,Enduz1:a.Enduz1,Beguz2:a.Beguz2,Enduz2:a.Enduz2,Beguz3:a.Beguz3,Enduz3:a.Enduz3,Beguz4:a.Beguz4,Enduz4:a.Enduz4,Beguz5:a.Beguz5,Enduz5:a.Enduz5,Beguz6:a.Beguz6,Enduz6:a.Enduz6};"9999999999"===i.Id?t.create("/unitShiftSet",i,{refreshAfterChange:!0,success:function(t,a){e.setProperty("/unitShift",t),this.onSaveDemandShiftGroup(t.Id)}.bind(this),error:function(e){this._oMaintainDemandDialog2.setBusy(!1),this.createError(e)}.bind(this)}):t.update("/unitShiftSet(\'"+i.Id+"\')",i,{refreshAfterChange:!0,success:function(e,t){this.onSaveDemandShiftGroup(i.Id)}.bind(this),error:function(e){this._oMaintainDemandDialog2.setBusy(!1),this.createError(e)}.bind(this)}),this.moveToLastDemand(a.UnitKey)},moveToLastDemand:function(e){var t=sap.ui.getCore().byId("tbl_demand_shiftgroup").getModel(),a=this.getView().getModel(),i=this.getSelectedBegda(),s=this.getSelectedEndda(),o=new sap.ui.model.Filter("UnitKey",sap.ui.model.FilterOperator.EQ,e),n=new sap.ui.model.Filter("Begda",sap.ui.model.FilterOperator.EQ,i),r=new sap.ui.model.Filter("Endda",sap.ui.model.FilterOperator.EQ,s),l=[];l.push(o),l.push(n),l.push(r),a.read("/unitShiftSet",{filters:l,success:function(e){t.setProperty("/unitShiftSet",e.results),t.setProperty("/unitShift",e.results[e.results.length-1]),t.setProperty("/Id",e.results[e.results.length-1].Id),this.createTableForDemandShift(e.results[e.results.length-1].Id,t)}.bind(this),error:function(e){this._oMaintainDemandDialog2.setBusy(!1)}})},onCancelDemandShiftGroup:function(){this.getView().getModel().read("/demandDaySet",{urlParameters:{$expand:"dayToDemand"},success:function(e){this._oMaintainDemandDialog2.getModel().setProperty("/demandDaySet",e.results)}.bind(this)})},getQualItems:function(e){var t=this.getView().getModel(),a=new sap.ui.model.Filter("UnitKey",sap.ui.model.FilterOperator.EQ,e);if(this.oCustomizing.PlanHideQKey)var i=new sap.ui.core.Item({text:"{QualText}",key:"{QualId}"});else i=new sap.ui.core.Item({text:"{QualId} - {QualText}",key:"{QualId}"});var s=sap.ui.getCore().byId("md_select_qual");s.setModel(t),s.bindAggregation("items",{path:"/qualificationSet",template:i,filters:[a]})},getAvailShiftSuccess:function(e){var t=sap.ui.getCore().byId("ld_select_shift"),a=sap.ui.getCore().byId("ld_tp_beguz_shift"),i=sap.ui.getCore().byId("ld_tp_enduz_shift"),s=sap.ui.getCore().byId("md_select_qual"),o=s.getFirstItem(),n=t.getFirstItem();if(t.getEnabled()||t.setEnabled(!0),s.setSelectedItem(o),t.setSelectedItem(n),n)var r=n.getBindingContext(),l=t.getModel().getProperty("Beguz",r),d=t.getModel().getProperty("Enduz",r);a.getEnabled()&&a.setEnabled(!1),a.setValue(l),i.getEnabled()&&i.setEnabled(!1),i.setValue(d)},onShiftChange:function(e){e.getSource().getSelectedItem();var t=sap.ui.getCore().byId("ld_select_shift"),a=sap.ui.getCore().byId("ld_tp_beguz_shift"),i=sap.ui.getCore().byId("ld_tp_enduz_shift"),s=t.getSelectedItem().getBindingContext(),o=t.getModel().getProperty("Beguz",s),n=t.getModel().getProperty("Enduz",s);a.setValue(o),i.setValue(n)},onCloseMaintainDemand:function(){this._oMaintainDemandDialog.close()},onCloseMaintainDemand2:function(){this._oMaintainDemandDialog2.close()},onCloseMaintainDemand3:function(){this._oMaintainDemandDialog3.close()},destroyMaintainDemandPopup:function(){this._oMaintainDemandDialog.destroy(),this._oMaintainDemandDialog=null},destroyMaintainDemandPopup2:function(){this._oMaintainDemandDialog2.destroy(),this._oMaintainDemandDialog2=null},destroyMaintainDemandPopup3:function(){this._oMaintainDemandDialog3.destroy(),this._oMaintainDemandDialog3=null},getShiftItems:function(e){var t=this.getView().getModel(),a=sap.ui.getCore().byId("dp_period_begda").getDateValue(),i=sap.ui.core.format.DateFormat.getDateInstance({pattern:"yyyyMMdd"}).format(a),s=new sap.ui.model.Filter("Begda",sap.ui.model.FilterOperator.EQ,i),o=r.getCustomDataValue(this._oMaintainDemandDialog.getAggregation("customData"),"UnitKey"),n=new sap.ui.model.Filter("UnitKey",sap.ui.model.FilterOperator.EQ,o),l=new sap.ui.core.Item({text:"{ShiftName}",key:"{ShiftKey}"}),d=sap.ui.getCore().byId("ld_select_shift");d.setModel(t),d.bindAggregation("items",{path:"/availEmpShiftSet",template:l,events:{dataReceived:this.getAvailShiftSuccess.bind(this)},filters:[s,n]})},onSelectOwnShiftTime:function(e){var t=e.getSource().getSelected(),a=sap.ui.getCore().byId("ld_select_shift"),i=sap.ui.getCore().byId("ld_tp_beguz_shift"),s=sap.ui.getCore().byId("ld_tp_enduz_shift");switch(t){case!0:a.removeAllItems(),a.setEnabled(!1),i.getEnabled()||i.setEnabled(!0),s.getEnabled()||s.setEnabled(!0);break;case!1:this.getShiftItems();default:return}},bindDemandTable:function(){var e=sap.ui.getCore().byId("dp_period_begda"),t=sap.ui.getCore().byId("dp_period_endda"),a=this.getView().getModel();if(e&&t&&e.getDateValue()<=t.getDateValue()){var i=r.getCustomDataValue(this._oMaintainDemandDialog.getAggregation("customData"),"UnitKey"),s=sap.ui.getCore().byId("tbl_md_demands"),o=new sap.ui.model.Filter("UnitKey",sap.ui.model.FilterOperator.EQ,i),n=this.getFormattedDate(e.getDateValue()),l=this.getFormattedDate(t.getDateValue()),d=new sap.ui.model.Filter("Begda",sap.ui.model.FilterOperator.EQ,n),u=new sap.ui.model.Filter("Endda",sap.ui.model.FilterOperator.EQ,l);s.setBusy(!0),s.setModel(a),s.bindAggregation("rows",{path:"/demandSet",filters:[o,d,u],events:{dataReceived:function(e){this.getDemandTableDataSuccess(e)}.bind(this)}}),setTimeout(function(){r.autoResize(s)},500)}},getDemandTableDataSuccess:function(e){var t=sap.ui.getCore().byId("tbl_md_demands");t.setSelectedIndex(-1),t.setBusy(!1)},onDemandTableSelectionChange:function(e){if(e===sap.ui.getCore().byId("tbl_md_demands"))t=e;else var t=e.getSource();this.handleTableSelectionChange(t)},onChangeDemandBegda:function(){this.bindDemandTable()},onChangeDemandEndda:function(){this.bindDemandTable()},onSaveNewDemand:function(e){var t=this.getView().getModel(),a={},i=sap.ui.getCore().byId("md_select_qual"),o=sap.ui.getCore().byId("dp_period_begda"),n=sap.ui.getCore().byId("dp_period_endda"),l=r.getCustomDataValue(this._oMaintainDemandDialog.getAggregation("customData"),"UnitKey"),d=o.getDateValue(),u=n.getDateValue(),g=this.getFormattedDate(o.getDateValue()),p=this.getFormattedDate(n.getDateValue()),c=this.getView().getModel("i18n").getResourceBundle(),m=sap.ui.getCore().byId("tbl_md_demands");o.setValueState(sap.ui.core.ValueState.None),n.setValueState(sap.ui.core.ValueState.None),d&&u&&u>=d?(m.setBusy(!0),a.UnitKey=l,a.Begda=g,a.Endda=p,a.QualKey=i.getSelectedItem().getKey(),a.Beguz=sap.ui.getCore().byId("ld_tp_beguz_shift").getValue(),a.Enduz=sap.ui.getCore().byId("ld_tp_enduz_shift").getValue(),a.Override=sap.ui.getCore().byId("chb_overload").getSelected(),a.WithoutDisposition=sap.ui.getCore().byId("chb_qualification").getSelected(),a.Monday=sap.ui.getCore().byId("md_i_mo").getValue(),a.Tuesday=sap.ui.getCore().byId("md_i_tu").getValue(),a.Wednesday=sap.ui.getCore().byId("md_i_we").getValue(),a.Thursday=sap.ui.getCore().byId("md_i_th").getValue(),a.Friday=sap.ui.getCore().byId("md_i_fr").getValue(),a.Saturday=sap.ui.getCore().byId("md_i_sa").getValue(),a.Sunday=sap.ui.getCore().byId("md_i_su").getValue(),a.Holiday=sap.ui.getCore().byId("md_i_ho").getValue(),a.QualText=i.getSelectedItem().getText().slice(0,20),t.create("/demandSet",a,{refreshAfterChange:!0,success:function(e,t){var i=c.getText("demandcreated",[a.Beguz,a.Enduz,a.QualText]);this.bindDemandTable(),s.show(i)}.bind(this),error:this.createError.bind(this)}),this.clearDemandDialogValues()):(d||o.setValueState(sap.ui.core.ValueState.Error),u||n.setValueState(sap.ui.core.ValueState.Error),d>u&&o.setValueState(sap.ui.core.ValueState.Error))},clearDemandDialogValues:function(){var e=sap.ui.getCore().byId("tbl_md_demands");-1!==e.getSelectedIndex()&&e.setSelectedIndex(-1),sap.ui.getCore().byId("chb_overload").setSelected(!1),sap.ui.getCore().byId("chb_qualification").setSelected(!1),sap.ui.getCore().byId("md_i_mo").setValue(""),sap.ui.getCore().byId("md_i_tu").setValue(""),sap.ui.getCore().byId("md_i_we").setValue(""),sap.ui.getCore().byId("md_i_th").setValue(""),sap.ui.getCore().byId("md_i_fr").setValue(""),sap.ui.getCore().byId("md_i_sa").setValue(""),sap.ui.getCore().byId("md_i_su").setValue(""),sap.ui.getCore().byId("md_i_ho").setValue("")},handleTableSelectionChange:function(e){var t=sap.ui.getCore().byId("md_select_qual"),a=sap.ui.getCore().byId("dp_period_begda"),i=sap.ui.getCore().byId("dp_period_endda"),s=sap.ui.getCore().byId("ld_tp_beguz_shift"),o=sap.ui.getCore().byId("ld_tp_enduz_shift"),n=sap.ui.getCore().byId("chb_overload"),r=sap.ui.getCore().byId("chb_qualification"),l=sap.ui.getCore().byId("md_i_mo"),d=sap.ui.getCore().byId("md_i_tu"),u=sap.ui.getCore().byId("md_i_we"),g=sap.ui.getCore().byId("md_i_th"),p=sap.ui.getCore().byId("md_i_fr"),c=sap.ui.getCore().byId("md_i_sa"),m=sap.ui.getCore().byId("md_i_su"),h=sap.ui.getCore().byId("md_i_ho");if(-1==e.getSelectedIndex()){sap.ui.getCore().byId("btn_md_delete").setEnabled(!1),sap.ui.getCore().byId("btn_md_change").setEnabled(!1),sap.ui.getCore().byId("btn_md_copy").setEnabled(!1),sap.ui.getCore().byId("btn_md_save").setEnabled(!0),sap.ui.getCore().byId("dp_period_begda").setEnabled(!0),sap.ui.getCore().byId("dp_period_endda").setEnabled(!0);var y=new Date(9999,11,31);i.setDateValue(y),this.clearDemandDialogValues()}else{sap.ui.getCore().byId("dp_period_begda").setEnabled(!1),sap.ui.getCore().byId("dp_period_endda").setEnabled(!1),sap.ui.getCore().byId("btn_md_delete").setEnabled(!0),sap.ui.getCore().byId("btn_md_change").setEnabled(!0),sap.ui.getCore().byId("btn_md_copy").setEnabled(!0),sap.ui.getCore().byId("btn_md_save").setEnabled(!1);var b=e.getContextByIndex(e.getSelectedIndex()).getObject();t.setSelectedKey(b.QualKey),a.setValue(b.Begda),i.setValue(b.Endda),s.setEnabled(!0),o.setEnabled(!0),s.setValue(b.Beguz),o.setValue(b.Enduz),n.setSelected(b.Override),r.setSelected(b.WithoutDisposition),l.setValue(b.Monday),d.setValue(b.Tuesday),u.setValue(b.Wednesday),g.setValue(b.Thursday),p.setValue(b.Friday),c.setValue(b.Saturday),m.setValue(b.Sunday),h.setValue(b.Holiday)}},onDeleteDemand:function(){var e=this.getView().getModel(),t=sap.ui.getCore().byId("tbl_md_demands"),a=t.getContextByIndex(t.getSelectedIndex()),i=a.getObject(),o=this.getView().getModel("i18n").getResourceBundle();t.setBusy(!0),e.remove(a.sPath,{refreshAfterChange:!0,success:function(e){var a=o.getText("demanddeleted",[i.Beguz,i.Enduz,i.QualText]);this.bindDemandTable(),this.handleTableSelectionChange(t),t.setBusy(!1),s.show(a)}.bind(this),error:function(e){t.setBusy(!1),this.createError.bind(this)}})},onCancelDemandEditing:function(){this.clearDemandDialogValues()},onCopyDemandEntry:function(e){this.onSaveNewDemand()},onChangeDemandEntry:function(e){var t=this.getView().getModel(),a={},i=sap.ui.getCore().byId("md_select_qual"),o=sap.ui.getCore().byId("dp_period_begda"),n=sap.ui.getCore().byId("dp_period_endda"),l=r.getCustomDataValue(this._oMaintainDemandDialog.getAggregation("customData"),"UnitKey"),d=o.getDateValue(),u=n.getDateValue(),g=this.getFormattedDate(o.getDateValue()),p=this.getFormattedDate(n.getDateValue()),c=sap.ui.getCore().byId("tbl_md_demands"),m=c.getContextByIndex(c.getSelectedIndex()),h=this.getView().getModel("i18n").getResourceBundle();o.setValueState(sap.ui.core.ValueState.None),n.setValueState(sap.ui.core.ValueState.None),d&&u&&u>=d?(a.UnitKey=l,a.Begda=g,a.Endda=p,a.QualKey=i.getSelectedItem().getKey(),a.Beguz=sap.ui.getCore().byId("ld_tp_beguz_shift").getValue(),a.Enduz=sap.ui.getCore().byId("ld_tp_enduz_shift").getValue(),a.Override=sap.ui.getCore().byId("chb_overload").getSelected(),a.WithoutDisposition=sap.ui.getCore().byId("chb_qualification").getSelected(),a.Monday=sap.ui.getCore().byId("md_i_mo").getValue(),a.Tuesday=sap.ui.getCore().byId("md_i_tu").getValue(),a.Wednesday=sap.ui.getCore().byId("md_i_we").getValue(),a.Thursday=sap.ui.getCore().byId("md_i_th").getValue(),a.Friday=sap.ui.getCore().byId("md_i_fr").getValue(),a.Saturday=sap.ui.getCore().byId("md_i_sa").getValue(),a.Sunday=sap.ui.getCore().byId("md_i_su").getValue(),a.Holiday=sap.ui.getCore().byId("md_i_ho").getValue(),a.QualText=i.getSelectedItem().getText().slice(0,20),t.update(m.sPath,a,{refreshAfterChange:!0,success:function(){var e=h.getText("demandchanged",[a.Beguz,a.Enduz,a.QualText]);s.show(e),this.bindDemandTable()}.bind(this),error:this.createError.bind(this)}),this.clearDemandDialogValues()):(d||o.setValueState(sap.ui.core.ValueState.Error),u||n.setValueState(sap.ui.core.ValueState.Error),d>u&&o.setValueState(sap.ui.core.ValueState.Error))},openCommentPopupWrapper:function(e){this.isFeatureEnabled("ADDINFO")?this.openCommentPopUp(!0,e):this.openCommentPopUp(!1,e)},openCommentPopUp:function(e,t){if(!this._oCommentDialog){this._oCommentDialog=sap.ui.xmlfragment("MIND2PEP_PLANNER.fragments.Comments",this,{refreshAfterChange:!0}),this.getView().addDependent(this._oCommentDialog);var a=this.getOwnerComponent().getModel("Comments");a.setDefaultBindingMode(sap.ui.model.BindingMode.OneWay),this._oCommentDialog.setModel(a),this._oCommentDialog.open(),this._oCommentDialog.attachAfterClose(this.destroyCommentDialog.bind(this));var i=sap.ui.getCore().byId("ta_additionalInfo");i.setVisible(e),sap.ui.getCore().byId("lbl_additionalInfo").setVisible(e)}var s=t.getCustomData(),o=r.getCustomDataValue(s,"PlanDate");o="string"==typeof o?parseInt(o):o;var n=new Date(o),l=this.getResourceBundleText("commentfordate"),d=this.getView().getModel();this._oCommentDialog.setTitle(l+" "+n.toLocaleDateString("de-DE"));var u=r.getCustomDataValue(s,"UnitKey");this._oCommentDialog.addCustomData(new sap.ui.core.CustomData({key:"UnitKey",value:u})),this._oCommentDialog.addCustomData(new sap.ui.core.CustomData({key:"Date",value:o}));var g=sap.ui.getCore().byId("ta_com_newCom"),p=this.getCommentPath(o,u);if(p)g.bindElement(p);else{var c=a.getProperty("/results"),m={UnitKey:u,PlanDate:n,CommentDate:""};c.push(m),a.setProperty("/results",c),p=this.getCommentPath(o,u),g.bindElement(p)}e&&(p=d.createKey("/additionalInformationSet",{UnitKey:u,Date:n}),i.setModel(d),d.read(p,{success:function(e){sap.ui.getCore().byId("ta_additionalInfo").setValue(e.Text)}.bind(this)}))},onCommentDialogClose:function(){this._oCommentDialog.close(),this.destroyCommentDialog()},destroyCommentDialog:function(){var e=sap.ui.getCore().byId("ta_com_newCom").getBindingContext();e.getProperty("CommentDate")||e.getModel().getData().results.splice(e.getPath().substr(9),1),this._oCommentDialog.destroy(),this._oCommentDialog=null},getCommentPath:function(e,t){var a,i=this.getOwnerComponent().getModel("Comments"),s=new Date(e);return $.each(i.getData().results,function(e,i){i.PlanDate.toString()===s.toString()&&i.UnitKey===t&&(a="/results/"+e)}),a},checkHasComment:function(e,t){var a=this.getOwnerComponent().getModel("Comments"),i=new Date(e),s=!1;return $.each(a.getData().results,function(e,a){a.PlanDate.setHours(12),a.PlanDate.toString()===i.toString()&&a.UnitKey===t&&(s=!0)}),s},onSaveComment:function(e){var t=this.getView().getModel(),a=sap.ui.getCore().byId("ta_com_newCom"),i=a.getValue(),o=r.getCustomDataValue(this._oCommentDialog.getAggregation("customData"),"UnitKey"),n=r.getCustomDataValue(this._oCommentDialog.getAggregation("customData"),"Date"),l=new Date(n);if(a.setValueState(sap.ui.core.ValueState.None),i){var d={};d.UnitKey=o,d.PlanDate=l,d.CommentDate=i,t.create("/commentSet",d,{refreshAfterChange:!0,success:function(e){var t=sap.ui.getCore().byId("ta_com_newCom").getBindingContext(),a=t.getModel();e.PlanDate.setHours(12);var i={UnitKey:e.UnitKey,PlanDate:e.PlanDate,CommentDate:e.CommentDate};a.setProperty(t.getPath(),i,t),s.show(this.getResourceBundleText("commentsaved")),this._oCommentDialog.close()}.bind(this),error:function(e){this.createError(e)}.bind(this)})}else a.setValueState(sap.ui.core.ValueState.Error)},onDeleteComment:function(){r.openConfirmDialog("{i18n>deletecomment}","{i18n>areyousure}","{i18n>btndeletecommenttxt}",this.deleteComment.bind(this),null,this)},deleteComment:function(e){var t=r.getCustomDataValue(e._oCommentDialog.getAggregation("customData"),"UnitKey"),a=r.getCustomDataValue(e._oCommentDialog.getAggregation("customData"),"Date"),i=e.getView().getModel().createKey("/commentSet",{UnitKey:t,PlanDate:a});e.getView().getModel().remove(i,{refreshAfterChange:!0,success:function(){s.show(e.getResourceBundleText("commentdeleted")),e._oCommentDialog.close(),e.getView().getModel().read(i,{success:function(){var e=sap.ui.getCore().byId("ta_com_newCom").getBindingContext();e.getModel().getData().results.splice(e.getPath().substr(9),1)}})}.bind(e),error:function(t){e.createError(t)}.bind(e)})},handleLiveChange:function(e){var t=e.getSource(),a=t.getValue().length>t.getMaxLength()?"Warning":"None";t.setValueState(a)},getTimeTransfer:function(){var e=this.getView().getModel(),t=sap.ui.getCore().byId("ld_tbl_timetransferoverview"),a=sap.ui.getCore().byId("ld_dp_date").getDateValue();null!==a&&a.setHours(12);var i=sap.ui.core.format.DateFormat.getDateInstance({pattern:"yyyyMMdd"}).format(a),s=new sap.ui.model.Filter("Begda",sap.ui.model.FilterOperator.EQ,i),o=sap.ui.getCore().byId("ld_select_emp").getSelectedItem(),n=o.getKey(),l=new sap.ui.model.Filter("EmpId",sap.ui.model.FilterOperator.EQ,n),d=o.getCustomData(),u=r.getCustomDataValue(d,"UnitKey"),g=new sap.ui.model.Filter("UnitKey",sap.ui.model.FilterOperator.EQ,u),p=new Date,c=sap.ui.getCore().byId("ld_dp_begda_timetransfer"),m=sap.ui.getCore().byId("ld_dp_endda_timetransfer");c.setDateValue(p),m.setDateValue(p),t.setModel(e),t.setBusyIndicatorDelay(0),t.setBusy(!0),t.bindRows({path:"/timeTransferSet",filters:[l,s,g],events:{dataReceived:function(){t.setBusy(!1)}.bind(this)}});var h=sap.ui.getCore().byId("ld_select_subty_timetransfer"),y=new sap.ui.core.Item({text:"{Subty} - {Text}",key:"{Subty}"});h.setModel(e),h.bindAggregation("items",{path:"/timeTransferSubtySet",template:y,filters:[l,g]})},onTimeTransferInputChange:function(e){this.TimeDirty=!0},onCreateTimeTransfer:function(e){var t=sap.ui.getCore().byId("ld_select_subty_timetransfer"),a=sap.ui.getCore().byId("ld_dp_begda_timetransfer"),i=sap.ui.getCore().byId("ld_dp_endda_timetransfer"),o=sap.ui.getCore().byId("ld_select_emp"),n=sap.ui.getCore().byId("ld_dp_date"),r=this.getView().getModel(),l=this.getView().getModel("i18n").getResourceBundle(),d=sap.ui.getCore().byId("ld_inp_amount_timetransfer"),u={},g=d.getValue(),p=t.getSelectedItem().getKey(),c=o.getSelectedItem().getKey(),m=n.getDateValue(),h=a.getDateValue(),y=i.getDateValue();m=this.getFormattedDate(m),h?y?g?(h=this.getFormattedDate(h),y=this.getFormattedDate(y),d.setValueState(sap.ui.core.ValueState.None),a.setValueState(sap.ui.core.ValueState.None),i.setValueState(sap.ui.core.ValueState.None),u.EmpId=c,u.Begda=h,u.Endda=y,u.Subty=p,u.Amount=parseFloat(g).toFixed(2),u.Seqnr="0",r.create("/timeTransferSet",u,{success:function(e){var t=l.getText("timetransfercreated");s.show(t),this.getTimeTransfer()}.bind(this),error:this.createError.bind(this)}),this.toggleTimeTransferButtons("create"),this.TimeDirty=!1):d.setValueState(sap.ui.core.ValueState.Error):i.setValueState(sap.ui.core.ValueState.Error):a.setValueState(sap.ui.core.ValueState.Error)},onTimeTransferEntrySelect:function(e){if(-1!=e.getSource().getSelectedIndex()){var t=sap.ui.getCore().byId("ld_select_subty_timetransfer"),a=sap.ui.getCore().byId("ld_inp_amount_timetransfer"),i=sap.ui.getCore().byId("ld_dp_begda_timetransfer"),s=sap.ui.getCore().byId("ld_dp_endda_timetransfer"),o=e.getSource().getContextByIndex(e.getSource().getSelectedIndex());t.setSelectedKey(e.getSource().getModel().getProperty("Subty",o)),a.setValue(e.getSource().getModel().getProperty("Amount",o));var n=e.getSource().getModel().getProperty("Begda",o),r=e.getSource().getModel().getProperty("Endda",o);i.setDateValue(new Date(n.substr(6,4),n.substr(3,2)-1,n.substr(0,2))),s.setDateValue(new Date(r.substr(6,4),r.substr(3,2)-1,r.substr(0,2))),this.TimeDirty=!0,this.toggleTimeTransferButtons("edit")}},onUpdateTimeTransfer:function(e){var t=sap.ui.getCore().byId("ld_select_subty_timetransfer"),a=sap.ui.getCore().byId("ld_inp_amount_timetransfer"),i=sap.ui.getCore().byId("ld_select_emp"),o=sap.ui.getCore().byId("ld_dp_begda_timetransfer"),n=sap.ui.getCore().byId("ld_dp_endda_timetransfer"),r=sap.ui.getCore().byId("ld_dp_date"),l=sap.ui.getCore().byId("ld_tbl_timetransferoverview"),d=this.getView().getModel(),u=this.getView().getModel("i18n").getResourceBundle(),g={},p=a.getValue(),c=o.getDateValue(),m=n.getDateValue(),h=t.getSelectedItem().getKey(),y=i.getSelectedItem().getKey(),b=r.getDateValue(),_=l.getContextByIndex(l.getSelectedIndex());b=this.getFormattedDate(b),c?m?p?(c=this.getFormattedDate(c),m=this.getFormattedDate(m),a.setValueState(sap.ui.core.ValueState.None),o.setValueState(sap.ui.core.ValueState.None),n.setValueState(sap.ui.core.ValueState.None),g.EmpId=y,g.Begda=c,g.Endda=m,g.Subty=h,g.Amount=parseFloat(p).toFixed(2),g.Seqnr=_.getObject().Seqnr,d.update(_.sPath,g,{success:function(e){var t=u.getText("timetransfermodified");s.show(t),this.getTimeTransfer()}.bind(this),error:this.createError.bind(this)}),this.toggleTimeTransferButtons("create"),this.TimeDirty=!1):a.setValueState(sap.ui.core.ValueState.Error):n.setValueState(sap.ui.core.ValueState.Error):o.setValueState(sap.ui.core.ValueState.Error)},onDeleteTimeTransfer:function(e){sap.ui.getCore().byId("ld_select_emp"),sap.ui.getCore().byId("ld_select_subty_timetransfer"),sap.ui.getCore().byId("ld_dp_date");var t=sap.ui.getCore().byId("ld_tbl_timetransferoverview"),a=this.getView().getModel(),i=this.getView().getModel("i18n").getResourceBundle(),o=t.getContextByIndex(t.getSelectedIndex());a.remove(o.sPath,{success:function(e){var t=i.getText("timetransferdeleted");s.show(t),this.getTimeTransfer()}.bind(this),error:this.createError.bind(this)}),this.toggleTimeTransferButtons("create"),this.TimeDirty=!1},onCancelTimeTransfer:function(e){this.toggleTimeTransferButtons("create")},prepareSHAREPOINT:function(e,t){var a=this.getView().getModel(),i=this.getSelectedBegda(),o=this.getSelectedEndda();i.setHours(12),o.setHours(12),1==t?(s.show(this.getResourceBundleText("mailwait")),a.callFunction("/SendToSharepoint",{method:"POST",urlParameters:{UnitKey:e,Begda:i,Endda:o},success:function(){s.show(this.getResourceBundleText("sharepointsuccess"))}.bind(this),error:function(e){this.createError(e)}.bind(this)})):this.checkOpenMsgBeforeExport(i,o,"prepareSHAREPOINT",e)},createNewQualification:function(e){var t=this.getView().getModel(),a=this._oMaintQualDialog,i=sap.ui.getCore().byId("ld_select_cd_rating"),o=this.getView().getModel("i18n").getResourceBundle(),n={};if(i.setValueState(sap.ui.core.ValueState.None),a.setBusy(!0),n.UnitKey=r.getCustomDataValue(this._oMaintQualDialog.getAggregation("customData"),"UnitKey"),n.Begda=sap.ui.getCore().byId("ld_dp_cd_begda").getDateValue(),n.Begda.setHours(12),n.Endda=sap.ui.getCore().byId("ld_dp_cd_endda").getDateValue(),n.Endda.setHours(12),n.QualId=sap.ui.getCore().byId("ld_select_cd_qualification").getSelectedKey(),this.isFeatureEnabled("QUALSCALE"))n.Rating=sap.ui.getCore().byId("ld_select_cd_rating").getSelectedKey();else if("PEP"!=this.getCustValue("QUAL_TYPE")){var l=i.getItems();try{n.Rating=l[l.length-1].getKey()}catch(e){return i.setValueState(sap.ui.core.ValueState.Error),void a.setBusy(!1)}}n.EmpId=sap.ui.getCore().byId("ld_select_cq_employee").getSelectedKey(),t.create("/qualForEmpSet",n,{refreshAfterChange:!0,success:function(e,t){var i=o.getText("qualsaved");this.bindQualificationTable(sap.ui.getCore().byId("ld_select_cq_employee").getSelectedKey()),a.setBusy(!1),s.show(i)}.bind(this),error:function(){this.createError.bind(this),a.setBusy(!1)}.bind(this)})},deleteNewQualification:function(){var e=this.getView().getModel(),t=this._oMaintQualDialog,a=this.getView().getModel("i18n").getResourceBundle(),i=sap.ui.getCore().byId("ld_tbl_cd_overview"),o=i.getContextByIndex(i.getSelectedIndex());o?(t.setBusy(!0),e.remove(o.sPath,{success:function(e,i){var o=a.getText("qualdeleted");this.bindQualificationTable(sap.ui.getCore().byId("ld_select_cq_employee").getSelectedKey()),t.setBusy(!1),s.show(o)}.bind(this),error:function(){this.createError.bind(this),t.setBusy(!1)}.bind(this)})):s.show(this.getResourceBundleText("choosequalification"))},closeMaintQualDialog:function(){this._oMaintQualDialog.close()},prepareMAINTQUAL:function(e){if(!this._oMaintQualDialog&&(this._oMaintQualDialog=sap.ui.xmlfragment("MIND2PEP_PLANNER.fragments.ChangeQualification",this,{}),this._oMaintQualDialog.attachAfterClose(this.destroyMaintQualPopup.bind(this)),this.getView().addDependent(this._oMaintQualDialog),this._oMaintQualDialog.setBusyIndicatorDelay(0),this._oMaintQualDialog.setBusy(!0),!this.isFeatureEnabled("QUALSCALE"))){sap.ui.getCore().byId("ld_select_cd_rating").setVisible(!1);for(var t=sap.ui.getCore().byId("ld_tbl_cd_overview").getColumns(),a=0;a<t.length;a++)"c_cd_rating"===t[a].getId()&&t[a].setVisible(!1)}this._oMaintQualDialog.addCustomData(new sap.ui.core.CustomData({key:"UnitKey",value:e}));var i=this.getSelectedBegda(),s=new Date("9999-12-31"),o=sap.ui.getCore().byId("ld_dp_cd_begda"),n=sap.ui.getCore().byId("ld_dp_cd_endda");o.setDateValue(i),n.setDateValue(s);var r=sap.ui.getCore().byId("ld_select_cq_employee");this.bindEmployeesToPicker(e,r),this._oMaintQualDialog.open()},reloadNewQualification:function(e){e.getParameter("selectedItem").getKey()&&e.getSource().setSelectedItem(e.getParameter("selectedItem")),this.bindQualsToPicker(),this.bindQualificationTable(sap.ui.getCore().byId("ld_select_cq_employee").getSelectedKey())},bindEmployeesToPicker:function(e,t){var a=new sap.ui.model.odata.v2.ODataModel("/sap/opu/odata/MIND2/PEP_YEAR_SRV",{refreshAfterChange:!0}),i=new sap.ui.core.Item({text:"{Name}",key:"{EmpId}"}),s=new sap.ui.model.Filter("UnitKey",sap.ui.model.FilterOperator.EQ,e),o=this.getSelectedBegda(),n=this.getSelectedEndda();o.setUTCDate(o.getDate()),n.setUTCDate(n.getDate());var r=this.getFormattedDate(o),l=this.getFormattedDate(n),d=new sap.ui.model.Filter("Begda",sap.ui.model.FilterOperator.EQ,r),u=new sap.ui.model.Filter("Endda",sap.ui.model.FilterOperator.EQ,l);t.setModel(a),t.bindItems({path:"/EmployeeSet",template:i,filters:[s,d,u],events:{dataReceived:function(){t.getSelectableItems().length>0&&(t.setSelectedItem(t.getItems()[0]),this.bindQualsToPicker(),this.bindQualificationTable(t.getSelectedKey()),this._oMaintQualDialog.setBusy(!1))}.bind(this)}})},bindQualsToPicker:function(){var e=r.getCustomDataValue(this._oMaintQualDialog.getAggregation("customData"),"UnitKey"),t=(sap.ui.getCore().byId("ld_select_cq_employee").getSelectedKey(),sap.ui.getCore().byId("ld_select_cd_qualification")),a=this.getView().getModel();if(this.oCustomizing.PlanHideQKey)var i=new sap.ui.core.Item({text:"{QualText}",key:"{QualId}"});else i=new sap.ui.core.Item({text:"{QualId} - {QualText}",key:"{QualId}"});var s=this.getSelectedBegda();s.setUTCDate(s.getDate());var o=new sap.ui.model.Filter("PlanDate",sap.ui.model.FilterOperator.EQ,s),n=new sap.ui.model.Filter("UnitKey",sap.ui.model.FilterOperator.EQ,e);t.setModel(a);var l=t.getSelectedItem();t.bindItems({path:"/qualificationSet",template:i,filters:[n,o],events:{dataReceived:function(){t.getItems().length>0&&t.setSelectedItem(l)}.bind(this)}})},bindRatingToPicker:function(){var e=sap.ui.getCore().byId("ld_select_cd_rating"),t=this.getView().getModel(),a=sap.ui.getCore().byId("ld_select_cd_qualification").getSelectedKey(),i=new sap.ui.model.Filter("QualId",sap.ui.model.FilterOperator.EQ,a),s=new sap.ui.core.Item({text:"{RatingText}",key:"{Rating}"});e.setModel(t),e.bindItems({path:"/ratingForQualSet",template:s,filters:[i],events:{dataReceived:function(){}}})},bindQualificationTable:function(e){var t=this.getView().getModel();e||(e=sap.ui.getCore().byId("ld_select_cq_employee").getSelectedKey());var a=sap.ui.getCore().byId("ld_tbl_cd_overview"),i=r.getCustomDataValue(this._oMaintQualDialog.getAggregation("customData"),"UnitKey"),s=sap.ui.getCore().byId("ld_dp_cd_begda"),o=sap.ui.getCore().byId("ld_dp_cd_endda"),n=new sap.ui.model.Filter("UnitKey",sap.ui.model.FilterOperator.EQ,i),l=new sap.ui.model.Filter("EmpId",sap.ui.model.FilterOperator.EQ,e),d=s.getDateValue();d.setHours(12);var u=new sap.ui.model.Filter("Begda",sap.ui.model.FilterOperator.EQ,d),g=o.getDateValue();g.setHours(12);var p=new sap.ui.model.Filter("Endda",sap.ui.model.FilterOperator.EQ,g);a.setModel(t),a.setBusyIndicatorDelay(0),a.setBusy(!0),a.bindAggregation("rows",{refreshAfterChange:!0,path:"/qualForEmpSet",filters:[l,n,u,p],events:{dataReceived:function(){a.setBusy(!1)}.bind(this)}})},bindNewQualificationTable:function(){var e=sap.ui.getCore().byId("ld_dp_cd_begda"),t=sap.ui.getCore().byId("ld_dp_cd_endda");e&&t&&this.bindQualificationTable()},destroyMaintQualPopup:function(){this._oMaintQualDialog.destroy(),this._oMaintQualDialog=null},downloadExcel:function(e,t){if(1==t){var a=sap.ui.getCore().byId("dp_excel_begda").getDateValue(),i=sap.ui.getCore().byId("dp_excel_endda").getDateValue();Date.prototype.toJSONLocal=function(){function e(e){return(e<10?0:"")+e}return this.getFullYear()+"-"+e(this.getMonth()+1)+"-"+e(this.getDate())+"T12:00:00"};var s="/excelShiftPlanSet(UnitKey=\'"+e+"\',Begda=datetime\'"+a.toJSONLocal()+"\',Endda=datetime\'"+i.toJSONLocal()+"\')/$value";s="/sap/opu/odata/MIND2/PEP_PLANNER_SRV"+s,window.open(s,"_blank")}else this.checkOpenMsgBeforeExport(sap.ui.getCore().byId("dp_excel_begda").getDateValue(),sap.ui.getCore().byId("dp_excel_endda").getDateValue(),"downloadExcel",e)},downloadEmpExcel:function(e,t){var a=sap.ui.getCore().byId("dp_emp_excel_date").getDateValue(),i=a;if(null!==a){Date.prototype.toJSONLocal=function(){function e(e){return(e<10?0:"")+e}return this.getFullYear()+"-"+e(this.getMonth()+1)+"-"+e(this.getDate())+"T12:00:00"};var s="/empExcelShiftPlanSet(UnitKey=\'"+e+"\',Begda=datetime\'"+a.toJSONLocal()+"\',Endda=datetime\'"+i.toJSONLocal()+"\')/$value";s="/sap/opu/odata/MIND2/PEP_PLANNER_SRV"+s,window.open(s,"_blank")}},checkOpenMsgBeforeExport:function(e,t,i,s){var o=this.getView().getModel(),r=[],l=this.getCustValue("F_CHECKMSG"),d=new sap.ui.model.Filter("Begda",sap.ui.model.FilterOperator.EQ,e),u=new sap.ui.model.Filter("Endda",sap.ui.model.FilterOperator.EQ,t),g=new sap.ui.model.Filter("UnitKey",sap.ui.model.FilterOperator.EQ,s),p=new sap.ui.model.Filter("SumKey",sap.ui.model.FilterOperator.EQ,l);o.read("/sumMessageSet",{filters:[g,p,d,u],success:function(e){if((r=e.results).length>0){var t=new sap.ui.model.json.JSONModel;t.setProperty("/messages",r);var o=new sap.m.StandardListItem({title:{parts:["PlanDate","MessageText"],formatter:function(e,t){return n.formatDate(e)+" - "+t}.bind(this)}}),l=new a({title:"{i18n>openmsg}",content:new sap.m.List({items:{path:"/messages",template:o}}),beginButton:new sap.m.Button({type:sap.m.ButtonType.Accept,text:"{i18n>continue}",press:function(){this[i](s,!0),l.close()}.bind(this)}),endButton:new sap.m.Button({type:sap.m.ButtonType.Reject,text:"{i18n>ttcancel}",press:function(){l.close()}}),afterClose:function(){l.destroy()}});l.setModel(t),this.getView().addDependent(l),l.open()}else this[i](s,!0)}.bind(this),error:function(e){}})},prepareROLLINGPLN:function(e){this._oRollingPlan||(this._oRollingPlan=sap.ui.xmlfragment("MIND2PEP_PLANNER.fragments.RollingPlan",this,{}),this.getView().addDependent(this._oRollingPlan),this._oRollingPlan.setBusyIndicatorDelay(0));var t=new sap.ui.model.json.JSONModel;t.setProperty("/PlanId",""),t.setProperty("/New",!1),t.setProperty("/UnitKey",e),this._oRollingPlan.setModel(t,"RollingPlanModel"),this.loadRollingPlans(),this._oRollingPlan.open()},loadRollingPlans:function(){var e=sap.ui.getCore().byId("idRollingPlanSelect"),t=this._oRollingPlan.getModel("RollingPlanModel"),a=this.getView().getModel(),i=[];if(e.clearSelection(),e.setValue(),t.setProperty("/PlanId",""),i.push(new sap.ui.model.Filter("Begda","EQ",t.getProperty("/Begda"))),i.push(new sap.ui.model.Filter("Endda","EQ",t.getProperty("/Endda"))),i.push(new sap.ui.model.Filter("UnitKey","EQ",t.getProperty("/UnitKey"))),t.getProperty("/New")){if(t.getProperty("/Copy"))return;a.read("/employeeSet",{filters:i,success:function(e){t.setProperty("/NewSet",e.results)}})}else e.getBinding("items").filter(i),e.getBinding("items").isSuspended()&&e.getBinding("items").resume()},onRPCreateChange:function(){var e=this._oRollingPlan.getModel("RollingPlanModel");e.getProperty("/New")&&(e.setProperty("/Copy",!1),e.setProperty("/NewSet",[]))},onDateRangeUpdateChange:function(e){e.getParameter("from");var t=e.getParameter("to"),a=new Date,i=this._oRollingPlan.getModel("RollingPlanModel"),s=this.getView().getModel("i18n").getResourceBundle(),o=sap.ui.getCore().byId("idRollingPlanSelect"),n=o.getSelectedItem().getBindingContext().getProperty("Begda"),r=o.getSelectedItem().getBindingContext().getProperty("Endda");i.setProperty("/bDateRangeErrorState","None"),i.setProperty("/bDateRangeErrorText",""),n<a&&r<a&&(i.setProperty("/bDateRangeErrorState","Error"),i.setProperty("/bDateRangeErrorText",s.getText("no-changes-allowed"))),n<a&&r>a&&(i.setProperty("/BegdaUpd",n),t<a&&(i.setProperty("/bDateRangeErrorState","Error"),i.setProperty("/bDateRangeErrorText",s.getText("rolling-plan-dateto-less-than-today"))))},loadRollingPlan:function(e){var t=e.getParameter("selectedItem").getBindingContext(),a=this._oRollingPlan.getModel("RollingPlanModel"),i=sap.ui.getCore().byId("idRollPlanEmployees"),s=[];a.setProperty("/BegdaUpd",t.getProperty("Begda")),a.setProperty("/EnddaUpd",t.getProperty("Endda")),a.setProperty("/bDateRangeErrorState","None"),a.setProperty("/bDateRangeErrorText",""),s.push(new sap.ui.model.Filter("Begda","EQ",t.getProperty("Begda"))),s.push(new sap.ui.model.Filter("Endda","EQ",t.getProperty("Endda"))),s.push(new sap.ui.model.Filter("UnitKey","EQ",a.getProperty("/UnitKey"))),s.push(new sap.ui.model.Filter("PlanId","EQ",t.getProperty("PlanId"))),i.getBinding("items").filter(s),i.getBinding("items").isSuspended()&&i.getBinding("items").resume()},onRollingPlanVariantDelete:function(){var e=sap.ui.getCore().byId("idRollingPlanSelect"),a=this.getView().getModel(),i=this,o=sap.ui.getCore().byId("idRollingPlanSelect"),n=o.getSelectedItem().getBindingContext().getProperty("Begda"),l=o.getSelectedItem().getBindingContext().getProperty("Endda"),d=new Date;if(n<d)return l<d?void s.show(i.getView().getModel("i18n").getResourceBundle().getText("no-deletion-past")):void s.show(i.getView().getModel("i18n").getResourceBundle().getText("no-deletion-ongoing"));r.openConfirmDialog("{i18n>areyousure}","","{i18n>yes}",function(){a.remove(e.getSelectedItem().getBindingContext().getPath(),{success:function(){i.resetRollingPlan(),i.loadRollingPlans()},error:function(e){var a=JSON.parse(e.responseText).error.innererror.errordetails;t.error(a[0].message)}})},null,this)},copyRollingPlan:function(){var e=this._oRollingPlan.getModel("RollingPlanModel"),t=[];sap.ui.getCore().byId("idRollPlanEmployees").getBinding("items").getContexts().forEach(function(e){t.push(e.getObject())}),e.setProperty("/NewSet",t),e.setProperty("/New",!0),e.setProperty("/Copy",!0)},saveRollingPlan:function(){var e=this.getView().getModel(),a=sap.ui.getCore().byId("idRollPlanEmployees"),i=sap.ui.getCore().byId("idRollingPlanSelect"),o=this._oRollingPlan.getModel("RollingPlanModel"),n=o.getProperty("/Begda"),r=o.getProperty("/Endda"),l=this;if(o.getProperty("/New")){var d=o.getProperty("/NewSet");n.setHours(12),r.setHours(12),e.create("/rollingPlanVariantSet",{UnitKey:o.getProperty("/UnitKey"),Begda:n,Endda:r},{success:function(t){d.forEach(function(a){var i={PlanId:t.PlanId,Name:a.Name,UnitKey:a.UnitKey,EmpId:a.EmpId,QualId:a.QualId,Begda:n,Endda:r};e.create("/rollingPlanSet",i)}),l.resetRollingPlan(),l.loadRollingPlans(),s.show(l.getView().getModel("i18n").getResourceBundle().getText("rolling-plan-save-success"))},error:function(e){var a=JSON.parse(e.responseText).error.innererror.errordetails;t.error(a[0].message)}})}else{if("None"!==o.getProperty("/bDateRangeErrorState"))return void s.show(this.getView().getModel("i18n").getResourceBundle().getText("incorrect-date-rollingplan"));var u=o.getProperty("/BegdaUpd"),g=o.getProperty("/EnddaUpd"),p=i.getSelectedItem();if(sap.ui.getCore().byId("idRollingPlanSelect").getSelectedItem().getBindingContext().getProperty("Begda")<new Date)return s.show(l.getView().getModel("i18n").getResourceBundle().getText("no-changes-allowed")),void e.resetChanges();u.setHours(12),g.setHours(12),e.setProperty(p.getBindingContext().getPath()+"/Begda",u),e.setProperty(p.getBindingContext().getPath()+"/Endda",g),a.getItems().forEach(function(t){e.setProperty(t.getBindingContextPath()+"/Begda",u),e.setProperty(t.getBindingContextPath()+"/Endda",g)}),e.submitChanges({success:function(e){if(void 0===e.__batchResponses[0].response)s.show(l.getView().getModel("i18n").getResourceBundle().getText("saved"));else{var a=JSON.parse(e.__batchResponses[0].response.body).error.innererror.errordetails;t.error(a[0].message)}},error:function(e){var a=JSON.parse(e.responseText).error.innererror.errordetails;t.error(a[0].message)}})}},resetRollingPlan:function(){var e=this._oRollingPlan.getModel("RollingPlanModel"),t=sap.ui.getCore().byId("idRollingPlanSelect");e.setProperty("/New",!1),e.setProperty("/NewSet",[]),e.setProperty("/Copy",!1),t.clearSelection(),t.setValue()},closeRollingPlan:function(){this._oRollingPlan.close()},afterCloseRollingPlan:function(){this._oRollingPlan.destroy()},setupTabHandling:function(e){e.addEventDelegate({onAfterRendering:function(){var t,a=e.getId(),i=e.getRows();$("#"+a).focusin(function(){jQuery.sap.delayedCall(100,null,function(){var e=$("#"+a).find("tbody").find(".sapMFocus")[0];e&&(this._FieldID=e.id)}.bind(this))}.bind(this)),$("#"+a).on("keyup",function(a){var s,o,n,r,l=sap.ui.getCore().byId(this._FieldID).getParent(),d=l.getCells(),u=[],g=0,p=0;for(t=0;t<d.length;t++)d[t]._$input&&(u.push(t),g||(g=t),p=t);if(9==a.which&&!a.shiftKey)if((o=d.indexOf(d.filter(function(e){return e.getId()===this._FieldID}.bind(this))[0]))===p)(n=i.indexOf(i.filter(function(e){return e.getId()===l.getId()})[0]))===e.getRows().length-1?(e._scrollNext(),jQuery.sap.delayedCall(100,null,function(){i[n].getCells()[g].focus()})):(s=i[n+1].getCells()[g]).focus();else{for(r=0,t=0;t<u.length;t++)u[t]===o&&(r=u[t+1]);(s=l.getCells()[r]).focus()}if(9==a.which&&a.shiftKey)if((o=d.indexOf(d.filter(function(e){return e.getId()===this._FieldID}.bind(this))[0]))===g)0===(n=i.indexOf(i.filter(function(e){return e.getId()===l.getId()})[0]))?(e._scrollPrevious(),jQuery.sap.delayedCall(100,null,function(){i[n].getCells()[p].focus()})):(s=i[n-1].getCells()[p]).focus();else{for(r=0,t=0;t<u.length;t++)u[t]===o&&(r=u[t-1]);(s=l.getCells()[r]).focus()}s&&s.selectText(0,s.getValue().length)}.bind(this))}.bind(this)},e)},onColumnFilter:function(e){var t=e.getSource()._column,a=e.getSource()._table,i=e.getSource().getValue(),s=t.getTemplate(),o=this,n="",r=[];if(n=s instanceof sap.m.ComboBox?s.getBindingPath("value"):s instanceof sap.m.Text||s instanceof sap.m.Button?s.getBindingPath("text"):s.getBindingPath("value")){var l=function(e,t){for(var a=0;a<e.length;a++)e[a].sPath===t&&(e.splice(a,a+1),a--);return e},d=function(){o.setRowCount(a,a.getBinding("rows").aIndices),a.setCustomerRowCount(a.getVisibleRowCount()),a.setVisibleRowCount(a.getBinding("rows").aIndices.length),a.getBinding("rows").detachChange(d)};a.getBinding("rows").attachChange(d),i?((r=a.getBinding("rows").aFilters).length||(r=[]),(r=l(r,n)).push(new sap.ui.model.Filter(n,"Contains",i)),a.getBinding("rows").filter(r),t.setFiltered(!0)):((r=a.getBinding("rows").aFilters).length||(r=[]),r=l(r,n),a.getBinding("rows").filter(r),t.setFiltered(!1))}},onColumnMenu:function(e){var t=e.getParameter("column"),a=e.getSource(),i=-1!=e.getParameter("column").getId().indexOf("DUMMY"),s=-1!=e.getParameter("column").getId().indexOf("Dcol_"),o=new sap.ui.unified.Menu;if(s||!i){if(s&&this.isFeatureEnabled("COMMENT")){var n=new sap.ui.unified.MenuItem({text:"{i18n>comments}",icon:"sap-icon://comment",select:this.onColumnSelect.bind(this)});o.addItem(n),n._column=t}if(!i){var r=new sap.ui.unified.MenuTextFieldItem({label:"Filter",icon:"sap-icon://filter",select:this.onColumnFilter.bind(this)});o.addItem(r),r._column=t,r._table=a}this.getView().addDependent(o);var l=function(){o.bOpen&&o.close(),t.detachColumnMenuOpen(l)};t.attachColumnMenuOpen(l);var d=$("[data-sap-ui-colid=\'"+t.getId()+"\'][role=\'columnheader\']"),u=$(d[d.length-1]),g=$(u).offset();o.openAsContextMenu({pageX:g.left,pageY:g.top+(i?0:u.innerHeight())},t)}},onColumnSelect:function(e){if(this.isFeatureEnabled("COMMENT")){var t=e.getSource()._column;this.openCommentPopupWrapper(t)}},getFormattedDate:function(e){return sap.ui.core.format.DateFormat.getDateInstance({pattern:"dd.MM.yyyy"}).format(e)},onCloseDialogByButton:function(e){e.getSource().getParent().close()},onChangeNoOfLines:function(e){this.oUserCust.Nooflines=e.getSource().getValue(),this.updateUserCustomizing()},onPressShowPlanOnly:function(){var e,t,a,i,s,o,n;this.bPlanExpand=!0,this.bSumExpand=!1;for(var r=0;r<this.aUnits.length;r++)if(n=r,e="pnl",e+=this.aUnits[r].UnitKey,t=sap.ui.getCore().byId(e)){s=t.getHeaderToolbar().getContent();for(var l=0;l<s.length;l++)(i=s[l]).getId().match("^btn_hideB")||i.getId().match("^btn_hideSB")||i.getId().match("^btn_hideEmp_")?i.setPressed(!1):i.getId().match("^btn_hidePB")&&i.setPressed(!0);t.getExpanded()||t.setExpanded(!0),a=t.getContent()[0].getContent();for(var d=0;d<a.length;d++)(o=a[d]).getId().match("^tbl_plan")?0===o.getColumns().length?(this.fillUnitTable(o,this.aUnits[n].UnitKey),o.setVisible(!0)):(o.setVisible(!0),this.unitTableFinalService(o)):o.setVisible(!1)}},onSearchEmployeePress:function(){this._oSearchEmployeeDialog||(this._oSearchEmployeeDialog=sap.ui.xmlfragment("MIND2PEP_PLANNER.fragments.SearchEmployee",this,{refreshAfterChange:!0}),this.getView().addDependent(this._oSearchEmployeeDialog),this._oSearchEmployeeDialog.open(),this._oSearchEmployeeDialog.attachAfterClose(this.destroySearchEmployeeDialog.bind(this)))},onJumpToEmployee:function(e){var t,a=sap.ui.getCore().byId("employeeSearchhelpId").getSelectedItem().getBindingContext().getProperty("Pernr"),i=this.getView().byId("page"),s=e.getSource().getParent();s.setBusy(!0),this.getView().getModel().callFunction("/CheckAddUnit",{method:"GET",urlParameters:{empId:a,planBegda:this.getSelectedBegda(),planEndda:this.getSelectedEndda()},success:function(e){s.setBusy(!1),$.when(this.addNewUnit(e)).then(function(){$.when(this.createUnitTables()).then(function(){t=sap.ui.getCore().byId("pnl"+e.UnitKey),this._oSearchEmployeeDialog.close(),$.when(this.expandPanel(t)).then(function(){setTimeout(function(){i.scrollToElement(t)},500)}.bind(this))}.bind(this),1e3)}.bind(this),function(){t=sap.ui.getCore().byId("pnl"+e.UnitKey),this._oSearchEmployeeDialog.close(),$.when(this.expandPanel(t)).then(function(){setTimeout(function(){i.scrollToElement(t)},500)}.bind(this))}.bind(this))}.bind(this),error:function(e){s.setBusy(!1),this.createError(e)}.bind(this)})},onJumpToTO:function(e){var t=sap.ui.getCore().byId("employeeSearchhelpId").getSelectedItem(),a=t.getBindingContext().getProperty("Pernr");a=a.padStart(10,"0");var i=e.getSource().getParent();i.setBusy(!0),this.getView().getModel().callFunction("/CheckAddUnit",{method:"GET",urlParameters:{empId:a,planBegda:this.getSelectedBegda(),planEndda:this.getSelectedEndda()},success:function(e){i.setBusy(!1);var s=this.getSelectedBegda(),o=e.UnitKey;t=sap.ui.getCore().byId("employeeSearchhelpId").getSelectedItem(),(a=(a=t.getBindingContext().getProperty("Pernr")).padStart(10,"0"))?this.getView().getModel().callFunction("/CheckEmployeeLocked",{method:"GET",urlParameters:{empId:a,planBegda:this.getSelectedBegda(),planEndda:this.getSelectedEndda()},success:function(){this.openTimeOverviewPopup(s,o,a)}.bind(this),error:function(e){var t=JSON.parse(e.responseText).error.innererror.errordetails;r.openConfirmDialog("{i18n>warning}",t[0].message,"{i18n>openanyway}",function(){this.openTimeOverviewPopup(s,o,a)}.bind(this),null,this)}.bind(this)}):this.openTimeOverviewPopup(s,o,a)}.bind(this),error:function(e){i.setBusy(!1),this.createError(e)}.bind(this)})},addNewUnit:function(e){for(var t=$.Deferred(),a={UnitKey:e.UnitKey,UnitText:e.UnitText},i=!1,s=0;s<this.aUnits.length;s++)if(this.aUnits[s].UnitKey==a.UnitKey){i=!0;break}return i?t.reject():(this.aUnits.push(a),t.resolve()),t},expandPanel:function(e){var t=$.Deferred();return e.setExpanded(!0),e.fireExpand({expand:!0,triggeredByInteraction:!0}),t.resolve(),t},destroySearchEmployeeDialog:function(){this._oSearchEmployeeDialog.destroy(),this._oSearchEmployeeDialog=null},onSearchEmployee:function(){var e=this.getOwnerComponent().getModel("searchedEmployee"),t=e.getProperty("/lastnameSearch").toUpperCase(),a=e.getProperty("/firstnameSearch").toUpperCase(),i=e.getProperty("/pernrSearch").toUpperCase();if(""!==t||""!==a||""!==i){e.setProperty("/validate",!1);var s=sap.ui.getCore().byId("employeeSearchhelpId"),o=new b({text:"{Pernr}"}),n=new b({text:"{Nachn}"}),r=new b({text:"{Vorna}"}),l=new b({text:"{UnitKey} - {Unit}"}),d=new m({type:"Active"});d.addCell(o),d.addCell(n),d.addCell(r),d.addCell(l);var u=[],g=new sap.ui.model.Filter("Nachn",sap.ui.model.FilterOperator.Contains,t),p=new sap.ui.model.Filter("Vorna",sap.ui.model.FilterOperator.Contains,a);if(""!==i){var c=new sap.ui.model.Filter("Pernr",sap.ui.model.FilterOperator.Contains,i);u.push(c)}u.push(g),u.push(p),s.bindItems({path:"/searchedEmployeeSet",template:d,filters:u,parameters:{operationMode:"Server"},events:{dataReceived:function(e){}.bind(this)}})}else e.setProperty("/validate",!0)},closeSearchEmployeeDialog:function(){this._oSearchEmployeeDialog.close()},onPressShowSumsOnly:function(){var e,t,a,i,s,o,n;this.bSumExpand=!0,this.bPlanExpand=!1;for(var r=0;r<this.aUnits.length;r++)if(n=r,e="pnl",e+=this.aUnits[r].UnitKey,t=sap.ui.getCore().byId(e)){s=t.getHeaderToolbar().getContent();for(var l=0;l<s.length;l++)(i=s[l]).getId().match("^btn_hideB")||i.getId().match("^btn_hidePB")||i.getId().match("^btn_hideEmp_")?i.setPressed(!1):i.getId().match("^btn_hideSB")&&i.setPressed(!0);t.getExpanded()||t.setExpanded(!0),a=t.getContent()[0].getContent();for(var d=0;d<a.length;d++)(o=a[d]).getId().match("^tbl_sum")?(0===o.getRows().length&&this.fillSumTable(o,this.aUnits[n].UnitKey),o.setVisible(!0)):o.setVisible(!1)}},onPressCollapseAll:function(){var e,t;this.bSumExpand=!0,this.bPlanExpand=!0;for(var a=0;a<this.aUnits.length;a++)e="pnl",e+=this.aUnits[a].UnitKey,(t=sap.ui.getCore().byId(e))&&t.getExpanded()&&(t.getContent()[0].getContent(),t.setExpanded(!1))},rowHeightChange:function(e){this.oUserCust.Rowheight=e.getSource().getSelectedKey(),this.updateUserCustomizing();var t,a,i,s,o,n=e.getSource().getSelectedKey(),r=this.aUnits;if(r)if("CONDENSED"===n)for(o=0;o<r.length;o++)a="tbl_plan_"+r[o].UnitKey,(t=sap.ui.getCore().byId(a)).removeStyleClass("normalTable"),t.removeStyleClass("wideTable"),t.addStyleClass("narrowTable"),t.setRowHeight(35),s="tbl_sum_"+r[o].UnitKey,(i=sap.ui.getCore().byId(s)).removeStyleClass("normalTable"),i.removeStyleClass("wideTable"),i.addStyleClass("narrowTable"),i.setRowHeight(35);else if("COMPACT"===n)for(o=0;o<r.length;o++)a="tbl_plan_"+r[o].UnitKey,(t=sap.ui.getCore().byId(a)).removeStyleClass("narrowTable"),t.removeStyleClass("wideTable"),t.addStyleClass("normalTable"),t.setRowHeight(40),s="tbl_sum_"+r[o].UnitKey,(i=sap.ui.getCore().byId(s)).removeStyleClass("narrowTable"),i.removeStyleClass("wideTable"),i.addStyleClass("normalTable"),i.setRowHeight(40);else if("COZY"===n)for(o=0;o<r.length;o++)a="tbl_plan_"+r[o].UnitKey,(t=sap.ui.getCore().byId(a)).removeStyleClass("narrowTable"),t.removeStyleClass("normalTable"),t.addStyleClass("wideTable"),t.setRowHeight(45),s="tbl_sum_"+r[o].UnitKey,(i=sap.ui.getCore().byId(s)).removeStyleClass("narrowTable"),i.removeStyleClass("normalTable"),i.addStyleClass("wideTable"),i.setRowHeight(45)},getTableStyleClass:function(){switch(this.oUserCust.Rowheight){case"COMPACT":return"sapUiSizeCompact";case"CONDENSED":return"sapUiSizeCondensed";case"COZY":return"sapUiSizeCozy"}},panelExpandChange:function(e){e.getParameter("triggeredByInteraction")&&(this.oUserCust.CalDisabled=!e.getSource().getExpanded(),this.updateUserCustomizing())},updateUserCustomizing:function(){var e=this.getView().getModel(),t=this.oUserCust;e.update("/userCustomizingSet(\'sy-uname\')",t,{})},msToTime:function(e){parseInt(e%1e3/100);var t=Math.floor(e/1e3%60),a=Math.floor(e/6e4%60),i=Math.floor(e/36e5%24);return i=i<10?"0"+i:i,a=a<10?"0"+a:a,t=t<10?"0"+t:t,i+":"+a}})});',
	"MIND2PEP_PLANNER/controls/customTable.js": 'sap.ui.define(["sap/ui/table/Table"],function(e){"use strict";return e.extend("MIND2PEP_PLANNER.controls.customTable",{metadata:{properties:{customerRowCount:{type:"int",defaultValue:1}}},renderer:{renderTable:function(e,t){e.write("<div");var r=t.getCustomerRowCount()||5,i=(t.getRowHeight()+1)*r+1;e.writeAttribute("style","width: 100%; height: "+i+"px; overflow: auto;"),e.write(">"),this.renderTabElement(e,"sapUiTableCtrlBefore"),e.write("<div"),e.writeAttribute("id",t.getId()+"-tableCCnt"),e.addClass("sapUiTableCCnt"),e.writeClasses(),e.write(">"),this.renderTableCCnt(e,t),e.write("</div>"),e.write("</div>"),this.renderTabElement(e,"sapUiTableCtrlAfter"),this.renderVSb(e,t),this.renderHSb(e,t)}}})});',
	"MIND2PEP_PLANNER/model/models.js": 'sap.ui.define(["sap/ui/model/json/JSONModel","sap/ui/Device"],function(e,n){"use strict";return{createDeviceModel:function(){var i=new e(n);return i.setDefaultBindingMode("OneWay"),i}}});',
	"MIND2PEP_PLANNER/serviceBinding.js": 'function initModel(){var a=new sap.ui.model.odata.ODataModel("/sap/opu/odata/mind2/PEP_ROSTER_SRV/",!0);sap.ui.getCore().setModel(a)}',
	"MIND2PEP_PLANNER/utils/DataUtil.js": 'sap.ui.define(["sap/ui/base/Object"],function(e){"use strict";var t,s=e.extend("MIND2PEP_PLANNER.utils.DataUtil",{constructor:function(e){this._oModel=e,this._oPendingRequest=[],this.refresh()},refresh:function(){this._oBuffer={aItems:[]}},getData:function(e,t){for(var s,i=$.Deferred(),n=[],r=0;r<t.length;r++)s=new sap.ui.model.Filter("UnitKey","EQ",t[r].UnitKey),n.push(s);var o=e._oDataUtil;return this._oModel.read("/valueHelpSet",{filters:n,success:function(e){o.addItemsToBuffer(e.results),i.resolve()},error:function(){i.reject()}}),i},getItems:function(e,t,s){if(this._oPendingRequest[e+t])return this._oPendingRequest[e+t].then(function(){return this._oPendingRequest[e+t]=void 0,this.getItems(e,t,s)}.bind(this));this._oPendingRequest[e+t]=$.Deferred();var i=new sap.ui.model.Filter("FieldKey","EQ",e),n=new sap.ui.model.Filter("UnitKey","EQ",t);return this.getItemsFromBuffer(e,t).length>0?(this._oPendingRequest[e+t].resolve({aItems:this.getItemsFromBuffer(e,t),oTemplate:s}),this._oPendingRequest[e+t]):(this._oModel.read("/valueHelpSet",{filters:[i,n],success:function(i){this.addItemsToBuffer(i.results),this._oPendingRequest[e+t].resolve({aItems:this.getItemsFromBuffer(e,t),oTemplate:s})}.bind(this),error:function(){this._oPendingRequest[e+t].reject()}}),this._oPendingRequest[e+t])},addItemsToBuffer:function(e){for(var t=0;t<e.length;t++)this._oBuffer.aItems.push(e[t])},getItemsFromBuffer:function(e,t){for(var s=[],i=0;i<this._oBuffer.aItems.length;i++)this._oBuffer.aItems[i].FieldKey==e&&this._oBuffer.aItems[i].UnitKey==t&&s.push(this._oBuffer.aItems[i]);return s}});return s.getInstance=function(e,i){return t&&t._sEmployeeId===e&&t._oModel===i||(t=new s(e,i)),t},s});',
	"MIND2PEP_PLANNER/utils/Formatter.js": 'sap.ui.define([],function(){"use strict";return{tableEmptyTime:function(e){if("00:00"!==e)return e;e=""},tableBooleanText:function(e){var t=this.getView().getModel("i18n").getResourceBundle();switch(e){case!0:return t.getText("booltrue");case!1:return t.getText("boolfalse");default:return e}},tableCycLeaveTypeText:function(e){var t=this.getView().getModel("i18n").getResourceBundle();switch(e){case"1":return t.getText("daily");case"2":return t.getText("weekly");case"3":return t.getText("monthly");default:return e}},deleteLeadingZeros:function(e){return e=parseInt(e,10).toString()},getPanelVisibility:function(e,t){switch(e){case"pnl_absence":return!!t.isFeatureEnabled("TO_ABS");case"pnl_shift":return!!t.isFeatureEnabled("TO_SHIFT");case"pnl_cico":return!!t.isFeatureEnabled("TO_CICO");case"pnl_overtime":return!!t.isFeatureEnabled("TO_OVERT");case"pnl_allowance":return!!t.isFeatureEnabled("TO_ALLOW");case"pnl_timetransfer":return!!t.isFeatureEnabled("TO_TIMET");case"pnl_rptime":return!!t.isFeatureEnabled("TO_RPTIME");default:return!0}},getRptimeMessageText:function(e,t){var r=t.getView().getModel("i18n").getResourceBundle();return e?r.getText("rptimeerror"):r.getText("rptimegood")},formatDate:function(e){return sap.ui.core.format.DateFormat.getDateInstance({pattern:"dd.MM.yyyy"}).format(e)},checkCustomDataIsString:function(e){return e&&"string"==typeof e?e:"number"==typeof e?e.toString():""}}});',
	"MIND2PEP_PLANNER/utils/Helper.js": 'sap.ui.define(["sap/ui/base/Object"],function(e){"use strict";var t=e.extend("MIND2PEP_PLANNER.utils.Helper",{});return t.getCustomDataValue=function(e,t){for(var n=0;n<e.length;n++)if(e[n].getProperty("key")==t)return e[n].getProperty("value")},t.autoResize=function(e){var t=e.getColumns(),n=(e.getRows(),!0),a=sap.ui.table.Column.prototype.focus;sap.ui.table.Column.prototype.focus=function(){};var o={onAfterRendering:function(e){e.srcControl.setBusy(!1),e.srcControl.removeEventDelegate(o)}};e.addEventDelegate(o);for(var s=t.length-1;s>=0;s--)"auto"===t[s].getWidth()&&(e.autoResizeColumn(s),n=!1);sap.ui.table.Column.prototype.focus=a,e.getVisible()||e.setVisible(!0),n&&e.setBusy(!1)},t.openConfirmDialog=function(e,t,n,a,o,s){var i=new sap.m.VBox({alignItems:"Center",justifyContent:"Center",items:[new sap.m.Text({text:t})]}),u=new sap.m.Dialog({title:e,content:[i],beginButton:new sap.m.Button({text:n,type:sap.m.ButtonType.Emphasized,press:function(){a&&a(s),u.close(),u.destroy()}}),endButton:new sap.m.Button({text:"{i18n>cancelunsavedchanges}",press:function(){o&&o(s),u.close(),u.destroy()}})});s.getView().addDependent(u),u.open()},t.openNoSelectedEntryDialog=function(e,t,n,a){var o=new sap.m.VBox({alignItems:"Center",justifyContent:"Center",items:[new sap.m.Text({text:t})]}),s=new sap.m.Dialog({title:e,content:[o],beginButton:new sap.m.Button({text:"{i18n>ok}",icon:"sap-icon://accept",type:sap.m.ButtonType.Accept,press:function(){s.close(),s.destroy()}})});a.getView().addDependent(s),s.open()},t.attachCalendarWeekSelection=function(e,t){e&&(e.onclick=function(e){var n=e.target.attributes["data-sap-ui-week"].nodeValue,a=t._oFocusedDate._oUDate,o=new Date(a.getFullYear(),0,1+7*(n-1)),s=o;o.getDay()<=4?s.setDate(o.getDate()-o.getDay()+1):s.setDate(o.getDate()+8-o.getDay());var i=new Date(s.getFullYear(),s.getMonth(),s.getDate()+6);t.getSelectedDates()[0]&&(t.getSelectedDates()[0].setStartDate(s),t.getSelectedDates()[0].setEndDate(i)),setTimeout(function(){$("[data-sap-ui-week=\'"+n+"\']")[0].classList.add("selectedWeek")},50),t.fireSelect()})},t.addStyleClass=function(e){var t=$("head")[0].getElementsByTagName("style")[0];t||((t=document.createElement("style")).type="text/css",$("head")[0].appendChild(t)),t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))},t});',
	"MIND2PEP_PLANNER/utils/Rptime.js": 'sap.ui.define(["sap/ui/base/Object"],function(e){"use strict";var t,s=e.extend("MIND2PEP_PLANNER.utils.Rptime",{constructor:function(e){this._oModel=e,this._oPendingRequest=[],this.refresh()},refresh:function(){this._oBuffer={aItems:[]}},getData:function(e,t){var s=$.Deferred(),n=e._oRptime;return this._oModel.callFunction("/RptimeLogCount",{method:"GET",urlParameters:{UnitKey:t},success:function(e){e.results&&n.addItemsToBuffer(e.results),s.resolve(t)},error:function(){s.reject()}}),s},getItems:function(e,t){return this._oPendingRequest[e]?this._oPendingRequest[e].then(function(){return this._oPendingRequest[e]=void 0,this.getItems(e,t)}.bind(this)):(this._oPendingRequest[e]=$.Deferred(),this.getItemsFromBuffer(e).length>0?(this._oPendingRequest[e].resolve({aItems:this.getItemsFromBuffer(e),oTemplate:t}),this._oPendingRequest[e]):(this._oModel.callFunction("/RptimeLogCount",{method:"GET",urlParameters:{UnitKey:e},success:function(s){var n={};n.UnitKey=e,n.Amount=s.Amount,this.addItemsToBuffer(n),this._oPendingRequest[e].resolve({aItems:this.getItemsFromBuffer(e),oTemplate:t})}.bind(this),error:function(){this._oPendingRequest[e].reject()}.bind(this)}),this._oPendingRequest[e]))},addItemsToBuffer:function(e){this._oBuffer.aItems.push(e)},getItemsFromBuffer:function(e){for(var t=[],s=0;s<this._oBuffer.aItems.length;s++)this._oBuffer.aItems[s].UnitKey==e&&t.push(this._oBuffer.aItems[s]);return t},refreshBuffer:function(e,t){return this._oPendingRequest[e]?this._oPendingRequest[e].then(function(){return this._oPendingRequest[e]=void 0,this.refreshBuffer(e,t)}.bind(this)):(this._oPendingRequest[e]=$.Deferred(),this.getItemsFromBuffer(e).length>0?(this._oPendingRequest[e].resolve({aItems:this.getItemsFromBuffer(e),oTemplate:t}),this._oPendingRequest[e]):(this._oModel.callFunction("/RptimeLogCount",{method:"GET",urlParameters:{UnitKey:e},success:function(s){var n={};n.UnitKey=e,n.Amount=s.Amount,n.Finish=s.Finish,!0===s.Finish&&this.addItemsToBuffer(n),this._oPendingRequest[e].resolve({aItems:this.getItemsFromBuffer(e),oTemplate:t})}.bind(this),error:function(){this._oPendingRequest[e].reject()}.bind(this)}),this._oPendingRequest[e]))},clearBuffer:function(e){for(var t=0,s=0;s<this._oBuffer.aItems.length;s++)this._oBuffer.aItems[t].UnitKey==e?this._oBuffer.aItems.splice(t,1):t++}});return s.getInstance=function(e,n){return t&&t._sEmployeeId===e&&t._oModel===n||(t=new s(e,n)),t},s});',
	"MIND2PEP_PLANNER/utils/Tables.js": 'sap.ui.define(["MIND2PEP_PLANNER/utils/Formatter","MIND2PEP_PLANNER/utils/Helper"],function(e,t){"use strict";return{oView:null,setView:function(e){this.oView=e},getView:function(){return this.oView},fillUnitColumns:function(e,t){var a=new sap.ui.model.Filter("UnitKey",sap.ui.model.FilterOperator.EQ,t);this.getView().getModel().read("/metaUnitSet",{groupId:t,success:function(a){this.readMetaUnitSuccess(e,t,a)}.bind(this),error:function(t){e.setBusy(!1)}.bind(this),filters:[a]})},readMetaUnitSuccess:function(t,a,i){var o=i.results;if(o){for(var s=0;s<o.length;s++){var n;"BUTTON"===o[s].ColumnType?((n=new sap.m.Button({text:{path:o[s].FieldKey+"/value"},tooltip:{path:o[s].FieldKey+"/Tooltip"},press:this.getView().getController().openPopup.bind(this.getView().getController()),width:"100%",type:sap.m.ButtonType.Transparent,enabled:{parts:[o[s].FieldKey+"/disabled","readonly"],formatter:function(e,t){return!(e||t)}}}).addStyleClass("sapMButtonText")).addCustomData(new sap.ui.core.CustomData({key:"EmpID",writeToDom:!0,value:{path:o[s].FieldKey+"/EmpID",formatter:e.checkCustomDataIsString}})),n.addCustomData(new sap.ui.core.CustomData({key:"UnitKey",writeToDom:!0,value:a})),n.addCustomData(new sap.ui.core.CustomData({key:"fragment",writeToDom:!0,value:{path:o[s].FieldKey+"/fragment",formatter:e.checkCustomDataIsString}}))):"UNASSIGN"===o[s].FieldKey?((n=new sap.m.Button({text:{path:o[s].FieldKey+"/value"},tooltip:{path:o[s].FieldKey+"/Tooltip"},visible:"{= !${readonly}}",press:this.getView().getController().unassignEmployee.bind(this.getView().getController()),width:"100%",type:sap.m.ButtonType.Reject,enabled:{path:o[s].FieldKey+"/disabled",formatter:function(e){return!e}}})).addCustomData(new sap.ui.core.CustomData({key:"EmpID",writeToDom:!0,value:{path:o[s].FieldKey+"/EmpID",formatter:e.checkCustomDataIsString}})),n.addCustomData(new sap.ui.core.CustomData({key:"UnitKey",writeToDom:!0,value:a})),n.addCustomData(new sap.ui.core.CustomData({key:"fragment",writeToDom:!0,value:{path:o[s].FieldKey+"/fragment",formatter:e.checkCustomDataIsString}}))):n=new sap.m.Text({text:{path:o[s].FieldKey+"/value"},tooltip:{path:o[s].FieldKey+"/Tooltip"},wrapping:!1}),n.addEventDelegate({onBeforeRendering:this.onBeforeRenderTemplate}),n.addEventDelegate({onAfterRendering:this.onAfterRenderTemplate}),n.addCustomData(new sap.ui.core.CustomData({key:"background",writeToDom:!0,value:{path:o[s].FieldKey+"/color",formatter:e.checkCustomDataIsString}}));var l=new sap.ui.table.Column("col_"+a+o[s].FieldKey,{template:n,autoResizable:!0}),r=new sap.m.Label("lbl_unit"+a+s);r.setWidth("1px"),0===s&&(r.setTextAlign(sap.ui.core.TextAlign.Center),r.setWidth("100%"),r.setDesign(sap.m.LabelDesign.Bold),l.setHeaderSpan([o.length,1]));var u=new sap.m.Label("lbl_"+a+o[s].FieldKey);u.setText(o[s].FieldLabel),l.addMultiLabel(r),l.setWidth(o[s].ColumnWidth),l.addMultiLabel(u),t.addColumn(l)}this.readDateUnit(t,a),t.setFixedColumnCount(o.length)}else this.readDateUnit(t,a)},readDateUnit:function(e,t){var a=this.getView().getModel(),i=(this.getView().byId("cal_timeframe").getVisible()?this.getView().byId("cal_timeframe"):this.getView().byId("cal_interval")).getSelectedDates();if(i.length>0){var o=i[0].getStartDate(),s=i[0].getEndDate();if(null==s)return;var n=new Date(o),l=new Date(s);n.setHours(12),l.setHours(12),n.setUTCDate(n.getDate()),l.setUTCDate(l.getDate())}if(n&&l){var r=new sap.ui.model.Filter("PlanDate",sap.ui.model.FilterOperator.BT,n,l),u=new sap.ui.model.Filter("UnitKey",sap.ui.model.FilterOperator.EQ,t);a.read("/commentSet",{filters:[r,u],success:function(e){this.getView().getModel("Comments").setData(e,!0)}.bind(this),error:function(){}}),a.read("/metaDateSet",{groupId:t,filters:[r,u],success:function(a){this.readMetaDateSuccess(e,t,a)}.bind(this),error:function(t){e.setBusy(!1)}})}},readMetaDateSuccess:function(t,a,i){var o=i.results;if(o&&o.length>0)for(var s=o[0].PlanDate,n=0;n<o.length;n++){var l=new Date(o[n].PlanDate);l.setHours(12);var r,u=Date.parse(l.toString()),d=new sap.m.FormattedText("lbl_date"+a+o[n].FieldKey+u,{width:"100%"});if(this.checkHasComment(u,a)){var g=this.getResourceBundleText("letter");d.setHtmlText("<p style=\'color:#2648B2;text-align:center;font-weight:bolder;margin-block-start:0px;margin-block-end:0px;font-size:1rem\'>"+o[n].LabelText+g+"</p>")}else d.setHtmlText("<p style=\'text-align:center;font-weight:bold;margin-block-start:0px;margin-block-end:0px;font-size:1rem\'>"+o[n].LabelText+"</p>");"BUTTON"===o[n].ColumnType?((r=new sap.m.Button({text:{path:o[n].FieldKey+u+"/value"},tooltip:{path:o[n].FieldKey+u+"/Tooltip"},press:this.getView().getController().openPopup.bind(this.getView().getController()),width:"100%",type:sap.m.ButtonType.Transparent,enabled:{parts:[o[n].FieldKey+u+"/disabled","readonly"],formatter:function(e,t){return!(e||t)}}}).addStyleClass("sapMButtonText")).addCustomData(new sap.ui.core.CustomData({key:"EmpID",writeToDom:!0,value:{path:o[n].FieldKey+u+"/EmpID",formatter:e.checkCustomDataIsString}})),r.addCustomData(new sap.ui.core.CustomData({key:"PlanDate",writeToDom:!0,value:u.toString()})),r.addCustomData(new sap.ui.core.CustomData({key:"UnitKey",writeToDom:!0,value:a})),r.addCustomData(new sap.ui.core.CustomData({key:"fragment",writeToDom:!0,value:{path:o[n].FieldKey+u+"/fragment",formatter:e.checkCustomDataIsString}})),r.addCustomData(new sap.ui.core.CustomData({key:"ColumnType",writeToDom:!0,value:"Button"}))):"TEXT"===o[n].ColumnType?(r=new sap.m.Text({text:{path:o[n].FieldKey+u+"/value"},tooltip:{path:o[n].FieldKey+u+"/Tooltip"},wrapping:!1})).addCustomData(new sap.ui.core.CustomData({key:"ColumnType",writeToDom:!0,value:"Text"})):"CB"===o[n].ColumnType?(r=new sap.m.ComboBox({selectedKey:{path:o[n].FieldKey+u+"/value"},tooltip:{path:o[n].FieldKey+u+"/Tooltip"},visible:"{= !${readonly}}",change:this.getView().getController().onCBSubmit.bind(this.getView().getController()),width:"5rem"}),this.getView().getController()._oDataUtil.getItems(o[n].FieldKey,a,r).then(function(e){for(var t={},a=0;a<e.aItems.length;a++)t=e.aItems[a],e.oTemplate.addItem(new sap.ui.core.Item({key:t.ItemKey,text:t.ItemValue,tooltip:t.ItemTooltip}))}),r.addCustomData(new sap.ui.core.CustomData({key:"EmpId",writeToDom:!0,value:{path:o[n].FieldKey+u+"/EmpID",formatter:e.checkCustomDataIsString}})),r.addCustomData(new sap.ui.core.CustomData({key:"PlanDate",writeToDom:!0,value:u.toString()})),r.addCustomData(new sap.ui.core.CustomData({key:"FieldKey",writeToDom:!0,value:o[n].FieldKey})),r.addCustomData(new sap.ui.core.CustomData({key:"defKey",writeToDom:!0,value:{path:o[n].FieldKey+u+"/value",mode:"OneTime",formatter:e.checkCustomDataIsString}})),r.addCustomData(new sap.ui.core.CustomData({key:"UnitKey",writeToDom:!0,value:a})),r.addCustomData(new sap.ui.core.CustomData({key:"ColumnType",writeToDom:!0,value:"CB"}))):(r=new sap.m.Text({text:{path:o[n].FieldKey+u+"/value"},tooltip:{path:o[n].FieldKey+u+"/Tooltip"},wrapping:!1})).addCustomData(new sap.ui.core.CustomData({key:"ColumnType",writeToDom:!0,value:"Text"})),r.addEventDelegate({onBeforeRendering:this.getView().getController().onBeforeRenderTemplate}),r.addEventDelegate({onAfterRendering:this.getView().getController().onAfterRenderTemplate}),r.addCustomData(new sap.ui.core.CustomData({key:"background",writeToDom:!0,value:{path:o[n].FieldKey+u+"/color",formatter:e.checkCustomDataIsString}}));var m=new sap.ui.table.Column("Dcol_"+a+o[n].FieldKey+u,{template:r,autoResizable:!0});if(m.addCustomData(new sap.ui.core.CustomData({key:"UnitKey",writeToDom:!0,value:a})),m.addCustomData(new sap.ui.core.CustomData({key:"PlanDate",writeToDom:!0,value:u.toString()})),d.setWidth("1px"),s.toString()!==o[n].PlanDate.toString()||0===n){s=o[n].PlanDate;var p=0;d.setWidth("100%");for(var c=0;c<o.length;c++)o[c].PlanDate.toString()===s.toString()&&p++;m.setHeaderSpan([p,1])}var h=new sap.m.Label("lbl_"+a+o[n].FieldKey+u);h.setText(o[n].FieldLabel),m.addMultiLabel(d),m.setWidth(o[n].ColumnWidth),m.addMultiLabel(h),t.addColumn(m)}this.setTableData(t,a),this.setupTabHandling(t)},setTableData:function(e,t){var a=this.getView().getController().getSelectedBegda(),i=this.getView().getController().getSelectedEndda(),o=new sap.ui.model.Filter("PlanDate",sap.ui.model.FilterOperator.BT,a,i),s=new sap.ui.model.Filter("UnitKey",sap.ui.model.FilterOperator.EQ,t);this.getView().getModel().read("/planDataSet",{groupId:t,filters:[o,s],success:function(a){this.readPlanDataSuccess(e,t,a)}.bind(this),error:function(){this.handleError(this,e)}.bind(this),refreshAfterChange:!1})},readPlanDataSuccess:function(e,a,i){var o={rows:[]},s=new sap.ui.model.json.JSONModel,n=i.results;if(n&&n.length>0){var l={};n.forEach(function(e){var t=new Date(e.PlanDate);if("8099"==t.getYear())var a="";else{t.setHours(12);a=Date.parse(t.toString())}var i=e.EmpId,o=e.Line;l[i+o]||(l[i+o]={EmpID:i,Line:o});var s=l[i+o];s.readonly="001"!==o,s[e.FieldKey+a]={},s[e.FieldKey+a].value=e.FieldValue,s[e.FieldKey+a].Tooltip=e.FieldToolTip,s[e.FieldKey+a].color=e.FieldBColor,s[e.FieldKey+a].disabled=e.Disabled,s[e.FieldKey+a].fragment=e.Fragment,s[e.FieldKey+a].EmpID=i}),Object.keys(l).forEach(function(e){o.rows.push(l[e])}),s.setData({modelData:o}),e.setModel(s),e.bindAggregation("rows",{path:"/modelData/rows"});e.getBinding("rows");this.setRowCount(e,o.rows),this.getView().getController().isFeatureEnabled("EXPANDED")?this.getView().getController().isFeatureEnabled("EXPANDED")&&e.getVisible()&&(e.setBusy(!0),setTimeout(function(){t.autoResize(e)},0)):(e.setBusy(!0),setTimeout(function(){t.autoResize(e)},0))}else e.setBusy(!1)},fillSumTable:function(e,t){var a=this.getView().getModel();e.setBusy(!0);var i=(this.getView().byId("cal_timeframe").getVisible()?this.getView().byId("cal_timeframe"):this.getView().byId("cal_interval")).getSelectedDates();if(i.length>0){var o=i[0].getStartDate(),s=i[0].getEndDate();if(null==s)return;var n=new Date(o),l=new Date(s);n.setHours(12),l.setHours(12),n.setUTCDate(n.getDate()),l.setUTCDate(l.getDate())}if(n&&l){e.setBusy(!0);var r=new sap.ui.model.Filter("PlanDate",sap.ui.model.FilterOperator.BT,n,l),u=new sap.ui.model.Filter("UnitKey",sap.ui.model.FilterOperator.EQ,t);a.read("/sumMetaDataSet",{groupId:t,filters:[r,u],success:this.sumMetaSuccess.bind(this.getView().getController(),e,t),error:function(){e.setBusy(!1)}.bind(this)})}},sumMetaSuccess:function(t,a,i,o){for(var s=i.results,n=(t=t,0);n<s.length;n++){var l=new sap.m.Label,r=new Date(s[n].PlanDate);"8099"==r.getYear()?l.setText(s[n].FieldLabel):l.setText(s[n].LabelText);var u=Date.parse(r.toString()),d=new sap.m.Text({text:{path:u.toString()},visible:{path:u.toString()+"ShowMsg",formatter:function(e){return!e}}}),g=new sap.m.Button({visible:{path:u.toString()+"ShowMsg"},text:{path:u.toString()+"MsgCnt"},type:sap.m.ButtonType.Transparent,icon:"sap-icon://message-popup",press:this.getView().getController().showSumMsg.bind(this.getView().getController(),r,a)}).addStyleClass("btnText");g.addCustomData(new sap.ui.core.CustomData({key:"sumkey",writeToDom:!0,value:{path:u.toString()+"SumKey",formatter:e.checkCustomDataIsString}}));var m=new sap.ui.layout.HorizontalLayout({content:[d,g]});m.addEventDelegate({onAfterRendering:this.onAfterRenderTemplate}),m.addCustomData(new sap.ui.core.CustomData({key:"background",writeToDom:!0,value:{path:u.toString()+"FieldBColor",formatter:e.checkCustomDataIsString}}));var p=new sap.ui.table.Column("Scol_"+a+s[n].FieldKey+u,{template:m,autoResizable:!0});p.setLabel(l),p.setWidth(s[n].ColumnWidth||"auto"),t.addColumn(p)}this.fillSumData(t,a)},fillSumData:function(e,t){if(null!=this.getView().getController().getSelectedEndda()){var a=this.getView().getModel(),i=this.getView().getController().getSelectedBegda(),o=this.getView().getController().getSelectedEndda();i.setUTCDate(i.getDate()),o.setUTCDate(o.getDate());var s=new sap.ui.model.Filter("PlanDate",sap.ui.model.FilterOperator.BT,i,o),n=new sap.ui.model.Filter("UnitKey",sap.ui.model.FilterOperator.EQ,t);a.read("/sumDataSet",{groupId:t+"sds",filters:[s,n],success:function(a){this.getView().getController().sumDataSuccess(e,t,a)}.bind(this.getView().getController()),error:function(t){e.setBusy(!1)}.bind(this)})}},sumDataSuccess:function(e,a,i){for(var o,s=i.results,n={},l={rows:[]},r=new sap.ui.model.json.JSONModel,u=0;u<s.length;u++){0!==u&&o!==s[u].SumKey&&(l.rows.push(n),n={}),o=s[u].SumKey;var d=new Date(s[u].PlanDate),g=Date.parse(d.toString());n[g.toString()]=s[u].Value;var m=g.toString()+"ShowMsg";n[m]=s[u].ShowMsg,n[m=g.toString()+"MsgCnt"]=s[u].MessageCount,n[m=g.toString()+"SumKey"]=s[u].SumKey,n[m=g.toString()+"FieldBColor"]=s[u].FieldBColor}s.length>0&&l.rows.push(n),r.setData({modelData:l}),e.setModel(r),e.bindAggregation("rows",{path:"/modelData/rows"}),this.setRowCount(e,l.rows),setTimeout(function(){t.autoResize(e)},500)},checkHasComment:function(e,t){var a=this.getView().getModel("Comments"),i=new Date(e),o=!1;return $.each(a.getData().results,function(e,a){a.PlanDate.setHours(12),a.PlanDate.toString()===i.toString()&&a.UnitKey===t&&(o=!0)}),o},setupTabHandling:function(e){e.addEventDelegate({onAfterRendering:function(){var t,a=e.getId(),i=e.getRows();$("#"+a).focusin(function(){jQuery.sap.delayedCall(100,null,function(){var e=$("#"+a).find("tbody").find(".sapMFocus")[0];e&&(this._FieldID=e.id)}.bind(this))}.bind(this)),$("#"+a).on("keyup",function(a){var o,s,n,l,r=sap.ui.getCore().byId(this._FieldID).getParent(),u=r.getCells(),d=[],g=0,m=0;for(t=0;t<u.length;t++)u[t]._$input&&(d.push(t),g||(g=t),m=t);if(9==a.which&&!a.shiftKey)if((s=u.indexOf(u.filter(function(e){return e.getId()===this._FieldID}.bind(this))[0]))===m)(n=i.indexOf(i.filter(function(e){return e.getId()===r.getId()})[0]))===e.getRows().length-1?(e._scrollNext(),jQuery.sap.delayedCall(100,null,function(){i[n].getCells()[g].focus()})):(o=i[n+1].getCells()[g]).focus();else{for(l=0,t=0;t<d.length;t++)d[t]===s&&(l=d[t+1]);(o=r.getCells()[l]).focus()}if(9==a.which&&a.shiftKey)if((s=u.indexOf(u.filter(function(e){return e.getId()===this._FieldID}.bind(this))[0]))===g)0===(n=i.indexOf(i.filter(function(e){return e.getId()===r.getId()})[0]))?(e._scrollPrevious(),jQuery.sap.delayedCall(100,null,function(){i[n].getCells()[m].focus()})):(o=i[n-1].getCells()[m]).focus();else{for(l=0,t=0;t<d.length;t++)d[t]===s&&(l=d[t-1]);(o=r.getCells()[l]).focus()}o&&o.selectText(0,o.getValue().length)}.bind(this))}.bind(this)},e)},setRowCount:function(e,t){var a=t.length;switch(this.getView().getController().isFeatureEnabled("ROWCOUNT")){case!0:a<this.getView().getController().oUserCust.Nooflines?e.setVisibleRowCount(a):e.setVisibleRowCount(this.getView().getController().oUserCust.Nooflines);break;case!1:a<this.getView().getController().oCustomizing.PlanVisRows?e.setVisibleRowCount(a):e.setVisibleRowCount(this.getView().getController().oCustomizing.PlanVisRows);break;default:a<this.getView().getController().oCustomizing.PlanVisRows?e.setVisibleRowCount(a):e.setVisibleRowCount(this.getView().getController().oCustomizing.PlanVisRows)}},addCssColoring:function(e){var a,i=this.getView()._aStyles,o="[data-background=\'"+e+"\']";o+=", "+o+" > .sapMInputBaseContentWrapper",i||(this.getView()._aStyles=[],i=this.getView()._aStyles),-1===i.indexOf(o)&&(i.push(o),a=o+" {background: "+e+" !important} ",t.addStyleClass(a))},addHeaderCssColoring:function(e){var a,i=this.getView()._aStyles,o="[data-header-background=\'"+e+"\']";o+=", "+o+" > .sapMInputBaseContentWrapper",i||(this.getView()._aStyles=[],i=this.getView()._aStyles),-1===i.indexOf(o)&&(i.push(o),a=o+" {background: "+e+" !important} ",t.addStyleClass(a))}}});',
	"MIND2PEP_PLANNER/utils/TimesOverview.js": 'sap.ui.define(["MIND2PEP_PLANNER/utils/Formatter","MIND2PEP_PLANNER/utils/Helper","sap/m/MessageToast","sap/m/MessageBox","sap/ui/core/BusyIndicator"],function(e,t,a,r,i){"use strict";return{formatter:e,_controller:"",setController:function(e){this._controller=e},openTimeOverviewPopup:function(e,t,a,r){i.show(0),this._controller._oTimesOverviewDialog||(this._controller._oTimesOverviewDialog=sap.ui.xmlfragment("MIND2PEP_PLANNER.fragments.timesoverview.main",this,{refreshAfterChange:!0}),this._controller.getView().addDependent(this._controller._oTimesOverviewDialog)),this._controller._oTimesOverviewDialog.open();var s,o,l=this._controller.getView().getModel("TO"),n=sap.ui.getCore().byId("inp_calendarWeek"),u=[this._controller.getResourceBundleText("sunday"),this._controller.getResourceBundleText("monday"),this._controller.getResourceBundleText("tuesday"),this._controller.getResourceBundleText("wednesday"),this._controller.getResourceBundleText("thursday"),this._controller.getResourceBundleText("friday"),this._controller.getResourceBundleText("saturday")],d=this._controller.getView().getModel("UserData");e?(s=new Date(e),o=new Date(e)):(s=this._controller.getSelectedBegda(),o=this._controller.getSelectedEndda()),s.setHours(12),o.setHours(12);var g=s;l.setProperty("/UnitKey",t),l.setProperty("/EmpId",a),l.setProperty("/CurrentDate",s),l.setProperty("/SecondCurrentDate",o),s.setUTCDate(s.getDate()),o.setUTCDate(o.getDate());var p=this._controller.getFormattedDate(s),c=this._controller.getFormattedDate(o),_=new sap.ui.model.Filter("Begda",sap.ui.model.FilterOperator.EQ,p),y=new sap.ui.model.Filter("Endda",sap.ui.model.FilterOperator.EQ,c),m=new sap.ui.model.Filter("UnitKey",sap.ui.model.FilterOperator.EQ,t),b=sap.ui.getCore().byId("ld_select_emp"),S=this;b.getBinding("items").attachDataReceived(function(){setTimeout(function(){S.onEmployeeChangeTimeOverview()},0)}.bind(this)),b.getBinding("items").filter([m,_,y]),b.getBinding("items").isSuspended()&&b.getBinding("items").resume(),b.setSelectedKey(a),sap.ui.getCore().byId("ld_dp_currentDate").focus();var h=u[g.getDay()],I=new Date(g.getTime());I.setUTCDate(I.getUTCDate()+4-(I.getUTCDay()||7));var v=new Date(Date.UTC(g.getUTCFullYear(),0,1)),C="KW "+Math.ceil((I-v)/864e5/7)+" - "+h;n.setValue(C),l.setProperty("/TO_SHIFT",{IsActive:d.getProperty("/features/TO_SHIFT/IsActive")}),l.setProperty("/TO_ALLOW",{IsActive:d.getProperty("/features/TO_ALLOW/IsActive")}),l.setProperty("/TO_TIMET",{IsActive:d.getProperty("/features/TO_TIMET/IsActive")}),l.setProperty("/TO_RPTIME",{IsActive:d.getProperty("/features/TO_RPTIME/IsActive")}),l.setProperty("/TO_CICO",{IsActive:d.getProperty("/features/TO_CICO/IsActive")}),l.setProperty("/TO_ABS",{IsActive:d.getProperty("/features/TO_ABS/IsActive")}),l.setProperty("/TO_OVERT",{IsActive:d.getProperty("/features/TO_OVERT/IsActive")}),r&&(l.setProperty("/TO_SHIFT",{IsActive:!1}),l.setProperty("/TO_ALLOW",{IsActive:!1}),l.setProperty("/TO_TIMET",{IsActive:!1}),l.setProperty("/TO_RPTIME",{IsActive:!1}),l.setProperty("/TO_CICO",{IsActive:!1}),l.setProperty("/TO_ABS",{IsActive:!1}),l.setProperty("/TO_OVERT",{IsActive:!1}),l.setProperty("/"+r,{IsActive:!0})),this.changeDatesInModel(s,o),this.getTimeEventSet(t),i.hide()},getTimeEventSet:function(e){var t=new sap.ui.model.Filter("UnitKey",sap.ui.model.FilterOperator.EQ,e),a=sap.ui.getCore().byId("ld_select_timeevent"),r=sap.ui.getCore().byId("ld_dp_date").getDateValue();null!==r&&r.setHours(12);var i=new sap.ui.core.Item({text:"{CicotyText}",key:"{Cicoty}"});a.bindItems({path:"/cicoTypeSet",template:i,filters:[t],events:{dataReceived:function(){this._oCicoDialog&&this._oCicoDialog.setBusy(!1)}.bind(this)}})},closeTimeOverviewDialogViaButton:function(e){var a=this.onCloseTimeOverviewDialog(e);a?t.openConfirmDialog("{i18n>areyousure}",a,"{i18n>discard}",this.closeTimeOverviewDialog.bind(this),null,this._controller):this._controller._oTimesOverviewDialog.close()},onEmployeeChangeTimeOverview:function(){var e=this._controller.getView().getModel("TO");e.getProperty("/TO_ABS/IsActive")&&this.onEmployeeSelect(),e.getProperty("/TO_SHIFT/IsActive")&&this.getEmpShift(),e.getProperty("/TO_CICO/IsActive")&&this.onCicoEmployeeChange(),e.getProperty("/TO_OVERT/IsActive")&&this.onEmployeeOvertimeSelect(),e.getProperty("/TO_ALLOW/IsActive")&&this.getAllowanceSet(),e.getProperty("/TO_TIMET/IsActive")&&this.getTimeTransfer(),e.getProperty("/TO_RPTIME/IsActive")&&this.bindRptimeMsgTimesOverview()},onEmployeeSelect:function(){var e=this._controller.getView().getModel("TO").getProperty("/EmpId"),t=this._controller.getView().getModel("TO").getProperty("/UnitKey"),a=new sap.ui.model.Filter("EmpId",sap.ui.model.FilterOperator.EQ,e),r=new sap.ui.model.Filter("UnitKey",sap.ui.model.FilterOperator.EQ,t),i=this._controller.getView().getModel("TO").getProperty("/CurrentDate"),s=new sap.ui.model.Filter("PlanDate",sap.ui.model.FilterOperator.EQ,i),o=new sap.ui.model.Filter("SumKey",sap.ui.model.FilterOperator.EQ,""),l=sap.ui.getCore().byId("ld_select_subty_leave"),n=sap.ui.getCore().byId("ld_select_subty_reason"),u=n.getBinding("items");this.fillLeaveTable(),l.getBinding("items").filter([a,r]),l.getBinding("items").isSuspended()&&l.getBinding("items").resume(),u.attachDataRequested(function(){n.setBusy(!0)}),u.attachDataReceived(function(){n.setBusy(!1)}),u.filter([s,r,o]),u.isSuspended()&&u.resume()},fillLeaveTable:function(){var e=this._controller.getView().getModel("TO").getProperty("/CurrentDate"),t=this._controller.getView().getModel("TO").getProperty("/SecondCurrentDate"),a=sap.ui.getCore().byId("ld_tbl_leaveoverview"),r=this._controller.getView().getModel("TO"),i=new sap.ui.model.Filter("EmpId",sap.ui.model.FilterOperator.EQ,r.getProperty("/EmpId")),s=new sap.ui.model.Filter("UnitKey",sap.ui.model.FilterOperator.EQ,r.getProperty("/UnitKey")),o=new sap.ui.model.Filter("Begda","EQ",e),l=new sap.ui.model.Filter("Endda","EQ",t);a.getBinding("rows").attachDataRequested(function(){a.setBusy(!0)}),a.getBinding("rows").attachDataReceived(function(){a.setBusy(!1)}),a.getBinding("rows").filter([i,s,o,l],"Application"),a.getBinding("rows").isSuspended()&&a.getBinding("rows").resume()},getEmpShift:function(){var e=sap.ui.getCore().byId("pnl_shift"),t=this._controller.getView().getModel("TO").getProperty("/CurrentDate"),a=this._controller.getView().getModel("TO").getProperty("/SecondCurrentDate"),r=sap.ui.getCore().byId("ld_select_emp").getSelectedItem();if(r){var i=r.getKey(),s=r.getBindingContext().getProperty("UnitKey"),o=new sap.ui.model.Filter("Begda","BT",t,a),l=new sap.ui.model.Filter("ShiftDate","BT",t,a),n=sap.ui.getCore().byId("ld_select_shift"),u=sap.ui.getCore().byId("ld_tbl_shiftoverview"),d=new sap.ui.model.Filter("EmpId",sap.ui.model.FilterOperator.EQ,i),g=new sap.ui.model.Filter("Empid",sap.ui.model.FilterOperator.EQ,i),p=new sap.ui.model.Filter("UnitKey",sap.ui.model.FilterOperator.EQ,s);e.setBusy(!0),this._controller.getView().getModel("TO").setProperty("/TO_SHIFT/SelectedShift",!1),u.getBinding("rows").filter([g,l]),u.getBinding("rows").isSuspended()&&u.getBinding("rows").resume(),n.getBinding("items").attachDataReceived(function(){e.setBusy(!1)}.bind(this)),n.getBinding("items").filter([o,d,p]),n.getBinding("items").isSuspended()&&n.getBinding("items").resume()}},onShiftSelection:function(e){var t=this._controller.getView().getModel("TO").getProperty("/EmpId");if(e.getParameter("rowContext")){var a=e.getParameter("rowContext").getProperty("ShiftDate"),r=sap.ui.core.format.DateFormat.getDateTimeInstance({pattern:"yyyy-MM-ddTHH:mm:ss"}).format(a);this._controller.getView().getModel("TO").setProperty("/TO_SHIFT/SelectedShift",!0),this._controller.getView().getModel("TO").setProperty("/TO_SHIFT/SelectedShiftDate",e.getParameter("rowContext").getProperty("ShiftDate")),this.getCurrEmpShift(t,r)}},getCurrEmpShift:function(e,t){var a=this._controller.getView().getModel(),r=sap.ui.getCore().byId("to_sf_shift"),i=a.createKey("/substitutionSet",{Empid:e,ShiftDate:t,Tprog:"",SubstTprog:"",SubstSubty:""});r.bindElement({path:i,events:{dataReceived:function(){this.onGetEmpShiftSuccess()}.bind(this)}})},onGetEmpShiftSuccess:function(){var e=sap.ui.getCore().byId("pnl_shift"),t=sap.ui.getCore().byId("chb_voluntary"),a=sap.ui.getCore().byId("chb_ownShiftTimes"),r=sap.ui.getCore().byId("ld_tp_beguz_leave"),i=sap.ui.getCore().byId("to_shift_select_subtype"),s=sap.ui.getCore().byId("to_sf_shift"),o=sap.ui.getCore().byId("ld_select_shift"),l=s.getBindingContext(),n=sap.ui.getCore().byId("btn_shiftChangeCancel"),u=sap.ui.getCore().byId("btn_shiftChangeSave"),d=sap.ui.getCore().byId("btn_shiftChangeModify"),g=sap.ui.getCore().byId("to_shift_select_tprogclass"),p=sap.ui.getCore().byId("ld_inp_integratedOT"),c=60*new Date(0).getTimezoneOffset()*1e3,_=sap.ui.core.format.DateFormat.getDateInstance({pattern:"HH:mm:ss"});if(e.setBusy(!1),e.getModel("UserData").getProperty("/features/TO_VTART/IsActive")&&this.getVtartItems(),e.getModel("UserData").getProperty("/features/TO_VTART/IsActive")&&t.setSelected(l.getProperty("SubstVolSh")),e.getModel("UserData").getProperty("/features/COMMDATE/IsActive"))if(null!==l.getProperty("Comdate"))e.getModel("TO").setProperty("/TO_SHIFT/Comdate",l.getProperty("Comdate")),e.getModel("TO").setProperty("/TO_SHIFT/Comuzeit",_.format(new Date(l.getProperty("Comuzeit").ms+c)));else{var y=new Date;e.getModel("TO").setProperty("/TO_SHIFT/Comdate",y),e.getModel("TO").setProperty("/TO_SHIFT/Comuzeit",_.format(y))}if("****"===l.getProperty("SubstTprog"))this.toggleEnabledShiftInput(!0),a.setSelected(!0),r.setValue(_.format(new Date(l.getProperty("SubstBeguz").ms+c))),i.getVisible()&&(i.setSelectedKey(l.getProperty("SubstVtart")),i.setEnabled(!1)),g.getVisible()&&g.setSelectedKey(l.getProperty("SubstTpkla")),n.setEnabled(!0),t.getVisible()&&t.setEnabled(!0),d.setEnabled(!0),a.setEnabled(!0),o.setEnabled(!1),u.setEnabled(!1),e.setBusy(!1);else if(l.getProperty("SubstTprog")){var m=l.getProperty("SubstTprog"),b=o.getItemByKey(m).getBindingContext().getObject().OtShift;p.setValue(b),this.toggleEnabledShiftInput(!1),r.setValue(_.format(new Date(l.getProperty("SubstBeguz").ms+c))),i.getVisible()&&(i.setSelectedKey(l.getProperty("SubstVtart")),i.setEnabled(!0)),n.setEnabled(!0),t.getVisible()&&t.setEnabled(!0),g.getVisible()&&g.setEnabled(!0),d.setEnabled(!0),a.setEnabled(!0),o.setEnabled(!0),u.setEnabled(!1),e.setBusy(!1)}else this.toggleEnabledShiftInput(!1),e.getModel("TO").setProperty("/TO_SHIFT/break1",!1),e.getModel("TO").setProperty("/TO_SHIFT/break2",!1),g.setVisible(!1),n.setEnabled(!1),e.setBusy(!1),t.getVisible()&&t.setEnabled(!0),a.setEnabled(!0),i.getVisible()&&(i.setEnabled(!0),i.setSelectedKey("00")),o.setEnabled(!0),u.setEnabled(!0)},getVtartItems:function(){var e=sap.ui.getCore().byId("ld_dp_currentDate").getDateValue(),t=this._controller.getView().getModel("TO").getProperty("/UnitKey"),a=sap.ui.getCore().byId("ld_select_emp").getSelectedKey();(e=new Date(e)).setHours(12);var r=new sap.ui.model.Filter("Plandate",sap.ui.model.FilterOperator.EQ,e),i=new sap.ui.model.Filter("UnitKey",sap.ui.model.FilterOperator.EQ,t),s=new sap.ui.model.Filter("EmpId",sap.ui.model.FilterOperator.EQ,a),o=sap.ui.getCore().byId("to_shift_select_subtype");o.getBinding("items").filter([r,i,s]),o.getBinding("items").isSuspended()&&o.getBinding("items").resume()},toggleEnabledShiftInput:function(e){var a=sap.ui.getCore().byId("ld_inp_shiftPlan"),r=sap.ui.getCore().byId("ld_select_shift"),i=sap.ui.getCore().byId("ld_tp_beguz_shift"),s=sap.ui.getCore().byId("ld_tp_enduz_shift"),o=sap.ui.getCore().byId("to_shift_select_subtype"),l=sap.ui.getCore().byId("ld_inp_integratedOT"),n=sap.ui.getCore().byId("ld_lbl_integratedOT"),u=sap.ui.getCore().byId("to_sf_shift"),d=sap.ui.getCore().byId("chb_voluntary"),g=u.getBindingContext(),p=60*new Date(0).getTimezoneOffset()*1e3,c=sap.ui.core.format.DateFormat.getDateInstance({pattern:"HH:mm:ss"});if(this.setPnlShiftFieldVisibility(e),!0===e){this._controller.isFeatureEnabled("TO_INTEGOT")&&(l.setVisible(!1),n.setVisible(!1));var _=new sap.ui.core.Item({text:this._controller.getResourceBundleText("individuell"),key:"****"}),y=new sap.ui.core.CustomData({key:"OldShiftKey",writeToDom:!0,value:a.getSelectedKey()});_.addCustomData(y),r.addItem(_),r.setSelectedItem(_)}else{if(this._controller.isFeatureEnabled("TO_INTEGOT")&&(l.setVisible(!0),n.setVisible(!0)),"****"===r.getSelectedKey()){var m=t.getCustomDataValue(r.getSelectedItem().getAggregation("customData"),"OldShiftKey");r.removeItem(r.getSelectedIndex()),r.setSelectedKey(m)}g.getProperty("SubstTprog")?(r.setSelectedKey(g.getProperty("SubstTprog")),o.getVisible()&&o.setSelectedKey(g.getProperty("SubstVtart")),d.getVisible()&&(g.getProperty("SubstVolSh")?d.setSelected(!0):d.setSelected(!1)),i.setValue(c.format(new Date(g.getProperty("SubstBeguz").ms+p))),s.setValue(c.format(new Date(g.getProperty("SubstEnduz").ms+p)))):(r.clearSelection(),r.setValue(),i.setValue(""),s.setValue(""),d.getVisible()&&d.setSelected(!1),o.getVisible()&&o.setSelectedKey(g.getProperty("SubstVtart")))}},setPnlShiftFieldVisibility:function(e){var t=this._controller.getView(),a=sap.ui.getCore().byId("ld_select_shift"),r=sap.ui.getCore().byId("ld_tp_beguz_shift"),i=sap.ui.getCore().byId("ld_tp_enduz_shift"),s=sap.ui.getCore().byId("to_shift_select_tprogclass");e?(a.setEnabled(!1),r.setEnabled(!0),i.setEnabled(!0),t.getModel("TO").setProperty("/TO_SHIFT/break1",!0),t.getModel("TO").setProperty("/TO_SHIFT/break2",!0),this._controller.isFeatureEnabled("TO_TPROGCL")&&s.setVisible(!0)):(a.setEnabled(!0),r.setEnabled(!1),i.setEnabled(!1),t.getModel("TO").setProperty("/TO_SHIFT/break1",!1),t.getModel("TO").setProperty("/TO_SHIFT/break2",!1),s.setVisible(!1))},onCicoEmployeeChange:function(){var e,a=sap.ui.getCore().byId("ld_tbl_cicooverview"),r=this._controller.getView().getModel("TO").getProperty("/CurrentDate"),i=this._controller.getView().getModel("TO").getProperty("/SecondCurrentDate"),s=new sap.ui.model.Filter("Ldate","BT",r,i),o=this._controller.getView().getModel("TO").getProperty("/EmpId"),l=new sap.ui.model.Filter("EmpId",sap.ui.model.FilterOperator.EQ,o);e=this._oCicoDialog?t.getCustomDataValue(this._oCicoDialog.getAggregation("customData"),"UnitKey"):this._controller.getView().getModel("TO").getProperty("/UnitKey");var n=new sap.ui.model.Filter("UnitKey",sap.ui.model.FilterOperator.EQ,e);a.setBusyIndicatorDelay(0),a.setBusy(!0),a.bindRows({path:"/timeEventNSet",filters:[l,s,n],events:{dataReceived:function(){a.setBusy(!1)}.bind(this)}})},onEmployeeOvertimeSelect:function(){if(this._controller.isFeatureEnabled("TO_OVERT")){this.fillOvertimeTable();var e=sap.ui.getCore().byId("ld_select_subty_overtime"),t=this._controller.getView().getModel("TO").getProperty("/EmpId"),a=this._controller.getView().getModel("TO").getProperty("/UnitKey"),r=new sap.ui.model.Filter("EmpId",sap.ui.model.FilterOperator.EQ,t),i=new sap.ui.model.Filter("UnitKey",sap.ui.model.FilterOperator.EQ,a),s=new sap.ui.model.Filter("MsgType",sap.ui.model.FilterOperator.EQ,"OVERTIME");e.getBinding("items").filter([r,i]),e.getBinding("items").isSuspended()&&e.getBinding("items").resume();var o=sap.ui.getCore().byId("ld_select_versl_overtime");o.getBinding("items").filter([r,i]),o.getBinding("items").isSuspended()&&o.getBinding("items").resume();var l=sap.ui.getCore().byId("ld_select_comment_overtime"),n=sap.ui.getCore().byId("ld_dp_currentDate").getDateValue();s=new sap.ui.model.Filter("MsgType",sap.ui.model.FilterOperator.EQ,"OVERTIME");var u=new sap.ui.model.Filter("PlanDate",sap.ui.model.FilterOperator.EQ,n);i=new sap.ui.model.Filter("UnitKey",sap.ui.model.FilterOperator.EQ,a);var d=new sap.ui.model.Filter("SumKey",sap.ui.model.FilterOperator.EQ,"");l.getBinding("items").filter([s,u,i,d]),l.getBinding("items").isSuspended()&&l.getBinding("items").resume()}},fillOvertimeTable:function(){var e=sap.ui.getCore().byId("ld_tbl_overtimeoverview"),t=this._controller.getView().getModel("TO").getProperty("/CurrentDate"),a=this._controller.getView().getModel("TO").getProperty("/SecondCurrentDate"),r=this._controller.getView().getModel("TO").getProperty("/EmpId"),i=this._controller.getView().getModel("TO").getProperty("/UnitKey"),s=new sap.ui.model.Filter("EmpId",sap.ui.model.FilterOperator.EQ,r),o=sap.ui.core.format.DateFormat.getDateInstance({pattern:"dd.MM.yyyy"}),l=new sap.ui.model.Filter("Begda",sap.ui.model.FilterOperator.EQ,o.format(t)),n=new sap.ui.model.Filter("Endda",sap.ui.model.FilterOperator.EQ,o.format(a)),u=new sap.ui.model.Filter("UnitKey",sap.ui.model.FilterOperator.EQ,i);e.bindRows({path:"/overtimeSet",filters:[s,u,l,n],events:{dataReceived:function(){e.setBusy(!1)}}})},getAllowanceSet:function(){var e=sap.ui.getCore().byId("ld_tbl_allowanceOverview"),t=sap.ui.getCore().byId("ld_select_Allowance"),a=sap.ui.getCore().byId("ld_inp_allowancePayGroup"),r=sap.ui.getCore().byId("ld_inp_allowanceExtReg"),i=this._controller.getView().getModel("TO").getProperty("/CurrentDate"),s=this._controller.getView().getModel("TO").getProperty("/SecondCurrentDate"),o=sap.ui.core.format.DateFormat.getDateInstance({pattern:"yyyyMMdd"}),l=new sap.ui.model.Filter("ZDate","BT",o.format(i),o.format(s)),n=this._controller.getView().getModel("TO").getProperty("/EmpId"),u=this._controller.getView().getModel("TO").getProperty("/UnitKey"),d=new sap.ui.model.Filter("EmpId",sap.ui.model.FilterOperator.EQ,n),g=new sap.ui.model.Filter("UnitKey",sap.ui.model.FilterOperator.EQ,u);this._controller.getView().getModel("TO").setProperty("/TO_ALLOW/vMode","create"),e.getBinding("rows").filter([d,l]),e.getBinding("rows").attachDataReceived(function(){e.setBusy(!1)}),e.getBinding("rows").isSuspended()&&e.getBinding("rows").resume(),t.getBinding("items").filter([d,g]),t.getBinding("items").isSuspended()&&t.getBinding("items").resume();var p=new sap.ui.core.Item({text:"{ItemKey}",key:"{ItemValue}"});a.bindAggregation("items",{path:"/valueHelpAllowSet",template:p,filters:[g,new sap.ui.model.Filter("FieldKey","EQ","TRFGR")]}),r.bindAggregation("items",{path:"/valueHelpAllowSet",template:p,filters:[g,new sap.ui.model.Filter("FieldKey","EQ","EXBEL")]})},getTimeTransfer:function(){var e=sap.ui.getCore().byId("ld_tbl_timetransferoverview"),t=this._controller.getView().getModel("TO").getProperty("/CurrentDate"),a=this._controller.getView().getModel("TO").getProperty("/SecondCurrentDate"),r=sap.ui.core.format.DateFormat.getDateInstance({pattern:"yyyyMMdd"}),i=new sap.ui.model.Filter("Begda","BT",r.format(t),r.format(a)),s=this._controller.getView().getModel("TO").getProperty("/EmpId"),o=this._controller.getView().getModel("TO").getProperty("/UnitKey"),l=new sap.ui.model.Filter("EmpId",sap.ui.model.FilterOperator.EQ,s),n=new sap.ui.model.Filter("UnitKey",sap.ui.model.FilterOperator.EQ,o),u=sap.ui.getCore().byId("ld_select_subty_timetransfer");this._controller.getView().getModel("TO").setProperty("/TO_TIMET/vMode","create"),e.getBinding("rows").filter([l,i,n]),e.getBinding("rows").attachDataReceived(function(){e.setBusy(!1)}),e.getBinding("rows").isSuspended()&&e.getBinding("rows").resume(),u.getBinding("items").filter([l,n]),u.getBinding("items").isSuspended()&&u.getBinding("items").resume()},bindRptimeMsgTimesOverview:function(){var e=sap.ui.getCore().byId("ld_select_emp"),t=new sap.ui.model.Filter("EmpId",sap.ui.model.FilterOperator.EQ,e.getSelectedKey()),a=sap.ui.getCore().byId("li_rp_to_msg"),r=sap.ui.getCore().byId("oli_rp_to_template");a.bindAggregation("items",{path:"/rptimeEmpLogSet",template:r,filters:[t],events:{dataReceived:function(e){}}})},onChangeDurationAbsence:function(){var e=sap.ui.getCore().byId("ld_tp_beguz_leave").getDateValue(),t=sap.ui.getCore().byId("ld_tp_enduz_leave"),a=sap.ui.getCore().byId("ld_inp_duration_leave").getValue();if(e&&a){var r=new Date(e.getTime()+36e5*a);t.setDateValue(r)}},onCloseTimeOverviewDialogViaButton:function(e){var a=this.onCloseTimeOverviewDialog(e);a?t.openConfirmDialog("{i18n>areyousure}",a,"{i18n>discard}",this.closeTimeOverviewDialog.bind(this),null,this._controller):this._controller._oTimesOverviewDialog.close()},onCloseTimeOverviewDialog:function(){var e;if(this.ShiftDirty||this.AbsDirty||this.OvertimeDirty||this.CicoDirty||this.AllowDirty){var t=this._controller.getView().getModel("i18n").getResourceBundle();this.ShiftDirty&&(e=t.getText("newchangeshift")),this.AbsDirty&&(e=t.getText("newchangesleave")),this.OvertimeDirty&&(e=t.getText("newchangesovertime")),this.CicoDirty&&(e=t.getText("newchangescico")),this.AllowDirty&&(e=t.getText("newchangesallowance"))}return e},destroyTimeOverviewPopup:function(){this._controller._oTimesOverviewDialog.destroy(),this._controller._oTimesOverviewDialog=null,this._controller.ShiftDirty=!1,this._controller.AbsDirty=!1,this._controller.OvertimeDirty=!1,this._controller.CicoDirty=!1,this._controller.AllowDirty=!1},onChangeTimeOverviewDate:function(){var e=sap.ui.getCore().byId("ld_dp_currentDate"),t=e.getDateValue();t.setHours(12),e.setDateValue(t),e.setValueState(sap.ui.core.ValueState.None);var a=sap.ui.getCore().byId("inp_calendarWeek"),r=new Array(7);r[0]=this._controller.getResourceBundleText("sunday"),r[1]=this._controller.getResourceBundleText("monday"),r[2]=this._controller.getResourceBundleText("tuesday"),r[3]=this._controller.getResourceBundleText("wednesday"),r[4]=this._controller.getResourceBundleText("thursday"),r[5]=this._controller.getResourceBundleText("friday"),r[6]=this._controller.getResourceBundleText("saturday");var i=r[t.getDay()],s=new Date(t.getTime());s.setUTCDate(s.getUTCDate()+4-(s.getUTCDay()||7));var o=new Date(Date.UTC(s.getUTCFullYear(),0,1)),l="KW "+Math.ceil((s-o)/864e5/7)+" - "+i;a.setValue(l),sap.ui.getCore().byId("ld_dp_date").setValueState(sap.ui.core.ValueState.None),this.clearCicoInput(),sap.ui.getCore().byId("ld_dp_begda_leave").setValueState(sap.ui.core.ValueState.None),sap.ui.getCore().byId("ld_dp_endda_leave").setValueState(sap.ui.core.ValueState.None),sap.ui.getCore().byId("ld_dp_begda_overtime").setValueState(sap.ui.core.ValueState.None),sap.ui.getCore().byId("ld_dp_endda_overtime").setValueState(sap.ui.core.ValueState.None),sap.ui.getCore().byId("ld_select_subty_reason").getVisible()&&(sap.ui.getCore().byId("ld_select_subty_reason").setSelectedKey(""),sap.ui.getCore().byId("ld_inp_subty_reason").setValue("")),this.changeDatesInModel(e.getDateValue(),e.getSecondDateValue()),this.getEmpShift(),this.onCicoEmployeeChange(),this.fillLeaveTable(),this.fillOvertimeTable(),this.getAllowanceSet(),this.getTimeTransfer()},changeDatesInModel:function(e,t){var a=this._controller.getView().getModel("TO");a.setProperty("/TO_CICO/ld_dp_date",e),a.setProperty("/TO_ABS/ld_dp_begda_leave",e),a.setProperty("/TO_ABS/ld_dp_endda_leave",t),a.setProperty("/TO_OVERT/ld_dp_begda_overtime",e),a.setProperty("/TO_OVERT/ld_dp_endda_overtime",t),a.setProperty("/TO_TIMET/ld_dp_begda_timetransfer",e),a.setProperty("/TO_TIMET/ld_dp_endda_timetransfer",t),a.setProperty("/TO_ALLOW/dateValue",e)},onTimesOverviewOneDayFor:function(){var e=new Date,t=sap.ui.getCore().byId("ld_dp_currentDate"),a=t.getDateValue();e.setTime(a.getTime()+864e5),e.setHours(12),t.setDateValue(e),t.setValueState(sap.ui.core.ValueState.None),t.fireChange(),sap.ui.getCore().byId("ld_dp_date").setDateValue(e),sap.ui.getCore().byId("ld_dp_date").setValueState(sap.ui.core.ValueState.None),this.clearCicoInput(),sap.ui.getCore().byId("ld_dp_begda_leave").setDateValue(e),sap.ui.getCore().byId("ld_dp_endda_leave").setDateValue(e),sap.ui.getCore().byId("ld_dp_begda_leave").setValueState(sap.ui.core.ValueState.None),sap.ui.getCore().byId("ld_dp_endda_leave").setValueState(sap.ui.core.ValueState.None),sap.ui.getCore().byId("ld_dp_begda_overtime").setDateValue(e),sap.ui.getCore().byId("ld_dp_endda_overtime").setDateValue(e),sap.ui.getCore().byId("ld_dp_begda_overtime").setValueState(sap.ui.core.ValueState.None),sap.ui.getCore().byId("ld_dp_endda_overtime").setValueState(sap.ui.core.ValueState.None),sap.ui.getCore().byId("ld_select_subty_reason").getVisible()&&(sap.ui.getCore().byId("ld_select_subty_reason").setSelectedKey(""),sap.ui.getCore().byId("ld_inp_subty_reason").setValue("")),this.getEmpShift(),this.onCicoEmployeeChange(),this.fillLeaveTable(),this.fillOvertimeTable(),this.getAllowanceSet(),this.getTimeTransfer()},onTimesOverviewOneDayBack:function(){var e=new Date,t=sap.ui.getCore().byId("ld_dp_currentDate"),a=t.getDateValue();e.setTime(a.getTime()-864e5),e.setHours(12),t.setDateValue(e),t.setValueState(sap.ui.core.ValueState.None),t.fireChange(),sap.ui.getCore().byId("ld_dp_date").setDateValue(e),sap.ui.getCore().byId("ld_dp_date").setValueState(sap.ui.core.ValueState.None),this.clearCicoInput(),sap.ui.getCore().byId("ld_dp_begda_leave").setDateValue(e),sap.ui.getCore().byId("ld_dp_endda_leave").setDateValue(e),sap.ui.getCore().byId("ld_dp_begda_leave").setValueState(sap.ui.core.ValueState.None),sap.ui.getCore().byId("ld_dp_endda_leave").setValueState(sap.ui.core.ValueState.None),sap.ui.getCore().byId("ld_dp_begda_overtime").setDateValue(e),sap.ui.getCore().byId("ld_dp_endda_overtime").setDateValue(e),sap.ui.getCore().byId("ld_dp_begda_overtime").setValueState(sap.ui.core.ValueState.None),sap.ui.getCore().byId("ld_dp_endda_overtime").setValueState(sap.ui.core.ValueState.None),sap.ui.getCore().byId("ld_select_subty_reason").getVisible()&&(sap.ui.getCore().byId("ld_select_subty_reason").setSelectedKey(""),sap.ui.getCore().byId("ld_inp_subty_reason").setValue("")),this.getEmpShift(),this.onCicoEmployeeChange(),this.fillLeaveTable(),this.fillOvertimeTable(),this.getAllowanceSet(),this.getTimeTransfer()},onLeaveInputChange:function(e){e.getSource().setValueState(sap.ui.core.ValueState.None),this.fillLeaveTable()},onLeaveSubtyChange:function(e){var t=sap.ui.getCore().byId("ld_tp_beguz_leave"),a=sap.ui.getCore().byId("ld_tp_enduz_leave"),r=sap.ui.getCore().byId("ld_inp_duration_leave");if(e.getParameter("selectedItem").getKey())var i=e.getParameter("selectedItem").getAggregation("customData")[0].getProperty("value");else i=!0;this.AbsDirty=!0,!1!==i?(t.setVisible(!1),a.setVisible(!1),sap.ui.getCore().byId("cl_txt_blanktimes")&&sap.ui.getCore().byId("cl_txt_blanktimes").setVisible(!1),r&&r.setVisible(!1)):(sap.ui.getCore().byId("cl_txt_blanktimes")&&sap.ui.getCore().byId("cl_txt_blanktimes").setVisible(!0),t.setVisible(!0),t.setModel(this._controller.getView().getModel()),a.setVisible(!0),r&&r.setVisible(!0))},checkCommentAbsenceReason:function(){var e=sap.ui.getCore().byId("ld_select_subty_reason").getSelectedItem().getBindingContext().getObject();sap.ui.getCore().byId("ld_inp_subty_reason").setRequired(e.TextRequired)},onInputChangeAbsBeguz:function(e){""!==e.getParameter("value")?sap.ui.getCore().byId("ld_inp_duration_leave").setEditable(!0):(sap.ui.getCore().byId("ld_inp_duration_leave").setEditable(!1),sap.ui.getCore().byId("ld_inp_duration_leave").setValue()),this.onChangeDurationAbsence()},onUpdateLeave:function(){var e,t=sap.ui.getCore().byId("ld_tbl_leaveoverview"),a=sap.ui.getCore().byId("ld_dp_begda_leave").getDateValue(),r=sap.ui.getCore().byId("ld_dp_endda_leave").getDateValue(),i=sap.ui.getCore().byId("ld_select_subty_leave"),s=sap.ui.getCore().byId("chb_absence_day"),o=i.getSelectedItem().getCustomData()[1].getProperty("value"),l=sap.ui.getCore().byId("ld_select_emp"),n=sap.ui.core.format.DateFormat.getDateInstance({pattern:"PTHH\'H\'mm\'M\'ss\'S\'"});if(""==!i.getSelectedKey){sap.ui.getCore().byId("chb_sprps")&&(e=sap.ui.getCore().byId("chb_sprps").getSelected());var u=sap.ui.getCore().byId("ld_tp_beguz_leave");if(u.getVisible())var d=u.getDateValue();var g=sap.ui.getCore().byId("ld_tp_enduz_leave");if(g.getVisible())var p=g.getDateValue();var c=sap.ui.getCore().byId("ld_select_subty_reason"),_=sap.ui.getCore().byId("ld_inp_subty_reason");if(1==c.getVisible()&&1==_.getVisible())var y=c.getSelectedKey(),m=_.getValue();var b=t.getContextByIndex(t.getSelectedIndex());a.setHours(12),r.setHours(12);var S=s.getSelected(),h={};h.CommentKey=y,h.Comment=m,h.EmpId=l.getSelectedItem().getKey(),h.Subty=i.getSelectedItem().getKey(),h.Infty=o,h.Subty=i.getSelectedKey(),h.UnitKey=b.getProperty("UnitKey"),h.Begda=a,h.Endda=r,h.PrevDay=S,u.getVisible()&&(h.Beguz=n.format(new Date(d))),g.getVisible()&&(h.Enduz=n.format(new Date(p))),h.Sprps=e,h.Seqnr=b.getProperty("Seqnr"),this._controller.getView().getModel().update(b.sPath,h,{success:function(){this.updateLeaveSuccess(),t.setBusy(!1)}.bind(this),error:function(e){this._controller.createError(e),t.setBusy(!1)}.bind(this)})}},updateLeaveSuccess:function(){this.clearLeaveInput();var e=this._controller.getView().getModel("i18n").getResourceBundle().getText("leaveupdated");this.onEmployeeSelect(),this.AbsDirty=!1,this.toggleEnabledButtons("leave",-1),a.show(e)},clearLeaveInput:function(){var e=sap.ui.getCore().byId("ld_tp_beguz_leave"),t=sap.ui.getCore().byId("ld_tp_enduz_leave"),a=sap.ui.getCore().byId("ld_inp_duration_leave"),r=sap.ui.getCore().byId("ld_select_subty_leave"),i=sap.ui.getCore().byId("ld_select_subty_reason"),s=sap.ui.getCore().byId("ld_inp_subty_reason");(e.setValue(),e.setVisible(!1),t.setValue(),t.setVisible(!1),a.setValue(),a.setVisible(!1),r.setSelectedKey(0),r.setEnabled(!0),1==i.getVisible()&&1==s.getVisible()&&(i.setSelectedKey(""),s.setValue()),this.AbsDirty=!1,sap.ui.getCore().byId("chb_sprps"))&&sap.ui.getCore().byId("chb_sprps").setSelected(!1)},onCancelLeaveOverview:function(){this.clearLeaveInput(),this.toggleEnabledButtons("leave",-1),this.clearAbsPresInput(),sap.ui.getCore().byId("ld_tbl_leaveoverview").setSelectedIndex(-1)},clearAbsPresInput:function(){var e=sap.ui.getCore().byId("ld_dp_begda_leave");sap.ui.getCore().byId("ld_dp_currentDate")&&e.setDateValue(sap.ui.getCore().byId("ld_dp_currentDate").getDateValue()),sap.ui.getCore().byId("ld_dp_endda_leave").setDateValue(sap.ui.getCore().byId("ld_dp_currentDate").getDateValue());var t=sap.ui.getCore().byId("ld_tp_beguz_leave");t&&t.setValue();var a=sap.ui.getCore().byId("ld_tp_enduz_leave");a&&a.setValue();var r=sap.ui.getCore().byId("ld_inp_duration_leave");r&&r.setValue(),sap.ui.getCore().byId("ld_select_subty_leave").setSelectedIndex(0),sap.ui.getCore().byId("chb_sprps")&&sap.ui.getCore().byId("chb_sprps").setSelected(!1)},onLeaveEntrySelect:function(e){this.AbsDirty=!0;var a=sap.ui.getCore().byId("ld_tbl_leaveoverview").getFirstVisibleRow(),r=sap.ui.getCore().byId("ld_select_subty_leave");if(-1!=e.getSource().getSelectedIndex()){r.setEnabled(!1);var i=sap.ui.getCore().byId("ld_dp_begda_leave"),s=sap.ui.getCore().byId("ld_dp_endda_leave"),o=sap.ui.getCore().byId("ld_tp_beguz_leave"),l=sap.ui.getCore().byId("ld_tp_enduz_leave"),n=sap.ui.getCore().byId("ld_select_subty_leave"),u=sap.ui.getCore().byId("chb_absence_day"),d=sap.ui.getCore().byId("chb_sprps"),g=e.getSource().getSelectedIndex(),p=sap.ui.getCore().byId("ld_inp_duration_leave"),c=sap.ui.getCore().byId("ld_select_subty_reason"),_=sap.ui.getCore().byId("ld_inp_subty_reason");0!=a&&(g-=a);var y=e.getSource().getRows()[g].getCells()[1].getText(),m=e.getSource().getRows()[g].getCells()[2].getText(),b=e.getSource().getRows()[g].getCells()[3].getText(),S=e.getSource().getRows()[g].getCells()[3].getText(),h=e.getSource().getRows()[g].getCells()[4].getText(),I=e.getSource().getRows()[g].getCells()[5].getText();if(1==c.getVisible()&&1==_.getVisible()){var v=e.getSource().getRows()[g].getBindingContext().getObject().CommentKey,C=e.getSource().getRows()[g].getBindingContext().getObject().Comment;c.setSelectedKey(v),_.setValue(C)}i.setValue(y),s.setValue(m),o.setValue(S),l.setValue(h),"Ja"==I?d.setSelected(!0):d.setSelected(!1),"Ja"==b?u.setSelected(!0):u.setSelected(!1);var V=e.getSource().getRows()[g].getBindingContext().getProperty("Subty");n.setSelectedKey(V),t.getCustomDataValue(n.getSelectedItem().getCustomData(),"ganztaegig")||(o.setVisible(!0),l.setVisible(!0),p.setVisible(!0))}else this.clearLeaveInput();this.toggleEnabledButtons("leave",e.getSource().getSelectedIndex())},onSaveLeave:function(){var e,a=sap.ui.getCore().byId("ld_tbl_leaveoverview"),r=sap.ui.getCore().byId("ld_dp_begda_leave").getDateValue(),i=sap.ui.getCore().byId("ld_dp_endda_leave").getDateValue(),s=sap.ui.getCore().byId("ld_select_subty_leave"),o=sap.ui.getCore().byId("ld_select_emp"),l=sap.ui.getCore().byId("ld_select_subty_reason"),n=sap.ui.getCore().byId("ld_inp_subty_reason"),u=sap.ui.getCore().byId("chb_absence_day");if(s.setValueState(sap.ui.core.ValueState.None),l.setValueState(sap.ui.core.ValueState.None),n.setValueState(sap.ui.core.ValueState.None),e=this._oLeaveDialog?t.getCustomDataValue(this._controller._oLeaveDialog.getAggregation("customData"),"UnitKey"):t.getCustomDataValue(this._controller._oTimesOverviewDialog.getAggregation("customData"),"UnitKey"),!s.getSelectedKey()||l.getVisible()&&s.getSelectedItem().getAggregation("customData")[2].getProperty("value")&&!l.getSelectedKey()||n.getRequired()&&""==n.getValue())s.getSelectedKey()||s.setValueState(sap.ui.core.ValueState.Error),l.getVisible()&&(l.getSelectedKey()||l.setValueState(sap.ui.core.ValueState.Error),n.getRequired()&&""==n.getValue()&&n.setValueState(sap.ui.core.ValueState.Error));else{a.setBusy(!0);var d,g=s.getSelectedItem().getCustomData()[1].getProperty("value");sap.ui.getCore().byId("chb_sprps")&&(d=sap.ui.getCore().byId("chb_sprps").getSelected()),d=1==d;var p=sap.ui.getCore().byId("ld_tp_beguz_leave");if(1==p.getVisible())var c=p.getDateValue();var _=sap.ui.getCore().byId("ld_tp_enduz_leave");if(1==_.getVisible())var y=_.getDateValue();if(1==l.getVisible()&&1==n.getVisible())var m=l.getSelectedKey(),b=n.getValue();if(r&&i){var S=s.getSelectedItem().getKey(),h=o.getSelectedItem().getKey(),I={},v=sap.ui.core.format.DateFormat.getDateInstance({pattern:"PTHH\'H\'mm\'M\'ss\'S\'"}),C=u.getSelected();I.CommentKey=m,I.Comment=b,I.Infty=g,I.Subty=S,I.EmpId=h,I.Sprps=d,I.Begda=new Date(r.setHours(12)),I.Endda=new Date(i.setHours(12)),I.PrevDay=C,p.getDateValue()&&(I.Beguz=v.format(new Date(p.getDateValue()))),_.getDateValue()&&(I.Enduz=v.format(new Date(_.getDateValue()))),I.UnitKey=e,this._controller.getView().getModel().create("/absenceSet",I,{success:function(e,t){a.setBusy(!1),this.createSuccess(e,t)}.bind(this),error:function(e){a.setBusy(!1);var r=JSON.parse(e.responseText).error.innererror.errordetails;"warning"===r[0].severity?t.openConfirmDialog("{i18n>areyousure}",r[0].message,"{i18n>yes}",this.overwriteLeave.bind(this),null,this._controller):this.createError(e)}.bind(this)})}else a.setBusy(!1),r?sap.ui.getCore().byId("ld_dp_begda_leave").setValueState(sap.ui.core.ValueState.None):sap.ui.getCore().byId("ld_dp_begda_leave").setValueState(sap.ui.core.ValueState.Error),i?sap.ui.getCore().byId("ld_dp_endda_leave").setValueState(sap.ui.core.ValueState.None):sap.ui.getCore().byId("ld_dp_endda_leave").setValueState(sap.ui.core.ValueState.Error),c?sap.ui.getCore().byId("ld_tp_beguz_leave").setValueState(sap.ui.core.ValueState.None):sap.ui.getCore().byId("ld_tp_beguz_leave").setValueState(sap.ui.core.ValueState.Error),y?sap.ui.getCore().byId("ld_tp_enduz_leave").setValueState(sap.ui.core.ValueState.None):sap.ui.getCore().byId("ld_tp_enduz_leave").setValueState(sap.ui.core.ValueState.Error)}},overwriteLeave:function(){var e,a=sap.ui.getCore().byId("ld_tbl_leaveoverview"),r=sap.ui.getCore().byId("ld_dp_begda_leave").getDateValue(),i=sap.ui.getCore().byId("ld_dp_endda_leave").getDateValue(),s=sap.ui.getCore().byId("ld_select_subty_leave"),o=sap.ui.getCore().byId("ld_select_emp"),l=sap.ui.getCore().byId("chb_absence_day");s.setValueState(sap.ui.core.ValueState.None);var n=l.getSelected();if(e=this._oLeaveDialog?t.getCustomDataValue(this._controller._oLeaveDialog.getAggregation("customData"),"UnitKey"):t.getCustomDataValue(this._controller._oTimesOverviewDialog.getAggregation("customData"),"UnitKey"),s.getSelectedKey()){a.setBusy(!0);var u,d=s.getSelectedItem().getCustomData()[1].getProperty("value");sap.ui.getCore().byId("chb_sprps")&&(u=sap.ui.getCore().byId("chb_sprps").getSelected()),u=1==u;var g=sap.ui.getCore().byId("ld_tp_beguz_leave");if(1==g.getVisible())g.getDateValue();var p=sap.ui.getCore().byId("ld_tp_enduz_leave");if(1==p.getVisible())p.getDateValue();var c=sap.ui.getCore().byId("ld_select_subty_reason"),_=sap.ui.getCore().byId("ld_inp_subty_reason");if(1==c.getVisible()&&1==_.getVisible())var y=c.getSelectedKey(),m=_.getValue();if(r&&i){var b=s.getSelectedItem().getKey(),S=o.getSelectedItem().getKey(),h={},I=sap.ui.core.format.DateFormat.getDateInstance({pattern:"PTHH\'H\'mm\'M\'ss\'S\'"});h.CommentKey=y,h.Comment=m,h.Infty=d,h.Subty=b,h.EmpId=S,h.Sprps=u,h.Begda=r,h.Endda=i,h.PrevDay=n,g.getDateValue()&&(h.Beguz=I.format(new Date(g.getDateValue()))),p.getDateValue()&&(h.Enduz=I.format(new Date(p.getDateValue()))),h.Overwrite=!0,h.UnitKey=e,this._controller.getView().getModel().create("/absenceSet",h,{success:function(e,t){a.setBusy(!1),this.createSuccess(e,t)}.bind(this),error:function(e){a.setBusy(!1);var r=JSON.parse(e.responseText).error.innererror.errordetails;"warning"===r[0].severity?t.openConfirmDialog("{i18n>areyousure}",r[0].message,"{i18n>yes}",this.overwriteLeave.bind(this),null,this):this.createError(e)}.bind(this)})}}else s.setValueState(sap.ui.core.ValueState.Error)},onCancelLeave:function(){-1!==sap.ui.getCore().byId("ld_tbl_leaveoverview").getSelectedIndex()?t.openConfirmDialog("{i18n>deleteleavesure}","{i18n>areyousure}","{i18n>btndeleteleave}",this._controller.cancelLeave,null,this._controller):t.openNoSelectedEntryDialog("{i18n>noselectedEntry}","{i18n>selectEntry}",null,this)},createSuccess:function(e,r){var i=sap.ui.getCore().byId("ld_select_emp").getSelectedItem(),s=i.getKey(),o=i.getCustomData(),l=t.getCustomDataValue(o,"UnitKey"),n=new sap.ui.model.Filter("EmpId",sap.ui.model.FilterOperator.EQ,s),u=new sap.ui.model.Filter("UnitKey",sap.ui.model.FilterOperator.EQ,l),d=this._controller.getView().getModel("i18n").getResourceBundle().getText("leavecreated");this.fillLeaveTable(),this.clearAbsPresInput(),this.AbsDirty=!1,a.show(d);var g=sap.ui.getCore().byId("ld_select_subty_leave"),p=sap.ui.getCore().byId("ld_select_subty_reason"),c=sap.ui.getCore().byId("ld_inp_subty_reason");p.setSelectedKey(""),c.setValue(),g.getBinding("items").filter([n,u])},onOwnShiftTimeSelect:function(e){var t=sap.ui.getCore().byId("ld_dp_comdat"),a=sap.ui.getCore().byId("ld_tp_comuzeit"),r=sap.ui.core.format.DateFormat.getDateInstance({pattern:"HH:mm:ss"});if(this.toggleEnabledShiftInput(e.getParameter("selected")),t.getVisible()){var i=new Date;t.setDateValue(i),a.setValue(r.format(i))}},onTimesOverviewShiftVoluntary:function(){this.ShiftDirty=!0},onNewShiftSelect:function(){var e=sap.ui.getCore().byId("ld_inp_integratedOT"),t=sap.ui.getCore().byId("ld_select_shift");t.setValueState(sap.ui.core.ValueState.None);var a=t.getSelectedItem();t.setSelectedItem(a);var r=a.getBindingContext().getObject().OtShift;e.setValue(r);var i=t.getSelectedItem().getBindingContext().getObject(),s=i.Beguz+"0",o=i.Enduz+"0",l=sap.ui.getCore().byId("ld_tp_beguz_shift"),n=sap.ui.getCore().byId("ld_tp_enduz_shift"),u=sap.ui.getCore().byId("ld_dp_comdat"),d=sap.ui.getCore().byId("ld_tp_comuzeit"),g=sap.ui.core.format.DateFormat.getDateInstance({pattern:"HH:mm:ss"});if(this.ShiftDirty=!0,l.setValue(s),n.setValue(o),u.getVisible()){var p=new Date;u.setDateValue(p),d.setValue(g.format(p))}},onInputChangeShift:function(e){this.onInputChange(e),this.ShiftDirty=!0},onModifyShiftChangeOverview:function(){var e=sap.ui.getCore().byId("pnl_shift");e.setBusy(!0);var t=sap.ui.getCore().byId("btn_shiftChangeCancel"),a=sap.ui.getCore().byId("to_sf_shift").getBindingContext().getObject(),r=sap.ui.getCore().byId("ld_select_shift"),i=this._controller.getView().getModel(),s=sap.ui.getCore().byId("to_shift_select_tprogclass"),o=sap.ui.getCore().byId("to_shift_select_subtype"),l=r.getSelectedItem().getKey(),n=sap.ui.core.format.DateFormat.getDateInstance({pattern:"yyyy-MM-ddTHH:mm:ss"});if("dummy"===l)return r.setValueState(sap.ui.core.ValueState.Error),void e.setBusy(!1);if(r.setValueState(sap.ui.core.ValueState.None),o.getVisible()){if("00"===o.getSelectedKey()&&a.EmpId.match("^00"))return o.setValueState(sap.ui.core.ValueState.Error),void e.setBusy(!1);o.setValueState(sap.ui.core.ValueState.None)}if(s.getVisible()){if(""===s.getSelectedItem().getKey())return s.setValueState(sap.ui.core.ValueState.Error),void e.setBusy(!1);s.setValueState(sap.ui.core.ValueState.None)}var u=i.createKey("/substitutionSet",{Empid:a.Empid,Tprog:"",ShiftDate:n.format(a.ShiftDate),SubstTprog:a.SubstTprog,SubstSubty:a.SubstSubty});i.remove(u,{success:function(e){t.setEnabled(!1),this.onSaveShiftChangeOverview()}.bind(this),error:function(e){this.createError(e)}.bind(this)})},onCancelShiftChangeOverview:function(){sap.ui.getCore().byId("btn_shiftChangeCancel").setEnabled(!1);var e=sap.ui.getCore().byId("to_sf_shift").getBindingContext().getObject(),t=this._controller.getView().getModel(),a=t.createKey("/substitutionSet",{Empid:e.Empid,Tprog:"",ShiftDate:e.ShiftDate,SubstTprog:e.SubstTprog,SubstSubty:e.SubstSubty});t.remove(a,{success:this.deleteEmpShiftSuccess.bind(this),error:function(e){this.createError(e)}.bind(this)})},deleteEmpShiftSuccess:function(){this.clearShiftInput(),this.getEmpShift(),sap.ui.getCore().byId("btn_shiftChangeCancel").setEnabled(!1),a.show(this._controller.getResourceBundleText("shiftchangedeleted"))},clearShiftInput:function(){var e=this._controller.getView(),t=sap.ui.getCore().byId("chb_ownShiftTimes"),a=sap.ui.getCore().byId("ld_select_shift"),r=sap.ui.getCore().byId("chb_voluntary"),i=sap.ui.getCore().byId("to_shift_select_tprogclass"),s=sap.ui.getCore().byId("to_shift_select_subtype");sap.ui.getCore().byId("btn_shiftChangeModify").setEnabled(!1),t.setSelected(!1),a.setEnabled(!0),a.clearSelection(),a.setValue(),e.getModel("TO").setProperty("/TO_SHIFT/break1",!1),e.getModel("TO").setProperty("/TO_SHIFT/break2",!1),r.setSelected(!1),i.setVisible(!1),i.setSelectedIndex(0),i.setEnabled(!0),s.setSelectedIndex(0)},onSaveShiftChangeOverview:function(){var e=this._controller.getView().getModel(),t=sap.ui.getCore().byId("pnl_shift");t.setBusy(!0);var a=sap.ui.core.format.DateFormat.getDateInstance({pattern:"yyyy-MM-ddTHH:mm:ss"}),r=sap.ui.getCore().byId("chb_voluntary"),i=sap.ui.getCore().byId("ld_select_emp"),s=sap.ui.getCore().byId("chb_ownShiftTimes"),o=sap.ui.getCore().byId("ld_select_shift"),l=sap.ui.getCore().byId("ld_tp_beguz_shift"),n=sap.ui.getCore().byId("ld_tp_enduz_shift"),u=sap.ui.getCore().byId("to_shift_select_subtype"),d=sap.ui.getCore().byId("to_shift_select_tprogclass"),g=sap.ui.core.format.DateFormat.getDateInstance({pattern:"PTHH\'H\'mm\'M\'ss\'S\'"}),p=sap.ui.getCore().byId("ld_dp_comdat"),c=sap.ui.getCore().byId("ld_tp_comuzeit"),_=this._controller.getView().getModel("TO").getProperty("/TO_SHIFT/SelectedShiftDate"),y=i.getSelectedItem().getKey(),m=a.format(_),b=s.getSelected(),S=n.getValue(),h=l.getValue(),I=o.getSelectedItem().getKey();if("dummy"===I)return o.setValueState(sap.ui.core.ValueState.Error),void t.setBusy(!1);if(o.setValueState(sap.ui.core.ValueState.None),u.getVisible()){var v=u.getSelectedKey();if("00"===v&&y.match("^00"))return u.setValueState(sap.ui.core.ValueState.Error),void t.setBusy(!1);u.setValueState(sap.ui.core.ValueState.None)}if(d.getVisible()){var C=d.getSelectedItem().getKey();if(""===C)return d.setValueState(sap.ui.core.ValueState.Error),void t.setBusy(!1);d.setValueState(sap.ui.core.ValueState.None)}var V=sap.ui.getCore().byId("ld_tp_beguz_break1"),f=sap.ui.getCore().byId("ld_tp_enduz_break1"),T=sap.ui.getCore().byId("ld_tp_beguz_break2"),w=sap.ui.getCore().byId("ld_tp_enduz_break2"),D=this._controller.getView().getModel().getProperty("Varia",o.getSelectedItem().getBindingContext());if(!b||""!==h&&""!==S){!0===b&&(I="****");var E={};if(E.Empid=y,E.ShiftDate=m,E.SubstTprog=I,l.getDateValue()&&(E.SubstBeguz=g.format(l.getDateValue())),n.getDateValue()&&(E.SubstEnduz=g.format(n.getDateValue())),V.getDateValue()&&(E.SubstBeguzBr1=g.format(V.getDateValue())),f.getDateValue()&&(E.SubstEnduzBr1=g.format(f.getDateValue())),T.getDateValue()&&(E.SubstBeguzBr2=g.format(T.getDateValue())),w.getDateValue()&&(E.SubstEnduzBr2=g.format(w.getDateValue())),E.SubstOwnSh=b,E.SubstTdtype=this._controller.getView().getModel().getProperty("ShiftTdtype",o.getSelectedItem().getBindingContext()),null===E.SubstTdtype&&(E.SubstTdtype=""),r.getVisible()?E.SubstVolSh=r.getSelected():E.SubstVolSh=!1,E.SubstVtart=v,E.SubstVaria=D,d.getVisible()&&(E.SubstTpkla=C.toString()),p.getVisible()){var O=p.getDateValue(),B=a.format(O);E.Comdate=B,c.getDateValue()&&(E.Comuzeit=g.format(c.getDateValue()))}e.create("/substitutionSet",E,{refreshAfterChange:!0,success:this.createEmpShiftSuccess.bind(this),error:function(e){this.createError(e),t.setBusy(!1)}.bind(this)})}else""===h&&l.setValueState(sap.ui.core.ValueState.Error),""===S&&n.setValueState(sap.ui.core.ValueState.Error),t.setBusy(!1)},createEmpShiftSuccess:function(){var e=sap.ui.getCore().byId("ld_select_shift");"****"===e.getSelectedKey()&&e.removeItem(e.getSelectedIndex());var t=sap.ui.getCore().byId("pnl_shift");sap.ui.getCore().byId("btn_shiftChangeCancel").setEnabled(!0),this.getEmpShift(),this.ShiftDirty=!1,t.setBusy(!1),a.show(this._controller.getResourceBundleText("shiftchangecreated"))},onCicoTimeChange:function(e){var t=e.getParameter("id");sap.ui.getCore().byId(t).setValueState(sap.ui.core.ValueState.None),this.CicoDirty=!0},onInputChangeCico:function(e){this.onInputChange(e),this.CicoDirty=!0},onAufnrChange:function(e){this.CicoDirty=!0;var t=this._controller.getView().getModel();if(""!=e.getParameter("newValue")){var a=e.getSource().getValue().split(" ")[0];t.read("/matNrSet(\'"+a+"\')",{success:this.matNrSuccess.bind(this),error:function(e){}.bind(this)})}else sap.ui.getCore().byId("ld_inp_matnr").setEnabled(!0),sap.ui.getCore().byId("ld_inp_matnr").setValue()},matNrSuccess:function(e){sap.ui.getCore().byId("ld_inp_aufnr").setValueState(sap.ui.core.ValueState.None),sap.ui.getCore().byId("ld_inp_matnr").setValue(e.Matnr+" - "+e.Description)},onMatnrChange:function(){this.CicoDirty=!0},onCicoDirty:function(){this.CicoDirty=!0},onSaveCico:function(){var e=this._controller.getView().getModel(),a=sap.ui.getCore().byId("ld_tbl_cicooverview");a.setBusy(!0);var r,i=sap.ui.getCore().byId("ld_select_emp"),s=sap.ui.getCore().byId("ld_dp_date"),o=sap.ui.getCore().byId("ld_tp_uz"),l=sap.ui.getCore().byId("ld_select_timeevent"),n=sap.ui.getCore().byId("chb_cico_day");if(r=this._oCicoDialog?t.getCustomDataValue(this._oCicoDialog.getAggregation("customData"),"UnitKey"):this._controller.getView().getModel("TO").getProperty("/UnitKey"),sap.ui.getCore().byId("ld_inp_aufnr"))var u=sap.ui.getCore().byId("ld_inp_aufnr").getValue().split(" ")[0],d=sap.ui.getCore().byId("ld_inp_matnr").getValue().split(" ")[0],g=sap.ui.getCore().byId("ld_inp_zulage").getValue(),p=sap.ui.getCore().byId("ld_inp_kostenst").getValue().split(" ")[0];var c=i.getSelectedItem().getKey(),_=s.getDateValue(),y=o.getDateValue(),m=l.getSelectedItem().getKey(),b=sap.ui.core.format.DateFormat.getDateInstance({pattern:"yyyy-MM-ddTHH:mm:ss"}),S=sap.ui.core.format.DateFormat.getDateInstance({pattern:"PTHH\'H\'mm\'M\'ss\'S\'"}),h=b.format(_),I=S.format(y),v=n.getSelected();if(_&&y){var C={};C.EmpId=c,C.Ldate=h,C.Ltime=I,C.TimeeventTy=m,C.Aufnr=u,C.Matnr=d,C.Zulage=g,C.Kostenst=p,C.UnitKey=r,C.Prev=v,e.create("/timeEventNSet",C,{success:this.createCicoSuccess.bind(this),error:function(e){this.createError(e),a.setBusy(!1)}.bind(this)})}else a.setBusy(!1),_?s.setValueState(sap.ui.core.ValueState.None):s.setValueState(sap.ui.core.ValueState.Error),y?o.setValueState(sap.ui.core.ValueState.None):o.setValueState(sap.ui.core.ValueState.Error)},createCicoSuccess:function(){this.CicoDirty=!1,this.clearCicoInput();var e=this._controller.getView().getModel("i18n").getResourceBundle().getText("cicocreated");a.show(e),this.toggleEnabledButtons("cico",-1),this.onCicoEmployeeChange(),this.fillOvertimeTable()},onUpdateCico:function(){var e,a=this._controller.getView().getModel(),r=sap.ui.getCore().byId("ld_tbl_cicooverview"),i=sap.ui.getCore().byId("ld_select_emp"),s=sap.ui.getCore().byId("ld_dp_date"),o=sap.ui.getCore().byId("ld_tp_uz"),l=sap.ui.getCore().byId("ld_select_timeevent"),n=sap.ui.getCore().byId("chb_cico_day"),u=s.getDateValue(),d=o.getDateValue();if(e=this._oCicoDialog?t.getCustomDataValue(this._oCicoDialog.getAggregation("customData"),"UnitKey"):this._controller.getView().getModel("TO").getProperty("/UnitKey"),sap.ui.getCore().byId("ld_inp_aufnr")){var g=sap.ui.getCore().byId("ld_inp_aufnr").getValue().split(" ")[0],p=sap.ui.getCore().byId("ld_inp_matnr").getValue().split(" ")[0],c=sap.ui.getCore().byId("ld_inp_zulage").getValue(),_=sap.ui.getCore().byId("ld_inp_kostenst"),y=_.getValue();y=_.getValue().split(" ")[0]}var m=l.getSelectedItem().getKey(),b=sap.ui.core.format.DateFormat.getDateInstance({pattern:"yyyy-MM-ddTHH:mm:ss"}),S=sap.ui.core.format.DateFormat.getDateInstance({pattern:"PTHH\'H\'mm\'M\'ss\'S\'"}),h=b.format(u),I=S.format(new Date(d));if(u&&d){var v={};v.EmpId=i.getSelectedItem().getKey(),v.Ldate=h,v.Ltime=I,v.TimeeventTy=m,v.UnitKey=e,v.Prev=n.getSelected(),sap.ui.getCore().byId("ld_inp_aufnr")&&(v.Aufnr=g,v.Matnr=p,v.Zulage=c,v.Kostenst=y);var C="/"+r.getBinding().aKeys[r.getSelectedIndex()];a.update(C,v,{success:this.updateCicoSuccess.bind(this),error:function(e){this.createError(e),r.setBusy(!1)}.bind(this)})}else r.setBusy(!1),u?s.setValueState(sap.ui.core.ValueState.None):s.setValueState(sap.ui.core.ValueState.Error),d?o.setValueState(sap.ui.core.ValueState.None):o.setValueState(sap.ui.core.ValueState.Error)},updateCicoSuccess:function(){sap.ui.getCore().byId("ld_tbl_cicooverview").setBusy(!0),this.CicoDirty=!1;var e=this._controller.getView().getModel("i18n").getResourceBundle().getText("cicoupdated");a.show(e),this.clearCicoInput(),this.toggleEnabledButtons("cico",-1),this.onCicoEmployeeChange(),this.fillOvertimeTable()},onDeleteCico:function(){var e=sap.ui.getCore().byId("ld_tbl_cicooverview");e.setBusy(!0),-1!==e.getSelectedIndex()?t.openConfirmDialog("{i18n>deletecicosure}","{i18n>areyousure}","{i18n>deletecico}",this.deleteCico,null,this._controller):t.openNoSelectedEntryDialog("{i18n>noselectedEntry}","{i18n>selectEntry}",null,this._controller),e.setBusy(!1)},deleteCico:function(e){var t=sap.ui.getCore().byId("ld_tbl_cicooverview"),a=t.getContextByIndex(t.getSelectedIndex());e.getView().getModel().remove(a.sPath,{success:function(a,r){t.setBusy(!1),e.deleteCicoSuccess()},error:function(a){t.setBusy(!1),e.createError(a)}}),sap.ui.getCore().byId("ld_inp_aufnr")&&(sap.ui.getCore().byId("ld_inp_aufnr").setValue(),sap.ui.getCore().byId("ld_inp_matnr").setValue(),sap.ui.getCore().byId("ld_inp_zulage").setValue(),sap.ui.getCore().byId("ld_inp_kostenst").setValue())},deleteCicoSuccess:function(){var e=this._controller.getView().getModel("i18n").getResourceBundle().getText("cicodeleted");a.show(e);var t=sap.ui.getCore().byId("ld_tbl_cicooverview");this.onCicoEmployeeChange(),0==t.getBinding("rows").getLength()&&(sap.ui.getCore().byId("ld_tp_uz").setValue(),sap.ui.getCore().byId("chb_cico_day").setSelected(!1),this.toggleEnabledButtons("cico",-1)),this.fillOvertimeTable()},onCicoEntrySelect:function(e){if(-1!=e.getSource().getSelectedIndex()){var t=sap.ui.getCore().byId("ld_select_timeevent"),a=e.getSource().getContextByIndex(e.getSource().getSelectedIndex()),r=sap.ui.getCore().byId("ld_dp_date"),i=sap.ui.getCore().byId("ld_tp_uz"),s=60*new Date(0).getTimezoneOffset()*1e3,o=sap.ui.core.format.DateFormat.getDateInstance({pattern:"HH:mm:ss"});r.setDateValue(a.getProperty().Ldate),i.setValue(o.format(new Date(a.getProperty().Ltime.ms+s))),sap.ui.getCore().byId("chb_cico_day").setSelected(a.getProperty().Prev),sap.ui.getCore().byId("ld_inp_aufnr")&&(sap.ui.getCore().byId("ld_inp_aufnr").setValue(a.getProperty().Aufnr),sap.ui.getCore().byId("ld_inp_matnr").setValue(a.getProperty().Matnr),sap.ui.getCore().byId("ld_inp_zulage").setValue(a.getProperty().Zulage),sap.ui.getCore().byId("ld_inp_kostenst").setValue(a.getProperty().Kostenst));for(var l=0;l<t.getItems().length;l++)if(t.getItems()[l].getText()==a.getProperty().TimeeventText){t.setSelectedKey(t.getItems()[l].getKey());break}}else this.clearCicoInput();this.toggleEnabledButtons("cico",e.getSource().getSelectedIndex())},onCancelCicoOverview:function(){this.CicoDirty=!1,this.clearCicoInput()},clearCicoInput:function(){var e=sap.ui.getCore().byId("ld_tp_uz"),t=sap.ui.getCore().byId("chb_cico_day"),a=sap.ui.getCore().byId("ld_select_timeevent");if(sap.ui.getCore().byId("ld_tbl_cicooverview").clearSelection(),sap.ui.getCore().byId("ld_inp_aufnr")){var r=sap.ui.getCore().byId("ld_inp_aufnr"),i=sap.ui.getCore().byId("ld_inp_matnr"),s=sap.ui.getCore().byId("ld_inp_zulage"),o=sap.ui.getCore().byId("ld_inp_kostenst");r.setValue(),i.setValue(),s.setValue(),o.setValue()}e.setValue(),a.setSelectedIndex(0),a.setSelectedKey(0),t.setSelected(!1)},handleSuggestAufnr:function(e){var t=e.getParameter("suggestValue"),a=sap.ui.getCore().byId("ld_inp_matnr").getValue().split(" ")[0],r=[];t&&" "!=t&&r.push(new sap.ui.model.Filter("Aufnr",sap.ui.model.FilterOperator.StartsWith,t)),a&&r.push(new sap.ui.model.Filter("Matnr",sap.ui.model.FilterOperator.StartsWith,a)),e.getSource().getBinding("suggestionItems").filter(r)},handleSuggestKostenst:function(e){var t=e.getParameter("suggestValue"),a=[];t&&a.push(new sap.ui.model.Filter("Kostenst",sap.ui.model.FilterOperator.StartsWith,t)),e.getSource().getBinding("suggestionItems").filter(a)},handleSuggestMatnr:function(e){var t=e.getParameter("suggestValue"),a=[];t&&a.push(new sap.ui.model.Filter("Matnr",sap.ui.model.FilterOperator.StartsWith,t)),e.getSource().getBinding("suggestionItems").filter(a)},handleSuggestZulage:function(e){var t=e.getParameter("suggestValue"),a=sap.ui.getCore().byId("ld_dp_date").getDateValue();null!==a&&a.setHours(12);var r=[];t&&r.push(new sap.ui.model.Filter("Zulage",sap.ui.model.FilterOperator.StartsWith,t)),e.getSource().getBinding("suggestionItems").filter(r)},onOvertimeInputChange:function(e){var t=e.getParameter("id");sap.ui.getCore().byId(t).setValueState(sap.ui.core.ValueState.None),this.fillOvertimeTable()},onOvertimeDirty:function(){var e=sap.ui.getCore().byId("ld_select_comment_overtime");sap.ui.getCore().byId("ld_inp_comment_overtime").setRequired("SONST"==e.getSelectedKey()),this.OvertimeDirty=!0},onInputChangeOvertime:function(e){this.onInputChange(e),this.OvertimeDirty=!0},checkComment:function(){var e=sap.ui.getCore().byId("ld_select_comment_overtime");sap.ui.getCore().byId("ld_inp_comment_overtime").setRequired("SONST"==e.getSelectedKey())},onSaveOvertime:function(){var e=this._controller.getView().getModel(),a=sap.ui.getCore().byId("ld_tbl_overtimeoverview"),r=sap.ui.getCore().byId("ld_select_emp"),i=t.getCustomDataValue(r.getSelectedItem().getAggregation("customData"),"UnitKey"),s=sap.ui.getCore().byId("ld_dp_begda_overtime"),o=s.getDateValue(),l=sap.ui.getCore().byId("ld_dp_endda_overtime"),n=l.getDateValue(),u=sap.ui.getCore().byId("ld_tp_beguz_overtime"),d=u.getValue(),g=sap.ui.getCore().byId("ld_tp_enduz_overtime"),p=g.getValue(),c=sap.ui.getCore().byId("ld_select_subty_overtime"),_=sap.ui.getCore().byId("ld_select_versl_overtime"),y=sap.ui.getCore().byId("ld_select_comment_overtime"),m=sap.ui.getCore().byId("ld_inp_amount_overtime"),b=sap.ui.getCore().byId("ld_inp_comment_overtime"),S=m.getValue(),h=S.split("."),I=h[0],v=h[1];if(s.setValueState(sap.ui.core.ValueState.None),s.setValueStateText(""),l.setValueState(sap.ui.core.ValueState.None),l.setValueStateText(""),o&&n)if(S||d||p)if(m.setValueState(sap.ui.core.ValueState.None),u.setValueState(sap.ui.core.ValueState.None),g.setValueState(sap.ui.core.ValueState.None),y.getSelectedItem().getKey())if(y.setValueState(sap.ui.core.ValueState.None),b.getValue()||"SONST"!=y.getSelectedKey())if(b.setValueState(sap.ui.core.ValueState.None),String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return this.substr(!t||t<0?0:+t,e.length)==e}),v&&v.length<=2&&!I.match("^-")||!S||S&&!S.match("^-")){a.setBusy(!0);var C=c.getSelectedItem().getKey(),V=r.getSelectedItem().getKey(),f=_.getSelectedItem().getKey(),T=(o.getYear()+1900).toString(),w=(n.getYear()+1900).toString(),D=(o.getMonth()+1).toString();if(o<=n){1==D.toString().length&&(D="0"+D);var E=(n.getMonth()+1).toString();1==E.toString().length&&(E="0"+E);var O=o.getDate().toString();1==O.toString().length&&(O="0"+O);var B=n.getDate().toString();1==B.toString().length&&(B="0"+B);var P=y.getSelectedItem().getKey(),M={};M.EmpId=V,M.Subty=C,M.Versl=f,M.Begda=T.toString()+D.toString()+O.toString(),M.Endda=w.toString()+E.toString()+B.toString(),M.StartTime=d,M.EndTime=p,M.Amount=S,M.CommentKey=P,M.UnitKey=i,M.Comment=b.getValue(),e.create("/overtimeSet",M,{refreshAfterChange:!0,success:function(){this.createOvertimeSuccess(this),a.setBusy(!1)}.bind(this),error:function(e){this.createError(e),this.clearOvertimeInput(),this.toggleEnabledButtons("overtime",-1),a.setBusy(!1)}.bind(this)})}else s.setValueState(sap.ui.core.ValueState.Error),s.setValueStateText(this._controller.getResourceBundleText("errormsgdates")),l.setValueState(sap.ui.core.ValueState.Error),l.setValueStateText(this._controller.getResourceBundleText("errormsgdates"))}else S&&m.setValueState(sap.ui.core.ValueState.Error);else b.setValueState(sap.ui.core.ValueState.Error);else y.setValueState(sap.ui.core.ValueState.Error);else S?(u.setValueState(sap.ui.core.ValueState.Error),g.setValueState(sap.ui.core.ValueState.Error)):m.setValueState(sap.ui.core.ValueState.Error);else a.setBusy(!1),o?s.setValueState(sap.ui.core.ValueState.None):s.setValueState(sap.ui.core.ValueState.Error),n?l.setValueState(sap.ui.core.ValueState.None):l.setValueState(sap.ui.core.ValueState.Error),v&&v.length>2||I.match("^-")?m.setValueState(sap.ui.core.ValueState.Error):m.setValueState(sap.ui.core.ValueState.None)},createOvertimeSuccess:function(){this.clearOvertimeInput(),this.toggleEnabledButtons("overtime",-1);var e=this._controller.getView().getModel("i18n").getResourceBundle().getText("overtimecreated");this.onEmployeeOvertimeSelect(),this.OvertimeDirty=!1,a.show(e),this.clearOvertimeInput()},onUpdateOvertime:function(){var e=this._controller.getView().getModel(),t=sap.ui.getCore().byId("ld_tbl_overtimeoverview"),a=t.getContextByIndex(t.getSelectedIndex()),r=sap.ui.getCore().byId("ld_dp_begda_overtime"),i=r.getDateValue(),s=sap.ui.getCore().byId("ld_dp_endda_overtime"),o=s.getDateValue(),l=sap.ui.getCore().byId("ld_tp_beguz_overtime"),n=l.getValue(),u=sap.ui.getCore().byId("ld_tp_enduz_overtime"),d=u.getValue(),g=sap.ui.getCore().byId("ld_select_subty_overtime"),p=sap.ui.getCore().byId("ld_select_emp"),c=sap.ui.getCore().byId("ld_select_versl_overtime"),_=sap.ui.getCore().byId("ld_select_comment_overtime"),y=sap.ui.getCore().byId("ld_inp_amount_overtime"),m=(sap.ui.getCore().byId("chb_absence_day"),y.getValue()),b=m.split("."),S=b[0],h=b[1],I=sap.ui.getCore().byId("ld_inp_comment_overtime");if(i&&o)if(m||n||d)if(y.setValueState(sap.ui.core.ValueState.None),l.setValueState(sap.ui.core.ValueState.None),u.setValueState(sap.ui.core.ValueState.None),_.getSelectedItem().getKey())if(_.setValueState(sap.ui.core.ValueState.None),I.getValue()||"SONST"!=_.getSelectedKey())if(I.setValueState(sap.ui.core.ValueState.None),String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return this.substr(!t||t<0?0:+t,e.length)==e}),h&&h.length<=2&&!S.match("^-")||!m||m&&!m.match("^-")){var v=g.getSelectedItem().getKey(),C=p.getSelectedItem().getKey(),V=c.getSelectedItem().getKey(),f=(i.getYear()+1900).toString(),T=(o.getYear()+1900).toString(),w=(i.getMonth()+1).toString();if(i<=o){1===w.toString().length&&(w="0"+w);var D=(o.getMonth()+1).toString();1===D.toString().length&&(D="0"+D);var E=i.getDate().toString();1===E.toString().length&&(E="0"+E);var O=o.getDate().toString();1===O.toString().length&&(O="0"+O);var B=_.getSelectedItem().getKey(),P={};P.EmpId=C,P.Subty=v,P.Versl=V,P.Begda=f.toString()+w.toString()+E.toString(),P.Endda=T.toString()+D.toString()+O.toString(),P.StartTime=n,P.EndTime=d,P.Amount=m,P.CommentKey=B,P.Comment=I.getValue(),e.update(a.sPath,P,{refreshAfterChange:!0,success:function(){this.updateOvertimeSuccess(),t.setBusy(!1)}.bind(this),error:function(){this.createError.bind(this),t.setBusy(!1)}.bind(this)})}else r.setValueState(sap.ui.core.ValueState.Error),r.setValueStateText(this._controller.getResourceBundleText("errormsgdates")),s.setValueState(sap.ui.core.ValueState.Error),s.setValueStateText(this._controller.getResourceBundleText("errormsgdates")),t.setBusy(!1)}else m&&(y.setValueState(sap.ui.core.ValueState.Error),t.setBusy(!1));else I.setValueState(sap.ui.core.ValueState.Error);else _.setValueState(sap.ui.core.ValueState.Error);else m?(l.setValueState(sap.ui.core.ValueState.Error),u.setValueState(sap.ui.core.ValueState.Error)):y.setValueState(sap.ui.core.ValueState.Error);else t.setBusy(!1),i?r.setValueState(sap.ui.core.ValueState.None):r.setValueState(sap.ui.core.ValueState.Error),o?s.setValueState(sap.ui.core.ValueState.None):s.setValueState(sap.ui.core.ValueState.Error),h&&h.length>2||S.match("^-")?y.setValueState(sap.ui.core.ValueState.Error):y.setValueState(sap.ui.core.ValueState.None)},updateOvertimeSuccess:function(){this.clearOvertimeInput(),this.OvertimeDirty=!1;var e=this._controller.getView().getModel("i18n").getResourceBundle().getText("overtimeupdated");this.onEmployeeOvertimeSelect(),this.toggleEnabledButtons("overtime",-1),a.show(e)},onCancelOvertimeOverview:function(){this.clearOvertimeInput(),this.OvertimeDirty=!1,sap.ui.getCore().byId("ld_tbl_overtimeoverview").setSelectionMode("Single")},clearOvertimeInput:function(){this.OvertimeDirty=!1;var e=sap.ui.getCore().byId("ld_dp_begda_overtime"),t=sap.ui.getCore().byId("ld_dp_endda_overtime");sap.ui.getCore().byId("ld_dp_currentDate")&&(e.setDateValue(sap.ui.getCore().byId("ld_dp_currentDate").getDateValue()),t.setDateValue(sap.ui.getCore().byId("ld_dp_currentDate").getSecondDateValue())),sap.ui.getCore().byId("ld_tp_beguz_overtime").setValue(),sap.ui.getCore().byId("ld_tp_enduz_overtime").setValue();var a=sap.ui.getCore().byId("ld_select_subty_overtime");a.setSelectedKey(),a.setEnabled(!0),sap.ui.getCore().byId("ld_select_versl_overtime").setSelectedKey(),sap.ui.getCore().byId("ld_inp_amount_overtime").setValue();var r=sap.ui.getCore().byId("ld_select_comment_overtime");r.setSelectedKey();var i=sap.ui.getCore().byId("ld_inp_comment_overtime");sap.ui.getCore().byId("ld_tbl_overtimeoverview").clearSelection(),i.setRequired("SONST"==r.getSelectedKey()),i.setValue()},onOvertimeEntrySelect:function(e){this.OvertimeDirty=!0;var t=sap.ui.getCore().byId("ld_tbl_overtimeoverview").getFirstVisibleRow();if(-1!=e.getSource().getSelectedIndex()){var a=sap.ui.getCore().byId("ld_dp_begda_overtime"),r=sap.ui.getCore().byId("ld_dp_endda_overtime"),i=sap.ui.getCore().byId("ld_tp_beguz_overtime"),s=sap.ui.getCore().byId("ld_tp_enduz_overtime"),o=sap.ui.getCore().byId("ld_select_subty_overtime"),l=sap.ui.getCore().byId("ld_select_versl_overtime"),n=sap.ui.getCore().byId("ld_select_comment_overtime"),u=sap.ui.getCore().byId("ld_inp_amount_overtime"),d=sap.ui.getCore().byId("ld_inp_comment_overtime"),g=e.getParameter("rowIndex");0!=t&&(g-=t);var p=e.getSource().getRows()[g].getCells()[0].getText(),c=e.getSource().getRows()[g].getCells()[1].getText(),_=e.getSource().getRows()[g].getCells()[2].getText(),y=e.getSource().getRows()[g].getCells()[3].getText(),m=e.getSource().getRows()[g].getCells()[4].getText(),b=e.getSource().getRows()[g].getCells()[5].getText(),S=e.getSource().getRows()[g].getCells()[6].getText().replace(",",".");a.setDateValue(new Date(_.substr(6,4),_.substr(3,2)-1,_.substr(0,2))),r.setDateValue(new Date(y.substr(6,4),y.substr(3,2)-1,y.substr(0,2))),i.setValue(m),s.setValue(b),u.setValue(S);for(var h=0;h<o.getItems().length;h++)if(o.getItems()[h].getText()==p){o.setSelectedKey(o.getItems()[h].getKey()),o.setEnabled(!1);break}for(h=0;h<l.getItems().length;h++)if(l.getItems()[h].getText()==c){l.setSelectedKey(l.getItems()[h].getKey());break}n.setSelectedKey(e.getSource().getContextByIndex(g).getProperty("CommentKey")),d.setValue(e.getSource().getContextByIndex(g).getProperty("Comment")),d.setRequired("SONST"==n.getSelectedKey())}else this.clearOvertimeInput();var I=!1;""==p&&(I=!0),this.toggleEnabledButtons("overtime",e.getSource().getSelectedIndex(),I)},onCancelOvertime:function(e){-1!==sap.ui.getCore().byId("ld_tbl_overtimeoverview").getSelectedIndex()?t.openConfirmDialog("{i18n>deleteovertimesure}","{i18n>areyousure}","{i18n>cancelovertime}",this.cancelOvertime,e,this._controller):t.openNoSelectedEntryDialog("{i18n>noselectedEntry}","{i18n>selectEntry}",null,this)},cancelOvertime:function(e){var t=sap.ui.getCore().byId("ld_tbl_overtimeoverview"),a=t.getContextByIndex(t.getSelectedIndex());e.getView().getModel().remove(a.sPath,{success:function(){t.setBusy(!1),e.cancelOvertimeSuccess()},error:function(a){t.setBusy(!1),e.createError(a)}})},cancelOvertimeSuccess:function(){var e=this._controller.getView().getModel("i18n").getResourceBundle().getText("overtimedeleted"),t=sap.ui.getCore().byId("ld_tbl_overtimeoverview");this.OvertimeDirty=!1,this.toggleEnabledButtons("overtime",-1),this.fillOvertimeTable(),a.show(e),t.setBusy(!1)},onNewAllowanceSelect:function(e){var t=e.getParameter();e.getSource().getModel("AllowanceModel").setProperty("/Allowance",t),this.AllowDirty=!0},onAddAllowance:function(){var e=this._controller.getView().getModel(),t=sap.ui.getCore().byId("ld_inp_allowanceHours"),r=sap.ui.getCore().byId("ld_inp_allowanceAmount"),i=sap.ui.getCore().byId("ld_select_Allowance"),s=sap.ui.getCore().byId("ld_inp_allowancePayGroup"),o=sap.ui.getCore().byId("ld_inp_allowanceExtReg"),l=sap.ui.getCore().byId("ld_inp_allowanceTimeUnit"),n=sap.ui.getCore().byId("ld_inp_allowanceReason"),u=this._controller.getView().getModel("i18n").getResourceBundle(),d={},g=t.getValue(),p=r.getValue(),c=i.getSelectedItem().getKey(),_=this._controller.getView().getModel("TO").getProperty("/EmpId"),y=this._controller.getView().getModel("TO").getProperty("/TO_ALLOW/dateValue"),m=s.getSelectedKey(),b=o.getSelectedKey(),S=l.getValue(),h=n.getValue();y=this._controller.getFormattedDate(y),g||p?(t.setValueState(sap.ui.core.ValueState.None),r.setValueState(sap.ui.core.ValueState.None),d.EmpId=_,d.ZDate=y,d.Zulage=c,d.ZHours=g?parseFloat(g).toFixed(7):"0.00",d.ZAmount=parseInt(p),d.ZZeinh=S,d.ZTrfgr=m,d.ZExbel=b,d.ZComment=h,e.create("/allowanceSet",d,{success:function(){var e=u.getText("allowancecreated");a.show(e),this.getAllowanceSet()}.bind(this),error:function(e){this.createError(e)}.bind(this)}),this.toggleAllowanceButtons("create"),this.AllowDirty=!1):(t.setValueState(sap.ui.core.ValueState.Error),r.setValueState(sap.ui.core.ValueState.Error))},toggleAllowanceButtons:function(e){var t=this._controller.getView().getModel("TO"),a=sap.ui.getCore().byId("ld_select_Allowance"),r=sap.ui.getCore().byId("ld_inp_allowanceHours"),i=sap.ui.getCore().byId("ld_inp_allowanceAmount"),s=sap.ui.getCore().byId("ld_tbl_allowanceOverview"),o=sap.ui.getCore().byId("ld_inp_allowanceTimeUnit"),l=sap.ui.getCore().byId("ld_inp_allowanceReason");t.setProperty("/TO_ALLOW/vMode",e),"create"==e&&(a.setSelectedKey(0),r.setValue(),i.setValue(),s.setSelectionMode("Single"),o.setValue(),l.setValue())},onUpdateAllowance:function(){var e=this._controller.getView().getModel(),t=sap.ui.getCore().byId("ld_inp_allowanceHours"),r=sap.ui.getCore().byId("ld_inp_allowanceAmount"),i=sap.ui.getCore().byId("ld_select_Allowance"),s=sap.ui.getCore().byId("ld_tbl_allowanceOverview"),o=sap.ui.getCore().byId("ld_inp_allowancePayGroup"),l=sap.ui.getCore().byId("ld_inp_allowanceExtReg"),n=sap.ui.getCore().byId("ld_inp_allowanceTimeUnit"),u=sap.ui.getCore().byId("ld_inp_allowanceReason"),d=this._controller.getView().getModel("i18n").getResourceBundle(),g={},p=t.getValue(),c=r.getValue(),_=i.getSelectedItem().getKey(),y=this._controller.getView().getModel("TO").getProperty("/EmpId"),m=s.getContextByIndex(s.getSelectedIndex()),b=o.getSelectedKey(),S=l.getSelectedKey(),h=n.getValue(),I=u.getValue(),v=this._controller.getFormattedDate(this._controller.getView().getModel("TO").getProperty("/TO_ALLOW/dateValue"));p||c?(t.setValueState(sap.ui.core.ValueState.None),r.setValueState(sap.ui.core.ValueState.None),g.EmpId=y,g.ZDate=v,g.Zulage=_,g.ZHours=p?parseFloat(p).toFixed(7):"0.00",g.ZAmount=parseInt(c),g.Seqnr=m.getObject().Seqnr,g.ZZeinh=h,g.ZTrfgr=b,g.ZExbel=S,g.ZComment=I,e.update(m.sPath,g,{refreshAfterChange:!0,success:function(){var e=d.getText("allowancemodified");a.show(e),this.getAllowanceSet()}.bind(this),error:this.createError.bind(this)}),this.toggleAllowanceButtons("create"),this.AllowDirty=!1):(t.setValueState(sap.ui.core.ValueState.Error),r.setValueState(sap.ui.core.ValueState.Error))},onCancelAllowance:function(){this.toggleAllowanceButtons("create")},onAllowanceEntrySelect:function(e){if(-1!=e.getSource().getSelectedIndex()){var t=sap.ui.getCore().byId("ld_select_Allowance"),a=sap.ui.getCore().byId("ld_inp_allowanceHours"),r=sap.ui.getCore().byId("ld_inp_allowanceAmount"),i=e.getSource().getContextByIndex(e.getSource().getSelectedIndex()),s=sap.ui.getCore().byId("ld_inp_allowancePayGroup"),o=sap.ui.getCore().byId("ld_inp_allowanceExtReg"),l=sap.ui.getCore().byId("ld_inp_allowanceTimeUnit"),n=sap.ui.getCore().byId("ld_inp_allowanceReason");t.setSelectedKey(e.getSource().getModel().getProperty("Zulage",i)),a.setValue(e.getSource().getModel().getProperty("ZHours",i)),r.setValue(e.getSource().getModel().getProperty("ZAmount",i)),l.setValue(e.getSource().getModel().getProperty("ZZeinh",i)),s.setSelectedKey(e.getSource().getModel().getProperty("ZTrfgr",i)),o.setSelectedKey(e.getSource().getModel().getProperty("ZExbel",i)),n.setSelectedKey(e.getSource().getModel().getProperty("ZComment",i)),this.toggleAllowanceButtons("edit")}},onDeleteAllowance:function(){var e=this._controller.getView().getModel(),t=sap.ui.getCore().byId("ld_tbl_allowanceOverview"),r=this._controller.getView().getModel("i18n").getResourceBundle(),i=t.getContextByIndex(t.getSelectedIndex());e.remove(i.sPath,{success:function(){var e=r.getText("allowancedeleted");a.show(e),this.getAllowanceSet()}.bind(this),error:this.createError.bind(this)}),this.toggleAllowanceButtons("create"),this.AllowDirty=!1},onTimeTransferInputChange:function(){this.TimeDirty=!0},onCreateTimeTransfer:function(){var e=sap.ui.getCore().byId("ld_select_subty_timetransfer"),t=sap.ui.getCore().byId("ld_dp_begda_timetransfer"),r=sap.ui.getCore().byId("ld_dp_endda_timetransfer"),i=this._controller.getView().getModel(),s=this._controller.getView().getModel("i18n").getResourceBundle(),o=sap.ui.getCore().byId("ld_inp_amount_timetransfer"),l={},n=o.getValue(),u=e.getSelectedItem().getKey(),d=this._controller.getView().getModel("TO").getProperty("/EmpId"),g=t.getDateValue(),p=r.getDateValue();g?p?n?(g=this._controller.getFormattedDate(g),p=this._controller.getFormattedDate(p),o.setValueState(sap.ui.core.ValueState.None),t.setValueState(sap.ui.core.ValueState.None),r.setValueState(sap.ui.core.ValueState.None),l.EmpId=d,l.Begda=g,l.Endda=p,l.Subty=u,l.Amount=parseFloat(n).toFixed(2),l.Seqnr="0",i.create("/timeTransferSet",l,{success:function(e){var t=s.getText("timetransfercreated");a.show(t),this.getTimeTransfer()}.bind(this),error:this.createError.bind(this)}),this.toggleTimeTransferButtons("create"),this.TimeDirty=!1):o.setValueState(sap.ui.core.ValueState.Error):r.setValueState(sap.ui.core.ValueState.Error):t.setValueState(sap.ui.core.ValueState.Error)},onUpdateTimeTransfer:function(){var e=sap.ui.getCore().byId("ld_select_subty_timetransfer"),t=sap.ui.getCore().byId("ld_inp_amount_timetransfer"),r=sap.ui.getCore().byId("ld_dp_begda_timetransfer"),i=sap.ui.getCore().byId("ld_dp_endda_timetransfer"),s=sap.ui.getCore().byId("ld_tbl_timetransferoverview"),o=this._controller.getView().getModel(),l=this._controller.getView().getModel("i18n").getResourceBundle(),n={},u=t.getValue(),d=r.getDateValue(),g=i.getDateValue(),p=e.getSelectedItem().getKey(),c=this._controller.getView().getModel("TO").getProperty("/EmpId"),_=s.getContextByIndex(s.getSelectedIndex());d?g?u?(d=this._controller.getFormattedDate(d),g=this._controller.getFormattedDate(g),t.setValueState(sap.ui.core.ValueState.None),r.setValueState(sap.ui.core.ValueState.None),i.setValueState(sap.ui.core.ValueState.None),n.EmpId=c,n.Begda=d,n.Endda=g,n.Subty=p,n.Amount=parseFloat(u).toFixed(2),n.Seqnr=_.getObject().Seqnr,o.update(_.sPath,n,{success:function(e){var t=l.getText("timetransfermodified");a.show(t),this.getTimeTransfer()}.bind(this),error:this.createError.bind(this)}),this.toggleTimeTransferButtons("create"),this.TimeDirty=!1):t.setValueState(sap.ui.core.ValueState.Error):i.setValueState(sap.ui.core.ValueState.Error):r.setValueState(sap.ui.core.ValueState.Error)},onTimeTransferEntrySelect:function(e){if(-1!=e.getSource().getSelectedIndex()){var t=sap.ui.getCore().byId("ld_select_subty_timetransfer"),a=sap.ui.getCore().byId("ld_inp_amount_timetransfer"),r=sap.ui.getCore().byId("ld_dp_begda_timetransfer"),i=sap.ui.getCore().byId("ld_dp_endda_timetransfer"),s=e.getSource().getContextByIndex(e.getSource().getSelectedIndex());t.setSelectedKey(e.getSource().getModel().getProperty("Subty",s)),a.setValue(e.getSource().getModel().getProperty("Amount",s));var o=e.getSource().getModel().getProperty("Begda",s),l=e.getSource().getModel().getProperty("Endda",s);r.setDateValue(new Date(o.substr(6,4),o.substr(3,2)-1,o.substr(0,2))),i.setDateValue(new Date(l.substr(6,4),l.substr(3,2)-1,l.substr(0,2))),this.TimeDirty=!0,this.toggleTimeTransferButtons("edit")}},onDeleteTimeTransfer:function(){var e=sap.ui.getCore().byId("ld_tbl_timetransferoverview"),t=this._controller.getView().getModel(),r=this._controller.getView().getModel("i18n").getResourceBundle(),i=e.getContextByIndex(e.getSelectedIndex());t.remove(i.sPath,{success:function(){var e=r.getText("timetransferdeleted");a.show(e),this.getTimeTransfer()}.bind(this),error:this.createError.bind(this)}),this.toggleTimeTransferButtons("create"),this.TimeDirty=!1},toggleTimeTransferButtons:function(e){var t=new Date,a=sap.ui.getCore().byId("ld_select_subty_timetransfer"),r=sap.ui.getCore().byId("ld_inp_amount_timetransfer"),i=sap.ui.getCore().byId("ld_dp_begda_timetransfer"),s=sap.ui.getCore().byId("ld_dp_endda_timetransfer");sap.ui.getCore().byId("ld_tbl_timetransferoverview").getModel("TO").setProperty("/TO_TIMET/vMode",e),"create"===e&&(a.setSelectedKey(0),i.setDateValue(t),s.setDateValue(t),r.setValue())},onCancelTimeTransfer:function(){sap.ui.getCore().byId("ld_tbl_timetransferoverview").clearSelection(),this.toggleTimeTransferButtons("create")},onStartRptimeTimesOverview:function(){var e=this._controller.getView().getModel(),t=sap.ui.getCore().byId("ld_select_emp");t.setValueState(sap.ui.core.ValueState.None);var a=this._controller.getView().getModel("TO").getProperty("/EmpId"),r=t.getSelectedItem().getBindingContext().getProperty("UnitKey"),i=new Date,s=i,o=sap.ui.getCore().byId("pnl_rptime"),l=new sap.ui.model.Filter("Begda",sap.ui.model.FilterOperator.EQ,i),n=new sap.ui.model.Filter("Endda",sap.ui.model.FilterOperator.EQ,s),u=new sap.ui.model.Filter("EmpIds",sap.ui.model.FilterOperator.EQ,a),d=new sap.ui.model.Filter("UnitKey",sap.ui.model.FilterOperator.EQ,r);o.setBusy(!0),e.read("/rptimeSet",{filters:[u,l,n,d],success:function(){var e=sap.ui.getCore().byId("btn_rptimemsg_"+r);this._controller._oRptime.clearBuffer(r),e.setType(sap.m.ButtonType.Unstyled),e.setText(""),this.heartBeatTrigger=new sap.ui.core.IntervalTrigger(1),this.heartBeatTrigger.setInterval(3e3),setTimeout(function(){this.heartBeatTrigger.addListener(function(){this.getRptimeDataInInterval(r,"TimeOverview")}.bind(this))}.bind(this),1e3)}.bind(this)})},getRptimeDataInInterval:function(e,t){var a=sap.ui.getCore().byId("btn_rptimemsg_"+e);this._controller._oRptime.refreshBuffer(e,a).then(function(e){if(e.aItems[0])if(e.aItems[0].Amount>0||!0===e.aItems[0].Finish){if(e.aItems[0].Amount>0){if(e.oTemplate.setType(sap.m.ButtonType.Reject),e.oTemplate.setText(e.aItems[0].Amount),"TimeOverview"===t)sap.ui.getCore().byId("li_rp_to_msg").getBinding("items").refresh(!0),sap.ui.getCore().byId("pnl_rptime").setBusy(!1)}else e.oTemplate.setType(sap.m.ButtonType.Accept),e.oTemplate.setText("");this.heartBeatTrigger.setInterval(0),r.information(this._controller.getResourceBundleText("rptimesuccess"))}else e.oTemplate.setType(sap.m.ButtonType.Unstyled),e.oTemplate.setText("")}.bind(this))},onClickRptimeMsg:function(e){var t=this._controller.getView().getModel();sap.ui.getCore().byId("ld_select_attention")&&sap.ui.getCore().byId("ld_select_attention").destroy(),sap.ui.getCore().byId("ta_attent_explain")&&sap.ui.getCore().byId("ta_attent_explain").destroy();var a=this._controller.getView().getModel("i18n").getResourceBundle().getText("noCompletionPossible"),r=e.getSource().getBindingContext(),i=new sap.m.Popover({title:"{i18n>completePopoverTitle}",beforeClose:function(){this.oPopoverOpen=!1},placement:"Auto"});this._controller.getView().addDependent(i);var s=new sap.ui.layout.form.SimpleForm({columnsXL:12,columnsL:12,columnsM:12,layout:"ResponsiveGridLayout"});i.addContent(s);var o=new sap.ui.core.Item({text:"{NoteText}",key:"{NoteKey}",customData:{key:"noteKey",value:"{NoteKey}"},layoutData:new sap.ui.layout.GridData({span:"XL12 L12 M12 S12"})}),l=new sap.m.Select({id:"ld_select_attention",selectedKey:"{SelAttention}"}),n=new sap.m.TextArea({id:"ta_attent_explain",layoutData:new sap.ui.layout.GridData({span:"XL12 L12 M12 S12"}),maxLength:100,showExceededText:!1,value:"{MsgExplanation}"}),u=t.getProperty("Begda",r),d=t.getProperty("Endda",r),g=sap.ui.getCore().byId("ld_select_emp"),p=t.getProperty("MessageType",r),c=t.getProperty("MessageText",r),_=t.getProperty("MsgParam",r),y=t.getProperty("Attention",r),m=g.getSelectedItem().getBindingContext().getProperty("UnitKey"),b=new sap.ui.model.Filter("MsgType",sap.ui.model.FilterOperator.EQ,p),S=new sap.ui.model.Filter("PlanDate",sap.ui.model.FilterOperator.EQ,u),h=new sap.ui.model.Filter("UnitKey",sap.ui.model.FilterOperator.EQ,m),I=new sap.ui.model.Filter("SumKey",sap.ui.model.FilterOperator.EQ,"Unwichtig"),v={};v.Begda=u,v.Endda=d,v.EmpId=this._controller.getView().getModel("TO").getProperty("/EmpId"),v.MessageType=p,v.MessageText=c,v.MsgParam=_;var C=new sap.m.Button({text:"{i18n>completeMessage}",press:this.onMsgCompletionButtonClick.bind(this,v,i,m),layoutData:new sap.ui.layout.GridData({span:"XL12 L12 M12 S12"})});l.setModel(t),l.bindItems({path:"/messageNoteSet",template:o,filters:[b,S,h,I],events:{dataReceived:function(){i.setBusy(!1)}.bind(this)}});var V=t.createKey("/messageNoteSet",{SumKey:"Unwichtig",UnitKey:m,NoteKey:"Unwichtig2",PlanDate:u});i.setModel(t),i.bindElement({path:V,events:{dataReceived:function(){i.setBusy(!1)}.bind(this)}}),this.oMsgAttentionSource=e.getSource(),i.openBy(e.getSource()),this.oPopoverOpen=!0,"X"===y?(s.addContent(l),s.addContent(C),s.addContent(n)):""===y&&i.setTitle(a)},onMsgCompletionButtonClick:function(e,t,a){var r=this._controller.getView().getModel();this.oPopoverOpen=!1,e.SelAttention=sap.ui.getCore().byId("ld_select_attention").getSelectedKey(),e.MsgExplanation=sap.ui.getCore().byId("ta_attent_explain").getValue(),r.create("/rptimeEmpLogSet",e,{success:this.attentionButtonSuccess.bind(this,t,void 0,a),error:this.createError.bind(this)})},attentionButtonSuccess:function(e,t,r,i){sap.ui.getCore().byId("ld_select_attention").destroy(),e.close();var s=this._controller.getView().getModel("i18n").getResourceBundle().getText("attentionNoteCreated");a.show(s)},toggleEnabledButtons:function(e,t,a){var r="btn_"+e,i=sap.ui.getCore().byId(r+"Save"),s=sap.ui.getCore().byId(r+"Edit"),o=sap.ui.getCore().byId(r+"Cancel");i&&s&&o&&1!=a&&(void 0!=t&&-1!=t?(i.setEnabled(!1),s.setEnabled(!0),o.setEnabled(!0)):(i.setEnabled(!0),s.setEnabled(!1),o.setEnabled(!1)))},onInputChange:function(e){var t=e.getParameter("id");sap.ui.getCore().byId(t).setValueState(sap.ui.core.ValueState.None)},createError:function(e){var t=JSON.parse(e.responseText).error.innererror.errordetails;r.error(t[0].message)},tableBooleanText:function(e){var t=this._controller.getView().getModel("i18n").getResourceBundle();switch(e){case!0:return t.getText("booltrue");case!1:return t.getText("boolfalse");default:return e}},closeTimeOverviewDialog:function(){this._controller._oTimesOverviewDialog.close()}}});',
	"MIND2PEP_PLANNER/fragments/AbsencePick.fragment.xml": '<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:u="sap.ui.unified" xmlns:f="sap.ui.layout.form" xmlns:t="sap.ui.table"><SelectDialog title="{i18n>chooseabsence}" id="dialog_absence" confirm="onSelectAbsence"></SelectDialog></core:FragmentDefinition>',
	"MIND2PEP_PLANNER/fragments/addNewBusinessTime.fragment.xml": '<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:u="sap.ui.unified" xmlns:f="sap.ui.layout.form" xmlns:t="sap.ui.table"><Dialog title="{i18n>ttaddNewTime}" id="add_new_time" draggable="true" resizable="true" contentWidth="700px" class="sapUiResponsiveMargin"><content><HBox class="sapUiResponsiveMargin"><VBox width="70%" class="sapUiSmallMarginTop"><Label text="{i18n>ttBox}" width="200px"/></VBox><VBox width="30%"><TimePicker id="TP2" valueFormat="HH:mm" displayFormat="HH:mm" change="ModifyAllTime"/></VBox></HBox><HBox class="sapUiResponsiveMargin"><VBox width="70%" class="sapUiSmallMarginTop"><Label text="{i18n>ttDate}" width="200px"/></VBox><VBox width="30%"><DatePicker id="DateStartTime" change="changeDateStart" class="sapUiSmallMarginBottom"/></VBox></HBox><t:Table id="idEmployeeNewTimeTable" class="sapUiResponsiveMargin" width="auto" selectionMode="None"><t:columns><t:Column><Label text="{i18n>ttName}" tooltip="{i18n>ttmainworkplace}"/><t:template><Text text="{Name}" wrapping="false"/></t:template></t:Column><t:Column><Label text="{i18n>ttSurname}" tooltip="{i18n>ttmainworkplace}"/><t:template><Text text="{Surname}" wrapping="false"/></t:template></t:Column><t:Column><Label text="{i18n>ttTime}" tooltip="{i18n>ttmainworkplace}"/><t:template><TimePicker id="TP1" value="{path: \'Time\' , type: \'sap.ui.model.odata.type.Time\', formatOptions: { pattern : \'HH:mm\' } }"\n\t\t\t\t\t\t\t\tvalueFormat="HH:mm" displayFormat="HH:mm"/></t:template></t:Column></t:columns></t:Table></content><beginButton><Button id="btn_addNewTime_save" text="{i18n>save}" tooltip="{i18n>ttsave}" press="saveNewTime"></Button></beginButton><endButton><Button text="{i18n>close}" press="closeNewTime" tooltip="{i18n>ttclose}"></Button></endButton></Dialog></core:FragmentDefinition>',
	"MIND2PEP_PLANNER/fragments/ChangeDefaultQualification.fragment.xml": '<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:u="sap.ui.unified" xmlns:f="sap.ui.layout.form" xmlns:t="sap.ui.table"\n\txmlns:l="sap.ui.layout"><Dialog id="dlg_changeunit" title="{i18n>changequalification}" draggable="true" resizable="true"><content><f:SimpleForm id="sF_changeunit_data" title="" editable="true" layout="ResponsiveGridLayout"><f:content><Select id="ld_select_cdq_employee" change="changeSelectedDefQualEmp"><layoutData><l:GridData span="XL4 L4 M4 S12"/></layoutData></Select><ComboBox id="ld_select_cdq_qualification"><layoutData><l:GridData span="XL4 L4 M4 S12"/></layoutData></ComboBox><DatePicker id="ld_dp_cdq_begda" placeholder="{i18n>validfrom}"><layoutData><l:GridData span="XL4 L4 M4 S12"/></layoutData></DatePicker><Button id="btn_cdq_save" press="createDefaultQualification" text="{i18n>save}"><layoutData><l:GridData span="XL4 L4 M4 S12" linebreak="true"/></layoutData></Button></f:content></f:SimpleForm><f:SimpleForm title="" layout="ResponsiveGridLayout"><f:content><t:Table id="ld_tbl_cdq_overview" selectionMode="Single" rowSelectionChange="onDefQualEntrySelect"><t:columns><t:Column><Label text="{i18n>defaultqualification}" tooltip="{i18n>ttmainworkplace}"/><t:template><Text text="{QualText}" wrapping="false"/></t:template></t:Column><t:Column><Label text="{i18n>validfrom}" tooltip="{i18n>ttvalidfrom}"/><t:template><Text text="{path : \'Begda\', type : \'sap.ui.model.type.Date\'}"/></t:template></t:Column><t:Column><Label text="{i18n>validto}" tooltip="{i18n>ttvalidto}"/><t:template><Text text="{path : \'Endda\', type : \'sap.ui.model.type.Date\'}"/></t:template></t:Column></t:columns></t:Table></f:content></f:SimpleForm></content><endButton><Button text="{i18n>close}" press="onCloseChangeDefaultQualificationDialog" tooltip="{i18n>ttclose}"></Button></endButton></Dialog></core:FragmentDefinition>',
	"MIND2PEP_PLANNER/fragments/ChangePlanTimes.fragment.xml": '<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:u="sap.ui.unified" xmlns:f="sap.ui.layout.form" xmlns:t="sap.ui.table"\n\txmlns:l="sap.ui.layout"><Dialog title="{i18n>changeplantime}" id="dlg_changePlanTime" draggable="true" resizable="true"><content><f:SimpleForm title="" layout="ResponsiveGridLayout"><Text text="{i18n>currentplantime}"><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData></Text><TimePicker id="ld_tp_beguz" valueFormat="HH:mm" displayFormat="HH:mm" tooltip="{i18n>tttimefromtable}" editable="false"><layoutData><l:GridData span="XL3 L3 M3 S12" linebreak="true"/></layoutData></TimePicker><TimePicker id="ld_tp_enduz" valueFormat="HH:mm" displayFormat="HH:mm" tooltip="{i18n>tttimetotable}" editable="false"><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData></TimePicker><Text text="{i18n>newplantime}"><layoutData><l:GridData span="XL3 L3 M3 S12" linebreak="true"/></layoutData></Text><TimePicker id="ld_tp_newbeguz" valueFormat="HH:mm" displayFormat="HH:mm" placeholder="{i18n>timefrom}" tooltip="{i18n>tttimefrom}"><layoutData><l:GridData span="XL3 L3 M3 S12" linebreak="true"/></layoutData></TimePicker><TimePicker id="ld_tp_newenduz" valueFormat="HH:mm" displayFormat="HH:mm" placeholder="{i18n>timeto}" tooltip="{i18n>tttimeto}"><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData></TimePicker><Label id="lbl_break1" text="{i18n>shiftbreak1}"><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData></Label><TimePicker id="ld_tp_beguz_break1" valueFormat="HH:mm" displayFormat="HH:mm" placeholder="{i18n>timefrom}" tooltip="{i18n>tttimefrom}"\n\t\t\t\t\tchange="onInputChange"><layoutData><l:GridData span="XL3 L3 M3 S12" linebreak="true"/></layoutData></TimePicker><TimePicker id="ld_tp_enduz_break1" valueFormat="HH:mm" displayFormat="HH:mm" placeholder="{i18n>timeto}" tooltip="{i18n>tttimeto}"\n\t\t\t\t\tchange="onInputChange"><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData></TimePicker><Label id="lbl_break2" text="{i18n>shiftbreak2}"><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData></Label><TimePicker id="ld_tp_beguz_break2" valueFormat="HH:mm" displayFormat="HH:mm" placeholder="{i18n>timefrom}" tooltip="{i18n>tttimefrom}"\n\t\t\t\t\tchange="onInputChange"><layoutData><l:GridData span="XL3 L3 M3 S12" linebreak="true"/></layoutData></TimePicker><TimePicker id="ld_tp_enduz_break2" valueFormat="HH:mm" displayFormat="HH:mm" placeholder="{i18n>timeto}" tooltip="{i18n>tttimeto}"\n\t\t\t\t\tchange="onInputChange"><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData></TimePicker><Button id="btn_saveplantime" text="{i18n>saveplantime}" press="onSaveNewPlanTime" tooltip="{i18n>ttsaveplantime}"><layoutData><l:GridData span="XL3 L3 M3 S12" linebreak="true"/></layoutData></Button><Button id="btn_deleteplantime" text="{i18n>deleteplantime}" press="onDeletePlanTime" tooltip="{i18n>ttdeleteplantime}"><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData></Button></f:SimpleForm></content><endButton><Button text="{i18n>close}" press="onCloseChangePlanTime" tooltip="{i18n>ttclose}"></Button></endButton></Dialog></core:FragmentDefinition>',
	"MIND2PEP_PLANNER/fragments/ChangeQualification.fragment.xml": '<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:u="sap.ui.unified" xmlns:f="sap.ui.layout.form" xmlns:t="sap.ui.table"\n\txmlns:l="sap.ui.layout"><Dialog id="dlg_changequal" title="{i18n>changequal}"><content><f:SimpleForm id="sF_changeunit_data" title="" editable="true" layout="ResponsiveGridLayout"><f:content><Select id="ld_select_cq_employee" change="reloadNewQualification"><layoutData><l:GridData span="XL4 L4 M4 S12"/></layoutData></Select><DatePicker id="ld_dp_cd_begda" placeholder="{i18n>validfrom}" change="bindNewQualificationTable"><layoutData><l:GridData span="XL4 L4 M4 S12"/></layoutData></DatePicker><DatePicker id="ld_dp_cd_endda" placeholder="{i18n>validto}" change="bindNewQualificationTable"><layoutData><l:GridData span="XL4 L4 M4 S12"/></layoutData></DatePicker><ComboBox id="ld_select_cd_qualification" selectionChange="bindRatingToPicker"><layoutData><l:GridData span="XL4 L4 M4 S12"/></layoutData></ComboBox><Select id="ld_select_cd_rating"><layoutData><l:GridData span="XL4 L4 M4 S12"/></layoutData></Select><Button id="btn_cd_save" press="createNewQualification" text="{i18n>save}"><layoutData><l:GridData span="XL4 L4 M4 S12" linebreak="true"/></layoutData></Button></f:content></f:SimpleForm><f:SimpleForm title="" layout="ResponsiveGridLayout"><f:content><t:Table id="ld_tbl_cd_overview" selectionMode="Single" selectionBehavior="Row"><t:columns><t:Column id="c_cd_qual"><Label text="{i18n>employeequal}" tooltip="{i18n>employeequal}"/><t:template><Text text="{QualText} ({QualAbbr})" wrapping="false"/></t:template></t:Column><t:Column id="c_cd_rating"><Label text="{i18n>rating}" tooltip="{i18n>rating}"/><t:template><Text text="{RatingText}" wrapping="false"/></t:template></t:Column><t:Column id="c_cd_validfrom"><Label text="{i18n>validfrom}" tooltip="{i18n>ttvalidfrom}"/><t:template><Text text="{path : \'Begda\', type : \'sap.ui.model.type.Date\'}"/></t:template></t:Column><t:Column id="c_cd_validto"><Label text="{i18n>validto}" tooltip="{i18n>ttvalidto}"/><t:template><Text text="{path : \'Endda\', type : \'sap.ui.model.type.Date\'}"/></t:template></t:Column></t:columns></t:Table></f:content></f:SimpleForm><f:SimpleForm title="" layout="ResponsiveGridLayout"><f:content><Button id="btn_cd_delete" press="deleteNewQualification" text="{i18n>delete}"><layoutData><l:GridData span="XL4 L4 M4 S12" linebreak="true"/></layoutData></Button></f:content></f:SimpleForm></content><endButton><Button text="{i18n>close}" press="closeMaintQualDialog" tooltip="{i18n>ttclose}"></Button></endButton></Dialog></core:FragmentDefinition>',
	"MIND2PEP_PLANNER/fragments/ChangeUnit.fragment.xml": '<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:u="sap.ui.unified" xmlns:f="sap.ui.layout.form" xmlns:t="sap.ui.table"\n\txmlns:l="sap.ui.layout"><Dialog id="dlg_changeunit" title="{i18n>changeunit}" draggable="true" resizable="true"><content><f:SimpleForm id="sF_changeunit_data" title="" editable="true" layout="ResponsiveGridLayout"><f:content><Text text="{i18n>changeworkplace}"><layoutData><l:GridData span="XL12 L12 M12 S12"/></layoutData></Text><Select id="ld_select_cu_employee" change="onCuEmployeeChange"><layoutData><l:GridData span="XL4 L4 M4 S12"/></layoutData></Select><Select id="ld_select_cu_unit"><layoutData><l:GridData span="XL4 L4 M4 S12"/></layoutData></Select><DatePicker id="ld_tp_cu_begda" placeholder="{i18n>validfrom}"><layoutData><l:GridData span="XL4 L4 M4 S12"/></layoutData></DatePicker><Button id="btn_cu_save" press="onSaveUnitChange" text="{i18n>save}"><layoutData><l:GridData span="XL4 L4 M4 S12" linebreak="true"/></layoutData></Button></f:content></f:SimpleForm><f:SimpleForm title="" layout="ResponsiveGridLayout"><f:content><t:Table id="ld_tbl_cu_overview" selectionMode="Single"><t:columns><t:Column><Label text="{i18n>mainworkplace}" tooltip="{i18n>ttmainworkplace}"/><t:template><Text text="{UnitText}" wrapping="false"/></t:template></t:Column><t:Column><Label text="{i18n>validfrom}" tooltip="{i18n>ttvalidfrom}"/><t:template><Text text="{Begda}" wrapping="false"/></t:template></t:Column><t:Column><Label text="{i18n>validto}" tooltip="{i18n>ttvalidto}"/><t:template><Text text="{Endda}" wrapping="false"/></t:template></t:Column></t:columns></t:Table></f:content></f:SimpleForm></content><endButton><Button text="{i18n>close}" press="onCloseChangeUnitDialog" tooltip="{i18n>ttclose}"></Button></endButton></Dialog></core:FragmentDefinition>',
	"MIND2PEP_PLANNER/fragments/CicoCreate.fragment.xml": '<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:u="sap.ui.unified" xmlns:f="sap.ui.layout.form" xmlns:t="sap.ui.table"\n\txmlns:l="sap.ui.layout"><Dialog title="{i18n>cicocreate}" draggable="true" resizable="true"><content><f:Form editable="true" id="ld_form"><f:layout><f:ResponsiveGridLayout/></f:layout><f:formContainers><f:FormContainer><f:formElements><f:FormElement><f:fields><Text text="{i18n>newcico}"></Text></f:fields></f:FormElement><f:FormElement><f:fields><Select id="ld_select_emp" change="onCicoEmployeeChange" tooltip="{i18n>ttselectemp}"><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData></Select><DatePicker id="ld_dp_date" placeholder="{i18n>date}" change="onCicoDateChange" tooltip="{i18n>ttdate}"><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData></DatePicker><TimePicker id="ld_tp_uz" valueFormat="HH:mm" displayFormat="HH:mm" placeholder="{i18n>time}" change="onCicoTimeChange"\n\t\t\t\t\t\t\t\t\t\ttooltip="{i18n>tttime}"><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData></TimePicker><Select id="ld_select_timeevent" tooltip="{i18n>ttselecttimeeventty}"><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData></Select></f:fields></f:FormElement><f:FormElement><Button text="{i18n>savecico}" press="onSaveCico" tooltip="{i18n>ttsavecico}"><layoutData><l:GridData span="XL3 L3 M3 S12" linebreak="true"/></layoutData></Button></f:FormElement><f:FormElement><Text text="{i18n>cicooverview}"></Text></f:FormElement><f:FormElement><t:Table id="ld_tbl_cicooverview" selectionMode="Single" selectionBehavior="Row" visibleRowCount="7" alternateRowColors="true" width="auto"><t:layoutData><l:GridData span="XL12 L12 M12 S12"/></t:layoutData><t:columns><t:Column><Label text="{i18n>subtytimeevent}" tooltip="{i18n>ttsubtytimeeventtable}"/><t:template><Text text="{TimeeventTy}" wrapping="false"/></t:template></t:Column><t:Column><Label text="{i18n>ttdescription}" tooltip="{i18n>ttdescription}"/><t:template><Text text="{TimeeventText}" wrapping="false"/></t:template></t:Column><t:Column><Label text="{i18n>time}" tooltip="{i18n>tttimetable}"/><t:template><Text text="{Ltime}" wrapping="false"/></t:template></t:Column></t:columns></t:Table></f:FormElement><f:FormElement><Button text="{i18n>deletecico}" press="onDeleteCico" tooltip="{i18n>ttdeletecico}"><layoutData><l:GridData span="XL2 L2 M3 S12"/></layoutData></Button></f:FormElement></f:formElements></f:FormContainer></f:formContainers></f:Form></content><endButton><Button text="{i18n>close}" press="onCloseCicoDialog" tooltip="{i18n>ttclose}"></Button></endButton></Dialog></core:FragmentDefinition>',
	"MIND2PEP_PLANNER/fragments/ColorLegend.fragment.xml": '<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:u="sap.ui.unified" xmlns:f="sap.ui.layout.form" xmlns:t="sap.ui.table"><Dialog title="{i18n>legend}" draggable="true" resizable="true"><content><f:SimpleForm id="FormLegend" layout="ResponsiveGridLayout" editable="false"></f:SimpleForm></content><endButton><Button text="{i18n>close}" press="closeLegendDialog" tooltip="{i18n>ttclose}"></Button></endButton></Dialog></core:FragmentDefinition>',
	"MIND2PEP_PLANNER/fragments/Comments.fragment.xml": '<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:u="sap.ui.unified" xmlns:f="sap.ui.layout.form" xmlns:t="sap.ui.table"\n\txmlns:l="sap.ui.layout"><Dialog id="dlg_comment" title="{i18n>commentfor}" draggable="true" resizable="true"><content><f:SimpleForm title="" editable="true" layout="ResponsiveGridLayout"><f:content><Label id="lbl_comment" labelFor="ta_com_newCom" text="{i18n>comment}"/><TextArea id="ta_com_newCom" value="{CommentDate}" showExceededText="true" maxLength="255" rows="6" width="100%"\n\t\t\t\t\t\tliveChange="handleLiveChange" valueLiveUpdate="true"/><Button text="{i18n>save}" press="onSaveComment"/><Button text="{i18n>delete}" press="onDeleteComment"/><Label id="lbl_additionalInfo" labelFor="ta_additionalInfo" text="{i18n>additionalInformation}" visible="false"/><TextArea id="ta_additionalInfo" rows="6" width="100%" visible="false" editable="false"/></f:content></f:SimpleForm></content><endButton><Button text="{i18n>close}" press="onCommentDialogClose" tooltip="{i18n>ttclose}"></Button></endButton></Dialog></core:FragmentDefinition>',
	"MIND2PEP_PLANNER/fragments/CyclicLeave.fragment.xml": '<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:u="sap.ui.unified" xmlns:f="sap.ui.layout.form" xmlns:t="sap.ui.table"\n\txmlns:l="sap.ui.layout"><Dialog title="{i18n>cyclicleavecreate}" draggable="true" resizable="true"><content><Panel id="ld_formTop" expandable="false"><f:SimpleForm editable="true" id="ld_form" layout="ResponsiveGridLayout"><Select id="ld_select_emp" change="onEmployeeCyclicLeaveSelect" tooltip="{i18n>ttselectemp}"><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData></Select><Select id="cl_select_cyclic_event" tooltip="{i18n>ttselectsubtyleave}" change="onLeaveCyclSubtyChange"><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData></Select><Text id="cl_txt_blanktimes" text="{i18n>blankforwholeday}" visible="false"></Text><TimePicker id="ld_tp_beguz_leave" valueFormat="HH:mm" displayFormat="HH:mm" placeholder="{i18n>timefrom}" tooltip="{i18n>tttimefrom}"\n\t\t\t\t\t\tvisible="true" change="onInputChange"><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData></TimePicker><TimePicker id="ld_tp_enduz_leave" valueFormat="HH:mm" displayFormat="HH:mm" placeholder="{i18n>timeto}" tooltip="{i18n>tttimeto}"\n\t\t\t\t\t\tvisible="true" change="onInputChange"><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData></TimePicker></f:SimpleForm></Panel><Panel id="pnl_day_week_month"><f:SimpleForm layout="ResponsiveGridLayout" editable="true"><RadioButtonGroup><RadioButton id="rb_daily" text="{i18n>daily}" select="showCyclicLeavePanel"></RadioButton><RadioButton id="rb_weekly" text="{i18n>weekly}" select="showCyclicLeavePanel"></RadioButton><RadioButton id="rb_monthly" text="{i18n>monthly}" select="showCyclicLeavePanel"></RadioButton></RadioButtonGroup></f:SimpleForm></Panel><Panel id="pnl_daily"><f:SimpleForm layout="ResponsiveGridLayout"><RadioButtonGroup><layoutData><l:GridData span="XL3 L3 M3 S3"/></layoutData><RadioButton id="rb_daily_every" text="{i18n>every}"></RadioButton></RadioButtonGroup><Input id="inp_daily_days" description="{i18n>days}"><layoutData><l:GridData span="XL2 L2 M2 S2"/></layoutData></Input></f:SimpleForm></Panel><Panel id="pnl_weekly" visible="false"><f:SimpleForm layout="ResponsiveGridLayout" editable="true"><Label id="l_weekly_everyxweeks" text="{i18n>all}" design="Bold"><layoutData><l:GridData span="XL1 L1 M1 S1"/></layoutData></Label><Input id="inp_weekly_everyxweeks" description="{i18n>weeksat}" value="1"><layoutData><l:GridData span="XL3 L3 M3 S3"/></layoutData></Input><CheckBox id="chb_free_days" text="{i18n>freeDays}" visible="false" select="onInputChangeAbsFreeDays"><layoutData><l:GridData span="L12 M12 S12" linebreak="true"/></layoutData></CheckBox><CheckBox id="chb_monday" text="{i18n>monday}" select="onInputChangeAbs"><layoutData><l:GridData span="XL3 L3 M3 S3" linebreak="true"/></layoutData></CheckBox><CheckBox id="chb_tuesday" text="{i18n>tuesday}" select="onInputChangeAbs"><layoutData><l:GridData span="XL3 L3 M3 S3"/></layoutData></CheckBox><CheckBox id="chb_wednesday" text="{i18n>wednesday}" select="onInputChangeAbs"><layoutData><l:GridData span="XL3 L3 M3 S3"/></layoutData></CheckBox><CheckBox id="chb_thursday" text="{i18n>thursday}" select="onInputChangeAbs"><layoutData><l:GridData span="XL3 L3 M3 S3"/></layoutData></CheckBox><CheckBox id="chb_friday" text="{i18n>friday}" select="onInputChangeAbs"><layoutData><l:GridData span="XL3 L3 M3 S3"/></layoutData></CheckBox><CheckBox id="chb_saturday" text="{i18n>saturday}" select="onInputChangeAbs"><layoutData><l:GridData span="XL3 L3 M3 S3"/></layoutData></CheckBox><CheckBox id="chb_sunday" text="{i18n>sunday}" select="onInputChangeAbs"><layoutData><l:GridData span="XL3 L3 M3 S3"/></layoutData></CheckBox></f:SimpleForm></Panel><Panel id="pnl_monthly" visible="false"><f:SimpleForm layout="ResponsiveGridLayout" editable="true"><RadioButtonGroup><layoutData><l:GridData span="XL3 L3 M3 S3"/></layoutData><RadioButton id="rb_month_day" text="{i18n>day}"></RadioButton><RadioButton id="rb_month_weekday" text="{i18n>the}"></RadioButton></RadioButtonGroup><Input id="inp_month_day_day" type="Number" value="1"><layoutData><l:GridData span="XL4 L4 M4 S4"/></layoutData></Input><Label text="{i18n>ofevery}" design="Bold"><layoutData><l:GridData span="XL2 L2 M2 S2"/></layoutData></Label><Input id="inp_month_day_month" description="{i18n>month}" type="Number" value="1"><layoutData><l:GridData span="XL3 L3 M3 S3"/></layoutData></Input><Select id="sel_month_weekday_week"><layoutData><l:GridData span="XL2 L2 M2 S2"/></layoutData><core:Item key="1" text="1."></core:Item><core:Item key="2" text="2."></core:Item><core:Item key="3" text="3."></core:Item><core:Item key="4" text="4."></core:Item><core:Item key="5" text="5."></core:Item></Select><Select id="sel_month_weekday_day"><layoutData><l:GridData span="XL2 L2 M2 S2"/></layoutData><core:Item key="1" text="{i18n>monday}"></core:Item><core:Item key="2" text="{i18n>tuesday}"></core:Item><core:Item key="3" text="{i18n>wednesday}"></core:Item><core:Item key="4" text="{i18n>thursday}"></core:Item><core:Item key="5" text="{i18n>friday}"></core:Item><core:Item key="6" text="{i18n>saturday}"></core:Item><core:Item key="7" text="{i18n>sunday}"></core:Item></Select><Label text="{i18n>ofevery}" design="Bold"><layoutData><l:GridData span="XL2 L2 M2 S2"/></layoutData></Label><Input id="sel_month_weekday_month" description="{i18n>month}" type="Number" value="1"><layoutData><l:GridData span="XL3 L3 M3 S3"/></layoutData></Input></f:SimpleForm></Panel><Panel><f:SimpleForm layout="ResponsiveGridLayout"><DatePicker id="ld_dp_begda_leave" placeholder="{i18n>from}" tooltip="{i18n>ttbegda}"><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData></DatePicker><DatePicker id="ld_dp_endda_leave" placeholder="{i18n>to}" tooltip="{i18n>ttendda}"><layoutData><l:GridData span="XL3 L3 M3 S3"/></layoutData></DatePicker><Button id="btn_cyclicleaveSave" text="{i18n>saveleave}" press="onSaveCyclicLeave" tooltip="{i18n>ttsaveleave}"><layoutData><l:GridData span="XL3 L3 M3 S12" linebreak="true"/></layoutData></Button><Button id="btn_cyclicleaveEdit" text="{i18n>editleaveoverview}" press="onUpdateCyclicLeave" tooltip="{i18n>tteditleaveoverview}"\n\t\t\t\t\t\tenabled="false"><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData></Button><Button id="btn_cyclicleaveCancel" text="{i18n>cancelleaveoverview}" press="clearCyclicLeavePopup" tooltip="{i18n>ttcancelleaveoverview}"\n\t\t\t\t\t\tenabled="false"><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData></Button><Text text="{i18n>eventoverview}"><layoutData><l:GridData span="XL3 L3 M3 S12" linebreak="true"/></layoutData></Text><Table width="100%" showNoData="false"><layoutData><l:GridData span="XL12 L12 M12 S12"/></layoutData><columns><Column><Text text="{i18n>eventtype}" tooltip="{i18n>ttsubtyleavetable}"/></Column><Column><Text text="{i18n>begda}" tooltip="{i18n>ttbegdatable}"/></Column><Column><Text text="{i18n>endda}" tooltip="{i18n>ttenddatable}"/></Column><Column><Text text="{i18n>starttime}" tooltip="{i18n>tttimefromtable}"/></Column><Column><Text text="{i18n>endtime}" tooltip="{i18n>tttimetotable}"/></Column></columns></Table><ScrollContainer height="15rem" vertical="true" focusable="true"><layoutData><l:GridData span="XL12 L12 M12 S12"/></layoutData><Table id="ld_tbl_cyclicleaveoverview" mode="SingleSelectMaster" selectionChange="onCyclicLeaveEntrySelect" width="100%"><layoutData><l:GridData span="XL12 L12 M12 S12"/></layoutData><columns><Column></Column><Column></Column><Column></Column><Column></Column><Column></Column></columns><dependents><ColumnListItem id="cyclicLeaveTableTemplate"><cells><Text text="{SubtyText}"></Text><Text text="{path: \'BeginDate\', type: \'sap.ui.model.type.Date\', formatOptions: \'dd.MM.yyyy\' }"></Text><Text text="{path: \'EndDate\', type: \'sap.ui.model.type.Date\', formatOptions: \'dd.MM.yyyy\' }"></Text><Text text="{path: \'BeginTime\', type: \'sap.ui.model.odata.type.Time\', formatOptions: { style: \'short\' }}"></Text><Text text="{path: \'EndTime\', type: \'sap.ui.model.odata.type.Time\', formatOptions: { style: \'short\' }}"></Text></cells></ColumnListItem></dependents></Table></ScrollContainer><Button text="{i18n>cancelleave}" press="onDeleteCyclicLeave" tooltip="{i18n>ttcancelleave}"><layoutData><l:GridData span="XL3 L3 M3 S12" linebreak="true"/></layoutData></Button></f:SimpleForm></Panel></content><endButton><Button text="{i18n>close}" press="onCloseCyclicLeaveDialog" tooltip="{i18n>ttclose}"></Button></endButton></Dialog></core:FragmentDefinition>',
	"MIND2PEP_PLANNER/fragments/EmployeeData.fragment.xml": '<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:u="sap.ui.unified" xmlns:f="sap.ui.layout.form" xmlns:t="sap.ui.table"><Dialog title="{i18n>employeedata}" id="dialog_employeeData" draggable="true" resizable="true" stretch="false"><f:SimpleForm id="sf_formEmployeeData" layout="ResponsiveGridLayout" adjustLabelSpan="false" labelSpanXL="6" labelSpanL="6" labelSpanM="6"\n\t\t\tlabelSpanS="6" emptySpanXL="0" emptySpanL="0" emptySpanM="0" emptySpanS="0" columnsXL="1" columnsL="1" columnsM="1"></f:SimpleForm><endButton><Button text="{i18n>close}" press="onCloseEmpDataDialog"></Button></endButton></Dialog></core:FragmentDefinition>',
	"MIND2PEP_PLANNER/fragments/EmployeeSort.fragment.xml": '<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:dnd="sap.ui.core.dnd" xmlns:t="sap.ui.table"\n\txmlns:f="sap.ui.layout.form" xmlns:l="sap.ui.layout"><Dialog title="{i18n>employeesortheader}" id="dialog_employeesort" draggable="true" resizable="true" contentWidth="300px"><content><List id="idSortEmp" items="{path: \'empList>/\'}" ><items><StandardListItem title="{empList>Name}"/></items><dragDropConfig><dnd:DragDropInfo sourceAggregation="items" targetAggregation="items" dropPosition="Between" drop="onEmployeeSortDrop" /></dragDropConfig></List></content><beginButton><Button id="btn_empSort_save" text="{i18n>save}" tooltip="{i18n>ttsave}" press="saveEmpSort"></Button></beginButton><endButton><Button text="{i18n>close}" press="closeSortEmp" tooltip="{i18n>ttclose}"></Button></endButton></Dialog></core:FragmentDefinition>',
	"MIND2PEP_PLANNER/fragments/ExportRosterPDF.fragment.xml": '<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core"><Dialog contentWidth="100%"  contentHeight="600px" draggable="true" resizable="true"><customHeader><Toolbar><Text text="{i18n>select-doc}"/><Select items="{path: \'roster>/docTypeSet\', filters: [{path: \'Ess\', operator: \'EQ\', value1: false} ]}" forceSelection="false" width="268px"\n\t\t\t\t\tselectedKey="{Selected>/DocId}" change="onDocTypeChange"><core:Item key="{roster>DocId}" text="{roster>DocName}"/></Select><Text text="{i18n>from}:"/><DatePicker displayFormat="short" width="130px" dateValue="{Selected>/Begda}"/><Text text="{i18n>to}:"/><DatePicker displayFormat="short" width="130px" dateValue="{Selected>/Endda}"/><Text text="{i18n>employee}" visible="{Selected>/Ess}"/><Input showSuggestion="true" suggest="onSuggest" suggestionItems="{roster>/employeeSearchhelpSet}" selectedKey="{Selected>/Pernr}" visible="{Selected>/Ess}"\n\t\t\t\t\twidth="268px"><suggestionItems><core:Item key="{roster>Pernr}" text="{roster>Pernr} - {roster>Vorna} {roster>Nachn}"/></suggestionItems></Input><Button icon="sap-icon://search" text="{i18n>search}" press="onPDFSearchPress"/></Toolbar></customHeader><content><PDFViewer source="{Selected>/PDF}" visible="{= ${Selected>/PDFVisible} || false}" height="600px"\n\t\t\t\terrorPlaceholderMessage="{i18n>error_no_pdf}" showDownloadButton="false"/></content><buttons><Button text="{i18n>close}" press="onPDFExportClose"/></buttons></Dialog></core:FragmentDefinition>',
	"MIND2PEP_PLANNER/fragments/FavoriteFeatures.fragment.xml": '<core:FragmentDefinition xmlns="sap.m" xmlns:sem="sap.m.semantic" xmlns:core="sap.ui.core"><Dialog title="{i18n>favfeattitle}" id="dialog_favfeat" draggable="true" resizable="true" contentWidth="50rem"\n\t\tafterClose="destroyFavoriteFeaturesDialog"><content><List id="listFavFeats" items="{/favFeatureSet}"><items><CustomListItem><HBox class="sapUiSmallMarginEnd" alignItems="Center" justifyContent="SpaceBetween"><VBox class="sapUiSmallMarginBegin sapUiSmallMarginTopBottom"><Label text="{FeatureName}"/></VBox><CheckBox selected="{IsFavorite}" select="onChangeFavorite"></CheckBox></HBox></CustomListItem></items></List></content><beginButton><Button id="btn_ff_save" text="{i18n>save}" type="Accept" press="onSaveFavorites" tooltip="{i18n>ttclose}"></Button></beginButton><endButton><Button text="{i18n>close}" press="onCloseDialogByButton" tooltip="{i18n>ttclose}"></Button></endButton></Dialog></core:FragmentDefinition>',
	"MIND2PEP_PLANNER/fragments/FormDownload.fragment.xml": '<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:u="sap.ui.unified" xmlns:f="sap.ui.layout.form" xmlns:t="sap.ui.table"><Dialog title="{i18n>print}" draggable="true" resizable="true"><content><f:SimpleForm layout="ResponsiveGridLayout" editable="true" labelSpanL="2" labelSpanXL="2" labelSpanM="3" labelSpanS="12"><f:content><Label text="{i18n>begda}"></Label><DatePicker id="dp_form_begda" tooltip="{i18n>ttbegda}"></DatePicker><Label text="{i18n>timeframe}"></Label><VBox><RadioButtonGroup id="rbg_timeFrame" selectedIndex="{FormDownloadModel>/RadioIndex}"><RadioButton text="{i18n>1week}" tooltip="{i18n>tt1week}"><customData><core:CustomData key="weeks" value="1"></core:CustomData></customData></RadioButton><RadioButton text="{i18n>2week}" tooltip="{i18n>tt2week}"><customData><core:CustomData key="weeks" value="2"></core:CustomData></customData></RadioButton><RadioButton text="{i18n>4week}" tooltip="{i18n>tt4week}"><customData><core:CustomData key="weeks" value="4"></core:CustomData></customData></RadioButton><RadioButton text="{i18n>otherweeks}:" tooltip="{i18n>ttotherweeks}"><customData><core:CustomData key="weeks" value="0"></core:CustomData></customData></RadioButton></RadioButtonGroup><StepInput value="{FormDownloadModel>/CustomWeekCount}" enabled="{= ${FormDownloadModel>/RadioIndex} === 3}" description="{i18n>weeks}"\n\t\t\t\t\t\t\ttextAlign="Center" min="1"/></VBox></f:content></f:SimpleForm></content><beginButton><Button id="btn_form_download" text="{i18n>download}" tooltip="{i18n>ttdownload}"></Button></beginButton><endButton><Button text="{i18n>close}" press="closeFormDownload" tooltip="{i18n>ttclose}"></Button></endButton></Dialog></core:FragmentDefinition>',
	"MIND2PEP_PLANNER/fragments/FormTimeStatementCreate.fragment.xml": '<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:uc="sap.ui.unified.calendar" xmlns:f="sap.ui.layout.form"><Dialog title="{i18n>timestatecreate}" draggable="true" resizable="true"><content><f:SimpleForm id="ts_sf_form" layout="ResponsiveGridLayout" editable="true" width="500px"><f:content><HBox><RadioButton groupName="A" text="{i18n>monthly}" selected="{/selectedA}"></RadioButton><RadioButton groupName="A" text="{i18n>daily}" selected="{/selectedB}"></RadioButton></HBox><VBox><Label text="{i18n>timeframe}"></Label><DatePicker id="dp_timestat_begda" placeholder="{i18n>from}" tooltip="{i18n>ttbegda}" visible="{/selectedB}"></DatePicker><DatePicker id="dp_timestat_endda" placeholder="{i18n>to}" tooltip="{i18n>ttendda}" visible="{/selectedB}"></DatePicker><uc:MonthPicker id="mp_timeSlipMonth" visible="{/selectedA}"></uc:MonthPicker><uc:YearPicker id="yp_timeSlipYear" years="4" visible="{/selectedA}"></uc:YearPicker><Label text="{i18n>employeetext}"></Label><MultiComboBox id="mcb_employees" selectionChange="onTsEmpChange" selectionFinish="handleSelectionFinish"\n\t\t\t\t\t\t\titems="{ path: \'oLocalEmployeeModel>/employees\' }"><core:Item key="{oLocalEmployeeModel>EmpId}" text="{oLocalEmployeeModel>EmpName}"/></MultiComboBox></VBox></f:content></f:SimpleForm></content><beginButton><Button id="btn_download_timstat_pdf" text="{i18n>download}" tooltip="{i18n>ttdownload}"></Button></beginButton><endButton><Button text="{i18n>close}" press="onCloseTimeStatementForm" tooltip="{i18n>ttclose}"></Button></endButton></Dialog></core:FragmentDefinition>',
	"MIND2PEP_PLANNER/fragments/HideShowColumns.fragment.xml": '<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:u="sap.ui.unified" xmlns:f="sap.ui.layout.form" xmlns:t="sap.ui.table"\n\txmlns:l="sap.ui.layout"><Dialog title="{i18n>hide}" contentWidth="400px" contentHeight="500px" draggable="true" resizable="true"><content><f:SimpleForm id="sf_buildVariant" layout="ResponsiveGridLayout" visible="false" editable="true" labelSpanL="1" labelSpanXL="1"\n\t\t\t\tlabelSpanM="2" labelSpanS="12"><Text text="{i18n>newvariant}"><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData></Text><Input id="ld_inp_newVariant" enabled="true" maxLength="20" placeholder="{i18n>namenewvariant}"><layoutData><l:GridData span="XL3 L3 M3 S12" linebreak="true"/></layoutData></Input><Button id="btn_newVariant" text="{i18n>addvariant}" enabled="true"><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData></Button><Text text="{i18n>changevariant}"><layoutData><l:GridData span="XL3 L3 M3 S12" linebreak="true"/></layoutData></Text><Select id="ld_select_variant" change="onNewVariantSelect"><layoutData><l:GridData span="XL3 L3 M3 S12" linebreak="true"/></layoutData></Select><CheckBox id="cb_useForExcel" visible="false" text="{i18n>useforexcel}"><layoutData><l:GridData span="XL3 L3 M3 S12" linebreak="true"/></layoutData></CheckBox><Button id="btn_del_variant" text="{i18n>deletevariant}" enabled="true"><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData></Button></f:SimpleForm><f:SimpleForm id="sf_showhidecol" layout="ResponsiveGridLayout" editable="true" labelSpanL="1" labelSpanXL="1" labelSpanM="2"\n\t\t\t\tlabelSpanS="12"><f:content><Text text="{i18n>selectemployees}" visible="{UserData>/features/VARIANTEMP/IsActive}"/><HBox renderType="Bare" visible="{UserData>/features/VARIANTEMP/IsActive}"><MultiComboBox id="idSelectEmployees" selectionChange="onEmployeeSelChange" items="{path: \'/viewEmployeeSet\', suspended: true}"><core:Item key="{EmpId}" text="{FirstName} {LastName}"/></MultiComboBox><Button tooltip="{i18n>ttSelectEmployees}" id="selectAllEmployees" icon="sap-icon://accept" press="onMassSelection"/></HBox><Text text="{i18n>selectcolumns}"/><CheckBox id="selectAll" select="selectDeselectAllHideShow" text="{i18n>selectall}"></CheckBox><HBox><VBox id="vb_hide_cols"></VBox></HBox></f:content></f:SimpleForm></content><beginButton><Button id="btn_show_hide_save" text="{i18n>save}" tooltip="{i18n>ttsave}"></Button></beginButton><endButton><Button text="{i18n>close}" press="closeHideShowColumns" tooltip="{i18n>ttclose}"></Button></endButton></Dialog></core:FragmentDefinition>',
	"MIND2PEP_PLANNER/fragments/LeaveCreate.fragment.xml": '<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:u="sap.ui.unified" xmlns:f="sap.ui.layout.form" xmlns:t="sap.ui.table"\n\txmlns:l="sap.ui.layout"><Dialog title="{i18n>leavecreate}" draggable="true" resizable="true"><content><f:Form editable="true" id="ld_form"><f:layout><f:ResponsiveGridLayout emptySpanS="1" emptySpanM="1" emptySpanL="1" emptySpanXL="1"/></f:layout><f:formContainers><f:FormContainer><f:formElements><f:FormElement><f:fields><Text text="{i18n>newleave}"></Text></f:fields></f:FormElement><f:FormElement><f:fields><Select id="ld_select_emp" change="onEmployeeSelect" tooltip="{i18n>ttselectemp}"><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData></Select><DatePicker id="ld_dp_begda_leave" placeholder="{i18n>from}" tooltip="{i18n>ttbegda}" change="onLeaveInputChange"><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData></DatePicker><DatePicker id="ld_dp_endda_leave" placeholder="{i18n>to}" tooltip="{i18n>ttendda}" change="onLeaveInputChange"><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData></DatePicker><Select id="ld_select_subty_leave" tooltip="{i18n>ttselectsubtyleave}" change="onLeaveSubtyChange"><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData></Select><TimePicker id="ld_tp_beguz_leave" valueFormat="HH:mm" displayFormat="HH:mm" placeholder="{i18n>timefrom}" tooltip="{i18n>tttimefrom}"\n\t\t\t\t\t\t\t\t\t\tvisible="false" change="onInputChange"><layoutData><l:GridData span="XL3 L3 M3 S12" moveForward="XL3 L3 M3"/></layoutData></TimePicker><Input id="ld_inp_duration_leave" placeholder="{i18n>duration}" tooltip="{i18n>duration}" type="Number" change="onChangeDurationAbsence"\n\t\t\t\t\t\t\t\t\t\tvisible="false"><layoutData><l:GridData span="XL3 L3 M3 S12" moveForward="XL3 L3 M3"/></layoutData></Input><TimePicker id="ld_tp_enduz_leave" valueFormat="HH:mm" displayFormat="HH:mm" placeholder="{i18n>timeto}" tooltip="{i18n>tttimeto}"\n\t\t\t\t\t\t\t\t\t\tvisible="false" change="onInputChange"><layoutData><l:GridData span="XL3 L3 M3 S12" moveForward="XL3 L3 M3"/></layoutData></TimePicker></f:fields></f:FormElement><f:FormElement><Button text="{i18n>saveleave}" press="onSaveLeave" tooltip="{i18n>ttsaveleave}"><layoutData><l:GridData span="XL3 L3 M3 S12" linebreak="true"/></layoutData></Button></f:FormElement><f:FormElement><Text text="{i18n>leaveoverview}"></Text></f:FormElement><f:FormElement><t:Table id="ld_tbl_leaveoverview" selectionMode="Single" selectionBehavior="Row" visibleRowCount="7" alternateRowColors="true"><t:layoutData><l:GridData span="XL12 L12 M12 S12"/></t:layoutData><t:columns><t:Column><Label text="{i18n>subtyleave}" tooltip="{i18n>ttsubtyleavetable}"/><t:template><Text text="{SubtyText}" wrapping="false"/></t:template></t:Column><t:Column><Label text="{i18n>begda}" tooltip="{i18n>ttbegdatable}"/><t:template><Text text="{Begda}" wrapping="false"/></t:template></t:Column><t:Column><Label text="{i18n>endda}" tooltip="{i18n>ttenddatable}"/><t:template><Text text="{Endda}" wrapping="false"/></t:template></t:Column><t:Column><Label text="{i18n>starttime}" tooltip="{i18n>tttimefromtable}"/><t:template><Text text="{Beguz}" wrapping="false"/></t:template></t:Column><t:Column><Label text="{i18n>endtime}" tooltip="{i18n>tttimetotable}"/><t:template><Text text="{Enduz}" wrapping="false"/></t:template></t:Column></t:columns></t:Table></f:FormElement><f:FormElement><Button text="{i18n>cancelleave}" press="onCancelLeave" tooltip="{i18n>ttcancelleave}"><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData></Button></f:FormElement></f:formElements></f:FormContainer></f:formContainers></f:Form></content><endButton><Button text="{i18n>close}" press="onCloseLeaveDialog" tooltip="{i18n>ttclose}"></Button></endButton></Dialog></core:FragmentDefinition>',
	"MIND2PEP_PLANNER/fragments/Log.fragment.xml": '<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:u="sap.ui.unified" xmlns:f="sap.ui.layout.form" xmlns:t="sap.ui.table"\n\txmlns:l="sap.ui.layout"><Dialog title="{i18n>log}" contentWidth="80%" resizable="true" draggable="true" afterOpen="onAfterOpenLog"><content><Panel class="sapUiResponsiveMargin" width="auto"><t:Table id="tbl_log" selectionMode="None" visibleRowCount="7" alternateRowColors="true" enableCellFilter="true"><t:columns><t:Column><Label text="{i18n>logid}" tooltip="{i18n>ttlogid}"/><t:template><Text text="{LogId}" wrapping="false"/></t:template></t:Column><t:Column minWidth="400px" filterProperty="Text"><Label text="{i18n>change}" tooltip="{i18n>ttchange}"/><t:template><Text text="{Text}" wrapping="true"/></t:template></t:Column><t:Column filterProperty="LogDateString"><Label text="{i18n>changedate}" tooltip="{i18n>ttchangedate}"/><t:template><Text text="{LogDateString}" wrapping="false"/></t:template></t:Column><t:Column filterProperty="LogTimeString"><Label text="{i18n>changetime}" tooltip="{i18n>ttchangetime}"/><t:template><Text text="{LogTimeString}" wrapping="false"/></t:template></t:Column><t:Column filterProperty="LogUser"><Label text="{i18n>changeuser}" tooltip="{i18n>ttchangeuser}"/><t:template><Text text="{LogUser}" wrapping="false"/></t:template></t:Column><t:Column filterProperty="LogType"><Label text="{i18n>logtype}" tooltip="{i18n>ttlogtype}"/><t:template><Text text="{LogType}" wrapping="false"/></t:template></t:Column></t:columns></t:Table></Panel></content><endButton><Button text="{i18n>close}" press="closeLogDialog" tooltip="{i18n>ttclose}"></Button></endButton></Dialog></core:FragmentDefinition>',
	"MIND2PEP_PLANNER/fragments/MaintainDemand.fragment.xml": '<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:u="sap.ui.unified" xmlns:f="sap.ui.layout.form" xmlns:t="sap.ui.table"\n\txmlns:l="sap.ui.layout"><Dialog title="{i18n>maintaindemand}" stretch="true" draggable="true" resizable="true"><content><f:SimpleForm title="" layout="ResponsiveGridLayout" editable="true"><Select id="md_select_qual"><layoutData><l:GridData span="XL4 L4 M4 S12"/></layoutData></Select><DatePicker id="dp_period_begda" placeholder="{i18n>shiftFrom}" change="onChangeDemandBegda"><layoutData><l:GridData span="XL4 L4 M4 S12"/></layoutData></DatePicker><DatePicker id="dp_period_endda" placeholder="{i18n>shiftTo}" change="onChangeDemandEndda"><layoutData><l:GridData span="XL4 L4 M4 S12"/></layoutData></DatePicker><TimePicker id="ld_tp_beguz_shift" valueFormat="HH:mm" displayFormat="HH:mm" placeholder="{i18n>timefrom}" tooltip="{i18n>tttimefrom}"\n\t\t\t\t\tvisible="true" change="onInputChange"><layoutData><l:GridData span="XL4 L4 M4 S12"/></layoutData></TimePicker><TimePicker id="ld_tp_enduz_shift" valueFormat="HH:mm" displayFormat="HH:mm" placeholder="{i18n>timeto}" tooltip="{i18n>tttimeto}"\n\t\t\t\t\tvisible="true" change="onInputChange"><layoutData><l:GridData span="XL4 L4 M4 S12"/></layoutData></TimePicker><CheckBox id="chb_qualification" text="{i18n>noDisposition}"><layoutData><l:GridData span="XL4 L4 M4 S12"/></layoutData></CheckBox><Text id="lbl_emps_per_day" text="{i18n>empsperday}"><layoutData><l:GridData span="XL12 L12 M12 S12" linebreak="true"/></layoutData></Text><CheckBox id="chb_overload" text="{i18n>overload}"><layoutData><l:GridData span="XL4 L4 M4 S12" linebreak="true"/></layoutData></CheckBox><Input id="md_i_mo" placeholder="{i18n>monday}" tooltip="{i18n>ttmonday}" type="Number"><layoutData><l:GridData span="XL3 L3 M3 S4" linebreak="true"/></layoutData></Input><Input id="md_i_tu" placeholder="{i18n>tuesday}" tooltip="{i18n>tttuesday}" type="Number"><layoutData><l:GridData span="XL3 L3 M3 S4"/></layoutData></Input><Input id="md_i_we" placeholder="{i18n>wednesday}" tooltip="{i18n>ttwednesday}" type="Number"><layoutData><l:GridData span="XL3 L3 M3 S4"/></layoutData></Input><Input id="md_i_th" placeholder="{i18n>thursday}" tooltip="{i18n>ttthursday}" type="Number"><layoutData><l:GridData span="XL3 L3 M3 S4"/></layoutData></Input><Input id="md_i_fr" placeholder="{i18n>friday}" tooltip="{i18n>ttfriday}" type="Number"><layoutData><l:GridData span="XL3 L3 M3 S4"/></layoutData></Input><Input id="md_i_sa" placeholder="{i18n>saturday}" tooltip="{i18n>ttsaturday}" type="Number"><layoutData><l:GridData span="XL3 L3 M3 S4"/></layoutData></Input><Input id="md_i_su" placeholder="{i18n>sunday}" tooltip="{i18n>ttsunday}" type="Number"><layoutData><l:GridData span="XL3 L3 M3 S4"/></layoutData></Input><Input id="md_i_ho" placeholder="{i18n>holiday}" tooltip="{i18n>ttholiday}" type="Number"><layoutData><l:GridData span="XL3 L3 M3 S4"/></layoutData></Input><Button id="btn_md_save" text="{i18n>txtsave}" press="onSaveNewDemand" enabled="true"><layoutData><l:GridData span="XL3 L3 M3 S4"/></layoutData></Button><Button id="btn_md_change" text="{i18n>btnchange}" enabled="false" press="onChangeDemandEntry"><layoutData><l:GridData span="XL3 L3 M3 S4"/></layoutData></Button><Button id="btn_md_copy" text="{i18n>btncopy}" enabled="false" press="onCopyDemandEntry"><layoutData><l:GridData span="XL3 L3 M3 S4"/></layoutData></Button><Button id="btn_md_cancel" text="{i18n>txtcancel}" press="onCancelDemandEditing" enabled="true"><layoutData><l:GridData span="XL3 L3 M3 S4"/></layoutData></Button><VBox><layoutData><l:GridData span="XL12 L12 M12 S12"/></layoutData><t:Table id="tbl_md_demands" selectionMode="Single" selectionBehavior="RowOnly" visibleRowCount="9"\n\t\t\t\t\t\trowSelectionChange="onDemandTableSelectionChange"><t:columns><t:Column><Label text="{i18n>tblworkplace}" tooltip="{i18n>tttblworkplace}"/><t:template><Text text="{QualText}"/></t:template></t:Column><t:Column><Label text="{i18n>shiftFrom}"/><t:template><Text text="{Begda}"/></t:template></t:Column><t:Column><Label text="{i18n>shiftTo}"/><t:template><Text text="{Endda}"/></t:template></t:Column><t:Column><Label text="{i18n>shiftFrom}"/><t:template><Text text="{Beguz}"/></t:template></t:Column><t:Column><Label text="{i18n>shiftTo}"/><t:template><Text text="{Enduz}"/></t:template></t:Column><t:Column><Label text="{i18n>tbloverload}" tooltip="{i18n>tttbloverload}"/><t:template><Text text="{ path: \'Override\', formatter: \'.formatter.tableBooleanText\'}"/></t:template></t:Column><t:Column><Label text="{i18n>noDispositionShort}" tooltip="{i18n>noDisposition}"/><t:template><Text text="{ path: \'WithoutDisposition\', formatter: \'.formatter.tableBooleanText\'}"/></t:template></t:Column><t:Column><Label text="{i18n>tblmonday}"/><t:template><Text text="{Monday}"/></t:template></t:Column><t:Column><Label text="{i18n>tbltuesday}"/><t:template><Text text="{Tuesday}"/></t:template></t:Column><t:Column><Label text="{i18n>tblwednesday}"/><t:template><Text text="{Wednesday}"/></t:template></t:Column><t:Column><Label text="{i18n>tblthursday}"/><t:template><Text text="{Thursday}"/></t:template></t:Column><t:Column><Label text="{i18n>tblfriday}"/><t:template><Text text="{Friday}"/></t:template></t:Column><t:Column><Label text="{i18n>tblsaturday}"/><t:template><Text text="{Saturday}"/></t:template></t:Column><t:Column><Label text="{i18n>tblsunday}"/><t:template><Text text="{Sunday}"/></t:template></t:Column><t:Column><Label text="{i18n>tblholiday}"/><t:template><Text text="{Holiday}"/></t:template></t:Column></t:columns></t:Table></VBox><Button id="btn_md_delete" text="{i18n>delete}" press="onDeleteDemand" enabled="false"><layoutData><l:GridData span="XL3 L3 M3 S4" linebreak="true"/></layoutData></Button></f:SimpleForm></content><endButton><Button text="{i18n>close}" press="onCloseMaintainDemand" tooltip="{i18n>ttclose}"></Button></endButton></Dialog></core:FragmentDefinition>',
	"MIND2PEP_PLANNER/fragments/MaintainDemandShiftGroup.fragment.xml": '<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:u="sap.ui.unified" xmlns:f="sap.ui.layout.form" xmlns:t="sap.ui.table"\n\txmlns:l="sap.ui.layout"><Dialog title="{i18n>maintaindemand}" draggable="true" resizable="true" stretch="true"><content><HBox class="sapUiSmallMargin sapUiNoMarginTop sapUiNoMarginBottom" justifyContent="SpaceBetween"><Select id="idDemandShiftGroupSelection" items="{/unitShiftSet}" selectedKey="{/Id}" change="changeDemandShiftSelection"><core:Item text="{= ${Begda}.toLocaleDateString() + \' - \' + ${Endda}.toLocaleDateString()}" key="{Id}" /></Select><HBox><DatePicker dateValue="{/unitShift/Begda}" width="150px" /><DatePicker dateValue="{/unitShift/Endda}" width="150px" /></HBox><HBox><Button icon="sap-icon://add" text="{i18n>adddata}" press="onAddNewDemandTime" /><Button icon="sap-icon://delete" text="{i18n>deletedata}" press="onDeleteDemandTimeWrapper" /></HBox><HBox><Select width="150px" change="onDemandShiftChange" selectedKey="{/unitShift/Shifts}"><core:ListItem text="{i18n>1shift}" key="1"></core:ListItem><core:ListItem text="{i18n>2shift}" key="2"></core:ListItem><core:ListItem text="{i18n>3shift}" key="3"></core:ListItem><core:ListItem text="{i18n>4shift}" key="4"></core:ListItem><core:ListItem text="{i18n>5shift}" key="5"></core:ListItem><core:ListItem text="{i18n>6shift}" key="6"></core:ListItem></Select><CheckBox text="{i18n>overload}" selected="{/unitShift/Overwrite}" class="sapUiTinyMarginBegin" /></HBox></HBox><f:SimpleForm title="" layout="ResponsiveGridLayout" editable="true"><FlexBox direction="Row" class="sapUiResponsivePadding" justifyContent="Center"><layoutData><l:GridData span="XL12 L12 M12 S12"/></layoutData><FlexBox direction="Column" visible="{=${/unitShift/Shifts} > 0}"><layoutData><l:GridData span="XL4 L4 M4 S12"/></layoutData><Label text="{i18n>shift1}"></Label><FlexBox direction="Row"><TimePicker value="{ path: \'/unitShift/Beguz1\', type: \'sap.ui.model.odata.type.Time\'}" displayFormat="HH:mm" valueFormat="HH:mm" width="120px"></TimePicker><TimePicker value="{ path: \'/unitShift/Enduz1\', type: \'sap.ui.model.odata.type.Time\'}" displayFormat="HH:mm" valueFormat="HH:mm" width="120px" class="sapUiTinyMarginBegin"></TimePicker></FlexBox></FlexBox><FlexBox direction="Column" visible="{=${/unitShift/Shifts} > 1}"><Label text="{i18n>shift2}"></Label><FlexBox direction="Row"><TimePicker value="{ path: \'/unitShift/Beguz2\', type: \'sap.ui.model.odata.type.Time\'}" displayFormat="HH:mm" valueFormat="HH:mm" width="120px"></TimePicker><TimePicker value="{ path: \'/unitShift/Enduz2\', type: \'sap.ui.model.odata.type.Time\'}" displayFormat="HH:mm" valueFormat="HH:mm" width="120px" class="sapUiTinyMarginBegin"></TimePicker></FlexBox></FlexBox><FlexBox direction="Column" visible="{=${/unitShift/Shifts} > 2}"><Label text="{i18n>shift3}"></Label><FlexBox direction="Row"><TimePicker value="{ path: \'/unitShift/Beguz3\', type: \'sap.ui.model.odata.type.Time\'}" displayFormat="HH:mm" valueFormat="HH:mm" width="120px"></TimePicker><TimePicker value="{ path: \'/unitShift/Enduz3\', type: \'sap.ui.model.odata.type.Time\'}" displayFormat="HH:mm" valueFormat="HH:mm" width="120px" class="sapUiTinyMarginBegin"></TimePicker></FlexBox></FlexBox></FlexBox><FlexBox direction="Row" visible="{=${/unitShift/Shifts} > 3}" justifyContent="Center"><layoutData><l:GridData span="XL12 L12 M12 S12"/></layoutData><FlexBox direction="Column" visible="{=${/unitShift/Shifts} > 3}"><Label text="{i18n>shift4}"></Label><FlexBox direction="Row"><TimePicker value="{ path: \'/unitShift/Beguz4\', type: \'sap.ui.model.odata.type.Time\'}" displayFormat="HH:mm" valueFormat="HH:mm" width="120px"></TimePicker><TimePicker value="{ path: \'/unitShift/Enduz4\', type: \'sap.ui.model.odata.type.Time\'}" displayFormat="HH:mm" valueFormat="HH:mm" width="120px" class="sapUiTinyMarginBegin"></TimePicker></FlexBox></FlexBox><FlexBox direction="Column" visible="{=${/unitShift/Shifts} > 4}"><Label text="{i18n>shift5}"></Label><FlexBox direction="Row"><TimePicker value="{ path: \'/unitShift/Beguz5\', type: \'sap.ui.model.odata.type.Time\'}" displayFormat="HH:mm" valueFormat="HH:mm" width="120px"></TimePicker><TimePicker value="{ path: \'/unitShift/Enduz5\', type: \'sap.ui.model.odata.type.Time\'}" displayFormat="HH:mm" valueFormat="HH:mm" width="120px" class="sapUiTinyMarginBegin"></TimePicker></FlexBox></FlexBox><FlexBox direction="Column" visible="{=${/unitShift/Shifts} > 5}"><Label text="{i18n>shift6}"></Label><FlexBox direction="Row"><TimePicker value="{ path: \'/unitShift/Beguz6\', type: \'sap.ui.model.odata.type.Time\'}" displayFormat="HH:mm" valueFormat="HH:mm" width="120px"></TimePicker><TimePicker value="{ path: \'/unitShift/Enduz6\', type: \'sap.ui.model.odata.type.Time\'}" displayFormat="HH:mm" valueFormat="HH:mm" width="120px" class="sapUiTinyMarginBegin"></TimePicker></FlexBox></FlexBox></FlexBox><Table id="tbl_demand_shiftgroup"><layoutData><l:GridData span="XL12 L12 M12 S12"/></layoutData><columns><Column width="3%"><Text text="{i18n>day}"></Text></Column><Column width="3%"><Text text=""></Text></Column><Column width="20%"><Text text="{i18n>stchangequal}"></Text></Column><Column width="5%"><Text text=""></Text></Column><Column width="10%" visible="{=${/unitShift/Shifts} > 0}"><Text text="{i18n>demand1}"></Text></Column><Column width="10%" visible="{=${/unitShift/Shifts} > 1}"><Text text="{i18n>demand2}"></Text></Column><Column width="10%" visible="{=${/unitShift/Shifts} > 2}"><Text text="{i18n>demand3}"></Text></Column><Column width="10%" visible="{=${/unitShift/Shifts} > 3}"><Text text="{i18n>demand4}"></Text></Column><Column width="10%" visible="{=${/unitShift/Shifts} > 4}"><Text text="{i18n>demand5}"></Text></Column><Column width="10%" visible="{=${/unitShift/Shifts} > 5}"><Text text="{i18n>demand6}"></Text></Column></columns><dependents><ColumnListItem id="demandTableShiftGroupTemplate"><cells><Text text="{Daynr}"/><Button icon="sap-icon://add" visible="true" press="onAddDemandQual"></Button><FlexBox direction="Column" items="{dayToDemand/results}"><items><ComboBox width="100%" items="{/qualifications}" selectedKey="{QualId}"><core:ListItem key="{QualId}" text="{QualId} - {QualText}"></core:ListItem></ComboBox></items></FlexBox><FlexBox direction="Column" items="{dayToDemand/results}"><items><Button icon="sap-icon://delete" press="onDeleteDemandQual"></Button></items></FlexBox><FlexBox direction="Column" items="{dayToDemand/results}"><items><Input value="{Demand1}" type="Number"></Input></items></FlexBox><FlexBox direction="Column" items="{dayToDemand/results}"><items><Input value="{Demand2}" type="Number"></Input></items></FlexBox><FlexBox direction="Column" items="{dayToDemand/results}"><items><Input value="{Demand3}" type="Number"></Input></items></FlexBox><FlexBox direction="Column" items="{dayToDemand/results}"><items><Input value="{Demand4}" type="Number"></Input></items></FlexBox><FlexBox direction="Column" items="{dayToDemand/results}"><items><Input value="{Demand5}" type="Number"></Input></items></FlexBox><FlexBox direction="Column" items="{dayToDemand/results}"><items><Input value="{Demand6}" type="Number"></Input></items></FlexBox></cells></ColumnListItem></dependents></Table><Button text="{i18n>addday}" press="onAddDemandDay"><layoutData><l:GridData linebreak="true"/></layoutData></Button><Button text="{i18n>adddayfromold}" press="onAddDemandDayFromLast"><layoutData><l:GridData/></layoutData></Button><Button text="{i18n>txtsave}" press="saveUnitShifts"><layoutData><l:GridData/></layoutData></Button><Button text="{i18n>discard}" press="onCancelDemandShiftGroup"><layoutData><l:GridData/></layoutData></Button></f:SimpleForm></content><endButton><Button text="{i18n>close}" press="onCloseMaintainDemand2" tooltip="{i18n>ttclose}"></Button></endButton></Dialog></core:FragmentDefinition>',
	"MIND2PEP_PLANNER/fragments/MaintainDemandShiftGroupForMan.fragment.xml": '<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:u="sap.ui.unified" xmlns:f="sap.ui.layout.form" xmlns:t="sap.ui.table"\n\txmlns:l="sap.ui.layout"><Dialog title="{i18n>maintaindemand}" draggable="true" resizable="true" stretch="true"><content><Table id="tbl_demand_shiftgroupforman" sticky="HeaderToolbar,ColumnHeaders"><headerToolbar><Toolbar><DateRangeSelection width="250px" change="getShiftData" dateValue="{path:\'ManDemandModel>/Begda\'}" \n\t\t\t\t\t\t\tsecondDateValue="{path:\'ManDemandModel>/Endda\'}"/><Select width="150px" change="onManDemandShiftChange" items="{/dmandShiftSet}" selectedKey="{ManDemandModel>/ShiftKey}"><core:ListItem text="{Descr}" key="{Key}"></core:ListItem></Select><ToolbarSpacer /><Button text="{i18n>txtsave}" press="saveManShifts" type="Emphasized" icon="sap-icon://save"/><Button text="{i18n>discard}" press="onDiscardManShifts" type="Emphasized" icon="sap-icon://cancel"/></Toolbar></headerToolbar><layoutData><l:GridData span="XL12 L12 M12 S12"/></layoutData><columns><Column width="5%"><Text text="{i18n>day}"></Text></Column><Column width="3%"><Text text=""></Text></Column><Column width="20%"><Text text="{i18n>stchangequal}"></Text></Column><Column width="5%"><Text text=""></Text></Column><Column width="10%" visible="{=${ManDemandModel>/ShiftKey} > 0}"><Text text="{i18n>demand1}"></Text></Column><Column width="10%" visible="{=${ManDemandModel>/ShiftKey} > 1}"><Text text="{i18n>demand2}"></Text></Column><Column width="10%" visible="{=${ManDemandModel>/ShiftKey} > 2}"><Text text="{i18n>demand3}"></Text></Column><Column width="10%" visible="{=${ManDemandModel>/ShiftKey} > 3}"><Text text="{i18n>demand4}"></Text></Column></columns><dependents><ColumnListItem id="demandTableShiftGroupForManTemplate"><cells><VBox><Text text="{path:\'ManDemandModel>Date\',type:\'sap.ui.model.type.Date\',formatOptions:{style:\'short\'}}"/><Select width="150px" change="onManDemandShiftChange" items="{/dmandShiftSet}" selectedKey="{ManDemandModel>/ShiftKey}"><core:ListItem text="{Descr}" key="{Key}"></core:ListItem></Select></VBox><Button icon="sap-icon://add" visible="true" press="onAddDemandQualForMan"></Button><FlexBox direction="Column" items="{ManDemandModel>navdmandSet/results}"><items><ComboBox width="100%" items="{ManDemandModel>/qualifications}" selectedKey="{ManDemandModel>QualId}"><core:ListItem key="{ManDemandModel>QualId}" text="{ManDemandModel>QualId} - {ManDemandModel>QualText}"></core:ListItem></ComboBox></items></FlexBox><FlexBox direction="Column" items="{ManDemandModel>navdmandSet/results}"><items><Button icon="sap-icon://delete" press="onDeleteDemandQualForMan"></Button></items></FlexBox><VBox items="{ManDemandModel>navdmandSet/results}"><items><HBox alignItems="Center"><Input value="{ManDemandModel>DemandMan1}" type="Number" editable="false" width="50px" class="sapUiTinyMarginEnd" /><Input value="{ManDemandModel>DemandImp1}" type="Number" width="50px" class="sapUiTinyMarginEnd" /><Text text="{ManDemandModel>Group1}" visible="{= ${ManDemandModel>Group1} !== 0}" width="50px" /></HBox></items></VBox><VBox items="{ManDemandModel>navdmandSet/results}"><items><HBox alignItems="Center"><Input value="{ManDemandModel>DemandMan2}" type="Number" editable="false" width="50px" class="sapUiTinyMarginEnd" /><Input value="{ManDemandModel>DemandImp2}" type="Number" width="50px" class="sapUiTinyMarginEnd" /><Text text="{ManDemandModel>Group2}" visible="{= ${ManDemandModel>Group2} !== 0}" width="50px" /></HBox></items></VBox><VBox items="{ManDemandModel>navdmandSet/results}"><items><HBox alignItems="Center"><Input value="{ManDemandModel>DemandMan3}" type="Number" editable="false" width="50px" class="sapUiTinyMarginEnd" /><Input value="{ManDemandModel>DemandImp3}" type="Number" width="50px" class="sapUiTinyMarginEnd" /><Text text="{ManDemandModel>Group3}" visible="{= ${ManDemandModel>Group3} !== 0}" width="50px" /></HBox></items></VBox><VBox items="{ManDemandModel>navdmandSet/results}"><items><HBox alignItems="Center"><Input value="{ManDemandModel>DemandMan4}" type="Number" editable="false" width="50px" class="sapUiTinyMarginEnd" /><Input value="{ManDemandModel>DemandImp4}" type="Number" width="50px" class="sapUiTinyMarginEnd" /><Text text="{ManDemandModel>Group4}" visible="{= ${ManDemandModel>Group4} !== 0}" width="50px" /></HBox></items></VBox></cells></ColumnListItem></dependents></Table></content><endButton><Button text="{i18n>close}" press="onCloseMaintainDemand3" tooltip="{i18n>ttclose}"></Button></endButton></Dialog></core:FragmentDefinition>',
	"MIND2PEP_PLANNER/fragments/Newsletter.fragment.xml": '<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:u="sap.ui.unified" xmlns:f="sap.ui.layout.form" xmlns:t="sap.ui.table"\n\txmlns:l="sap.ui.layout"><Dialog title="{i18n>newsletter}" contentWidth="800px" draggable="true" resizable="true"><content><OverflowToolbar><content><Title text="Mails" level="H1" class="sapUiSmallMarginBegin"/><ToolbarSpacer/><Button text="{i18n>deletemail}" tooltip="{i18n>ttdeletemail}" type="Reject" press="onRemoveNewsletter"/></content></OverflowToolbar><HBox renderType="Bare"><ScrollContainer height="440px" width="100%" vertical="true" class="sapUiTinyMarginEnd"><List id="vb_mails" items="{path: \'/newsletterSet\', suspended : true}" mode="MultiSelect"><items><StandardListItem title="{= ${Name} ? ${Name} + \' - \' : \'\'}{Mail}" highlight="{= !${IsCustomMail} ? \'Indication05\' : \'None\'}"/></items></List></ScrollContainer><VBox width="30%" class="sapUiTinyMarginTop"><layoutData><l:GridData span="XL4 L4 M4 S12"/></layoutData><Label text="{i18n>chooseweeks}"></Label><RadioButtonGroup id="rbg_timeFrame" selectedIndex="{NewsletterModel>/RadioIndex}"><RadioButton text="{i18n>1week}" selected="true" tooltip="{i18n>tt1week}"><customData><core:CustomData key="weeks" value="1"></core:CustomData></customData></RadioButton><RadioButton text="{i18n>2week}" tooltip="{i18n>tt2week}"><customData><core:CustomData key="weeks" value="2"></core:CustomData></customData></RadioButton><RadioButton text="{i18n>4week}" tooltip="{i18n>tt4week}"><customData><core:CustomData key="weeks" value="4"></core:CustomData></customData></RadioButton><RadioButton text="{i18n>otherweeks}" tooltip="{i18n>ttotherweeks}"><customData><core:CustomData key="weeks" value="0"></core:CustomData></customData></RadioButton></RadioButtonGroup><StepInput value="{NewsletterModel>/CustomWeekCount}" enabled="{= ${NewsletterModel>/RadioIndex} === 3}" description="{i18n>weeks}"\n\t\t\t\t\t\ttextAlign="Center" min="1"/></VBox></HBox><f:SimpleForm id="sf_newmails" title="{i18n>newrecipient}" layout="ResponsiveGridLayout" editable="true" labelSpanL="6" labelSpanXL="6"\n\t\t\t\tlabelSpanM="6" labelSpanS="6"></f:SimpleForm></content><beginButton><Button id="btn_newsletter_send" text="{i18n>send}" tooltip="{i18n>send}" press="sendNewsletter"></Button></beginButton><endButton><Button text="{i18n>close}" press="closeNewsletterPopUp" tooltip="{i18n>ttclose}"></Button></endButton></Dialog></core:FragmentDefinition>',
	"MIND2PEP_PLANNER/fragments/OvertimeCreate.fragment.xml": '<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:u="sap.ui.unified" xmlns:f="sap.ui.layout.form" xmlns:t="sap.ui.table"\n\txmlns:l="sap.ui.layout"><Dialog title="{i18n>overtimecreate}"><content><f:Form editable="true" id="ld_form"><f:layout><f:ResponsiveGridLayout/></f:layout><f:formContainers><f:FormContainer><f:formElements><f:FormElement><f:fields><Text text="{i18n>newovertime}"></Text></f:fields></f:FormElement><f:FormElement><f:fields><Select id="ld_select_emp" change="onEmployeeOvertimeSelect" tooltip="{i18n>ttselectemp}"><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData></Select><DatePicker id="ld_dp_begda_overtime" placeholder="{i18n>from}" change="onOvertimeInputChange" tooltip="{i18n>ttbegda}"><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData></DatePicker><DatePicker id="ld_dp_endda_overtime" placeholder="{i18n>to}" change="onOvertimeInputChange" tooltip="{i18n>ttendda}"><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData></DatePicker><Select id="ld_select_subty_overtime" tooltip="{i18n>ttselectsubtyovertime}"><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData></Select><Input id="ld_inp_amount_overtime" type="Number" placeholder="{i18n>placeholderamount}" tooltip="{i18n>ttamount}" change="onInputChange"><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData></Input><TimePicker id="ld_tp_beguz_overtime" valueFormat="HH:mm" displayFormat="HH:mm" placeholder="{i18n>timefrom}" tooltip="{i18n>tttimefrom}"><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData></TimePicker><TimePicker id="ld_tp_enduz_overtime" valueFormat="HH:mm" displayFormat="HH:mm" placeholder="{i18n>timeto}" tooltip="{i18n>tttimeto}"><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData></TimePicker><Select id="ld_select_versl_overtime" tooltip="{i18n>ttversl}"><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData></Select><Select id="ld_select_comment_overtime" tooltip="{i18n>comment}" change="onOvertimeDirty"><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData></Select></f:fields></f:FormElement><f:FormElement><Button text="{i18n>saveovertime}" press="onSaveOvertime" tooltip="{i18n>ttsaveovertime}"><layoutData><l:GridData span="XL3 L3 M3 S12" linebreak="true"/></layoutData></Button></f:FormElement><f:FormElement><Text text="{i18n>overtimeoverview}"></Text></f:FormElement><f:FormElement><t:Table id="ld_tbl_overtimeoverview" selectionMode="Single" selectionBehavior="Row" visibleRowCount="7" alternateRowColors="true"\n\t\t\t\t\t\t\t\t\twidth="auto"><t:layoutData><l:GridData span="XL12 L12 M12 S12"/></t:layoutData><t:columns><t:Column><Label text="{i18n>subtyovertime}" tooltip="{i18n>ttsubtyovertimetable}"/><t:template><Text text="{SubtyText}" wrapping="false"/></t:template></t:Column><t:Column><Label text="{i18n>verslovertime}" tooltip="{i18n>ttverslovertimetable}"/><t:template><Text text="{VerslText}" wrapping="false"/></t:template></t:Column><t:Column><Label text="{i18n>begda}" tooltip="{i18n>ttbegdatable}"/><t:template><Text text="{Begda}" wrapping="false"/></t:template></t:Column><t:Column><Label text="{i18n>endda}" tooltip="{i18n>ttenddatable}"/><t:template><Text text="{Endda}" wrapping="false"/></t:template></t:Column><t:Column><Label text="{i18n>starttime}" tooltip="{i18n>tttimefromtable}"/><t:template><Text text="{StartTime}" wrapping="false"/></t:template></t:Column><t:Column><Label text="{i18n>endtime}" tooltip="{i18n>tttimetotable}"/><t:template><Text text="{EndTime}" wrapping="false"/></t:template></t:Column><t:Column><Label text="{i18n>amount}" tooltip="{i18n>ttamounttable}"/><t:template><Text text="{Amount}" wrapping="false"/></t:template></t:Column></t:columns></t:Table></f:FormElement><f:FormElement><Button text="{i18n>cancelovertime}" press="onCancelOvertime" tooltip="{i18n>ttcancelovertime}"><layoutData><l:GridData span="XL2 L2 M3 S12"/></layoutData></Button></f:FormElement></f:formElements></f:FormContainer></f:formContainers></f:Form></content><endButton><Button text="{i18n>close}" press="onCloseOvertimeDialog" tooltip="{i18n>ttclose}"></Button></endButton></Dialog></core:FragmentDefinition>',
	"MIND2PEP_PLANNER/fragments/PlanEmpExcelCreate.fragment.xml": '<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:uc="sap.ui.unified.calendar" xmlns:f="sap.ui.layout.form"><Dialog title="{i18n>empexcelbutton}" draggable="true" resizable="true"><content><f:SimpleForm id="emp_excel_sf_form" layout="ResponsiveGridLayout" editable="true" width="500px"><f:content><VBox><Label text="{i18n>datepicker}"></Label><DatePicker id="dp_emp_excel_date" placeholder="{i18n>date}" tooltip="{i18n>ttdate}"></DatePicker></VBox></f:content></f:SimpleForm></content><beginButton><Button id="btn_download_emp_excel" text="{i18n>download}" tooltip="{i18n>ttdownload}"></Button></beginButton><endButton><Button text="{i18n>close}" press="onCloseEmpExcelPopup" tooltip="{i18n>ttclose}"></Button></endButton></Dialog></core:FragmentDefinition>',
	"MIND2PEP_PLANNER/fragments/PlanExcelCreate.fragment.xml": '<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:uc="sap.ui.unified.calendar" xmlns:f="sap.ui.layout.form"><Dialog title="{i18n>xlsdownbutton}" draggable="true" resizable="true"><content><f:SimpleForm id="xls_sf_form" layout="ResponsiveGridLayout" editable="true" width="500px"><f:content><VBox><Label text="{i18n>timeframe1year}"></Label><DatePicker id="dp_excel_begda" placeholder="{i18n>from}" tooltip="{i18n>ttbegda}"></DatePicker><DatePicker id="dp_excel_endda" placeholder="{i18n>to}" tooltip="{i18n>ttendda}"></DatePicker></VBox></f:content></f:SimpleForm></content><beginButton><Button id="btn_download_excel" text="{i18n>download}" tooltip="{i18n>ttdownload}"></Button></beginButton><endButton><Button text="{i18n>close}" press="onCloseYearExcelPopup" tooltip="{i18n>ttclose}"></Button></endButton></Dialog></core:FragmentDefinition>',
	"MIND2PEP_PLANNER/fragments/PoolEmployee.fragment.xml": '<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:u="sap.ui.unified" xmlns:f="sap.ui.layout.form" xmlns:t="sap.ui.table"\n\txmlns:l="sap.ui.layout"><Dialog title="" contentWidth="800px" contentHeight="900px" draggable="true" resizable="true"><content><u:CalendarDateInterval id="cal_date_int_pool" days="14" width="100%" intervalSelection="true"/><f:SimpleForm layout="ResponsiveGridLayout" editable="true" labelSpanL="1" labelSpanXL="1" labelSpanM="2" labelSpanS="12"><f:content><Label id="lbl_pool" text="Poolmitarbeiter"></Label><Input id="inp_pool" valueStateText="{i18n>enterpoolname}" tooltip="{i18n>ttenterpoolname}"></Input><Select id="select_pool_quals" tooltip="{i18n>ttselectpoolquals}"><layoutData><l:GridData span="XL3 L3 M4 S12"/></layoutData></Select><t:Table id="tbl_pool_emps" rowActionCount="1" selectionMode="Single" selectionBehavior="Row" visibleRowCount="7"><t:rowActionTemplate><t:RowAction><t:items><t:RowActionItem type="Delete" icon="sap-icon://delete" press="onPoolDelete" tooltip="{i18n>ttpooldelete}"></t:RowActionItem></t:items></t:RowAction></t:rowActionTemplate><t:layoutData><l:GridData span="XL12 L12 M12 S12"/></t:layoutData><t:columns><t:Column><Label text="{i18n>employeekey}" tooltip="{i18n>ttemployeekey}"/><t:template><Text text="{EmpId}"></Text></t:template></t:Column><t:Column><Label text="{i18n>employeetext}" tooltip="{i18n>ttemployeetext}"/><t:template><Text text="{EmpName}"></Text></t:template></t:Column><t:Column><Label text="{i18n>employeequal}" tooltip="{i18n>ttemployeequal}"/><t:template><Text text="{EmpQual}"></Text></t:template></t:Column><t:Column><Label text="{i18n>employeetimeframe}" tooltip="{i18n>ttemployeetimeframe}"/><t:template><Text text="{Timeframe}"></Text></t:template></t:Column></t:columns></t:Table></f:content></f:SimpleForm></content><beginButton><Button id="btn_emp_add_pool" text="{i18n>adduser}" tooltip="{i18n>ttadduser}"></Button></beginButton><endButton><Button text="{i18n>close}" press="closeAddPoolEmployee" tooltip="{i18n>ttclose}"></Button></endButton></Dialog></core:FragmentDefinition>',
	"MIND2PEP_PLANNER/fragments/QualPick.fragment.xml": '<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:u="sap.ui.unified" xmlns:f="sap.ui.layout.form" xmlns:t="sap.ui.table"><Dialog title="{i18n>addActivity}" draggable="true" resizable="true"><content><VBox id="vb_qual_pick_id"><CheckBox text="{QualText}" selected="{Assigned}"/></VBox></content><beginButton><Button text="{i18n>save}" press="onSaveButtonPress" type="Accept"/></beginButton><endButton><Button text="{i18n>txtcancel}" press="onCloseButtonPress" type="Reject"/></endButton></Dialog></core:FragmentDefinition>',
	"MIND2PEP_PLANNER/fragments/RollingPlan.fragment.xml": '<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:u="sap.ui.unified" afterClose="afterCloseRollingPlan"\n\txmlns:f="sap.ui.layout.form" xmlns:t="sap.ui.table" xmlns:l="sap.ui.layout"><Dialog contentWidth="400px" draggable="true"><customHeader><Toolbar><Title level="H3" text="" /><ToolbarSpacer /><CheckBox text="{i18n>create-rolling-plan}" selected="{RollingPlanModel>/New}" class="sapUiSmallMarginEnd" select="onRPCreateChange"/></Toolbar></customHeader><content><VBox class="sapUiSmallMargin" visible="{RollingPlanModel>/New}"><Label text="{i18n>date-range}" /><DateRangeSelection dateValue="{RollingPlanModel>/Begda}" \n\t\t\t\t\tsecondDateValue="{RollingPlanModel>/Endda}" change="loadRollingPlans"/></VBox><VBox class="sapUiSmallMargin" visible="{= !${RollingPlanModel>/New}}"><Label text="Planungsvariante"/><HBox renderType="Bare"><Select id="idRollingPlanSelect" items="{path:\'/rollingPlanVariantSet\', suspended: true}" width="100%" forceSelection="false" enabled="{= !${RollingPlanModel>/New}}"\n\t\t\t\t\t\tchange="loadRollingPlan" selectedKey="{RollingPlanModel>/PlanId}"><core:Item key="{PlanId}"\n\t\t\t\t\t\t\ttext="{path: \'Begda\',type:\'sap.ui.model.type.Date\',formatOptions:{style:\'short\'}} - {path: \'Endda\',type:\'sap.ui.model.type.Date\',formatOptions:{style:\'short\'}}" /></Select><Button press="onRollingPlanVariantDelete" icon="sap-icon://delete" class="sapUiTinyMarginBegin" enabled="{= ${RollingPlanModel>/PlanId} !== \'\'}"/></HBox></VBox><VBox class="sapUiSmallMargin" visible="{= !${RollingPlanModel>/New} &amp;&amp; ${RollingPlanModel>/PlanId}.length > 0}"><Label text="{i18n>date-range}" /><DateRangeSelection id="idDateRangeUpdateAllowance" dateValue="{RollingPlanModel>/BegdaUpd}" secondDateValue="{RollingPlanModel>/EnddaUpd}" \n\t\t\t\t\tchange="onDateRangeUpdateChange" valueState="{RollingPlanModel>/bDateRangeErrorState}" valueStateText="{RollingPlanModel>/bDateRangeErrorText}"/></VBox><List id="idRollPlanEmployees" headerText="{i18n>employeetext}" items="{path:\'/rollingPlanSet\',suspended:true}" visible="{= !${RollingPlanModel>/New} &amp;&amp; ${RollingPlanModel>/PlanId}.length > 0}"><InputListItem label="{Name}"><Select items="{/qualificationSet}" forceSelection="false" selectedKey="{QualId}"><core:Item text="{QualText}" key="{QualId}" /></Select></InputListItem></List><List id="idRollPlanEmployeesNew" headerText="{i18n>employeetext}" items="{RollingPlanModel>/NewSet}" visible="{RollingPlanModel>/New}"><InputListItem label="{RollingPlanModel>Name}"><Select items="{/qualificationSet}" forceSelection="false" selectedKey="{RollingPlanModel>QualId}"><core:Item text="{QualText}" key="{QualId}" /></Select></InputListItem></List></content><buttons><Button text="{i18n>btncopy}" press="copyRollingPlan" visible="{= !${RollingPlanModel>/New}}"/><Button text="{i18n>save}" press="saveRollingPlan" tooltip="{i18n>ttsave}" /><Button text="{i18n>close}" press="closeRollingPlan" tooltip="{i18n>ttclose}" /></buttons></Dialog></core:FragmentDefinition>',
	"MIND2PEP_PLANNER/fragments/RpTime.fragment.xml": '<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:uc="sap.ui.unified.calendar" xmlns:f="sap.ui.layout.form"><Dialog title="{i18n>rptime}" draggable="true" resizable="true"><content><f:SimpleForm id="ts_sf_form" layout="ResponsiveGridLayout" editable="true" width="500px"><f:content><VBox><Label text="{i18n>timeframe}" visible="false"></Label><DatePicker id="dp_begda" placeholder="{i18n>from}" tooltip="{i18n>ttbegda}" visible="false"></DatePicker><DatePicker id="dp_endda" placeholder="{i18n>to}" tooltip="{i18n>ttendda}" visible="false"></DatePicker><Label text="{i18n>employeetext}"></Label><MultiComboBox id="mcb_employees" selectionChange="onTsEmpChange" selectionFinish="handleSelectionFinish"\n\t\t\t\t\t\t\titems="{ path: \'oLocalEmployeeModel>/employees\' }"><core:Item key="{oLocalEmployeeModel>EmpId}" text="{oLocalEmployeeModel>EmpName}"/></MultiComboBox></VBox></f:content></f:SimpleForm></content><beginButton><Button id="btn_start_rptime" text="{i18n>rptime}" tooltip="{i18n>rptime}"></Button></beginButton><endButton><Button text="{i18n>close}" press="onCloseRpTime" tooltip="{i18n>ttclose}"></Button></endButton></Dialog></core:FragmentDefinition>',
	"MIND2PEP_PLANNER/fragments/SearchEmployee.fragment.xml": '<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:form="sap.ui.layout.form"><Dialog title="{i18n>dialogtitle_search_employee}" contentWidth="40%"><Panel headerText="{i18n>employee_search}"><form:SimpleForm layout="ResponsiveGridLayout" editable="true" labelSpanXL="2" labelSpanL="2" labelSpanM="2" labelSpanS="12"\n\t\t\t\tadjustLabelSpan="false" emptySpanXL="0" emptySpanL="0" emptySpanM="0" emptySpanS="0" columnsXL="1" columnsL="1" columnsM="1"><Label text="{i18n>lastname}"/><Input value="{searchedEmployee>/lastnameSearch}" submit="onSearchEmployee"\n\t\t\t\t\tvalueState="{=${searchedEmployee>/validate} &amp;&amp; ${searchedEmployee>/lastnameSearch} === \'\' &amp;&amp; ${searchedEmployee>/firstnameSearch} === \'\'? \'Error\': \'None\'}"/><Label text="{i18n>firstname}"/><Input value="{searchedEmployee>/firstnameSearch}" submit="onSearchEmployee"\n\t\t\t\t\tvalueState="{=${searchedEmployee>/validate} &amp;&amp; ${searchedEmployee>/lastnameSearch} === \'\' &amp;&amp; ${searchedEmployee>/firstnameSearch} === \'\'? \'Error\': \'None\'}"/><Label text="{i18n>pernr}"/><Input value="{searchedEmployee>/pernrSearch}" submit="onSearchEmployee"\n\t\t\t\t\tvalueState="{=${searchedEmployee>/validate} &amp;&amp; ${searchedEmployee>/pernrSearch} === \'\' &amp;&amp; ${searchedEmployee>/pernrSearch} === \'\'? \'Error\': \'None\'}"/><Toolbar><ToolbarSpacer/><Button text="{i18n>search}" type="Emphasized" press="onSearchEmployee" icon="sap-icon://search"/></Toolbar></form:SimpleForm></Panel><Panel><Table id="employeeSearchhelpId" mode="SingleSelect"><columns><Column><Text text="{i18n>pernr}"/></Column><Column><Text text="{i18n>lastname}"/></Column><Column><Text text="{i18n>firstname}"/></Column><Column><Text text="{i18n>planunit}"/></Column></columns></Table></Panel><buttons><Button text="{i18n>searchEmp}" press="onJumpToEmployee" type="Accept" icon="sap-icon://action"/><Button text="{i18n>jumpToCo}" press="onJumpToTO" type="Default" icon="sap-icon://personnel-view"/><Button text="{i18n>cancel}" press="closeSearchEmployeeDialog" type="Transparent"/></buttons></Dialog></core:FragmentDefinition>',
	"MIND2PEP_PLANNER/fragments/SelectDropdowns.fragment.xml": '<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:u="sap.ui.unified" xmlns:f="sap.ui.layout.form" xmlns:t="sap.ui.table"\n\txmlns:l="sap.ui.layout"><Dialog title="{i18n>selectdropdown}" contentWidth="400px" contentHeight="500px" draggable="true" resizable="true"><content><f:SimpleForm id="sf_selectdropdown" layout="ResponsiveGridLayout" editable="true" labelSpanL="1" labelSpanXL="1" labelSpanM="2"\n\t\t\t\tlabelSpanS="12"><f:content><Label text="{i18n>ddtype}"></Label><Select id="sel_ddtype" change="onDDTypeChange"></Select><Label text="{i18n>ddselection}"></Label><CheckBox id="selectAll" select="selectDeselectAllSelectDropdown" text="{i18n>selectall}"></CheckBox><HBox><VBox id="vb_select_dropdown"></VBox></HBox></f:content></f:SimpleForm></content><beginButton><Button id="btn_select_dropdown_save" text="{i18n>save}" tooltip="{i18n>ttsave}"></Button></beginButton><endButton><Button text="{i18n>close}" press="closeSelectDropdowns" tooltip="{i18n>ttclose}"></Button></endButton></Dialog></core:FragmentDefinition>',
	"MIND2PEP_PLANNER/fragments/SelectEmployee.fragment.xml": '<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:u="sap.ui.unified" xmlns:f="sap.ui.layout.form" xmlns:t="sap.ui.table"\n\txmlns:l="sap.ui.layout"><Dialog title="" draggable="true" contentWidth="100%"><content><u:CalendarDateInterval id="cal_date_int" days="14" width="100%" intervalSelection="true" select="handleCalendarSelect"/><f:SimpleForm layout="ResponsiveGridLayout" editable="true" labelSpanL="1" labelSpanXL="1" labelSpanM="2" labelSpanS="12"><f:content><HBox id="hb_filters"><layoutData><l:GridData span="XL12 L12 M12 S12"/></layoutData><VBox id="vb_ns_box" visible="false" width="40%"><Label id="lbl_emp_search" text="{i18n>searchempname}" design="Bold"/><SearchField id="sf_emp_name" search="onSearchEmpName" placeholder="{i18n>empname}" ariaLabelledBy="lbl_emp_search"/></VBox><VBox width="60%"><HBox width="100%"><VBox width="70%"><VBox id="vb_sg_box" visible="false" width="100%"><Label text="{i18n>planunit}" design="Bold"/><MultiComboBox id="mcb_sg" visible="false"></MultiComboBox></VBox><VBox id="vb_qual_box" visible="false" width="100%"><Label text="{i18n>employeequal}" design="Bold"/><MultiComboBox id="mcb_quals" visible="false"></MultiComboBox><VBox id="vb_qual"></VBox></VBox></VBox><VBox id="vb_av_box" visible="false" width="30%"><Label text="{i18n>employeeavailability}" design="Bold"/><VBox id="vb_av"></VBox></VBox></HBox><Toolbar><ToolbarSpacer/><Button text="{i18n>search}" id="btn_add_emp_search" tooltip="{i18n>ttsearch}" press="onFilterSearchButtonPress"></Button></Toolbar></VBox></HBox><VBox><Label text="{i18n>addEmp}" design="Bold"><layoutData><l:GridData span="XL12 L12 M12 S12"/></layoutData></Label><HBox><VBox width="20%"><Label text="{i18n>from}" textAlign="Left"></Label><DatePicker id="dp_begda" change="onDateChange"/></VBox><VBox width="20%"><Label text="{i18n>to}" textAlign="Left"></Label><DatePicker id="dp_endda" change="onDateChange"/></VBox><VBox width="60%"><Label id="lbl_add_quals" text="{i18n>qualification}" textAlign="Left"></Label><Select id="select_add_quals" tooltip="{i18n>ttselectaddquals}" width="100%"></Select></VBox></HBox></VBox><t:Table id="tbl_emp_selection" selectionMode="Single" selectionBehavior="Row" visibleRowCount="10"><t:layoutData><l:GridData span="XL12 L12 M12 S12"/></t:layoutData></t:Table></f:content></f:SimpleForm></content><beginButton><Button id="btn_emp_add" text="{i18n>adduser}" tooltip="{i18n>ttadduser}" press="onAddEmpButtonPress"></Button></beginButton><endButton><Button text="{i18n>close}" press="closeSelectDialog" tooltip="{i18n>ttclose}"></Button></endButton></Dialog></core:FragmentDefinition>',
	"MIND2PEP_PLANNER/fragments/ShiftSubstitution.fragment.xml": '<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:u="sap.ui.unified" xmlns:f="sap.ui.layout.form" xmlns:t="sap.ui.table"\n\txmlns:l="sap.ui.layout"><Dialog title="{i18n>shiftsubtitutionheader}" draggable="true" resizable="true"><content><f:SimpleForm id="sf_shiftSubstitution" layout="ResponsiveGridLayout" visible="true" editable="true" labelSpanL="1" labelSpanXL="1"\n\t\t\t\tlabelSpanM="2" labelSpanS="12"><DatePicker id="ld_dp_startDate" placeholder="{i18n>validfrom}" change="onChangeShiftSubstStart" tooltip="{i18n>ttdate}"><layoutData><l:GridData span="XL6 L6 M6 S12"/></layoutData></DatePicker><DatePicker id="ld_dp_endDate" placeholder="{i18n>validto}" change="onChangeShiftSubstEnd" tooltip="{i18n>ttdate}"><layoutData><l:GridData span="XL6 L6 M6 S12"/></layoutData></DatePicker><Text text="{i18n>substshiftfrom}"><layoutData><l:GridData span="XL3 L3 M3 S12" linebreak="true"/></layoutData></Text><Select id="ld_select_empfrom" tooltip="{i18n>ttselectemp}"></Select><Text text="{i18n>substshiftto}"><layoutData><l:GridData span="XL3 L3 M3 S12" linebreak="true"/></layoutData></Text><Select id="ld_select_empto" tooltip="{i18n>ttselectemp}"><core:Item key="{EmpId}" text="{Name}"/><layoutData><l:GridData span="XL6 L6 M6 S12"/></layoutData></Select><CheckBox id="chb_substUnit" text="{i18n>substunit}"><layoutData><l:GridData span="XL4 L4 M4 S12" linebreak="true"/></layoutData></CheckBox><CheckBox id="chb_substShifts" text="{i18n>substshifts}" select="onSelectShiftSubstitutionShift"><layoutData><l:GridData span="XL4 L4 M4 S12" linebreak="true"/></layoutData></CheckBox><CheckBox id="chb_substShiftsSubty" text="{i18n>shiftchange_voluntary}" enabled="false"><layoutData><l:GridData span="XL4 L4 M4 S12" linebreak="true"/></layoutData></CheckBox><Button id="btn_substShift" text="{i18n>save}" press="onSaveShiftSubst"><layoutData><l:GridData span="XL3 L3 M3 S4" linebreak="true"/></layoutData></Button></f:SimpleForm></content><endButton><Button text="{i18n>close}" press="closeShiftSubstitutionDialog" tooltip="{i18n>ttclose}"></Button></endButton></Dialog></core:FragmentDefinition>',
	"MIND2PEP_PLANNER/fragments/TimesOverview.fragment.xml": '<core:FragmentDefinition xmlns="sap.m" xmlns:ux="sap.uxap" xmlns:core="sap.ui.core" xmlns:u="sap.ui.unified" xmlns:f="sap.ui.layout.form"\n\txmlns:t="sap.ui.table" xmlns:l="sap.ui.layout"><Dialog title="{i18n>timeManager}" verticalScrolling="false" stretch="true"><content><ux:ObjectPageLayout id="ObjectPageLayout" alwaysShowContentHeader="true"><ux:headerContent><f:SimpleForm layout="ResponsiveGridLayout" editable="true" width="90%"><FlexBox justifyContent="Center"><VBox width="100%"><ComboBox width="100%" id="ld_select_emp" change="onEmployeeChangeTimeOverview" tooltip="{i18n>ttselectemp}"><layoutData><l:GridData span="XL4 L4 M4 S12"/></layoutData></ComboBox></VBox><VBox><Button id="btn_to_oneDayBack" press="onTimesOverviewOneDayBack" icon="sap-icon://arrow-left"><layoutData><l:GridData span="XL1 L1 M1 S1"/></layoutData></Button></VBox><VBox width="100%"><DatePicker id="ld_dp_currentDate" placeholder="{i18n>from}" change="onChangeTimeOverviewDate" tooltip="{i18n>ttbegda}"><layoutData><l:GridData span="XL4 L4 M4 S10"/></layoutData></DatePicker><Input id="inp_calendarWeek" editable="false"/></VBox><VBox width="100%"><Button id="btn_to_oneDayFor" press="onTimesOverviewOneDayFor" icon="sap-icon://arrow-right"><layoutData><l:GridData span="XL1 L1 M1 S1"/></layoutData></Button></VBox></FlexBox></f:SimpleForm></ux:headerContent><ux:sections><ux:ObjectPageSection id="pnl_rptime" title="{i18n>rptimemsg}"><ux:subSections><ux:ObjectPageSubSection><ux:blocks><Panel expandable="true" headerText="{i18n>rptimemsg}"><HBox><f:SimpleForm title="" layout="ResponsiveGridLayout" editable="true"><Button text="{i18n>rptime}" press="onStartRptimeTimesOverview"><layoutData><l:GridData span="XL3 L3 M3 S12" linebreak="true"/></layoutData></Button><List id="li_rp_to_msg" growing="true" growingThreshold="5"><layoutData><l:GridData span="XL6 L6 M6 S12" linebreak="true"/></layoutData><dependents><ObjectListItem id="oli_rp_to_template" title="{MessageText}" type="Active" intro="{ path: \'Begda\', formatter: \'.formatter.formatDate\'}"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tpress="onClickRptimeMsg"></ObjectListItem></dependents></List></f:SimpleForm></HBox></Panel></ux:blocks></ux:ObjectPageSubSection></ux:subSections></ux:ObjectPageSection><ux:ObjectPageSection id="pnl_absence" title="{i18n>absencePanelHeader}"><ux:subSections><ux:ObjectPageSubSection><ux:blocks><VBox><f:SimpleForm title="" layout="ResponsiveGridLayout" editable="true"><DatePicker id="ld_dp_begda_leave"\n\t\t\t\t\t\t\t\t\t\t\t\tvalue="{type: \'sap.ui.model.type.DateTime\', formatOptions: { style: \'long\', strictParsing: true , UTC: true }}" placeholder="{i18n>from}"\n\t\t\t\t\t\t\t\t\t\t\t\ttooltip="{i18n>ttbegda}" change="onLeaveInputChange"><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData></DatePicker><DatePicker id="ld_dp_endda_leave" placeholder="{i18n>to}" tooltip="{i18n>ttendda}" change="onLeaveInputChange"><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData></DatePicker><CheckBox id="chb_absence_day" text="{i18n>previousday}"><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData></CheckBox><Select id="ld_select_subty_leave" tooltip="{i18n>ttselectsubtyleave}" change="onLeaveSubtyChange"><layoutData><l:GridData span="XL3 L3 M3 S12" linebreak="true"/></layoutData></Select><Select id="ld_select_subty_reason" forceSelection="false" tooltip="{i18n>ttselectsubtyreason}" visible="false"\n\t\t\t\t\t\t\t\t\t\t\t\tchange="checkCommentAbsenceReason"><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData><core:Item key="{CommentKey}" text="{Comment}"></core:Item></Select><Input id="ld_inp_subty_reason" placeholder="{i18n>comment}" visible="false" maxLength="50"><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData></Input><TimePicker id="ld_tp_beguz_leave" valueFormat="HH:mm" displayFormat="HH:mm" placeholder="{i18n>timefrom}" tooltip="{i18n>tttimefrom}"\n\t\t\t\t\t\t\t\t\t\t\t\tvisible="false" change="onInputChangeAbsBeguz"><layoutData><l:GridData span="XL3 L3 M3 S12" linebreak="true"/></layoutData></TimePicker><Input id="ld_inp_duration_leave" placeholder="{i18n>duration}" tooltip="{i18n>duration}" type="Number" editable="false"\n\t\t\t\t\t\t\t\t\t\t\t\tchange="onChangeDurationAbsence" visible="false"><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData></Input><TimePicker id="ld_tp_enduz_leave" valueFormat="HH:mm" displayFormat="HH:mm" placeholder="{i18n>timeto}" tooltip="{i18n>tttimeto}"\n\t\t\t\t\t\t\t\t\t\t\t\tvisible="false" change="onInputChangeAbsEnduz"><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData></TimePicker><CheckBox id="chb_sprps" text="{i18n>sprps}" visible="false" select="onInputChangeAbs"><layoutData><l:GridData span="XL4 L4 M4 S12" linebreak="true"/></layoutData></CheckBox><Button id="btn_leaveSave" text="{i18n>saveleave}" press="onSaveLeave" tooltip="{i18n>ttsaveleave}"><layoutData><l:GridData span="XL3 L3 M3 S12" linebreak="true"/></layoutData></Button><Button id="btn_leaveEdit" text="{i18n>editleaveoverview}" press="onUpdateLeave" tooltip="{i18n>tteditleaveoverview}" enabled="false"><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData></Button><Button id="btn_leaveCancel" text="{i18n>cancelleaveoverview}" press="onCancelLeaveOverview" tooltip="{i18n>ttcancelleaveoverview}"\n\t\t\t\t\t\t\t\t\t\t\t\tenabled="false"><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData></Button><Text text="{i18n>leaveoverview}"><layoutData><l:GridData span="XL12 L12 M12 S12" linebreak="true"/></layoutData></Text><t:Table id="ld_tbl_leaveoverview" selectionMode="Single" selectionBehavior="Row" visibleRowCount="3"\n\t\t\t\t\t\t\t\t\t\t\t\trowSelectionChange="onLeaveEntrySelect" alternateRowColors="true"><t:layoutData><l:GridData span="XL12 L12 M12 S12"/></t:layoutData><t:columns><t:Column><Label text="{i18n>subtyleave}" tooltip="{i18n>ttsubtyleavetable}"/><t:template><Text text="{SubtyText}" wrapping="false"/></t:template></t:Column><t:Column><Label text="{i18n>begda}" tooltip="{i18n>ttbegdatable}"/><t:template><Text text="{path: \'Begda\', type: \'sap.ui.model.odata.type.DateTime\', formatOptions: { pattern : \'dd.MM.YYYY\' }}" wrapping="false"/></t:template></t:Column><t:Column><Label text="{i18n>endda}" tooltip="{i18n>ttenddatable}"/><t:template><Text text="{path: \'Endda\', type: \'sap.ui.model.odata.type.DateTime\', formatOptions: { pattern : \'dd.MM.YYYY\' }}" wrapping="false"/></t:template></t:Column><t:Column id="columnAbsPrevDay" visible="true"><Label text="{i18n>previousday}" tooltip="{i18n>previousday}"/><t:template><Text text="{path: \'PrevDay\', formatter: \'.formatter.tableBooleanText\'}" wrapping="false"/></t:template></t:Column><t:Column><Label text="{i18n>starttime}" tooltip="{i18n>tttimefromtable}"/><t:template><Text\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttext="{path: \'Beguz\', type: \'sap.ui.model.odata.type.Time\', formatOptions: { pattern : \'HH:mm\' }, formatter: \'.formatter.tableEmptyTime\'}"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\twrapping="false"/></t:template></t:Column><t:Column><Label text="{i18n>endtime}" tooltip="{i18n>tttimetotable}"/><t:template><Text\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttext="{path: \'Enduz\', type: \'sap.ui.model.odata.type.Time\', formatOptions: { pattern : \'HH:mm\' }, formatter: \'.formatter.tableEmptyTime\'}"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\twrapping="false"/></t:template></t:Column><t:Column><Label text="{i18n>sprps}" tooltip="{i18n>ttsprps}"/><t:template><Text text="{path: \'Sprps\', formatter: \'.formatter.tableBooleanText\'}" wrapping="false"/></t:template></t:Column><t:Column id="columnAbsReason" visible="false"><Label text="{i18n>subtyreason}" tooltip="{i18n>ttselectsubtyreason}"/><t:template><Text text="{NoteText}" wrapping="false"/></t:template></t:Column><t:Column id="columnAbsComment" visible="false"><Label text="{i18n>comment}" tooltip="{i18n>comment}"/><t:template><Text text="{Comment}" wrapping="false"/></t:template></t:Column></t:columns></t:Table><Button text="{i18n>cancelleave}" press="onCancelLeave" tooltip="{i18n>ttcancelleave}"><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData></Button></f:SimpleForm></VBox></ux:blocks></ux:ObjectPageSubSection></ux:subSections></ux:ObjectPageSection><ux:ObjectPageSection id="pnl_shift" title="{i18n>shiftPanelHeader}"><ux:subSections><ux:ObjectPageSubSection><ux:blocks><VBox ><f:SimpleForm id="to_sf_shift" title="" layout="ResponsiveGridLayout" editable="true"><Text text="{i18n>currentShiftHeader}"><layoutData><l:GridData span="XL3 L3 M3 S12" linebreak="true"/></layoutData></Text><Input id="ld_inp_shiftPlan" enabled="false" value="{TprogName}"><layoutData><l:GridData span="XL3 L3 M3 S12" linebreak="true"/></layoutData></Input><TimePicker id="ld_tp_beguz_shiftPlan" valueFormat="HH:mm:ss" displayFormat="HH:mm" placeholder="{i18n>timefrom}"\n\t\t\t\t\t\t\t\t\t\t\t\ttooltip="{i18n>tttimefrom}" visible="true" enabled="false"\n\t\t\t\t\t\t\t\t\t\t\t\tvalue="{ path: \'Beguz\', type: \'sap.ui.model.odata.type.Time\', formatOptions: { pattern : \'HH:mm\' } }"><layoutData><l:GridData span="XL2 L2 M2 S12"/></layoutData></TimePicker><TimePicker id="ld_tp_enduz_shiftPlan" valueFormat="HH:mm:ss" displayFormat="HH:mm" placeholder="{i18n>timeto}" tooltip="{i18n>tttimeto}"\n\t\t\t\t\t\t\t\t\t\t\t\tvisible="true" enabled="false" value="{ path: \'Enduz\', type: \'sap.ui.model.odata.type.Time\', formatOptions: { pattern : \'HH:mm\' } }"><layoutData><l:GridData span="XL2 L2 M2 S12"/></layoutData></TimePicker></f:SimpleForm><f:SimpleForm id="sf_shift_subst" title="" layout="ResponsiveGridLayout" editable="true"><Text text="{i18n>changeShiftHeader}"><layoutData><l:GridData span="XL3 L3 M3 S12" linebreak="true"/></layoutData></Text><Select id="ld_select_shift" tooltip="{i18n>ttselectshift}" change="onNewShiftSelect"><layoutData><l:GridData span="XL3 L3 M3 S12" linebreak="true"/></layoutData></Select><TimePicker id="ld_tp_beguz_shift" valueFormat="HH:mm:ss" displayFormat="HH:mm" placeholder="{i18n>timefrom}" tooltip="{i18n>tttimefrom}"\n\t\t\t\t\t\t\t\t\t\t\t\tvisible="true" enabled="false" change="onInputChangeShift"><layoutData><l:GridData span="XL2 L2 M2 S12"/></layoutData></TimePicker><TimePicker id="ld_tp_enduz_shift" valueFormat="HH:mm:ss" displayFormat="HH:mm" placeholder="{i18n>timeto}" tooltip="{i18n>tttimeto}"\n\t\t\t\t\t\t\t\t\t\t\t\tvisible="true" enabled="false" change="onInputChangeShift"><layoutData><l:GridData span="XL2 L2 M2 S12"/></layoutData></TimePicker><CheckBox id="chb_ownShiftTimes" text="{i18n>ownShiftTimes}" select="onOwnShiftTimeSelect"><layoutData><l:GridData span="XL2 L2 M2 S12"/></layoutData></CheckBox><CheckBox id="chb_voluntary" text="{i18n>voluntaryshiftchange}" select="onTimesOverviewShiftVoluntary"><layoutData><l:GridData span="XL2 L2 M2 S12"/></layoutData></CheckBox><Text id="ld_lbl_integratedOT" visible="false" text="{i18n>integratedOvertime}"><layoutData><l:GridData span="XL3 L3 M3 S12" linebreak="true"/></layoutData></Text><Input id="ld_inp_integratedOT" visible="false" enabled="false"><layoutData><l:GridData span="XL3 L3 M3 S12" linebreak="true"/></layoutData></Input><Select id="to_shift_select_subtype" tooltip="{i18n>ttselectshiftsubtype}" visible="false"><layoutData><l:GridData span="XL3 L3 M3 S12" linebreak="true"/></layoutData></Select><Select id="to_shift_select_tprogclass" tooltip="{i18n>ttselectshifttprogclass}" visible="false"><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData></Select><Text text="" visible="true"><layoutData><l:GridData span="XL2 L2 M2" linebreak="true"/></layoutData></Text><Text id="lbl_break1" text="{i18n>shiftbreak1}" visible="false"><layoutData><l:GridData span="XL1 L1 M1 S12"/></layoutData></Text><TimePicker id="ld_tp_beguz_break1" valueFormat="HH:mm:ss" displayFormat="HH:mm" placeholder="{i18n>timefrom}" tooltip="{i18n>tttimefrom}"\n\t\t\t\t\t\t\t\t\t\t\t\tvisible="false" change="onInputChangeShift"><layoutData><l:GridData span="XL2 L2 M2 S12"/></layoutData></TimePicker><TimePicker id="ld_tp_enduz_break1" valueFormat="HH:mm:ss" displayFormat="HH:mm" placeholder="{i18n>timeto}" tooltip="{i18n>tttimeto}"\n\t\t\t\t\t\t\t\t\t\t\t\tvisible="false" change="onInputChangeShift"><layoutData><l:GridData span="XL2 L2 M2 S12"/></layoutData></TimePicker><Text text="" visible="true"><layoutData><l:GridData span="XL2 L2 M2" linebreak="true"/></layoutData></Text><Text id="lbl_break2" text="{i18n>shiftbreak2}" visible="false"><layoutData><l:GridData span="XL1 L1 M1 S12"/></layoutData></Text><TimePicker id="ld_tp_beguz_break2" valueFormat="HH:mm:ss" displayFormat="HH:mm" placeholder="{i18n>timefrom}" tooltip="{i18n>tttimefrom}"\n\t\t\t\t\t\t\t\t\t\t\t\tvisible="false" change="onInputChangeShift"><layoutData><l:GridData span="XL2 L2 M2 S12"/></layoutData></TimePicker><TimePicker id="ld_tp_enduz_break2" valueFormat="HH:mm:ss" displayFormat="HH:mm" placeholder="{i18n>timeto}" tooltip="{i18n>tttimeto}"\n\t\t\t\t\t\t\t\t\t\t\t\tvisible="false" change="onInputChangeShift"><layoutData><l:GridData span="XL2 L2 M2 S12"/></layoutData></TimePicker><Text id="lbl_comdat" text="{i18n>comdat}" visible="false"><layoutData><l:GridData span="XL2 L1 M1 S12" linebreak="true"/></layoutData></Text><DatePicker id="ld_dp_comdat" visible="false" placeholder="{i18n>comdat}" tooltip="{i18n>comdat}"><layoutData><l:GridData span="XL2 L2 M2 S12" linebreak="true"/></layoutData></DatePicker><TimePicker id="ld_tp_comuzeit" visible="false" valueFormat="HH:mm:ss" displayFormat="HH:mm" placeholder="{i18n>comuzeit}"\n\t\t\t\t\t\t\t\t\t\t\t\ttooltip="{i18n>comuzeit}"><layoutData><l:GridData span="XL2 L2 M2 S12"/></layoutData></TimePicker><Button id="btn_shiftChangeSave" text="{i18n>saveshiftchangeoverview}" press="onSaveShiftChangeOverview" tooltip="{i18n>ttsaveshift}"><layoutData><l:GridData span="XL2 L2 M2 S12" linebreak="true"/></layoutData></Button><Button id="btn_shiftChangeModify" text="{i18n>modifyshiftchangeoverview}" press="onModifyShiftChangeOverview"\n\t\t\t\t\t\t\t\t\t\t\t\ttooltip="{i18n>ttmodifyshift}" enabled="false"><layoutData><l:GridData span="XL2 L2 M2 S12"/></layoutData></Button><Button id="btn_shiftChangeCancel" text="{i18n>cancelshiftchangeoverview}" press="onCancelShiftChangeOverview"\n\t\t\t\t\t\t\t\t\t\t\t\ttooltip="{i18n>ttcancelcicooverview}" enabled="false"><layoutData><l:GridData span="XL2 L2 M2 S12"/></layoutData></Button></f:SimpleForm></VBox></ux:blocks></ux:ObjectPageSubSection></ux:subSections></ux:ObjectPageSection><ux:ObjectPageSection id="pnl_cico" title="{i18n>cicoPanelHeader}"><ux:subSections><ux:ObjectPageSubSection><ux:blocks><f:SimpleForm title="" layout="ResponsiveGridLayout" editable="true"><DatePicker id="ld_dp_date" placeholder="{i18n>date}" change="onCicoEmployeeChange" tooltip="{i18n>ttdate}"><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData></DatePicker><TimePicker id="ld_tp_uz" valueFormat="HH:mm:ss" displayFormat="HH:mm:ss" placeholder="{i18n>time}" change="onCicoTimeChange"\n\t\t\t\t\t\t\t\t\t\t\ttooltip="{i18n>tttime}"><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData></TimePicker><Select id="ld_select_timeevent" tooltip="{i18n>ttselecttimeeventty}" change="onInputChangeCico"><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData></Select><CheckBox id="chb_cico_day" text="{i18n>previousday}" select="onInputChangeCico"><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData></CheckBox><Input id="ld_inp_aufnr" type="Text" placeholder="{i18n>placeholderaufnr}" showSuggestion="true" suggest="handleSuggestAufnr"\n\t\t\t\t\t\t\t\t\t\t\tsuggestionItems="{/aufNrSet}" change="onAufnrChange"><suggestionItems><core:Item key="{Aufnr}" text="{Aufnr} - {Description}"/></suggestionItems><layoutData><l:GridData span="XL3 L3 M3 S12" linebreak="true"/></layoutData></Input><Input id="ld_inp_matnr" type="Text" placeholder="{i18n>placeholdermatnr}" showSuggestion="true" suggest="handleSuggestMatnr"\n\t\t\t\t\t\t\t\t\t\t\tsuggestionItems="{/matNrSet}" change="onMatnrChange"><suggestionItems><core:Item key="{Matnr}" text="{Matnr} - {Description}"/></suggestionItems><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData></Input><Input id="ld_inp_zulage" type="Text" placeholder="{i18n>placeholderzulage}" showSuggestion="true" suggest="handleSuggestZulage"\n\t\t\t\t\t\t\t\t\t\t\tsuggestionItems="{/zulagenSet}" change="onCicoDirty"><suggestionItems><core:Item key="{Zulage}" text="{Zulage}"/></suggestionItems><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData></Input><Input id="ld_inp_kostenst" type="Text" placeholder="{i18n>placeholderkostenst}" showSuggestion="true" suggest="handleSuggestKostenst"\n\t\t\t\t\t\t\t\t\t\t\tsuggestionItems="{/kostenStSet}" change="onCicoDirty"><suggestionItems><core:Item key="{Kostenst}" text="{Kostenst} - {Description}"/></suggestionItems><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData></Input><Button id="btn_cicoSave" text="{i18n>savecico}" press="onSaveCico" tooltip="{i18n>ttsavecico}"><layoutData><l:GridData span="XL3 L3 M3 S12" linebreak="true"/></layoutData></Button><Button id="btn_cicoEdit" text="{i18n>editcicooverview}" press="onUpdateCico" tooltip="{i18n>tteditcicooverview}" enabled="false"><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData></Button><Button id="btn_cicoCancel" text="{i18n>cancelcicooverview}" press="onCancelCicoOverview" tooltip="{i18n>ttcancelcicooverview}"\n\t\t\t\t\t\t\t\t\t\t\tenabled="false"><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData></Button><Text text="{i18n>cicooverview}"><layoutData><l:GridData span="XL12 L12 M12 S12"/></layoutData></Text><t:Table id="ld_tbl_cicooverview" selectionMode="Single" selectionBehavior="Row" visibleRowCount="4" rowSelectionChange="onCicoEntrySelect"\n\t\t\t\t\t\t\t\t\t\t\talternateRowColors="true" width="auto"><t:layoutData><l:GridData span="XL12 L12 M12 S12"/></t:layoutData><t:columns><t:Column><Label text="{i18n>begda}" tooltip="{i18n>ttbegdatable}"/><t:template><Text wrapping="false" text="{ path: \'Ldate\', type: \'sap.ui.model.odata.type.DateTime\', formatOptions: { pattern : \'dd MMM yyyy\' } }"/></t:template></t:Column><t:Column><Label text="{i18n>subtytimeevent}" tooltip="{i18n>ttsubtytimeeventtable}"/><t:template><Text text="{TimeeventTy}" wrapping="false"/></t:template></t:Column><t:Column><Label text="{i18n>ttdescription}" tooltip="{i18n>ttdescription}"/><t:template><Text text="{TimeeventText}" wrapping="false"/></t:template></t:Column><t:Column><Label text="{i18n>time}" tooltip="{i18n>tttimetable}"/><t:template><Text wrapping="false" text="{ path: \'Ltime\', type: \'sap.ui.model.odata.type.Time\', formatOptions: { pattern : \'HH:mm:ss\' } }"/></t:template></t:Column><t:Column><Label text="{i18n>previousday}" tooltip="{i18n>previousday}"/><t:template><Text text="{ path: \'Prev\', formatter: \'.formatter.tableBooleanText\'}" wrapping="false"/></t:template></t:Column><t:Column><Label text="{i18n>auftrag}" tooltip="{i18n>ttaufnr}"/><t:template><Text text="{Aufnr} {AufText}" wrapping="true"/></t:template></t:Column><t:Column><Label text="{i18n>material}" tooltip="{i18n>ttmatnr}"/><t:template><Text text="{Matnr} {MatText}" wrapping="true"/></t:template></t:Column><t:Column><Label text="{i18n>zulage}" tooltip="{i18n>ttzulage}"/><t:template><Text text="{Zulage}" wrapping="false"/></t:template></t:Column><t:Column><Label text="{i18n>kostenst}" tooltip="{i18n>ttkostenst}"/><t:template><Text text="{Kostenst}" wrapping="false"/></t:template></t:Column></t:columns></t:Table><Button text="{i18n>deletecico}" press="onDeleteCico" tooltip="{i18n>ttdeletecico}"><layoutData><l:GridData span="XL2 L2 M3 S12"/></layoutData></Button></f:SimpleForm></ux:blocks></ux:ObjectPageSubSection></ux:subSections></ux:ObjectPageSection><ux:ObjectPageSection id="pnl_overtime" title="{i18n>overtimePanelHeader}"><ux:subSections><ux:ObjectPageSubSection><ux:blocks><f:SimpleForm title="" id="sf_overtime" layout="ResponsiveGridLayout" editable="true"><DatePicker id="ld_dp_begda_overtime" placeholder="{i18n>from}" change="onOvertimeInputChange" tooltip="{i18n>ttbegda}"><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData></DatePicker><DatePicker id="ld_dp_endda_overtime" placeholder="{i18n>to}" change="onOvertimeInputChange" tooltip="{i18n>ttendda}"><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData></DatePicker><Select id="ld_select_subty_overtime" tooltip="{i18n>ttselectsubtyovertime}" change="onOvertimeDirty"><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData><core:Item key="{Subty}" text="{SubtyText}"></core:Item></Select><Input id="ld_inp_amount_overtime" type="Number" visible="false" placeholder="{i18n>placeholderamount}" tooltip="{i18n>ttamount}"\n\t\t\t\t\t\t\t\t\t\t\tchange="onInputChangeOvertime"><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData></Input><TimePicker id="ld_tp_beguz_overtime" valueFormat="HH:mm" displayFormat="HH:mm" placeholder="{i18n>timefrom}" tooltip="{i18n>tttimefrom}"\n\t\t\t\t\t\t\t\t\t\t\tchange="onOvertimeDirty"><layoutData><l:GridData span="XL3 L3 M3 S12" linebreak="true"/></layoutData></TimePicker><TimePicker id="ld_tp_enduz_overtime" valueFormat="HH:mm" displayFormat="HH:mm" placeholder="{i18n>timeto}" tooltip="{i18n>tttimeto}"\n\t\t\t\t\t\t\t\t\t\t\tchange="onOvertimeDirty"><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData></TimePicker><Select id="ld_select_versl_overtime" tooltip="{i18n>ttversl}" change="onOvertimeDirty"><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData><core:Item key="{Versl}" text="{VerslText}"></core:Item></Select><Select id="ld_select_comment_overtime" tooltip="{i18n>comment}" change="checkComment" visible="true"><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData><core:Item key="{CommentKey}" text="{Comment}"></core:Item></Select><Input id="ld_inp_comment_overtime" placeholder="{i18n>comment}" maxLength="50" visible="true"><layoutData><l:GridData span="XL12 L12 M12 S12"/></layoutData><core:Item key="{CommentKey}" text="{Comment}"></core:Item></Input><Button id="btn_overtimeSave" text="{i18n>saveovertime}" press="onSaveOvertime" tooltip="{i18n>ttsaveovertime}"><layoutData><l:GridData span="XL3 L3 M3 S12" linebreak="true"/></layoutData></Button><Button id="btn_overtimeEdit" text="{i18n>editovertimeoverview}" press="onUpdateOvertime" tooltip="{i18n>tteditovertimeoverview}"\n\t\t\t\t\t\t\t\t\t\t\tenabled="false"><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData></Button><Button id="btn_overtimeCancel" text="{i18n>cancelovertimeoverview}" press="onCancelOvertimeOverview"\n\t\t\t\t\t\t\t\t\t\t\ttooltip="{i18n>ttcancelovertimeoverview}" enabled="false"><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData></Button><Text text="{i18n>overtimeoverview}"><layoutData><l:GridData span="XL12 L12 M12 S12"/></layoutData></Text><t:Table id="ld_tbl_overtimeoverview" selectionMode="Single" selectionBehavior="Row" visibleRowCount="4"\n\t\t\t\t\t\t\t\t\t\t\trowSelectionChange="onOvertimeEntrySelect" alternateRowColors="true" width="auto"><t:layoutData><l:GridData span="XL12 L12 M12 S12"/></t:layoutData><t:columns><t:Column><Label text="{i18n>subtyovertime}" tooltip="{i18n>ttsubtyovertimetable}"/><t:template><Text text="{SubtyText}" wrapping="false"/></t:template></t:Column><t:Column><Label text="{i18n>verslovertime}" tooltip="{i18n>ttverslovertimetable}"/><t:template><Text text="{VerslText}" wrapping="false"/></t:template></t:Column><t:Column><Label text="{i18n>begda}" tooltip="{i18n>ttbegdatable}"/><t:template><Text text="{Begda}" wrapping="false"/></t:template></t:Column><t:Column><Label text="{i18n>endda}" tooltip="{i18n>ttenddatable}"/><t:template><Text text="{Endda}" wrapping="false"/></t:template></t:Column><t:Column><Label text="{i18n>starttime}" tooltip="{i18n>tttimefromtable}"/><t:template><Text text="{StartTime}" wrapping="false"/></t:template></t:Column><t:Column><Label text="{i18n>endtime}" tooltip="{i18n>tttimetotable}"/><t:template><Text text="{EndTime}" wrapping="false"/></t:template></t:Column><t:Column><Label text="{i18n>amount}" tooltip="{i18n>ttamounttable}"/><t:template><Text text="{Amount}" wrapping="false"/></t:template></t:Column><t:Column><Label text="{i18n>comment}" tooltip="{i18n>ttamounttable}"/><t:template><Text text="{CommentKeyLong}" wrapping="false"/></t:template></t:Column><t:Column><Label text="{i18n>additionalcomment}" tooltip="{i18n>ttamounttable}"/><t:template><Text text="{Comment}" wrapping="false"/></t:template></t:Column></t:columns></t:Table><Button text="{i18n>cancelovertime}" press="onCancelOvertime" tooltip="{i18n>ttcancelovertime}"><layoutData><l:GridData span="XL2 L2 M3 S12"/></layoutData></Button></f:SimpleForm></ux:blocks></ux:ObjectPageSubSection></ux:subSections></ux:ObjectPageSection><ux:ObjectPageSection id="pnl_allowance" title="{i18n>maintallowance}"><ux:subSections><ux:ObjectPageSubSection><ux:blocks><f:SimpleForm layout="ResponsiveGridLayout" editable="true"><Select id="ld_select_Allowance" tooltip="{i18n>ttselectallowance}" change="onNewAllowanceSelect"><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData></Select><Input id="ld_inp_allowanceHours" enabled="true" type="Number" placeholder="{i18n>ttamounttable}" change="onInputChangeAllowHours"\n\t\t\t\t\t\t\t\t\t\t\tvisible="{AllowanceModel>/Allowance/AnzhlActive}"><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData></Input><Input id="ld_inp_allowanceTimeUnit" width="100px" visible="{AllowanceModel>/Allowance/ZeinhActive}"><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData></Input><Input id="ld_inp_allowanceAmount" enabled="true" placeholder="{i18n>allowanceamount}" change="onInputChangeAllowAmount"\n\t\t\t\t\t\t\t\t\t\t\tvisible="{AllowanceModel>/Allowance/BetrgActive}"><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData></Input><Select id="ld_inp_allowancePayGroup" forceSelection="false" visible="{AllowanceModel>/Allowance/TrfgrActive}"><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData></Select><Select id="ld_inp_allowanceExtReg" forceSelection="false" visible="{AllowanceModel>/Allowance/ExbelActive}"><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData></Select><Input id="ld_inp_allowanceReason" placeholder="{i18n>comment}" visible="{AllowanceModel>/Allowance/CommentActive}"><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData></Input><Button id="btn_allowanceAdd" text="{i18n>addallowance}" enabled="true" press="onAddAllowance"><layoutData><l:GridData span="XL3 L3 M3 S12" linebreak="true"/></layoutData></Button><Button id="btn_allowanceUpdate" text="{i18n>updateallowance}" enabled="false" press="onUpdateAllowance"><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData></Button><Button id="btn_allowanceCancel" text="{i18n>cancelallowance}" enabled="false" press="onCancelAllowance"><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData></Button><t:Table id="ld_tbl_allowanceOverview" selectionMode="Single" selectionBehavior="Row" visibleRowCount="4"\n\t\t\t\t\t\t\t\t\t\t\trowSelectionChange="onAllowanceEntrySelect" alternateRowColors="true" width="auto"><t:layoutData><l:GridData span="XL12 L12 M12 S12"/></t:layoutData><t:columns><t:Column><Label text="{i18n>date}"/><t:template><Text text="{ZDate}" wrapping="false"/></t:template></t:Column><t:Column><Label text="{i18n>zulage}"/><t:template><Text text="{AllowText}" wrapping="false"/></t:template></t:Column><t:Column><Label text="{i18n>ttamounttable}"/><t:template><Text text="{ZHours}" wrapping="false"/></t:template></t:Column><t:Column><Label text="{i18n>time-unit}"/><t:template><Text text="{ZZeinh}" wrapping="false"/></t:template></t:Column><t:Column><Label text="{i18n>allowanceamount}"/><t:template><Text text="{ZAmount}" wrapping="false"/></t:template></t:Column><t:Column><Label text="{i18n>pay-group}"/><t:template><Text text="{ZTrfgr}" wrapping="false"/></t:template></t:Column><t:Column><Label text="{i18n>ext-reg-number}"/><t:template><Text text="{ZExbel}" wrapping="false"/></t:template></t:Column></t:columns></t:Table><Button id="btn_allowanceDel" text="{i18n>deleteallowance}" enabled="false" press="onDeleteAllowance"><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData></Button></f:SimpleForm></ux:blocks></ux:ObjectPageSubSection></ux:subSections></ux:ObjectPageSection><ux:ObjectPageSection id="pnl_timetransfer" title="{i18n>timetransferPanelHeader}"><ux:subSections><ux:ObjectPageSubSection><ux:blocks><f:SimpleForm title="" id="sf_timetransfer" layout="ResponsiveGridLayout" editable="true"><DatePicker id="ld_dp_begda_timetransfer" placeholder="{i18n>from}" change="onTimeTransferInputChange" tooltip="{i18n>ttbegda}"><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData></DatePicker><DatePicker id="ld_dp_endda_timetransfer" placeholder="{i18n>to}" change="onTimeTransferInputChange" tooltip="{i18n>ttendda}"><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData></DatePicker><Select id="ld_select_subty_timetransfer" tooltip="{i18n>subtyotimetransfer}" change="onTimeTransferInputChange"><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData></Select><Input id="ld_inp_amount_timetransfer" type="Number" placeholder="{i18n>placeholderamount}" tooltip="{i18n>ttamount}"\n\t\t\t\t\t\t\t\t\t\t\tchange="onInputChangeTimeTransfer"><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData></Input><Button id="btn_timeTransfer_Save" text="{i18n>txtsave}" press="onCreateTimeTransfer" tooltip="{i18n>txtsave}" enabled="true"><layoutData><l:GridData span="XL3 L3 M3 S12" linebreak="true"/></layoutData></Button><Button id="btn_timetransferEdit" text="{i18n>btnchange}" press="onUpdateTimeTransfer" tooltip="{i18n>btnchange}" enabled="false"><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData></Button><Button id="btn_timetransferCancel" text="{i18n>txtcancel}" press="onCancelTimeTransfer" tooltip="{i18n>txtcancel}" enabled="false"><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData></Button><t:Table id="ld_tbl_timetransferoverview" selectionMode="Single" selectionBehavior="Row" visibleRowCount="4"\n\t\t\t\t\t\t\t\t\t\t\trowSelectionChange="onTimeTransferEntrySelect" alternateRowColors="true" width="auto"><t:layoutData><l:GridData span="XL12 L12 M12 S12"/></t:layoutData><t:columns><t:Column><Label text="{i18n>subtyotimetransfer}" tooltip="{i18n>ttsubtyovertimetable}"/><t:template><Text text="{Subty}" wrapping="false"/></t:template></t:Column><t:Column><Label text="{i18n>begda}" tooltip="{i18n>ttbegdatable}"/><t:template><Text text="{Begda}" wrapping="false"/></t:template></t:Column><t:Column><Label text="{i18n>endda}" tooltip="{i18n>ttenddatable}"/><t:template><Text text="{Endda}" wrapping="false"/></t:template></t:Column><t:Column><Label text="{i18n>amount}" tooltip="{i18n>ttamounttable}"/><t:template><Text text="{Amount}" wrapping="false"/></t:template></t:Column></t:columns></t:Table><Button id="btn_timetransferDel" text="{i18n>delete}" press="onDeleteTimeTransfer" tooltip="{i18n>delete}"><layoutData><l:GridData span="XL2 L2 M3 S12"/></layoutData></Button></f:SimpleForm></ux:blocks></ux:ObjectPageSubSection></ux:subSections></ux:ObjectPageSection></ux:sections></ux:ObjectPageLayout></content><endButton><Button text="{i18n>close}" press="onCloseTimeOverviewDialogViaButton" tooltip="{i18n>ttclose}"></Button></endButton></Dialog></core:FragmentDefinition>',
	"MIND2PEP_PLANNER/fragments/timesoverview/main.fragment.xml": '<core:FragmentDefinition xmlns="sap.m" xmlns:ux="sap.uxap" xmlns:core="sap.ui.core" xmlns:u="sap.ui.unified" xmlns:f="sap.ui.layout.form"\n\txmlns:t="sap.ui.table" xmlns:l="sap.ui.layout"><Dialog title="{i18n>timeManager}" verticalScrolling="false" stretch="true" afterClose="destroyTimeOverviewPopup" busy="false"\n\t\tbusyIndicatorDelay="0"><content><ux:ObjectPageLayout id="ObjectPageLayout" alwaysShowContentHeader="true"><ux:headerContent><f:SimpleForm layout="ResponsiveGridLayout" editable="true" width="90%"><FlexBox justifyContent="Center"><VBox width="100%"><ComboBox width="100%" id="ld_select_emp" change="onEmployeeChangeTimeOverview" tooltip="{i18n>ttselectemp}" selectedKey="{TO>/EmpId}"\n\t\t\t\t\t\t\t\t\titems="{path:\'/employeeSet\', suspended: true, filters: [ {path: \'SpecialEntry\', operator:\'EQ\', value1: false} ]}"><items><core:Item text="{= parseInt(${EmpId})} - {Name}" key="{EmpId}"><core:customData><core:CustomData key="UnitKey" value="{UnitKey}" writeToDom="true"/></core:customData></core:Item></items><layoutData><l:GridData span="XL4 L4 M4 S12"/></layoutData></ComboBox></VBox><VBox width="100%"><DateRangeSelection id="ld_dp_currentDate" placeholder="{i18n>from}" change="onChangeTimeOverviewDate" tooltip="{i18n>ttbegda}"\n\t\t\t\t\t\t\t\t\tdateValue="{TO>/CurrentDate}" secondDateValue="{TO>/SecondCurrentDate}"><layoutData><l:GridData span="XL4 L4 M4 S10"/></layoutData></DateRangeSelection><Input id="inp_calendarWeek" editable="false" visible="false"/></VBox></FlexBox></f:SimpleForm></ux:headerContent><ux:sections><ux:ObjectPageSection id="pnl_rptime" title="{i18n>rptimemsg}" visible="{TO>/TO_RPTIME/IsActive}"><ux:subSections><ux:ObjectPageSubSection><ux:blocks><core:Fragment fragmentName="MIND2PEP_PLANNER.fragments.timesoverview.sections.timereport" type="XML"/></ux:blocks></ux:ObjectPageSubSection></ux:subSections></ux:ObjectPageSection><ux:ObjectPageSection id="pnl_absence" title="{i18n>absencePanelHeader}" visible="{TO>/TO_ABS/IsActive}"><ux:subSections><ux:ObjectPageSubSection><ux:blocks><core:Fragment fragmentName="MIND2PEP_PLANNER.fragments.timesoverview.sections.absence" type="XML"/></ux:blocks></ux:ObjectPageSubSection></ux:subSections></ux:ObjectPageSection><ux:ObjectPageSection id="pnl_shift" title="{i18n>shiftPanelHeader}" visible="{TO>/TO_SHIFT/IsActive}"><ux:subSections><ux:ObjectPageSubSection><ux:blocks><core:Fragment fragmentName="MIND2PEP_PLANNER.fragments.timesoverview.sections.shift" type="XML"/></ux:blocks></ux:ObjectPageSubSection></ux:subSections></ux:ObjectPageSection><ux:ObjectPageSection id="pnl_cico" title="{i18n>cicoPanelHeader}" visible="{TO>/TO_CICO/IsActive}"><ux:subSections><ux:ObjectPageSubSection><ux:blocks><core:Fragment fragmentName="MIND2PEP_PLANNER.fragments.timesoverview.sections.cico" type="XML"/></ux:blocks></ux:ObjectPageSubSection></ux:subSections></ux:ObjectPageSection><ux:ObjectPageSection id="pnl_overtime" title="{i18n>overtimePanelHeader}" visible="{TO>/TO_OVERT/IsActive}"><ux:subSections><ux:ObjectPageSubSection><ux:blocks><core:Fragment fragmentName="MIND2PEP_PLANNER.fragments.timesoverview.sections.overtime" type="XML"/></ux:blocks></ux:ObjectPageSubSection></ux:subSections></ux:ObjectPageSection><ux:ObjectPageSection id="pnl_allowance" title="{i18n>maintallowance}" visible="{TO>/TO_ALLOW/IsActive}"><ux:subSections><ux:ObjectPageSubSection><ux:blocks><core:Fragment fragmentName="MIND2PEP_PLANNER.fragments.timesoverview.sections.allowance" type="XML"/></ux:blocks></ux:ObjectPageSubSection></ux:subSections></ux:ObjectPageSection><ux:ObjectPageSection id="pnl_timetransfer" title="{i18n>timetransferPanelHeader}" visible="{TO>/TO_TIMET/IsActive}"><ux:subSections><ux:ObjectPageSubSection><ux:blocks><core:Fragment fragmentName="MIND2PEP_PLANNER.fragments.timesoverview.sections.timetransfer" type="XML"/></ux:blocks></ux:ObjectPageSubSection></ux:subSections></ux:ObjectPageSection></ux:sections></ux:ObjectPageLayout></content><endButton><Button text="{i18n>close}" press="closeTimeOverviewDialogViaButton" tooltip="{i18n>ttclose}"></Button></endButton></Dialog></core:FragmentDefinition>',
	"MIND2PEP_PLANNER/fragments/timesoverview/sections/absence.fragment.xml": '<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:f="sap.ui.layout.form" xmlns:t="sap.ui.table" xmlns:l="sap.ui.layout"><f:SimpleForm layout="ResponsiveGridLayout" editable="true"><DatePicker id="ld_dp_begda_leave"\n\t\t\tvalue="{type: \'sap.ui.model.type.DateTime\', formatOptions: { style: \'long\', strictParsing: true , UTC: true }}" placeholder="{i18n>from}"\n\t\t\ttooltip="{i18n>ttbegda}" dateValue="{TO>/TO_ABS/ld_dp_begda_leave}"><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData></DatePicker><DatePicker id="ld_dp_endda_leave" placeholder="{i18n>to}" tooltip="{i18n>ttendda}"\n\t\t\tdateValue="{TO>/TO_ABS/ld_dp_endda_leave}"><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData></DatePicker><CheckBox id="chb_absence_day" text="{i18n>previousday}"><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData></CheckBox><Select id="ld_select_subty_leave" tooltip="{i18n>ttselectsubtyleave}" change="onLeaveSubtyChange"\n\t\t\titems="{path:\'pepyear>/SubtypSet\', suspended: true}" forceSelection="false"><items><core:Item text="{pepyear>Subty} - {pepyear>SubtyText}" key="{pepyear>Subty}"><core:customData><core:CustomData key="ganztaegig" value="{pepyear>Ganztaegig}"/><core:CustomData key="Infty" value="{pepyear>Infty}"/><core:CustomData key="ReasonMand" value="{pepyear>ReasonMand}"/></core:customData></core:Item></items><layoutData><l:GridData span="XL3 L3 M3 S12" linebreak="true"/></layoutData></Select><Select id="ld_select_subty_reason" forceSelection="false" tooltip="{i18n>ttselectsubtyreason}"\n\t\t\tvisible="{= ${UserData>/features/TO_ABS_REA/IsActive} || false}" change="checkCommentAbsenceReason" busyIndicatorDelay="0"\n\t\t\titems="{path: \'/messageNoteSet\', suspended: true, filters: [ {path: \'MsgType\', operator: \'EQ\', value1: \'ABSENCE\'} ]}"><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData><core:Item key="{NoteKey}" text="{NoteText}"></core:Item></Select><Input id="ld_inp_subty_reason" placeholder="{i18n>comment}" visible="{= ${UserData>/features/TO_ABS_REA/IsActive} || false}" maxLength="50"><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData></Input><TimePicker id="ld_tp_beguz_leave" valueFormat="HH:mm" displayFormat="HH:mm" placeholder="{i18n>timefrom}" tooltip="{i18n>tttimefrom}"\n\t\t\tvisible="false" change="onInputChangeAbsBeguz"><layoutData><l:GridData span="XL3 L3 M3 S12" linebreak="true"/></layoutData></TimePicker><Input id="ld_inp_duration_leave" placeholder="{i18n>duration}" tooltip="{i18n>duration}" type="Number" change="onChangeDurationAbsence"\n\t\t\tvisible="false"><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData></Input><TimePicker id="ld_tp_enduz_leave" valueFormat="HH:mm" displayFormat="HH:mm" placeholder="{i18n>timeto}" tooltip="{i18n>tttimeto}"\n\t\t\tvisible="false" change="onInputChangeAbsEnduz"><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData></TimePicker><CheckBox id="chb_sprps" text="{i18n>sprps}" visible="{= ${UserData>/features/TO_LOCKIND/IsActive} || false }" select="onInputChangeAbs"><layoutData><l:GridData span="XL4 L4 M4 S12" linebreak="true"/></layoutData></CheckBox><Button id="btn_leaveSave" text="{i18n>saveleave}" press="onSaveLeave" tooltip="{i18n>ttsaveleave}"><layoutData><l:GridData span="XL3 L3 M3 S12" linebreak="true"/></layoutData></Button><Button id="btn_leaveEdit" text="{i18n>editleaveoverview}" press="onUpdateLeave" tooltip="{i18n>tteditleaveoverview}" enabled="false"><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData></Button><Button id="btn_leaveCancel" text="{i18n>cancelleaveoverview}" press="onCancelLeaveOverview" tooltip="{i18n>ttcancelleaveoverview}"\n\t\t\tenabled="false"><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData></Button><Text text="{i18n>leaveoverview}"><layoutData><l:GridData span="XL12 L12 M12 S12" linebreak="true"/></layoutData></Text><t:Table id="ld_tbl_leaveoverview" selectionMode="Single" selectionBehavior="Row" visibleRowCount="3"\n\t\t\trowSelectionChange="onLeaveEntrySelect" alternateRowColors="true" busy="true" busyIndicatorDelay="0"\n\t\t\trows="{path: \'/absenceSet\', suspended: true}"><t:layoutData><l:GridData span="XL12 L12 M12 S12"/></t:layoutData><t:columns><t:Column><Label text="{i18n>subtyleave}" tooltip="{i18n>ttsubtyleavetable}"/><t:template><Text text="{SubtyText}" wrapping="false"/></t:template></t:Column><t:Column><Label text="{i18n>begda}" tooltip="{i18n>ttbegdatable}"/><t:template><Text text="{path: \'Begda\', type: \'sap.ui.model.odata.type.DateTime\', formatOptions: { pattern : \'dd.MM.YYYY\' }}" wrapping="false"/></t:template></t:Column><t:Column><Label text="{i18n>endda}" tooltip="{i18n>ttenddatable}"/><t:template><Text text="{path: \'Endda\', type: \'sap.ui.model.odata.type.DateTime\', formatOptions: { pattern : \'dd.MM.YYYY\' }}" wrapping="false"/></t:template></t:Column><t:Column id="columnAbsPrevDay" visible="true"><Label text="{i18n>previousday}" tooltip="{i18n>previousday}"/><t:template><Text text="{path: \'PrevDay\', formatter: \'.tableBooleanText\'}" wrapping="false"/></t:template></t:Column><t:Column><Label text="{i18n>starttime}" tooltip="{i18n>tttimefromtable}"/><t:template><Text\n\t\t\t\t\t\t\ttext="{path: \'Beguz\', type: \'sap.ui.model.odata.type.Time\', formatOptions: { pattern : \'HH:mm\' }, formatter: \'.formatter.tableEmptyTime\'}"\n\t\t\t\t\t\t\twrapping="false"/></t:template></t:Column><t:Column><Label text="{i18n>endtime}" tooltip="{i18n>tttimetotable}"/><t:template><Text\n\t\t\t\t\t\t\ttext="{path: \'Enduz\', type: \'sap.ui.model.odata.type.Time\', formatOptions: { pattern : \'HH:mm\' }, formatter: \'.formatter.tableEmptyTime\'}"\n\t\t\t\t\t\t\twrapping="false"/></t:template></t:Column><t:Column><Label text="{i18n>sprps}" tooltip="{i18n>ttsprps}"/><t:template><Text text="{path: \'Sprps\', formatter: \'.tableBooleanText\'}" wrapping="false"/></t:template></t:Column><t:Column id="columnAbsReason" visible="{= ${UserData>/features/TO_ABS_REA/IsActive} || false }"><Label text="{i18n>subtyreason}" tooltip="{i18n>ttselectsubtyreason}"/><t:template><Text text="{NoteText}" wrapping="false"/></t:template></t:Column><t:Column id="columnAbsComment" visible="{= ${UserData>/features/TO_ABS_REA/IsActive} || false }"><Label text="{i18n>comment}" tooltip="{i18n>comment}"/><t:template><Text text="{Comment}" wrapping="false"/></t:template></t:Column></t:columns></t:Table><Button text="{i18n>cancelleave}" press="onCancelLeave" tooltip="{i18n>ttcancelleave}"><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData></Button></f:SimpleForm></core:FragmentDefinition>',
	"MIND2PEP_PLANNER/fragments/timesoverview/sections/allowance.fragment.xml": '<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:f="sap.ui.layout.form"\n\txmlns:t="sap.ui.table" xmlns:l="sap.ui.layout"><f:SimpleForm layout="ResponsiveGridLayout" editable="true"><DatePicker dateValue="{TO>/TO_ALLOW/dateValue}"><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData></DatePicker><Select id="ld_select_Allowance" tooltip="{i18n>ttselectallowance}" change="onNewAllowanceSelect" items="{path: \'/availAllowShiftSet\', suspended: true}"><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData><core:Item text="{AllowText}" key="{Zulage}" /></Select><Input id="ld_inp_allowanceHours" enabled="true" type="Number" placeholder="{i18n>ttamounttable}" change="onInputChangeAllowHours"\n\t\t\tvisible="{AllowanceModel>/Allowance/AnzhlActive}"><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData></Input><Input id="ld_inp_allowanceTimeUnit" width="100px" visible="{AllowanceModel>/Allowance/ZeinhActive}"><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData></Input><Input id="ld_inp_allowanceAmount" visible="{AllowanceModel>/Allowance/BetrgActive}" enabled="true" placeholder="{i18n>allowanceamount}"\n\t\t\tchange="onInputChangeAllowAmount"><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData></Input><Select id="ld_inp_allowancePayGroup" forceSelection="false" visible="{AllowanceModel>/Allowance/TrfgrActive}"><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData></Select><Select id="ld_inp_allowanceExtReg" forceSelection="false" visible="{AllowanceModel>/Allowance/ExbelActive}"><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData></Select><Input id="ld_inp_allowanceReason" placeholder="{i18n>comment}" visible="{AllowanceModel>/Allowance/CommentActive}"><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData></Input><Button id="btn_allowanceAdd" text="{i18n>addallowance}" enabled="{= ${TO>/TO_ALLOW/vMode} === \'create\'}" press="onAddAllowance"><layoutData><l:GridData span="XL3 L3 M3 S12" linebreak="true"/></layoutData></Button><Button id="btn_allowanceUpdate" text="{i18n>updateallowance}" enabled="{= ${TO>/TO_ALLOW/vMode} === \'edit\'}" press="onUpdateAllowance"><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData></Button><Button id="btn_allowanceCancel" text="{i18n>cancelallowance}" enabled="{= ${TO>/TO_ALLOW/vMode} === \'edit\'}" press="onCancelAllowance"><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData></Button><t:Table id="ld_tbl_allowanceOverview" selectionMode="Single" selectionBehavior="Row" visibleRowCount="4"\n\t\t\trowSelectionChange="onAllowanceEntrySelect" alternateRowColors="true" width="auto" busyIndicatorDelay="0" busy="true"\n\t\t\trows="{path: \'/allowanceSet\', suspended: true}"><t:layoutData><l:GridData span="XL12 L12 M12 S12"/></t:layoutData><t:columns><t:Column><Label text="{i18n>date}"/><t:template><Text text="{ZDate}" wrapping="false"/></t:template></t:Column><t:Column><Label text="{i18n>zulage}"/><t:template><Text text="{AllowText}" wrapping="false"/></t:template></t:Column><t:Column><Label text="{i18n>ttamounttable}"/><t:template><Text text="{ZHours}" wrapping="false"/></t:template></t:Column><t:Column><Label text="{i18n>time-unit}"/><t:template><Text text="{ZZeinh}" wrapping="false"/></t:template></t:Column><t:Column><Label text="{i18n>allowanceamount}"/><t:template><Text text="{ZAmount}" wrapping="false"/></t:template></t:Column><t:Column><Label text="{i18n>pay-group}"/><t:template><Text text="{ZTrfgr}" wrapping="false"/></t:template></t:Column><t:Column><Label text="{i18n>ext-reg-number}"/><t:template><Text text="{ZExbel}" wrapping="false"/></t:template></t:Column></t:columns></t:Table><Button id="btn_allowanceDel" text="{i18n>deleteallowance}" enabled="{= ${TO>/TO_ALLOW/vMode} === \'edit\'}" press="onDeleteAllowance"><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData></Button></f:SimpleForm></core:FragmentDefinition>',
	"MIND2PEP_PLANNER/fragments/timesoverview/sections/cico.fragment.xml": '<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:f="sap.ui.layout.form" xmlns:t="sap.ui.table" xmlns:l="sap.ui.layout"><f:SimpleForm title="" layout="ResponsiveGridLayout" editable="true"><DatePicker id="ld_dp_date" placeholder="{i18n>date}" tooltip="{i18n>ttdate}" dateValue="{TO>/TO_CICO/ld_dp_date}"><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData></DatePicker><TimePicker id="ld_tp_uz" valueFormat="HH:mm:ss" displayFormat="HH:mm:ss" placeholder="{i18n>time}" change="onCicoTimeChange"\n\t\t\ttooltip="{i18n>tttime}"><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData></TimePicker><Select id="ld_select_timeevent" tooltip="{i18n>ttselecttimeeventty}" change="onInputChangeCico"><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData></Select><CheckBox id="chb_cico_day" text="{i18n>previousday}" select="onInputChangeCico"><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData></CheckBox><Input id="ld_inp_aufnr" type="Text" placeholder="{i18n>placeholderaufnr}" showSuggestion="true" suggest="handleSuggestAufnr"\n\t\t\tsuggestionItems="{/aufNrSet}" change="onAufnrChange"><suggestionItems><core:Item key="{Aufnr}" text="{Aufnr} - {Description}"/></suggestionItems><layoutData><l:GridData span="XL3 L3 M3 S12" linebreak="true"/></layoutData></Input><Input id="ld_inp_matnr" type="Text" placeholder="{i18n>placeholdermatnr}" showSuggestion="true" suggest="handleSuggestMatnr"\n\t\t\tsuggestionItems="{/matNrSet}" change="onMatnrChange"><suggestionItems><core:Item key="{Matnr}" text="{Matnr} - {Description}"/></suggestionItems><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData></Input><Input id="ld_inp_zulage" type="Text" placeholder="{i18n>placeholderzulage}" showSuggestion="true" suggest="handleSuggestZulage"\n\t\t\tsuggestionItems="{/zulagenSet}" change="onCicoDirty"><suggestionItems><core:Item key="{Zulage}" text="{Zulage}"/></suggestionItems><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData></Input><Input id="ld_inp_kostenst" type="Text" placeholder="{i18n>placeholderkostenst}" showSuggestion="true" suggest="handleSuggestKostenst"\n\t\t\tsuggestionItems="{/kostenStSet}" change="onCicoDirty"><suggestionItems><core:Item key="{Kostenst}" text="{Kostenst} - {Description}"/></suggestionItems><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData></Input><Button id="btn_cicoSave" text="{i18n>savecico}" press="onSaveCico" tooltip="{i18n>ttsavecico}"><layoutData><l:GridData span="XL3 L3 M3 S12" linebreak="true"/></layoutData></Button><Button id="btn_cicoEdit" text="{i18n>editcicooverview}" press="onUpdateCico" tooltip="{i18n>tteditcicooverview}" enabled="false"><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData></Button><Button id="btn_cicoCancel" text="{i18n>cancelcicooverview}" press="onCancelCicoOverview" tooltip="{i18n>ttcancelcicooverview}"\n\t\t\tenabled="false"><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData></Button><Text text="{i18n>cicooverview}"><layoutData><l:GridData span="XL12 L12 M12 S12"/></layoutData></Text><t:Table id="ld_tbl_cicooverview" selectionMode="Single" selectionBehavior="Row" visibleRowCount="4" rowSelectionChange="onCicoEntrySelect"\n\t\t\talternateRowColors="true" width="auto"><t:layoutData><l:GridData span="XL12 L12 M12 S12"/></t:layoutData><t:columns><t:Column><Label text="{i18n>begda}" tooltip="{i18n>ttbegdatable}"/><t:template><Text wrapping="false" text="{ path: \'Ldate\', type: \'sap.ui.model.odata.type.Date\', formatOptions: {style: \'short\' } }"/></t:template></t:Column><t:Column><Label text="{i18n>subtytimeevent}" tooltip="{i18n>ttsubtytimeeventtable}"/><t:template><Text text="{TimeeventTy}" wrapping="false"/></t:template></t:Column><t:Column><Label text="{i18n>ttdescription}" tooltip="{i18n>ttdescription}"/><t:template><Text text="{TimeeventText}" wrapping="false"/></t:template></t:Column><t:Column><Label text="{i18n>time}" tooltip="{i18n>tttimetable}"/><t:template><Text wrapping="false" text="{ path: \'Ltime\', type: \'sap.ui.model.odata.type.Time\', formatOptions: { pattern : \'HH:mm:ss\' } }"/></t:template></t:Column><t:Column><Label text="{i18n>previousday}" tooltip="{i18n>previousday}"/><t:template><Text text="{ path: \'Prev\', formatter: \'.tableBooleanText\'}" wrapping="false"/></t:template></t:Column><t:Column><Label text="{i18n>auftrag}" tooltip="{i18n>ttaufnr}"/><t:template><Text text="{Aufnr} {AufText}" wrapping="true"/></t:template></t:Column><t:Column><Label text="{i18n>material}" tooltip="{i18n>ttmatnr}"/><t:template><Text text="{Matnr} {MatText}" wrapping="true"/></t:template></t:Column><t:Column><Label text="{i18n>zulage}" tooltip="{i18n>ttzulage}"/><t:template><Text text="{Zulage}" wrapping="false"/></t:template></t:Column><t:Column><Label text="{i18n>kostenst}" tooltip="{i18n>ttkostenst}"/><t:template><Text text="{Kostenst}" wrapping="false"/></t:template></t:Column></t:columns></t:Table><Button text="{i18n>deletecico}" press="onDeleteCico" tooltip="{i18n>ttdeletecico}"><layoutData><l:GridData span="XL2 L2 M3 S12"/></layoutData></Button></f:SimpleForm></core:FragmentDefinition>',
	"MIND2PEP_PLANNER/fragments/timesoverview/sections/overtime.fragment.xml": '<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:f="sap.ui.layout.form"\n\txmlns:t="sap.ui.table" xmlns:l="sap.ui.layout"><f:SimpleForm title="" id="sf_overtime" layout="ResponsiveGridLayout" editable="true"><DatePicker id="ld_dp_begda_overtime" placeholder="{i18n>from}" tooltip="{i18n>ttbegda}" dateValue="{TO>/TO_OVERT/ld_dp_begda_overtime}"><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData></DatePicker><DatePicker id="ld_dp_endda_overtime" placeholder="{i18n>to}" tooltip="{i18n>ttendda}" dateValue="{TO>/TO_OVERT/ld_dp_endda_overtime}"><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData></DatePicker><Select id="ld_select_subty_overtime" tooltip="{i18n>ttselectsubtyovertime}" change="onOvertimeDirty" items="{path: \'/subtypOvtSet\', suspended: true}"><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData><core:Item key="{Subty}" text="{SubtyText}"></core:Item></Select><Input id="ld_inp_amount_overtime" type="Number" placeholder="{i18n>placeholderamount}" tooltip="{i18n>ttamount}"\n\t\t\tchange="onInputChangeOvertime" visible="{= ${UserData>/features/TO_OVERT_F/IsActive} || false}"><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData></Input><TimePicker id="ld_tp_beguz_overtime" valueFormat="HH:mm" displayFormat="HH:mm" placeholder="{i18n>timefrom}" tooltip="{i18n>tttimefrom}"\n\t\t\tchange="onOvertimeDirty"><layoutData><l:GridData span="XL3 L3 M3 S12" linebreak="true"/></layoutData></TimePicker><TimePicker id="ld_tp_enduz_overtime" valueFormat="HH:mm" displayFormat="HH:mm" placeholder="{i18n>timeto}" tooltip="{i18n>tttimeto}"\n\t\t\tchange="onOvertimeDirty"><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData></TimePicker><Select id="ld_select_versl_overtime" tooltip="{i18n>ttversl}" change="onOvertimeDirty" items="{path: \'/verslSet\', suspended: true}"><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData><core:Item key="{Versl}" text="{VerslText}"></core:Item></Select><Select id="ld_select_comment_overtime" tooltip="{i18n>comment}" change="checkComment" visible="true" \n\t\t\titems="{path: \'/messageNoteSet\', suspended: true}" selectedKey="{TO>/TO_OVERT/selected_comment}"><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData><core:Item key="{NoteKey}" text="{NoteText}"></core:Item></Select><Input id="ld_inp_comment_overtime" placeholder="{i18n>comment}" maxLength="50" required="{= ${TO>/TO_OVERT/selected_comment} === \'SONST\'}"><layoutData><l:GridData span="XL12 L12 M12 S12"/></layoutData><core:Item key="{CommentKey}" text="{Comment}"></core:Item></Input><Button id="btn_overtimeSave" text="{i18n>saveovertime}" press="onSaveOvertime" tooltip="{i18n>ttsaveovertime}"><layoutData><l:GridData span="XL3 L3 M3 S12" linebreak="true"/></layoutData></Button><Button id="btn_overtimeEdit" text="{i18n>editovertimeoverview}" press="onUpdateOvertime" tooltip="{i18n>tteditovertimeoverview}"\n\t\t\tenabled="false"><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData></Button><Button id="btn_overtimeCancel" text="{i18n>cancelovertimeoverview}" press="onCancelOvertimeOverview"\n\t\t\ttooltip="{i18n>ttcancelovertimeoverview}" enabled="false"><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData></Button><Text text="{i18n>overtimeoverview}"><layoutData><l:GridData span="XL12 L12 M12 S12"/></layoutData></Text><t:Table id="ld_tbl_overtimeoverview" selectionMode="Single" selectionBehavior="Row" visibleRowCount="4"\n\t\t\trowSelectionChange="onOvertimeEntrySelect" alternateRowColors="true" width="auto" busyIndicatorDelay="0"\n\t\t\tbusy="true" rows="{path: \'/overtimeSet\', suspended: true}"><t:layoutData><l:GridData span="XL12 L12 M12 S12"/></t:layoutData><t:columns><t:Column><Label text="{i18n>subtyovertime}" tooltip="{i18n>ttsubtyovertimetable}"/><t:template><Text text="{SubtyText}" wrapping="false"/></t:template></t:Column><t:Column><Label text="{i18n>verslovertime}" tooltip="{i18n>ttverslovertimetable}"/><t:template><Text text="{VerslText}" wrapping="false"/></t:template></t:Column><t:Column><Label text="{i18n>begda}" tooltip="{i18n>ttbegdatable}"/><t:template><Text text="{Begda}" wrapping="false"/></t:template></t:Column><t:Column><Label text="{i18n>endda}" tooltip="{i18n>ttenddatable}"/><t:template><Text text="{Endda}" wrapping="false"/></t:template></t:Column><t:Column><Label text="{i18n>starttime}" tooltip="{i18n>tttimefromtable}"/><t:template><Text text="{StartTime}" wrapping="false"/></t:template></t:Column><t:Column><Label text="{i18n>endtime}" tooltip="{i18n>tttimetotable}"/><t:template><Text text="{EndTime}" wrapping="false"/></t:template></t:Column><t:Column><Label text="{i18n>amount}" tooltip="{i18n>ttamounttable}"/><t:template><Text text="{Amount}" wrapping="false"/></t:template></t:Column><t:Column><Label text="{i18n>comment}" tooltip="{i18n>ttamounttable}"/><t:template><Text text="{CommentKeyLong}" wrapping="false"/></t:template></t:Column><t:Column><Label text="{i18n>additionalcomment}" tooltip="{i18n>ttamounttable}"/><t:template><Text text="{Comment}" wrapping="false"/></t:template></t:Column></t:columns></t:Table><Button text="{i18n>cancelovertime}" press="onCancelOvertime" tooltip="{i18n>ttcancelovertime}"><layoutData><l:GridData span="XL2 L2 M3 S12"/></layoutData></Button></f:SimpleForm></core:FragmentDefinition>',
	"MIND2PEP_PLANNER/fragments/timesoverview/sections/shift.fragment.xml": '<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:f="sap.ui.layout.form" xmlns:t="sap.ui.table" xmlns:l="sap.ui.layout"><VBox><t:Table id="ld_tbl_shiftoverview" selectionMode="Single" selectionBehavior="Row" visibleRowCount="4" alternateRowColors="true" width="auto"\n\t\t\tbusyIndicatorDelay="0" rowSelectionChange="onShiftSelection" rows="{path: \'/substitutionSet\', suspended: true}"><t:layoutData><l:GridData span="XL12 L12 M12 S12"/></t:layoutData><t:columns><t:Column><Label text="{i18n>date}" tooltip="{i18n>ttdate}"/><t:template><Text text="{path: \'ShiftDate\', type: \'sap.ui.model.type.Date\', formatOptions: {style: \'short\'}}" wrapping="false"/></t:template></t:Column><t:Column><Label text="{i18n>currentShiftHeader}" tooltip="{i18n>ttoriginalshift}"/><t:template><Text text="{Tprog} {TprogName}" wrapping="false"/></t:template></t:Column><t:Column><Label text="{i18n>plannedShiftColumnHeader}" tooltip="{i18n>ttplannedShiftColumnHeader}"/><t:template><Text text="{SubstTprog} {SubstTprogName}" wrapping="false"/></t:template></t:Column></t:columns></t:Table><f:SimpleForm id="to_sf_shift" title="" layout="ResponsiveGridLayout" editable="true" visible="{TO>/TO_SHIFT/SelectedShift}"><Text text="{i18n>currentShiftHeader}"><layoutData><l:GridData span="XL3 L3 M3 S12" linebreak="true"/></layoutData></Text><Input id="ld_inp_shiftPlan" enabled="false" value="{TprogName}"><layoutData><l:GridData span="XL3 L3 M3 S12" linebreak="true"/></layoutData></Input><TimePicker id="ld_tp_beguz_shiftPlan" valueFormat="HH:mm:ss" displayFormat="HH:mm" placeholder="{i18n>timefrom}"\n\t\t\t\ttooltip="{i18n>tttimefrom}" visible="true" enabled="false"\n\t\t\t\tvalue="{ path: \'Beguz\', type: \'sap.ui.model.odata.type.Time\', formatOptions: { pattern : \'HH:mm\' } }"><layoutData><l:GridData span="XL2 L2 M2 S12"/></layoutData></TimePicker><TimePicker id="ld_tp_enduz_shiftPlan" valueFormat="HH:mm:ss" displayFormat="HH:mm" placeholder="{i18n>timeto}" tooltip="{i18n>tttimeto}"\n\t\t\t\tvisible="true" enabled="false" value="{ path: \'Enduz\', type: \'sap.ui.model.odata.type.Time\', formatOptions: { pattern : \'HH:mm\' } }"><layoutData><l:GridData span="XL2 L2 M2 S12"/></layoutData></TimePicker></f:SimpleForm><f:SimpleForm id="sf_shift_subst" title="" layout="ResponsiveGridLayout" editable="true" visible="{TO>/TO_SHIFT/SelectedShift}"><Text text="{i18n>changeShiftHeader}"><layoutData><l:GridData span="XL3 L3 M3 S12" linebreak="true"/></layoutData></Text><Select id="ld_select_shift" tooltip="{i18n>ttselectshift}" change="onNewShiftSelect" items="{path:\'/availEmpShiftSet\', suspended: true}"\n\t\t\t\tforceSelection="false"><items><core:Item key="{ShiftKey}" text="{ShiftName} - {ShiftKey}"/></items><layoutData><l:GridData span="XL3 L3 M3 S12" linebreak="true"/></layoutData></Select><TimePicker id="ld_tp_beguz_shift" valueFormat="HH:mm:ss" displayFormat="HH:mm" placeholder="{i18n>timefrom}" tooltip="{i18n>tttimefrom}"\n\t\t\t\tvisible="true" enabled="{= ${SubstTprog} === \'****\' }" change="onInputChangeShift"><layoutData><l:GridData span="XL2 L2 M2 S12"/></layoutData></TimePicker><TimePicker id="ld_tp_enduz_shift" valueFormat="HH:mm:ss" displayFormat="HH:mm" placeholder="{i18n>timeto}" tooltip="{i18n>tttimeto}"\n\t\t\t\tvisible="true" enabled="{= ${SubstTprog} === \'****\' }" change="onInputChangeShift"><layoutData><l:GridData span="XL2 L2 M2 S12"/></layoutData></TimePicker><CheckBox id="chb_ownShiftTimes" text="{i18n>ownShiftTimes}" selected="{:= ${SubstOwnSh} }" select="onOwnShiftTimeSelect"><layoutData><l:GridData span="XL2 L2 M2 S12"/></layoutData></CheckBox><CheckBox id="chb_voluntary" text="{i18n>voluntaryshiftchange}" select="onTimesOverviewShiftVoluntary"\n\t\t\t\tvisible="{= !${UserData>/features/TO_VTART/IsActive}}"><layoutData><l:GridData span="XL2 L2 M2 S12"/></layoutData></CheckBox><Text id="ld_lbl_integratedOT" visible="{= ${UserData>/features/TO_INTEGOT/IsActive} || false }" text="{i18n>integratedOvertime}"><layoutData><l:GridData span="XL3 L3 M3 S12" linebreak="true"/></layoutData></Text><Input id="ld_inp_integratedOT" visible="{= ${UserData>/features/TO_INTEGOT/IsActive} || false}" enabled="false"><layoutData><l:GridData span="XL3 L3 M3 S12" linebreak="true"/></layoutData></Input><Select id="to_shift_select_subtype" tooltip="{i18n>ttselectshiftsubtype}" visible="{= ${UserData>/features/TO_VTART/IsActive} || false}"\n\t\t\t\titems="{path:\'/vtArtSet\', suspended: true}"><items><core:Item key="{Vtart}" text="{= ${Vtart} === \'00\' ? \'\' : (${Vtart} + \' - \' + ${VtartText}) }"/></items><layoutData><l:GridData span="XL3 L3 M3 S12" linebreak="true"/></layoutData></Select><Select id="to_shift_select_tprogclass" tooltip="{i18n>ttselectshifttprogclass}"\n\t\t\t\tvisible="{= ${UserData>/features/TO_TPROGCL/IsActive} || false}" items="{/tprogClassSet}"><items><core:Item text="{Text}" key="{Tpkla}"/></items><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData></Select><Text text="" visible="true"><layoutData><l:GridData span="XL2 L2 M2" linebreak="true"/></layoutData></Text><Text id="lbl_break1" text="{i18n>shiftbreak1}" visible="{= ${TO>/TO_SHIFT/break1} || false}"><layoutData><l:GridData span="XL1 L1 M1 S12"/></layoutData></Text><TimePicker id="ld_tp_beguz_break1" valueFormat="HH:mm:ss" displayFormat="HH:mm" placeholder="{i18n>timefrom}" tooltip="{i18n>tttimefrom}"\n\t\t\t\tvisible="{= ${TO>/TO_SHIFT/break1} || false}" change="onInputChangeShift" value="{SubstBeguzBr1}"><layoutData><l:GridData span="XL2 L2 M2 S12"/></layoutData></TimePicker><TimePicker id="ld_tp_enduz_break1" valueFormat="HH:mm:ss" displayFormat="HH:mm" placeholder="{i18n>timeto}" tooltip="{i18n>tttimeto}"\n\t\t\t\tvisible="{= ${TO>/TO_SHIFT/break1} || false}" change="onInputChangeShift" value="{SubstEnduzBr1}"><layoutData><l:GridData span="XL2 L2 M2 S12"/></layoutData></TimePicker><Text text="" visible="true"><layoutData><l:GridData span="XL2 L2 M2" linebreak="true"/></layoutData></Text><Text id="lbl_break2" text="{i18n>shiftbreak2}" visible="{= ${TO>/TO_SHIFT/break2} || false}"><layoutData><l:GridData span="XL1 L1 M1 S12"/></layoutData></Text><TimePicker id="ld_tp_beguz_break2" valueFormat="HH:mm:ss" displayFormat="HH:mm" placeholder="{i18n>timefrom}" tooltip="{i18n>tttimefrom}"\n\t\t\t\tvisible="{= ${TO>/TO_SHIFT/break2} || false}" change="onInputChangeShift" value="{SubstBeguzBr2}"><layoutData><l:GridData span="XL2 L2 M2 S12"/></layoutData></TimePicker><TimePicker id="ld_tp_enduz_break2" valueFormat="HH:mm:ss" displayFormat="HH:mm" placeholder="{i18n>timeto}" tooltip="{i18n>tttimeto}"\n\t\t\t\tvisible="{= ${TO>/TO_SHIFT/break2} || false}" change="onInputChangeShift" value="{SubstEnduzBr2}"><layoutData><l:GridData span="XL2 L2 M2 S12"/></layoutData></TimePicker><Text id="lbl_comdat" text="{i18n>comdat}" visible="{= ${UserData>/features/COMMDATE/IsActive} || false }"><layoutData><l:GridData span="XL2 L1 M1 S12" linebreak="true"/></layoutData></Text><DatePicker id="ld_dp_comdat" visible="{= ${UserData>/features/COMMDATE/IsActive} || false }" placeholder="{i18n>comdat}"\n\t\t\t\ttooltip="{i18n>comdat}" dateValue="{TO>/TO_SHIFT/Comdate}"><layoutData><l:GridData span="XL2 L2 M2 S12" linebreak="true"/></layoutData></DatePicker><TimePicker id="ld_tp_comuzeit" visible="{= ${UserData>/features/COMMDATE/IsActive} || false}" valueFormat="HH:mm:ss" displayFormat="HH:mm"\n\t\t\t\tplaceholder="{i18n>comuzeit}" tooltip="{i18n>comuzeit}" value="{TO>/TO_SHIFT/Comuzeit}"><layoutData><l:GridData span="XL2 L2 M2 S12"/></layoutData></TimePicker><Button id="btn_shiftChangeSave" text="{i18n>saveshiftchangeoverview}" press="onSaveShiftChangeOverview" tooltip="{i18n>ttsaveshift}"><layoutData><l:GridData span="XL2 L2 M2 S12" linebreak="true"/></layoutData></Button><Button id="btn_shiftChangeModify" text="{i18n>modifyshiftchangeoverview}" press="onModifyShiftChangeOverview"\n\t\t\t\ttooltip="{i18n>ttmodifyshift}" enabled="false"><layoutData><l:GridData span="XL2 L2 M2 S12"/></layoutData></Button><Button id="btn_shiftChangeCancel" text="{i18n>cancelshiftchangeoverview}" press="onCancelShiftChangeOverview"\n\t\t\t\ttooltip="{i18n>ttcancelcicooverview}" enabled="false"><layoutData><l:GridData span="XL2 L2 M2 S12"/></layoutData></Button></f:SimpleForm></VBox></core:FragmentDefinition>',
	"MIND2PEP_PLANNER/fragments/timesoverview/sections/timereport.fragment.xml": '<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:f="sap.ui.layout.form" xmlns:l="sap.ui.layout"><Panel expandable="true" headerText="{i18n>rptimemsg}"><HBox><f:SimpleForm layout="ResponsiveGridLayout" editable="true"><Button text="{i18n>rptime}" press="onStartRptimeTimesOverview"><layoutData><l:GridData span="XL3 L3 M3 S12" linebreak="true"/></layoutData></Button><List id="li_rp_to_msg" growing="true" growingThreshold="5"><layoutData><l:GridData span="XL6 L6 M6 S12" linebreak="true"/></layoutData><dependents><ObjectListItem id="oli_rp_to_template" title="{MessageText}" type="Active" \n\t\t\t\t\t\t\tintro="{ path: \'Begda\', type: \'sap.ui.model.type.Date\', formatOptions: {style: \'short\', UTC: true}}"\n\t\t\t\t\t\t\tpress="onClickRptimeMsg"></ObjectListItem></dependents></List></f:SimpleForm></HBox></Panel></core:FragmentDefinition>',
	"MIND2PEP_PLANNER/fragments/timesoverview/sections/timetransfer.fragment.xml": '<core:FragmentDefinition xmlns="sap.m" xmlns:ux="sap.uxap" xmlns:core="sap.ui.core" xmlns:u="sap.ui.unified" xmlns:f="sap.ui.layout.form"\n\txmlns:t="sap.ui.table" xmlns:l="sap.ui.layout"><f:SimpleForm title="" id="sf_timetransfer" layout="ResponsiveGridLayout" editable="true"><DatePicker id="ld_dp_begda_timetransfer" placeholder="{i18n>from}" tooltip="{i18n>ttbegda}"\n\t\t\tenabled="{= ${TO>/TO_TIMET/vMode} === \'create\'}" dateValue="{TO>/TO_TIMET/ld_dp_begda_timetransfer}"><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData></DatePicker><DatePicker id="ld_dp_endda_timetransfer" placeholder="{i18n>to}" tooltip="{i18n>ttendda}"\n\t\t\tenabled="{= ${TO>/TO_TIMET/vMode} === \'create\'}" dateValue="{TO>/TO_TIMET/ld_dp_endda_timetransfer}"><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData></DatePicker><Select id="ld_select_subty_timetransfer" tooltip="{i18n>subtyotimetransfer}" change="onTimeTransferInputChange"\n\t\t\titems="{path: \'/timeTransferSubtySet\', suspended: true}" enabled="{= ${TO>/TO_TIMET/vMode} === \'create\'}"><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData><core:Item text="{Subty} - {Text}" key="{Subty}" /></Select><Input id="ld_inp_amount_timetransfer" type="Number" placeholder="{i18n>placeholderamount}" tooltip="{i18n>ttamount}"><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData></Input><Button id="btn_timeTransfer_Save" text="{i18n>txtsave}" press="onCreateTimeTransfer" tooltip="{i18n>txtsave}" enabled="{= ${TO>/TO_TIMET/vMode} === \'create\'}"><layoutData><l:GridData span="XL3 L3 M3 S12" linebreak="true"/></layoutData></Button><Button id="btn_timetransferEdit" text="{i18n>btnchange}" press="onUpdateTimeTransfer" tooltip="{i18n>btnchange}" enabled="{= ${TO>/TO_TIMET/vMode} === \'edit\'}"><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData></Button><Button id="btn_timetransferCancel" text="{i18n>txtcancel}" press="onCancelTimeTransfer" tooltip="{i18n>txtcancel}" enabled="{= ${TO>/TO_TIMET/vMode} === \'edit\'}"><layoutData><l:GridData span="XL3 L3 M3 S12"/></layoutData></Button><t:Table id="ld_tbl_timetransferoverview" selectionMode="Single" selectionBehavior="Row" visibleRowCount="4"\n\t\t\trowSelectionChange="onTimeTransferEntrySelect" alternateRowColors="true" width="auto" busyIndicatorDelay="0" busy="true"\n\t\t\trows="{path: \'/timeTransferSet\', suspended: true}"><t:layoutData><l:GridData span="XL12 L12 M12 S12"/></t:layoutData><t:columns><t:Column><Label text="{i18n>subtyotimetransfer}" tooltip="{i18n>ttsubtyovertimetable}"/><t:template><Text text="{Subty}" wrapping="false"/></t:template></t:Column><t:Column><Label text="{i18n>begda}" tooltip="{i18n>ttbegdatable}"/><t:template><Text text="{Begda}" wrapping="false"/></t:template></t:Column><t:Column><Label text="{i18n>endda}" tooltip="{i18n>ttenddatable}"/><t:template><Text text="{Endda}" wrapping="false"/></t:template></t:Column><t:Column><Label text="{i18n>amount}" tooltip="{i18n>ttamounttable}"/><t:template><Text text="{Amount}" wrapping="false"/></t:template></t:Column></t:columns></t:Table><Button id="btn_timetransferDel" text="{i18n>delete}" press="onDeleteTimeTransfer" tooltip="{i18n>delete}" enabled="{= ${TO>/TO_TIMET/vMode} === \'edit\'}"><layoutData><l:GridData span="XL2 L2 M3 S12"/></layoutData></Button></f:SimpleForm></core:FragmentDefinition>',
	"MIND2PEP_PLANNER/fragments/VerleihungAnlegen.fragment.xml": '<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:u="sap.ui.unified" xmlns:f="sap.ui.layout.form" xmlns:t="sap.ui.table"><Dialog title="{i18n>ttVerlehungnew}" id="add_Verleihungen" draggable="true" resizable="true" contentWidth="1700px"\n\t\tclass="sapUiResponsiveMargin"><content><HBox class="sapUiResponsiveMargin" ><VBox width="50%" ><Button press="onEditVerleihung" text="{i18n>ttVerlehungnew2}"/></VBox><VBox width="20%" class="sapUiSmallMarginTop"><Label text="{i18n>ttDateBisFrom}" width="200px"  /></VBox><VBox width="30%"><DateRangeSelection id="DRS12"/></VBox></HBox><t:Table id="idVerleihungTableSender" class="sapUiResponsiveMargin" width="auto" selectionMode="None" \n\t\t\tvisibleRowCount="{Customizing>/SenderRow}" ><t:columns><t:Column width="100px" autoResizable="true" resizable="true"><Label text="{i18n>ttVerleihung01}"/><t:template><Text text="{Status}" wrapping="false"/></t:template></t:Column><t:Column width="100px" autoResizable="true" resizable="true"><Label text="{i18n>ttVerleihung02}"/><t:template><Text text="{Meinerolle}" wrapping="false"/></t:template></t:Column><t:Column width="300px" autoResizable="true" resizable="true"><Label text="{i18n>ttVerleihung03}"/><t:template><Text text="{MaName}" wrapping="false"/></t:template></t:Column><t:Column width="140px" autoResizable="true" resizable="true"><Label text="{i18n>ttVerleihung04}"/><t:template><Text text="{Stammkostenstelle}" wrapping="false"/></t:template></t:Column><t:Column width="120px" autoResizable="true" resizable="true"><Label text="{i18n>ttVerleihung05}"/><t:template><Text text="{Zielkostenstelle}" wrapping="false"/></t:template></t:Column><t:Column width="150px" autoResizable="true" resizable="true"><Label text="{i18n>ttVerleihung06}"/><t:template><DatePicker id="Von" value="{VonDatum}" class="sapUiSmallMarginBottom" editable="false"/></t:template></t:Column><t:Column width="150px" autoResizable="true" resizable="true"><Label text="{i18n>ttVerleihung07}"/><t:template><DatePicker id="Bis" value="{BisDatum}" class="sapUiSmallMarginBottom" editable="false"/></t:template></t:Column><t:Column width="150px" autoResizable="true" resizable="true"><Label text="{i18n>ttVerleihung08}"/><t:template><Text text="{Stundenerstertag}" wrapping="false"/></t:template></t:Column><t:Column width="150px" autoResizable="true" resizable="true"><Label text="{i18n>ttVerleihung09}"/><t:template><Text text="{Stundenletztertag}" wrapping="false"/></t:template></t:Column><t:Column width="70px" autoResizable="true" resizable="true"><Label text="{i18n>ttVerleihung10}" /><t:template><Button icon="sap-icon://edit" press="onEditVerleihungSender"/></t:template></t:Column></t:columns></t:Table><t:Table id="idVerleihungTableReciver" class="sapUiResponsiveMargin" width="auto"\n\t\t\t\t         selectionMode="None" visibleRowCount="{Customizing>/ReceiverRow}" ><t:columns><t:Column width="100px" autoResizable="true" resizable="true"><Label text="{i18n>ttVerleihung01}"/><t:template><Text text="{Status}" wrapping="false"/></t:template></t:Column><t:Column width="100px" autoResizable="true" resizable="true"><Label text="{i18n>ttVerleihung02}"/><t:template><Text text="{Meinerolle}" wrapping="false"/></t:template></t:Column><t:Column width="300px" autoResizable="true" resizable="true"><Label text="{i18n>ttVerleihung03}"/><t:template><Text text="{MaName}" wrapping="false"/></t:template></t:Column><t:Column width="140px" autoResizable="true" resizable="true"><Label text="{i18n>ttVerleihung04}"/><t:template><Text text="{Stammkostenstelle}" wrapping="false"/></t:template></t:Column><t:Column width="120px" autoResizable="true" resizable="true"><Label text="{i18n>ttVerleihung05}"/><t:template><Text text="{Zielkostenstelle}" wrapping="false"/></t:template></t:Column><t:Column width="150px" autoResizable="true" resizable="true"><Label text="{i18n>ttVerleihung06}"/><t:template><DatePicker id="VonRec" value="{VonDatum}" class="sapUiSmallMarginBottom" editable="false"/></t:template></t:Column><t:Column width="150px" autoResizable="true" resizable="true"><Label text="{i18n>ttVerleihung07}"/><t:template><DatePicker id="BisRec" value="{BisDatum}" class="sapUiSmallMarginBottom" editable="false"/></t:template></t:Column><t:Column width="150px" autoResizable="true" resizable="true"><Label text="{i18n>ttVerleihung08}"/><t:template><Text text="{Stundenerstertag}" wrapping="false"/></t:template></t:Column><t:Column width="150px" autoResizable="true" resizable="true"><Label text="{i18n>ttVerleihung09}"/><t:template><Text text="{Stundenletztertag}" wrapping="false"/></t:template></t:Column></t:columns></t:Table></content><beginButton><Button id="btn_Verleihungen_save" text="{i18n>save}" tooltip="{i18n>ttsave}" press="saveNewTime"></Button></beginButton><endButton><Button text="{i18n>close}" press="closeVerleihungen" tooltip="{i18n>ttclose}"></Button></endButton></Dialog></core:FragmentDefinition>',
	"MIND2PEP_PLANNER/fragments/Werkerverleihung.fragment.xml": '<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:u="sap.ui.unified" xmlns:f="sap.ui.layout.form" xmlns:t="sap.ui.table"><Dialog title="{i18n>ttWerkerverleihungTitle}" id="add_Werkerverleihung_id" draggable="true" resizable="true" contentWidth="500px"\n\t\tclass="sapUiResponsiveMargin"><content><HBox class="sapUiResponsiveMargin"><VBox width="50%" class="sapUiSmallMarginTop"><Label text="{i18n>ttMitArbeiter}" width="200px" required="true"/></VBox><VBox width="50%"><ComboBox items="{ path: \'/CountriesCollection\', sorter: { path: \'text\' } }"><core:Item key="{key}" text="{text}"/></ComboBox></VBox></HBox><HBox class="sapUiResponsiveMargin"><VBox width="50%"><Label text="{i18n>ttMitArbeiterkreis}" width="200px"/></VBox><VBox width="50%"><Text text="Ma-Kreis 4711" wrapping="false"/></VBox></HBox><HBox class="sapUiResponsiveMargin"><VBox width="50%" ><Label text="{i18n>ttabteilung}" width="200px"/></VBox><VBox width="50%"><Text text="Abteilung ABC" wrapping="false"/></VBox></HBox><HBox class="sapUiResponsiveMargin"><VBox width="50%"><Label text="{i18n>ttStamm}" width="200px"/></VBox><VBox width="50%"><Text text="Kostenstelle A" wrapping="false"/></VBox></HBox><HBox class="sapUiResponsiveMargin"><VBox width="50%" class="sapUiSmallMarginTop"><Label text="{i18n>ttSZielkosten}" width="200px" required="true"/></VBox><VBox width="50%"><ComboBox items="{ path: \'/CountriesCollection2\', sorter: { path: \'text\' } }"><core:Item key="{key}" text="{text}"/></ComboBox></VBox></HBox><HBox class="sapUiResponsiveMargin"><VBox width="50%" class="sapUiSmallMarginTop"><Label text="{i18n>ttSKostenStelle}" width="200px" required="true"/></VBox><VBox width="50%"><ComboBox items="{ path: \'/CountriesCollection4\', sorter: { path: \'text\' } }"><core:Item key="{key}" text="{text}"/></ComboBox></VBox></HBox><Panel expandable="false" expanded="true" width="auto" class="sapUiResponsiveMargin" backgroundDesign="Translucent"\n\t\t\t\theaderText="{i18n>ttVerleihungzeitraum}"><HBox class="sapUiResponsiveMargin"><VBox width="60%" class="sapUiSmallMarginTop"><Label text="{i18n>ttStartC}" width="200px" required="true"/></VBox><VBox width="40%"><DatePicker id="DP1" class="sapUiSmallMarginBottom"/></VBox></HBox><HBox class="sapUiResponsiveMargin"><VBox width="60%" class="sapUiSmallMarginTop"><Label text="{i18n>ttStundC}" width="200px"/></VBox><VBox width="40%"><Input id="Stunden" class="sapUiSmallMarginBottom" type="Number"/></VBox></HBox><HBox class="sapUiResponsiveMargin"><VBox width="60%" class="sapUiSmallMarginTop"><Label text="{i18n>ttEndeC}" width="200px" required="true"/></VBox><VBox width="40%"><DatePicker id="DP2" class="sapUiSmallMarginBottom"/></VBox></HBox></Panel><HBox class="sapUiResponsiveMargin"><VBox width="50%" class="sapUiSmallMarginTop"><Label text="{i18n>ttverleiC}" width="200px" required="true"/></VBox><VBox width="50%"><ComboBox items="{ path: \'Customizing>/loan_employe\'}" selectedKey="{Customizing>Verleigrunde}"><core:ListItem key="{Customizing>Verleigrunde}" text="{Customizing>Verleigrundetxt}" additionalText="{Customizing>Verleigrundetxt}" /></ComboBox></VBox></HBox><HBox class="sapUiResponsiveMargin"><VBox width="50%" class="sapUiSmallMarginTop"><Label text="{i18n>ttbemerC}" width="200px" /></VBox><VBox width="50%"><Input id="Bemerkung"/></VBox></HBox><HBox class="sapUiResponsiveMargin"><VBox width="50%" class="sapUiSmallMarginTop"><Label text="{i18n>ttkantierC}" width="200px" /></VBox><VBox width="50%"><Input id="Kontierkung"/></VBox></HBox></content><beginButton><Button id="btn_Werkerverleihung_save" text="{i18n>saveWerker}" tooltip="{i18n>ttsave}" press="saveWerkerverleihung"></Button></beginButton><endButton><Button text="{i18n>closeWerker}" press="closeWerkerverleihung" tooltip="{i18n>ttclose}"></Button></endButton></Dialog></core:FragmentDefinition>',
	"MIND2PEP_PLANNER/view/Main.view.xml": '<mvc:View controllerName="MIND2PEP_PLANNER.controller.Main" xmlns:html="http://www.w3.org/1999/xhtml" xmlns:mvc="sap.ui.core.mvc"\n\tdisplayBlock="true" xmlns="sap.m" xmlns:u="sap.ui.unified" xmlns:ui="sap.ui.table"><App><pages><Page id="page" title="{i18n>pepPlanner}" class="sapUiSizeCompact globalCustom" showHeader="false"><content><Panel id="pnl_timeframe" expandable="true" expanded="{= !${UserData>/CalDisabled}}" headerText="{i18n>datePanelHeader}" expand="panelExpandChange"><headerToolbar><Toolbar height="3rem"><Title text="{i18n>datePanelHeader}"/><HBox renderType="Bare"></HBox><ToolbarSpacer/><Button id="btn_search_employee" icon="sap-icon://employee-lookup" press="onSearchEmployeePress" tooltip="{i18n>searchEmployee}"\n\t\t\t\t\t\t\t\t\tvisible="false"/><Label id="lbl_rowheight" text="{i18n>lblrowheight}" tooltip="{i18n>lblrowheighttt}" visible="false" labelFor="sbtn_rowheight"></Label><SegmentedButton id="sbtn_rowheight" selectionChange="rowHeightChange" visible="true" class="sapUiSizeCozy"\n\t\t\t\t\t\t\t\t\tselectedKey="{UserData>/Rowheight}"><items><SegmentedButtonItem text="{i18n>narrow}" tooltip="{ttnarrow}" key="CONDENSED"/><SegmentedButtonItem text="{i18n>normal}" tooltip="{ttnormal}" key="COMPACT"/><SegmentedButtonItem text="{i18n>wide}" tooltip="{ttwide}" key="COZY"/></items></SegmentedButton><Label id="lbl_slider_nolines" text="{i18n>nooflines}" tooltip="{i18n>nooflinestt}" visible="false"/><Slider id="slider_nolines" value="1" width="5%" min="1" max="99" showAdvancedTooltip="true" showHandleTooltip="false"\n\t\t\t\t\t\t\t\t\tinputsAsTooltips="true" change="onChangeNoOfLines" visible="false"/><Button id="btn_show_plan_only" icon="sap-icon://personnel-view" press="onPressShowPlanOnly" tooltip="{i18n>allPlansVisible}"/><Button id="btn_show_sums_only" icon="sap-icon://chart-table-view" press="onPressShowSumsOnly" tooltip="{i18n>allSumsVisible}"/><Button id="btn_collapse_all" icon="sap-icon://collapse-group" press="onPressCollapseAll"/></Toolbar></headerToolbar><u:Calendar id="cal_timeframe" startDateChange="onCalStartDateChange" intervalSelection="true" months="1" width="100%"\n\t\t\t\t\t\t\tselect="onCalendarSelect" specialDates="{/specialDatesSet}"><u:specialDates><u:DateTypeRange startDate="{Startdate}" endDate="{Enddate}" type="{Type}"></u:DateTypeRange></u:specialDates></u:Calendar><u:CalendarDateInterval id="cal_interval" startDateChange="onCalStartDateChange" days="31" width="100%" intervalSelection="true"\n\t\t\t\t\t\t\tselect="onCalendarSelect" visible="false" specialDates="{/specialDatesSet}"><u:specialDates><u:DateTypeRange startDate="{Startdate}" endDate="{Enddate}" type="{Type}"></u:DateTypeRange></u:specialDates></u:CalendarDateInterval></Panel></content><footer><Bar><contentRight><Button type="Accept" id="btnSave" text="{i18n>txtsave}" tooltip="{i18n>ttsave}" icon="sap-icon://save" press="onSave" visible="false"/><Button type="Reject" id="btnCancel" text="{i18n>txtcancel}" tooltip="{i18n>ttcancel}" press="onCancel" visible="false"/></contentRight></Bar></footer></Page></pages></App></mvc:View>',
	"MIND2PEP_PLANNER/i18n/i18n_de.properties": 'title=Title\nappTitle=Personaleinsatzplanung\nappDescription=Personaleinsatzplanung\ndatePanelHeader=Zeitraum\npepPlanner=Personaleinsatzplanung\nplanningPanelHeader=Planung\nplanning=Planung\ntxtsave=Speichern\ntxtcancel=Abbrechen\nadduser=Mitarbeiter hinzufügen\nstadduser=MA+\nclose=Schließen\nttMitArbeiterkreis=Mitarbeiterkreis\nttabteilung=Abteilung (Kurzbezeichnung)\nttStamm=Stammkostenstelle\nttSZielkosten=Zielkostenstelle\nttSKostenStelle=Kostenstelleverandwortlich(r)\nttVerleihungzeitraum=Verleihungzeitraum\nttVerleihung01=Status\nttVerleihung02=Meine Rolle\nttVerleihung03=Ma-Name\nttVerlehungnew=Werkerverleihungen - Mein Arbeitsvorrat\nttVerlehungnew2=Neue Verleihung anlegen\nttDateBisFrom=Datum Von-Bis \nttVerleihung04=Stammkostenstelle\nttVerleihung05=Zielkostenstelle\nttVerleihung06=Von-Datum\nttVerleihung07=Bis-Datum\nttVerleihung08=Stunden Erster Tag\nttVerleihung09=Stunden Letzter Tag\nttVerleihung10=Edit\nttStartC=Start\nttStundC=Stunden Tag 1\nttEndeC=Ende\nttverleiC=Verleihgrund\nttbemerC=Bemerkung\nttkantierC=Kontierkung/Projektnummer\nsaveWerker=Anlegen\ncloseWerker=Abbrechen\nemployeekey=Personalnummer\nttemployeekey=Personalnummer\nemployeetext=Mitarbeiter\nttemployeetext=Mitarbeitername\nemployeequal=Qualifikation\nttemployeequal=Qualifikation für die der Mitarbeiter eingeplant wird\nemployeeshiftgroup=Schichtgruppe\nlegend=Legende\nlog=Protokoll\ndisplaylegend=Legende anzeigen\nstdisplaylegend=Legende\ndisplaylog=Protokoll anzeigen\nstdisplaylog=Protokoll\nunsaved=Ungesicherte Daten gehen verloren\nareyousure=Sind Sie sicher?\nno=Nein\nyes=Ja\nchoosequal=Qualifikation wählen\nemployeeavailability=Verfügbarkeit\nunitsave=Einheit {0} erfolgreich gespeichert\nqualification=Tätigkeit\nerrormsg=Beim Hinzufügen sind Fehler aufgetreten\nwarningmsg=Beim Hinzufügen sind Warnungen aufgetreten\nrefresh=Aktualisieren\nstrefresh=Aktualisieren\nautoplan=Automatische Planung\nstautoplan=Auto. Plan.\nsearch=Suchen\ndummyemp=Poolmitarbeiter anlegen\naddpool=Poolmitarbeiter anlegen\nstaddpool=Pool MA\nenterpoolname=Bitte geben Sie einen Namen an\nunitchangesuccess=Änderung der Planungseinheit erfolgreich\nemployeetimeframe=Zeitraum\nttemployeetimeframe=Zeitraum für den der Mitarbeiter hinzugefügt wird\nprint=PDF-Download\nstprint=PDF\nbegda=Beginndatum\n1week=1 Woche\n2week=2 Wochen\n4week=4 Wochen\ntimeframe=Zeitraum\ndownload=Herunterladen\nhide=Spalten und Zeilen ein-/ausblenden\nsthide=Spalten +/-\nsave=Speichern\nleavecreate=An-/Abwesenheit anlegen\nstleavecreate=An/Abwesenheit\nnewleave=Neue An-/Abwesenheit pflegen\nfrom=Von\nchooseabsence=An-/Abwesenheit wählen\nto=Bis\nsaveleave=Speichern\ncancelleave=Löschen\neditleaveoverview=Ändern\ntteditleaveoverview=An/Abwesenheit ändern\ncancelleaveoverview=Abbrechen\nttcancelleaveoverview=Bearbeitung abbrechen\nleaveoverview=An-/Abwesenheitsübersicht\nsubtyleave=An-/Abwesenheit\neventtype=Ereignisart\nendda=Endedatum\ndeleteleavesure=An-/Abwesenheit wird gelöscht\nareyousure=Sind Sie sicher?\nleavecreated=An-/Abwesenheit erfolgreich angelegt\nleaveupdated=An-/Abwesenheit erfolgreich geändert\nleavedeleted=An-/Abwesenheit erfolgreich gelöscht\nmaintevents=Ereignisse verwalten\nnewevent=Neues Ereignis\nsaveevent=Ereignis sichern\ndeleteevent=Eregnis löschen\neventoverview=Ereignisübersicht\neventtitle=Ereignistitel\neventcreated=Ereignis erfolgreich angelegt\ndeleteeventsure=Ereignis wird gelöscht\nlogid=Log ID\nchange=Änderung\nchangedate=Änderungsdatum\nchangetime=Änderungszeit\nchangeuser=Änderungsbenutzer\nemployeedata=Mitarbeiterdaten\novertimecreate=Mehrarbeit anlegen\nstovertimecreate=Mehrarbeit\nsaveovertime=Speichern\ncancelovertime=Löschen\neditovertimeoverview=Ändern\ntteditovertimeoverview=Mehrarbeit ändern\ncancelovertimeoverview=Abbrechen\nttcancelovertimeoverview=Bearbeitung abbrechen\novertimeoverview=Mehrarbeitsübersicht\nnewovertime=Neue Mehrarbeit pflegen\ndeleteovertimesure=Mehrarbeit wird gelöscht\nsubtyovertime=Mehrarbeitsart\nverslovertime=Verrechnungsart\nplaceholderamount=Anzahl (Std.)\ntime=Uhrzeit\nstarttime=Uhrzeit Beginn\nendtime=Uhrzeit Ende\namount=Anzahl Std.\ntimefrom=Uhrzeit von\ntimeto=Uhrzeit bis\nok=okay\nnoselectedEntry=Kein Eintrag ausgewählt\nselectEntry=Bitte wählen Sie einen Eintrag aus\nttclose=Schließen\nttcancelovertime=Mehrarbeit löschen\nttbegda=Geben Sie das Beginndatum ein\nttendda=Geben Sie das Endedatum ein\ntttimefrom=Geben Sie die Beginn-Uhrzeit ein\ntttimeto=Geben Sie die Ende-Uhrzeit ein\nttsaveovertime=Mehrarbeit speichern\nttversl=Wählen Sie eine Verrechnungsart aus\nttselectsubtyovertime=Wählen Sie eine Mehrarbeitsart aus\nttamount=Geben Sie die Anzahl der Stunden ein\nttselectemp=Wählen Sie einen Mitarbeiter aus\nttselectshift=Wählen Sie eine Schicht aus\novertimecreated=Mehrarbeit erfolgreich angelegt\novertimeupdated=Mehrarbeit erfolgreich geändert\novertimedeleted=Mehrarbeit erfolgreich gelöscht\nttsubtyovertimetable=Mehrarbeitsart\nttverslovertimetable=Verrechnungsart\nttbegdatable=Beginndatum\nttenddatable=Endedatum\ntttimefromtable=Uhrzeit Beginn\ntttimetotable=Uhrzeit Ende\nttamounttable=Anzahl\nttadduser=Mitarbeiter hinzufügen\nttovertimecreate=Mehrarbeit anlegen\nttleavecreate=An-/Abwesenheit anlegen\nttdisplaylegend=Legende anzeigen\nttdisplaylog=Protokoll anzeigen\nttautoplan=Automatische Planung\nttaddpool=Poolmitarbeiter anlegen\nttrefresh=Aktualisieren\ntthide=Spalten ein-/ausblenden\nttprint=Drucken\ntt1week=1 Woche\ntt2week=2 Wochen\ntt4week=4 Wochen\nttdownload=Download\nttsave=Speichern\nttselectsubtyleave=Bitte wählen Sie eine An-/Abwesenheitsart aus\nttselectsubtyreason=Begründung für Abwesenheit\nsubtyreason=Begründung\nttsaveleave=An-/Abwesenheit speichern\nttcancelleave=An-/Abwesenheit löschen\nttsubtyleavetable=An-/Abwesenheitsart\nttmessages=Nachrichten\nttcancel=Abbrechen\nttlogid=Log ID\nttchange=Änderung\nttchangedate=Änderungsdatum\nttchangetime=Änderungszeit\nttchangeuser=Änderungsbenutzer\nttenterpoolname=Bitte geben Sie einen Namen an\nttselectpoolquals=Wählen Sie eine Qualifikation aus\nttpooldelete=Namen löschen\nttselectaddquals=Wählen Sie eine Qualifikation aus\nttsearch=Suchen\nttemployeekeytable=Personalnummer\nttemployeetexttable=Mitarbeiter\nttemployeequaltable=Qualifikation\nttemployeeshiftgrouptable=Schichtgruppe\nattentionPopoverTitle=Meldung zur Kenntnis nehmen\ncompletePopoverTitle=Meldung quittieren\ntakeAttention=Zur Kenntnis nehmen\ncompleteMessage=Quittieren\nchangeAttention=Ändern\ntookAttention=Bereits zur Kenntnis genommen\nattentionNoteCreated=Zur Kenntnisnahme erfolgreich gespeichert\nnoAttentionPossible=Meldung kann nicht zur Kenntnis genommen werden\nnoCompletionPossible=Meldung kann nicht quittiert werden\ncicocreate=Zeitbuchung anlegen\nstcicocreate=Zeitbuchung\nttcicocreate=Zeitbuchung anlegen\nnewcico=Neue Zeitbuchung anlegen\ndate=Datum\nttDate=Date\nttdate=Geben Sie das Datum an\nttselecttimeeventty=Wählen Sie eine Zeitereignisart aus\ntime=Uhrzeit\nttName=Name\nttBox=New Time for All Employee\nttSurname=Surname\nttTime=End Time\ntttime=Geben Sie eine Uhrzeit an\nsavecico=Speichern\nttsavecico=Zeitbuchung speichern\nttsaveshift=Schicht speichern\nttmodifyshift=Schichtänderung speichern\ncicooverview=Übersicht Zeitbuchungen\neditcicooverview=Ändern\ntteditcicooverview=Zeitbuchung ändern\ncancelcicooverview=Abbrechen\nttcancelcicooverview=Bearbeitung abbrechen\ncicooverviewoverview=Zeitbuchungen des Mitarbeiters\nsubtytimeevent=Zeitereignisart\nttsubtytimeeventtable=Zeitereignisart\ntttimetable=Uhrzeit\ndeletecico=Löschen\nttdeletecico=Zeitbuchung löschen\ndescription=Beschreibung\nttdescription=Zeitereignis Beschreibung\ncicocreated=Zeitbuchung erfolgreich angelegt\ncicoupdated=Zeitbuchung erfolgreich geändert\ndeletecicosure=Zeitbuchung wird gelöscht\ncicodeleted=Zeitbuchung erfolgreich gelöscht\nlogtype=Art des Logs\nttlogtype=Art des Logs\ntimestatecreate=Zeitnachweis erstellen\nsttimestatecreate=Zeitnachweis\ntttimestatecreate=Zeitnachweise erstellen\nerrormsgdates=Beginndatum muss vor Enddatum liegen\nchangeplantime=Sollarbeitszeit ändern\nnewplantime=Neue Sollarbeitszeit\ncurrentplantime=Aktuelle Sollarbeitszeit\ncancelassignment=Leihe wird beendet\nsaveplantime=Sollarbeitszeit überschreiben\nttsaveplantime=Sollarbeitszeit überschreiben\ntimeManager=Bearbeiten von Zeiten\nshiftPanelHeader=Schichten\ncicoPanelHeader=Kommen/Gehen Zeiten\nabsencePanelHeader=An-/ Abwesenheiten\novertimePanelHeader=Mehrarbeiten\nshiftPlan=Schicht\nshiftPlanFrom=Soll-Beginn\nshiftPlanTo=Soll-Ende\nshiftFrom=Von\nshiftTo=Bis\nshiftPlanTo=Soll-Ende\nshiftbreak1=1. Pause\nshiftbreak2=2. Pause\nshiftchange_voluntary=Freiwilliger Schichttausch\nsaveownshiftoverview=Speichern\ncancelownshiftoverview=Löschen\nsaveshiftchangeoverview=Speichern\nmodifyshiftchangeoverview=Ändern\ncancelshiftchangeoverview=Löschen\nchangeplantime=Sollarbeitszeit ändern\ncurrentShiftHeader=Ursprüngl. Schicht\nchangeShiftHeader=SOLL/Schicht ändern\nplannedShiftColumnHeader=Schichtvertretung\nttplannedShiftColumnHeader=Abweichende Schichtvertretung zur Planschicht\nttoriginalshift=Ursprüngliche Schicht laut Schichtplan\nttdate=Datum\nabsencePanelHeader=An-/ Abwesenheiten\novertimePanelHeader=Mehrarbeiten\nownShiftTimes=eigene Schichtzeiten\naction=Aktion\nplaceholderaufnr=Auftragsnummer\nplaceholdermatnr=Materialnummer\nplaceholderzulage=Zulage\naufnr=Auftragsnummer\nmatnr=Materialnummer\nzulage=Zulage\nttaufnr=Auftragsnummer\nttmatnr=Materialnummer\nttzulage=Zulage\nshiftchangecreated=Schichtänderung wurde gespeichert\nshiftchangedeleted=Schichtänderung wurde gelöscht\nsprps=Sperrkennzeichen\nttsprps=Sperrkennzeichen\nleavelocked=An-/Abwesenheit gesperrt\nleavelockedlong=An-/Abwesenheit ist gesperrt und kann daher nicht gelöscht werden\nnewplantimecreated=Neue Sollarbeitszeit wurde gespeichert\ndeleteplantime=Sollarbeitszeit zurücksetzen\nttdeleteplantime=Standard-Schichtzeit wiederherstellen\nplantimedeleted=Standard-Sollarbeitszeit wurde wiederhergestellt\nempname=Mitarbeitername\nsearchempname=Suche nach Mitarbeiter\nttsearchempname=Mitarbeiter nach Namen suchen\nplanunit=Planungseinheit\nttplanunittable=Planungseinheit\nhideButton=Details ausblenden\nplaceholderkostenst=Kostenstelle\nkostenst=Kostenstelle\nttkostenst=Kostenstelle\nchangeunit=Planungseinheitszuweisung\nvalidfrom=Gültig ab\nttvalidfrom=Gültig ab\nvalidto=Gültig bis\nttvalidto=Gültig bis\nmainworkplace=Stammarbeitsplatz\nttmainworkplace=Stammarbeitsplatz\nchangeworkplace=Stammarbeitsplatz ändern\nsavekapa=Kapazität übertragen\nstsavekapa=Kapazität\nttsavekapa=Kapazität übertragen\nnochangesinpast=Änderungen in der Vergangenheit unzulässig\nkapasuccess=Kapazitäten erfolgreich übertragen\nnewvariant=Neue Sicht anlegen\nchangevariant=Sicht bearbeiten\ndeletevariant=Sicht löschen\naddvariant=Sicht anlegen\nttselectallowance=Zulage auswählen\nmaintallowance=Zulagenpflege (2010)\naddallowance=Zulage hinzufügen\ndeleteallowance=Zulage löschen\nvariantcreated=Neue Sicht angelegt\nvariantdeleted=Sicht wurde gelöscht\nvariantnotdeleted=Standardsicht kann nicht gelöscht werden\ncomment=Kommentar\nmaintaindemand=Bedarfe pflegen\nstmaintaindemand=Bedarfe\nttmaintaindemand=Bedarfe pflegen\nmonday=Montag\ntuesday=Dienstag\nwednesday=Mittwoch\nthursday=Donnerstag\nfriday=Freitag\nsaturday=Samstag\nsunday=Sonntag\nholiday=Feiertag\nttmonday=Montag\ntttuesday=Dienstag\nttwednesday=Mittwoch\nttthursday=Donnerstag\nttfriday=Freitag\nttsaturday=Samstag\nttsunday=Sonntag\nttholiday=Feiertag\ntblmonday=Mo\ntbltuesday=Di\ntblwednesday=Mi\ntblthursday=Do\ntblfriday=Fr\ntblsaturday=Sa\ntblsunday=So\ntblholiday=Fe\nempsperday=Benötigte Anzahl pro Tag\noverload=Überschreiben\ntbloverload=Ü\ntttbloverload=Überschrieben\nbtnchange=Ändern\nbtncopy=Kopieren\ntblworkplace=AP\ntttblworkplace=Arbeitsplatz\ndelete=Löschen\ntblshift=S\ntttblshift=Schicht\nbooltrue=Ja\nboolfalse= \nallowanceamount=Betrag\nnewchangeshift=Im Bereich "Bearbeitung von Schichten" liegen ungespeicherte Änderungen vor\nnewchangesallowance= Im Bereich "Zulagenpflege" liegen ungespeicherte Änderungen vor\nnewchangescico= Im Bereich "Bearbeitung von Kommen/Gehen Zeiten" liegen ungespeicherte Änderungen vor\nnewchangesleave= Im Bereich "Bearbeitung von An-/ Abwesenheiten" liegen ungespeicherte Änderungen vor\nnewchangesovertime= Im Bereich "Bearbeitung von Mehrarbeiten" liegen ungespeicherte Änderungen vo\ndemanddeleted=Bedarf für {0} - {1} - {2} wurde gelöscht\ndemandcreated=Bedarf für {0} - {1} - {2} wurde angelegt\ndemandchanged=Bedarf für {0} - {1} - {2} wurde geändert\nupdateallowance=Ändern\ncancelallowance=Abbrechen\nallowancecreated=Zulage wurde angelegt\nallowancemodified=Zulage wurde angepasst\nallowancedeleted=Zulage wurde gelöscht\nsubtyotimetransfer=Umbuchungsart\ntimetransferPanelHeader=Zeitumbuchungen (2012)\ndaily=Täglich\nweekly=Wöchentlich\nmonthly=Monatlich\nsaved=Erfolgreich gespeichert\nselectall=Alle markieren/ demarkieren\nnamenewvariant=Name der neuen Sicht\nrptime=Zeitauswertung starten\nstrptime=Zeitauswert.\nshiftsubtitutionheader=Schichtvertretung anlegen\nnonameforvariant=Bitte geben Sie einen Namen für die Sicht ein!\nindividuell=Individuell\ncyclicleavecreate=Wiederkehrende Ereignisse anlegen\ncyclicleave=Zyklische Ereignisse\nstcyclicleave=Zykl. Erg.\nevery=Jeden\neveryweekday=Jeden Arbeitstag\ndays=Tag(e)\nday=Tag\nall=Alle\nweeksat=Woche(n), am:\nthe=Der\nofevery=von jedem\nmonth=Monat\nendafter=Beenden nach\nendby=Beenden am\noccurences=Vorkommen\ncyclicleavetype=Art\ncyclicleavedelete=Erfolreich gelöscht\nover28=Einige Monate haben weniger Tage. In diesem Monaten fällt das Serienelement auf den letzten Tag des Monats!\nemployeesortheader=Mitarbeiter sortieren\nsubstshiftfrom=Schicht von:\nsubstshiftto=Vertreten durch:\nsubstshifts=Übernahme aller Schichten\nempsort=Mitarbeiterreihenfolge bearbeiten\nstempsort=MA Sort.\ndefqual=Stammarbeitsplätze\nstdefqual=Stamm-AP\nchangequalification=Stammarbeitsplatz bearbeiten\ndefaultqualification=Stammarbeitsplatz\ncommentfor=Kommentare für {0}\nshiftsubstitution=Schichtvertretung anlegen\nstshiftsubstitution=Schichtvertret.\nsubstunit=Arbeitsplatz übernehmen\nvoluntaryshiftchange=Freiwilliger Schichttausch\nnumber=Nummer\nempsort=Mitarbeiter sortieren\nshiftsubsuccess=Vertretung wurde angelegt\nsortsaved=Sortierung wurde gespeichert\nsortnumber=Sortiernummer\nnewsletter=Newsletter\nstnewsletter=Newsletter\nrptimestarted=Die Zeitauswertung für die ausgewählten Mitarbeiter wurde gestartet. Es kann einige Minuten dauern, bis die Änderungen sichtbar werden.\ncommentfordate=Kommentare für \ncommentsaved=Kommentar wurde gespeichert\ncommentdeleted=Kommentar wurde gelöscht\nsend=Versenden\nplansent=Schichtplan wurde versendet\nuseforexcel=Diese Sicht für den Excelexport nutzen\nspshare=An Sharepoint senden\nstspshare=Sharepoint\nttspshare=Excel-Schichtplanung an Sharepoint senden\nmailwait=Die Übermittlung an den Sharepoint kann einige Sekunden in Anspruch nehmen.\nsharepointsuccess=Planung wurde erfolgreich an den Sharepoint übermittelt.\nnewrecipient=Empfänger hinzufügen:\nchangequal=Qualifikationen pflegen\nstchangequal=Qualifikation\nrating=Ausprägung\nqualsaved=Qualifikation wurde gespeichert\nqualdeleted=Qualifikation wurde gelöscht\nttfunctionbutton=Funktionen einblenden\nttplanbutton=Planung einblenden\nttsumbutton=Summen einblenden\nselectall=Alle auswählen\nauftrag=Auftrag\nmaterial=Material\ndeletecomment=Kommentar löschen\nletter=✉\nchooseweeks=Zeitraum\ntthideemp=Mitarbeiter einblenden/ausblenden\nisshown=Eingeblendet\nplsrefresh=Zum Anzeigen bitte Planungseinheit aktualisieren\nduration=Dauer in Stunden\nselectdropdown=Dropdown-Werte wählen\nstselectdropdown=Dropdown Werte\nxlsdownbutton=Excel exportieren\nstxlsdownbutton=Excel\nttxlsdownbutton=Jahresplanung als Exceldokument herunterladen\n\nempexcelbutton=Mitarbeiter-Excel exportieren\nstempexcelbutton=MA-Excel \nttempexcelbutton=Mitarbeiter als Exceldokument herunterladen\nttdate=Geben Sie das Datum ein\ndate=Datum\ndatepicker=Datumsauswahl\n\nrosterbutton=Dienstplan als PDF exportieren\nstrosterbutton=Dienstplan-PDF\nttrosterbutton=Dienstplan-Formulare als PDF exportieren\n\ntthideall=Alle ein/ausblenden\nlblhideall=Alle ein/ausblenden:\nddtype=Kürzelart\nddselection=Auswahl\nfavfeattitle=Favoriten\nfavsaved=Favoriten gespeichert. Änderungen werden nach Neuladen der Anwendung wirksam.\nttselectshiftsubtype=Vertretungsart wählen\nfavorites=Favoriten\nallPlansVisible=Alle Planungen einblenden\nallSumsVisible=Alle Summen einblenden\nadditionalcomment=Zusatztext\npreviousday=Vortag\nassignsaved=Mitarbeiterzuweisungen in allen Planungseinheiten erfolgreich aktualisiert\ndropdownsaved=Dropdowns erfolgreich gespeichert\nttselectshifttprogclass=Tagesarbeitszeitplanklasse wählen\nvalidation=Prüfung durchführen\n17weeks=17-Wochen-Prüfung\nst17weeks=17W-Prüfung\ntt17weeks=17-Wochen-Prüfung durchführen\nstvalidation=Prüfung\nttvalidation=Weitere Prüfungen durchführen\nmonthly=Ganzer Monat\ndaily=Einzeltage\ntimeframe1year=Zeitraumauswahl (Es wird maximal ein Jahr ausgegeben)\nunsavedchanges=Ungespeicherte Änderungen\ndiscard=Verwerfen\ndiscardchanges=Möchten Sie die Änderungen in der Planungseinheit verwerfen?\ndiscardchangestitle=Ungespeicherte Änderungen verwerfen\nnooflines=Anzahl Zeilen:\nnooflinestt=Anzahl der Zeilen sichtbaren Zeilen in der Mitarbeitertabelle\nsendtosharepointbtn=Absenden\ndiscardunsavedchanges=Verwerfen\ncancelunsavedchanges=Abbrechen\nrptimegood=Zeitauswertung erfolgreich durchlaufen\nrptimeerror=Fehler bei der Zeitauswertung\nrptimelasttry=Letzter Durchlauf am {0}\nrptimemsg=Zeitmeldungen\nbtndeleteleave=Löschen\nbtndeletecommenttxt=Löschen\nrptimesuccess=Zeitauswertung beendet\n1shift=1-Schicht\n2shift=2-Schicht\n3shift=3-Schicht\n4shift=4-Schicht\n5shift=5-Schicht\n6shift=6-Schicht\nadddata=Neuen Datensatz hinzufügen\ndeletedata=Datensatz löschen\nshift1= Schicht 1\nshift2= Schicht 2\nshift3= Schicht 3\nshift4= Schicht 4\nshift5= Schicht 5\nshift6= Schicht 6\ndemand1=Bedarf Schicht 1\ndemand2=Bedarf Schicht 2\ndemand3=Bedarf Schicht 3\ndemand4=Bedarf Schicht 4\ndemand5=Bedarf Schicht 5\ndemand6=Bedarf Schicht 6\naddday=Neuen Tag hinzufügen\nadddayfromold=Neuen Tag aus letztem Tag kopieren\nttdemandfor=Nächster Datensatz\nttdemandback=Vorheriger Datensatz\ndemanddeleted=Datensatz erfolgreich gelöscht\nopenmsg=Achtung, es gibt offene Meldungen!\ncontinue=Fortfahren\nwarningdel=Die Daten werden unwiderruflich gelöscht.\nwide=hoch\nnormal=normal\nnarrow=tief\nttwide=Zeilenhöhe hoch\nttnormal=Zeilenhöhe normal\nttnarrow=Zeilenhöhe tief\naddEmp=Mitarbeiter hinzufügen\naddActivity=Tätigkeit hinzufügen\nsearchEmployee=Mitarbeitersuche\ndialogtitle_search_employee=Mitarbeitersuche\nemployee_search=Mitarbeiter suchen\nlastname=Nachname\nfirstname=Vorname\npernr=Personalnr.\nsearchEmp=zu Ma. springen\ncancel=Schließen\nlblrowheight=Zeilenhöhe\nlblrowheighttt=Zeilenhöhe verändern\nstylechangesuccess=Änderung der Zeilenhöhe erfolgreich gespeichert. Um die Änderungen wirksam zu machen, bitte die Seite neu laden.\nwarning=Warnung\nok=Ok\nadditionalInformation=Zusatzinformationen\nMetadataLoadFailed=Verbindung zum System konnte nicht hergestellt werden. Bitte wenden Sie sich an den Systemadministrator.\nintegratedOvertime=Enthaltene Überstunden\nopenanyway=Trotzdem anzeigen\nnoDisposition=Prüfung ohne explizite Einteilung\nnoDispositionShort=o. ex. Ein.\njumpToCo=Zeitbearbeitung\ntimetransfercreated=Zeitumbuchung angelegt\ntimetransfermodified=Zeitumbuchung bearbeitet\ntimetransferdeleted=Zeitumbuchung gelöscht\ncomdat=Kommunikationsdatum\ncomuzeit=Kommunikationszeit\nbegdaenddamissing=Bitte Beginn- und Enddatum auswählen\nblankforwholeday=Beginn- und Endeuhrzeit leer lassen für ganztägige Verbuchung.\nselectcolumns=Spalten auswählen\nselectemployees=Mitarbeiter auswählen\nttSelectEmployees=Mitarbeiter (de-)selektieren\n#PDFDialog\nselect-doc=Dokumentenauswahl\nfrom=von\nto=bis\nemployee= Mitarbeiter:in\nfill-fields-warning=Bitte alle Felder auswählen\nuser-undefined=Mitarbeiter:in wurde nicht gefunden.\nsearch=Suchen\nerror_no_pdf=Es wurde keine PDF gefunden.\nclose=Schließen\nfreeDays=wöchentlich feststehende freie Tage wegen Teilzeit\nrolling-plan-save-success=Rollierende Planung erfolgreich angelegt.\ncreate-rolling-plan=Neue Planvariante anlegen\ndate-range=Zeitraum\n \n#XTXT: \ntime-unit=Time Unit\n \n#XTXT: \npay-group=Pay Group\n \n#XTXT: \nrolling-plan-dateto-less-than-today=Endedatum darf nicht in Vergangenheit liegen\nincorrect-date-rollingplan=Datum ist nicht korrekt\nno-changes-allowed=Keine Änderungen bei aktueller/abgelaufener Planungsvariante erlaubt\nno-deletion-ongoing=Aktuelle Planungsvariante kann nicht gelöscht werden\nno-deletion-past=Abgelaufene Planungsvarianten können nicht gelöscht werden\n\n#XTXT:\nno-cyclictypes=Es sind keine zyklischen Ereignistypen verfügbar.\n\n#XTXT:\nweeks=Wochen\notherweeks=Andere\nttotherweeks=Anderen Zeitraum auswählen\ndeletemail=Löschen\nttdeletemail=Email Adresse löschen\n\n#XTXT:\ncomments=Kommentare\n',
	"MIND2PEP_PLANNER/i18n/i18n_en.properties": 'itle=Title\nappTitle=Workforce Planning\nappDescription=Workforce Planning\ndatePanelHeader=Planning Period\npepPlanner=Workforce Planning\nplanningPanelHeader=Planner\nplanning=Unit\nttaddNewTime= Add end Time\ntxtsave=Save\nttName=Name\nttDate=Date\nttBox=New Time for All Employee\nttSurname=Surname\nttTime=End Time\ntxtcancel=Cancel\nttVerleihung01=Status\nttVerleihung02=Meine Rolle\nttVerleihung03=Ma-Name\nttVerleihung04=Stammkostenstelle\nttVerleihung05=Zielkostenstelle\nttVerleihung06=Von-Datum\nttVerleihung07=Bis-Datum\nttVerleihung08=Stunden Erster Tag\nttVerleihung09=Stunden Letzter Tag\nttVerleihung10=Edit\nttVerlehungnew=Werkerverleihungen - Mein Arbeitsvorrat\nttVerlehungnew2=Neue Verleihung anlegen\nttDateBisFrom=Datum Von-Bis \nadduser=Add Employee\nclose=Close\nemployeekey=Personnel Number\nemployeetext=Employee\nemployeequal=Qualification\nemployeeshiftgroup=Shift Group\nlegend=Legend\nlog=Log\ndisplaylegend=Show Legend\naddEndTime=Add End Time\ndisplaylog=Show Log\nunsaved=Unsaved data will be lost\nareyousure=Are you sure?\nno=No\nyes=Yes\nchoosequal=Choose Qualification\nemployeeavailability=Availability\nunitsave=Unit {0} saved successfully\nqualification=Activity\nerrormsg=Error while adding\nwarningmsg=Adding caused warnings\nrefresh=Refresh\nautoplan=Automatic Planning\nsearch=Search\ndummyemp=Add Pool Employee\naddpool=Create Pool Employee\nenterpoolname=Please enter a name\nunitchangesuccess=Successfully changed planning unit\nemployeetimeframe=Period\nprint=PDF-Download\nbegda=Begin date\n1week=1 Week\n2week=2 Weeks\n4week=4 Weeks\ntimeframe=Period\ndownload=Download\nhide=Hide/Display Columns\nsave=Save\nnewsletter=Newsletter\nleavecreate=Create Absence/Presence\nnewleave=Create new Absence/Presence\nfrom=From\nchooseabsence=Choose Absence/Presence \nto=Until\nsaveleave=Save\ncancelleave=Delete\neditleaveoverview=Modify\ntteditleaveoverview=Modify Absence/Presence \ncancelleaveoverview=Cancel\nttcancelleaveoverview=Cancel Editing\nleaveoverview=Absence/Presence Overview\nsubtyleave=Absence/Presence\neventtype=Event Type\nendda=End Date\ndeleteleavesure=Absence/Presence will be deleted\nareyousure=Are you sure?\nleavecreated=Absence/Presence successfully created\nleaveupdated=Absence/Presence successfully modified\nleavedeleted=Absence/Presence successfully deleted\nmaintevents=Maintain Events\nnewevent=New Event\nsaveevent=Save Event\ndeleteevent=Delete Event\neventoverview=Event Overview\neventtitle=Event Title\neventcreated=Event successfully created\ndeleteeventsure=Event will be deleted\nlogid=Log ID\nchange=Change\nchangedate=Date of Change\nchangetime=Time of Change\nchangeuser=User\nemployeedata=Employee Data\novertimecreate=Create Overtime\nsaveovertime=Save\ncancelovertime=Delete\neditovertimeoverview=Modify\ntteditovertimeoverview=Modify Overtime\ncancelovertimeoverview=Cancel\nttcancelovertimeoverview=Cancel Editing\novertimeoverview=Overtime Overview\nnewovertime=Create new Overtime\ndeleteovertimesure=Overtime will be deleted\nsubtyovertime=Overtime Type\nverslovertime=Cost Allocation Type\nplaceholderamount=Number of hours\ntime=Time\nstarttime=Start time\nendtime=End Time\namount=No. of hours\ntimefrom=Time from\ntimeto=Time to\nok=Okay\nnoselectedEntry=No selected Entry\nselectEntry=Please choose an entry\nttclose=Close\nttcancelovertime=Delete Overtime\nttbegda=Please enter a start date \nttendda=Please enter an end date\ntttimefrom=Please enter a start time\ntttimeto=Please enter an end time\nttsaveovertime=Save Overtime\nttversl=Please choose a cost allocation type\nttselectsubtyovertime=Please choose an overtime type\nttamount=Please enter the amount of hours\nttselectemp=Please choose an employee\nttselectshift=Please choose a shift\novertimecreated=Overtime successfully created\novertimeupdated=Overtime successfully modified\novertimedeleted=Overtime successfully deleted\nttsubtyovertimetable=Overtime type\nttverslovertimetable=Cost allocation type\nttbegdatable=Start Date\nttenddatable=End Date\ntttimefromtable=Start Time\ntttimetotable=End Time\nttamounttable=Amount\nttadduser=Add Employee\nttaddEndTime=Add End Time\nttovertimecreate=Create Overtime\nttleavecreate=Create Absence/Presence\nttdisplaylegend=Show Legend\nttdisplaylog=Show Log\nttautoplan=Automatic Planning\nttaddpool=Create Pool Employee\nttrefresh=Refresh\ntthide=Show/Hide Columns\nttprint=Print\ntt1week=1 Week\ntt2week=2 Week\ntt4week=4 Week\nttdownload=Download\nttsave=Save\nttselectsubtyleave=Please choose an absence/presence type\nttsaveleave=Save Absence/Presence\nttcancelleave=Delete Absence/Presence \nttsubtyleavetable=Absence/Presence Type\nttmessages=Messages\nttcancel=Cancel\nttlogid=Log ID\nttchange=Modification\nttchangedate=Modification Date\nttchangetime=Modification Time\nttchangeuser=User\nttenterpoolname=Please enter a name\nttselectpoolquals=Please choose a qualification\nttpooldelete=Delete Name\nttselectaddquals=Please choose a qualification\nttsearch=Search\nttemployeekeytable=Personnel Number\nttemployeetexttable=Employee\nttemployeequaltable=Qualification\nttemployeeshiftgrouptable=Shift Group\nattentionPopoverTitle=Confirm Message\ntakeAttention=Confirm Message\nchangeAttention=Change\ntookAttention=Message already confirmed\nattentionNoteCreated=Confirmation saved successfully\nnoAttentionPossible=Message can not be confirmed\ncicocreate=Create Check In/Check Out\nttcicocreate=Create Check In/Check Out\nnewcico=Create new Check In/Check Out\ndate=Date\nttdate=Please enter a date\nttselecttimeeventty=Please choose Check In/Check Out type\ntime=Time\ntttime=Please enter a time\nsavecico=Save\nttsavecico=Save Check In/Check Out\ncicooverview=Check In/Check Out Overview\neditcicooverview=Modify\ntteditcicooverview=Modify Check In/Check Out\ncancelcicooverview=Cancel\nttcancelcicooverview=Cancel\ncicooverviewoverview=Employee Check Ins/Check Outs\nsubtytimeevent=Check In/Check Out Type\nttsubtytimeeventtable=Check In/Check Out Type\ntttimetable=Time\ndeletecico=Delete \nttdeletecico=Delete Check In/Check Out \ndescription=Description\nttdescription=Check In/Check Out Description\ncicocreated=Check In/Check Out successfully created\ncicoupdated=Check In/Check Out successfully modified\ndeletecicosure=Check In/Check Out will be deleted\ncicodeleted=Check In/Check Out successfully deleted\nlogtype=Log Type\nttlogtype=Log Type\ntimestatecreate=Create Timeslip\ntttimestatecreate=Creates a Timeslip\nerrormsgdates=Start date is higher than end date\nchangeplantime=Change Planned Working Time\nnewplantime=New Planned Working Time\ncurrentplantime=Current Planned Working Time\ncancelassignment=Employee loan will be discarded\nsaveplantime=Overwrite Planned Working Time\nttsaveplantime=Overwrite Planned Working Time\ntimeManager=Maintain Employee Times\nshiftPanelHeader=Shifts\ncicoPanelHeader=Check In/Check Out Times\nabsencePanelHeader=Absences/Presences \novertimePanelHeader=Overtimes\nshiftPlan=Shift\nshiftPlanFrom=Planned Begin Time\nshiftPlanTo=Planned End Time\nshiftFrom=From\nshiftTo=Until\nshiftPlanTo=Planned End Time\nshiftbreak1=1 Break\nshiftbreak2=2 Break\nshiftchange_voluntary=Voluntary Shift Substitution\nsaveownshiftoverview=Save\ncancelownshiftoverview=Delete\nsaveshiftchangeoverview=Save\ncancelshiftchangeoverview=Delete\nchangeplantime=Change Planned Working Time\ncurrentShiftHeader=Current Shift\nchangeShiftHeader=Substitute Shift\nabsencePanelHeader=Absence/Presence\novertimePanelHeader=Overtime\nownShiftTimes=Own Shift Times\naction=Action\nplaceholderaufnr=Job No.\nplaceholdermatnr=Material No.\nplaceholderzulage=Allowance\naufnr=Job No.\nmatnr=Material No.\nzulage=Allowance\nttaufnr=Job No.\nttmatnr=Material No.\nttzulage=Allowance\nshiftchangecreated=Shift substitution successfully created\nshiftchangedeleted=Shift substitution successfully deleted\nsprps=Lock Indicator\nttsprps=Lock Indicator\nleavelocked=Absence/Presence Locked\nleavelockedlong=Absence/Presence is locked and can not be deleted\nnewplantimecreated=New Planned Working Time successfully created\ndeleteplantime=Restore Standard Planned Working Time\nttdeleteplantime=Restore Standard Planned Working Time\nplantimedeleted=Standard Planned Working Time successfully restored\nempname=Employee Name\nsearchempname=Seach for Employee Name\nttsearchempname=Seach for Employee Name\nplanunit=Planning Unit\nttplanunittable=Planning Unit\nhideButton=Hide Details\nplaceholderkostenst=Cost Allocation Center\nkostenst=Cost Allocation Center\nttkostenst=Cost Allocation Center\nchangeunit=Change Planning Unit\nvalidfrom=Valid from\nttvalidfrom=Valid until\nvalidto=Valid from\nttvalidto=Valid until\nmainworkplace=Main Workplace\nttmainworkplace=Main Workplace\nchangeworkplace=Change Main Workplace\nsavekapa=Book Capacities \nttsavekapa=Book Capacities \nnochangesinpast=Changes in past are not valid\nkapasuccess=Capacaties booked successfully\nnewvariant=Create View\nchangevariant=Modify View\ndeletevariant=Delete View\naddvariant=Create View\nttselectallowance=Choose Allowance\nmaintallowance=Allowances\naddallowance=Add Allowance\ndeleteallowance=Delete Allowance\nvariantcreated=View successfully created\nvariantdeleted=View successfully deleted\nvariantnotdeleted=Standard view can not be deleted\ncomment=Comment\nmaintaindemand=Maintain Demand\nttmaintaindemand=Maintain Demand\nmonday=Monday\ntuesday=Tuesday\nwednesday=Wednesday\nthursday=Thursday\nfriday=Friday\nsaturday=Saturday\nsunday=Sunday\nholiday=Holiday\nttmonday=Monday\ntttuesday=Tuesday\nttwednesday=Wednesday\nttthursday=Thursday\nttfriday=Friday\nttsaturday=Saturday\nttsunday=Sunday\nttholiday=Holiday\ntblmonday=Mo\ntbltuesday=Tu\ntblwednesday=We\ntblthursday=Th\ntblfriday=Fr\ntblsaturday=Sa\ntblsunday=Su\ntblholiday=Ho\nempsperday=Required No. of Employees\noverload=Overload\ntbloverload=OL\ntttbloverload=Overload\nbtnchange=Modify\nbtncopy=Copy\ntblworkplace=WP\ntttblworkplace=Workplace\ndelete=Delete\ntblshift=S\ntttblshift=Shift\nbooltrue=Yes\nboolfalse= \nallowanceamount=Amount\nnewchangeshift=Unsaved changes in "Shifts"\nnewchangesallowance=Unsaved changes in "Allowances"\nnewchangescico=Unsaved changes in "Check In/Check Out"\nnewchangesleave=Unsaved changes in "Absences/Presences"\nnewchangesovertime=Unsaved changes in "Overtimes"\ndemanddeleted=Demand for {0} - {1} successfully deleted\ndemandcreated=Demand for {0} - {1} successfully created\ndemandchanged=Demand for {0} - {1} successfully modified\nupdateallowance=Change\ncancelallowance=Cancel\nallowancecreated=Allowance successfully created\nallowancemodified=Allowance successfully modified\nallowancedeleted=Allowance successfully deleted\nsubtyotimetransfer=Time Transfer Type\ntimetransferPanelHeader=Time Transfer\ndaily=daily\nweekly=weekly\nmonthly=monthly\nsaved=Successfully saved\nselectall=Select all\nnamenewvariant=View Name\nrptime=Start Time Evaluation\nshiftsubtitutionheader=Create Shift Substitution\nnonameforvariant=Please enter a name for the view\nindividuell=Individual\ncyclicleavecreate=Create cyclic events\ncyclicleave=Cyclic Events\nevery=Every\neveryweekday=Every Workday\ndays=Days\nday=Day\nall=All\nweeks=Week(s), on:\nthe=The\nofevery=of every\nmonth=Month\nendafter=End after\nendby=End by\noccurences=Occurences\ncyclicleavetype=Type\ncyclicleavedelete=Successfully deleted\nover28=Some months have less day. In this case the element will be places on the last day of the month\nemployeesortheader=Sort Employees\nsubstshiftfrom=Shift of:\nsubstshiftto=Substituted by:\nsubstshifts=Substitue all shifts\nempsort=Modify Employee Order\ndefqual=Default Workplace\nchangequalification=Modify default Workplace\ndefaultqualification=Default Workplace\ncommentfor=Comments for {0}\nshiftsubstitution=Create Shift Substitution\nsubstunit=Substitute Workplace\nvoluntaryshiftchange=Voluntary Shift Substitution\nnumber=Number\nempsort=Sort Employees\nshiftsubsuccess=Substitution successfully created\nrptimestarted=Time evaluation for employees has been started in background. This may take a few minutes.\ncommentfordate=Comment for\ncommentsaved=Comment successfully created\ncommentdeleted=Comment successfully deleted\nsend=Send\nplansent=Shift Schedule successfully sent\nuseforexcel=Choose this view for Excel Export\nspshare=Send to Sharepoint\nttspshare=Send Excel Shift Schedule to Sharepoint\nmailwait=Sending shift schedule to Sharepoint my take a few minutes.\nsharepointsuccess=Shift schedule successfully send to sharepoint\nnewrecipient=Add Recipient\nchangequal=Maintain Qualifications\nrating=Rating\nqualsaved=Qualification saved\nqualdeleted=Qualification deleted\nttfunctionbutton=Show Functions\nttplanbutton=Show Plan\nttsumbutton=Show Sums\nselectall=Select all\nauftrag=Job\nmaterial=Material\ndeletecomment=Delete Comment\nletter=✉\nchooseweeks=Period\nxlsdownbutton=Download Excel\nttxlsdownbutton=Download Shift Plan as Excel\n\nempexcelbutton=Download Employee Excel\nstempexcelbutton=Excel\nttempexcelbutton=Download Employee Plan as Excel\nttdate=Enter the date\ndate=date\ndatepicker=Date picker\n\ntthideall=Show/Hide all\nlblhideall=Show/Hide:\nddtype=Abbr. type\nddselection=Selection\nfavfeattitle=Favorites\nfavsaved=Favorites saved. Changes will be visible after reloading the page.\nttselectshiftsubtype=Choose Subst.type\nfavorites=Favorites\nallPlansVisible=Show all plantables\nallSumsVisible=Show all sumtables\nadditionalcomment=Additional Text\npreviousday=Previous Day\nassignsaved=Employee assignment updated successfully\ndropdownsaved=Dropdowns saved successfully\nttselectshifttprogclass=choose daily work schedule class \nvalidation=Start Validation\nstvalidation=Validation\nttvalidation=Run further validations\nmonthly=Whole Month\ndaily=Single Days\ntimeframe1year=Choose period (maximum of one year will be shown)\nunsavedchanges=Unsaved Changes\ndiscard=Discard\ndiscardchanges=Changes in this planning unit will be discarded. Are you sure?\ndiscardchangestitle=Discard Unsaved Changes\nnooflines=No. of Lines:\nnooflinestt=Number of shown lines in planning table\nsendtosharepointbtn=Absenden\nselectdropdown=Select Dropdown Values\ndiscardunsavedchanges=Discard\ncancelunsavedchanges=Cancel\nwide=Wide\nnormal=Normal\nnarrow=Narrow\nttwide=row height wide\nttWerkerverleihungTitle= Werkerverleihung anlegen\nttMitArbeiter=Zu verleihender Mitarbeiter\nttoWerkerverleihung=Werkerverleihung\nttnormal=row height normal\nttnarrow=row height narrow\naddEmp=Add Employee\nttMitArbeiterkreis=Mitarbeiterkreis\nttabteilung=Abteilung (Kurzbezeichnung)\nttStamm=Stammkostenstelle\nttSZielkosten=Zielkostenstelle\nttSKostenStelle=Kostenstelleverandwortlich(r)\nttVerleihungzeitraum=Verleihungzeitraum\nttStartC=Start\nttStundC=Stunden Tag 1\nttEndeC=Ende\nttverleiC=Verleihgrund\nttbemerC=Bemerkung\nttkantierC=Kontierkung/Projektnummer\nsaveWerker=Anlegen\ncloseWerker=Abbrechen\naddActivity=Add Activity\nMetadataLoadFailed=Connection to System is not reached! Please, contact system administrator.\nmodifyshiftchangeoverview=Change\ntthideemp=Hide/Show Employees\nintegratedOvertime=Integrated Overtime\ncomdat=Communication Date\ncomuzeit=Communication Time\nbegdaenddamissing=Begin date and end date must be selected\nblankforwholeday=Leave begin time and end time blank for whole day\ntterror=Error on saving data\n#PDFDialog\nselect-doc=Select Document\nfrom=from\nto=to\nemployee= Employee\nfill-fields-warning=Please fill all fields!\nuser-undefined=User is not defined!\nsearch=Search\nerror_no_pdf=No PDF found!\nerror_exception=Exception was raised!\nclose=Close\nfreeDays=weekly fixed days off due to part-time\nNonDeletableNewsletterAlert=There are some mails, which can\'t be deleted.\n \n#XTXT: \next-reg-number=Ext Reg Number\n \n#XTXT: \nrolling-plan-dateto-less-than-today=End date can\'t be less than today\nincorrect-date-rollingplan=Date for rolling plan is incorrect\nno-changes-allowed=No changes allowed for ongoing/expired variants\nno-deletion-ongoing=Current plan version cannot be deleted\nno-deletion-past=Expired plan versions cannot be deleted\n \n#XTXT: \nother=Other\n\nno-cyclictypes=No cyclic event types are available.',
	"MIND2PEP_PLANNER/manifest.json": '{"_version":"1.5.0","sap.app":{"id":"MIND2PEP_PLANNER","type":"application","i18n":"i18n/i18n.properties","applicationVersion":{"version":"1.0.0"},"title":"{{appTitle}}","description":"{{appDescription}}","sourceTemplate":{"id":"servicecatalog.connectivityComponentForManifest","version":"0.0.0"},"dataSources":{"PEP_PLANNER_SRV":{"uri":"/sap/opu/odata/mind2/PEP_PLANNER_SRV/","type":"OData","settings":{"localUri":"localService/metadata.xml"}},"PEP_ROSTER_SRV":{"uri":"/sap/opu/odata/mind2/PEP_ROSTER_SRV/","type":"OData","settings":{"localUri":"localService/PEP_ROSTER_SRV/metadata.xml"}},"PEP_YEAR_SRV":{"uri":"/sap/opu/odata/mind2/PEP_YEAR_SRV/","type":"OData","settings":{"localUri":"localService/PEP_YEAR_SRV/metadata.xml"}}}},"sap.ui":{"technology":"UI5","icons":{"icon":"","favIcon":"","phone":"","phone@2":"","tablet":"","tablet@2":""},"deviceTypes":{"desktop":true,"tablet":true,"phone":true},"supportedThemes":["sap_hcb","sap_belize"]},"sap.ui5":{"rootView":{"viewName":"MIND2PEP_PLANNER.view.Main","type":"XML","async":true},"dependencies":{"minUI5Version":"1.30.0","libs":{"sap.collaboration":{},"sap.m":{},"sap.ui.comp":{},"sap.ui.core":{},"sap.ui.layout":{},"sap.ui.table":{},"sap.ushell":{},"sap.uxap":{}}},"contentDensities":{"compact":true,"cozy":true},"models":{"i18n":{"type":"sap.ui.model.resource.ResourceModel","settings":{"bundleName":"MIND2PEP_PLANNER.i18n.i18n","supportedLocales":["en","de"],"fallbackLocale":"de"}},"":{"type":"sap.ui.model.odata.v2.ODataModel","settings":{"defaultOperationMode":"Server","defaultBindingMode":"TwoWay","defaultCountMode":"None","useBatch":true},"dataSource":"PEP_PLANNER_SRV","preload":true},"searchedEmployee":{"type":"sap.ui.model.json.JSONModel","settings":{},"uri":"model/searchedEmployee.json","preload":true},"UserData":{"type":"sap.ui.model.json.JSONModel","settings":{},"preload":false},"Customizing":{"type":"sap.ui.model.json.JSONModel","settings":{},"preload":false},"roster":{"type":"sap.ui.model.odata.v2.ODataModel","settings":{"defaultOperationMode":"Server","defaultBindingMode":"OneWay","defaultCountMode":"Request"},"dataSource":"PEP_ROSTER_SRV","preload":true},"Selected":{"type":"sap.ui.model.json.JSONModel","settings":{},"preload":false},"TO":{"type":"sap.ui.model.json.JSONModel","settings":{},"preload":false},"pepyear":{"type":"sap.ui.model.odata.v2.ODataModel","settings":{"defaultOperationMode":"Server","defaultBindingMode":"OneWay","defaultCountMode":"Request"},"dataSource":"PEP_YEAR_SRV","preload":true}},"resources":{"css":[{"uri":"css/style.css"}]},"routing":{"targets":{},"routes":[],"config":{"controlAggregation":"","controlId":"","viewPath":"MIND2PEP_PLANNER.view","bypassed":{"target":[]}}}},"sap.platform.abap":{"uri":"/sap/bc/ui5_ui5/mind2/pep_plan/","_version":"1.1.0"},"sap.platform.hcp":{"uri":"","_version":"1.1.0"}}'
}, "MIND2PEP_PLANNER/Component-preload");